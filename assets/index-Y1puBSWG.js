var Bje=Object.defineProperty;var Uje=(e,t,n)=>t in e?Bje(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zje=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var mu=(e,t,n)=>Uje(e,typeof t!="symbol"?t+"":t,n);var xan=zje((Dun,iie)=>{function Vje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Hje(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var nye={exports:{}},XM={},rye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GI=Symbol.for("react.element"),qje=Symbol.for("react.portal"),Wje=Symbol.for("react.fragment"),Gje=Symbol.for("react.strict_mode"),Yje=Symbol.for("react.profiler"),Kje=Symbol.for("react.provider"),Xje=Symbol.for("react.context"),Qje=Symbol.for("react.forward_ref"),Jje=Symbol.for("react.suspense"),Zje=Symbol.for("react.memo"),e8e=Symbol.for("react.lazy"),Iie=Symbol.iterator;function t8e(e){return e===null||typeof e!="object"?null:(e=Iie&&e[Iie]||e["@@iterator"],typeof e=="function"?e:null)}var iye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sye=Object.assign,oye={};function Ux(e,t,n){this.props=e,this.context=t,this.refs=oye,this.updater=n||iye}Ux.prototype.isReactComponent={};Ux.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ux.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aye(){}aye.prototype=Ux.prototype;function Cq(e,t,n){this.props=e,this.context=t,this.refs=oye,this.updater=n||iye}var Aq=Cq.prototype=new aye;Aq.constructor=Cq;sye(Aq,Ux.prototype);Aq.isPureReactComponent=!0;var kie=Array.isArray,uye=Object.prototype.hasOwnProperty,Iq={current:null},lye={key:!0,ref:!0,__self:!0,__source:!0};function cye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)uye.call(t,r)&&!lye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:GI,type:e,key:s,ref:o,props:i,_owner:Iq.current}}function n8e(e,t){return{$$typeof:GI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kq(e){return typeof e=="object"&&e!==null&&e.$$typeof===GI}function r8e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Rie=/\/+/g;function G5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?r8e(""+e.key):t.toString(36)}function qP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case GI:case qje:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+G5(o,0):r,kie(i)?(n="",e!=null&&(n=e.replace(Rie,"$&/")+"/"),qP(i,t,n,"",function(l){return l})):i!=null&&(kq(i)&&(i=n8e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",kie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+G5(s,a);o+=qP(s,t,n,u,i)}else if(u=t8e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+G5(s,a++),o+=qP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function tN(e,t,n){if(e==null)return e;var r=[],i=0;return qP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function i8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ou={current:null},WP={transition:null},s8e={ReactCurrentDispatcher:ou,ReactCurrentBatchConfig:WP,ReactCurrentOwner:Iq};function fye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:tN,forEach:function(e,t,n){tN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tN(e,function(){t++}),t},toArray:function(e){return tN(e,function(t){return t})||[]},only:function(e){if(!kq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Ux;Mn.Fragment=Wje;Mn.Profiler=Yje;Mn.PureComponent=Cq;Mn.StrictMode=Gje;Mn.Suspense=Jje;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s8e;Mn.act=fye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Iq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)uye.call(t,u)&&!lye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:GI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:Xje,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kje,_context:e},e.Consumer=e};Mn.createElement=cye;Mn.createFactory=function(e){var t=cye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:Qje,render:e}};Mn.isValidElement=kq;Mn.lazy=function(e){return{$$typeof:e8e,_payload:{_status:-1,_result:e},_init:i8e}};Mn.memo=function(e,t){return{$$typeof:Zje,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=WP.transition;WP.transition={};try{e()}finally{WP.transition=t}};Mn.unstable_act=fye;Mn.useCallback=function(e,t){return ou.current.useCallback(e,t)};Mn.useContext=function(e){return ou.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return ou.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return ou.current.useEffect(e,t)};Mn.useId=function(){return ou.current.useId()};Mn.useImperativeHandle=function(e,t,n){return ou.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return ou.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return ou.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return ou.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return ou.current.useReducer(e,t,n)};Mn.useRef=function(e){return ou.current.useRef(e)};Mn.useState=function(e){return ou.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return ou.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return ou.current.useTransition()};Mn.version="18.3.1";rye.exports=Mn;var k=rye.exports;const wr=Xl(k),cO=Vje({__proto__:null,default:wr},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o8e=k,a8e=Symbol.for("react.element"),u8e=Symbol.for("react.fragment"),l8e=Object.prototype.hasOwnProperty,c8e=o8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f8e={key:!0,ref:!0,__self:!0,__source:!0};function dye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)l8e.call(t,r)&&!f8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:a8e,type:e,key:s,ref:o,props:i,_owner:c8e.current}}XM.Fragment=u8e;XM.jsx=dye;XM.jsxs=dye;nye.exports=XM;var b=nye.exports,UB={},hye={exports:{}},Ql={},pye={exports:{}},mye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,H){var P=z.length;z.push(H);e:for(;0<P;){var U=P-1>>>1,W=z[U];if(0<i(W,H))z[U]=H,z[P]=W,P=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],P=z.pop();if(P!==H){z[0]=P;e:for(var U=0,W=z.length,j=W>>>1;U<j;){var q=2*(U+1)-1,G=z[q],ne=q+1,ce=z[ne];if(0>i(G,P))ne<W&&0>i(ce,G)?(z[U]=ce,z[ne]=P,U=ne):(z[U]=G,z[q]=P,U=q);else if(ne<W&&0>i(ce,P))z[U]=ce,z[ne]=P,U=ne;else break e}}return H}function i(z,H){var P=z.sortIndex-H.sortIndex;return P!==0?P:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=z)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function E(z){if(m=!1,_(z),!p)if(n(u)!==null)p=!0,M(w);else{var H=n(l);H!==null&&B(E,H.startTime-z)}}function w(z,H){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var P=d;try{for(_(H),f=n(u);f!==null&&(!(f.expirationTime>H)||z&&!R());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),_(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(E,q.startTime-H),j=!1}return j}finally{f=null,d=P,h=!1}}var S=!1,x=null,C=-1,A=5,I=-1;function R(){return!(e.unstable_now()-I<A)}function O(){if(x!==null){var z=e.unstable_now();I=z;var H=!0;try{H=x(!0,z)}finally{H?D():(S=!1,x=null)}}else S=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,D=function(){F.postMessage(null)}}else D=function(){g(O,0)};function M(z){x=z,S||(S=!0,D())}function B(z,H){C=g(function(){z(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(w))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var P=d;d=H;try{return z()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var P=d;d=z;try{return H()}finally{d=P}},e.unstable_scheduleCallback=function(z,H,P){var U=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?U+P:U):P=U,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,z={id:c++,callback:H,priorityLevel:z,startTime:P,expirationTime:W,sortIndex:-1},P>U?(z.sortIndex=P,t(l,z),n(u)===null&&z===n(l)&&(m?(y(C),C=-1):m=!0,B(E,P-U))):(z.sortIndex=W,t(u,z),p||h||(p=!0,M(w))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var H=d;return function(){var P=d;d=H;try{return z.apply(this,arguments)}finally{d=P}}}})(mye);pye.exports=mye;var d8e=pye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h8e=k,$l=d8e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gye=new Set,iA={};function Ab(e,t){_E(e,t),_E(e+"Capture",t)}function _E(e,t){for(iA[e]=t,e=0;e<t.length;e++)gye.add(t[e])}var mm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zB=Object.prototype.hasOwnProperty,p8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nie={},Pie={};function m8e(e){return zB.call(Pie,e)?!0:zB.call(Nie,e)?!1:p8e.test(e)?Pie[e]=!0:(Nie[e]=!0,!1)}function g8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function y8e(e,t,n,r){if(t===null||typeof t>"u"||g8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function au(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Fo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fo[e]=new au(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fo[t]=new au(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fo[e]=new au(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fo[e]=new au(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fo[e]=new au(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fo[e]=new au(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fo[e]=new au(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fo[e]=new au(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fo[e]=new au(e,5,!1,e.toLowerCase(),null,!1,!1)});var Rq=/[\-:]([a-z])/g;function Nq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Rq,Nq);Fo[t]=new au(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Rq,Nq);Fo[t]=new au(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Rq,Nq);Fo[t]=new au(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fo[e]=new au(e,1,!1,e.toLowerCase(),null,!1,!1)});Fo.xlinkHref=new au("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fo[e]=new au(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pq(e,t,n,r){var i=Fo.hasOwnProperty(t)?Fo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(y8e(t,n,i,r)&&(n=null),r||i===null?m8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vm=h8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nN=Symbol.for("react.element"),aw=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),Dq=Symbol.for("react.strict_mode"),VB=Symbol.for("react.profiler"),yye=Symbol.for("react.provider"),vye=Symbol.for("react.context"),Oq=Symbol.for("react.forward_ref"),HB=Symbol.for("react.suspense"),qB=Symbol.for("react.suspense_list"),$q=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),bye=Symbol.for("react.offscreen"),Die=Symbol.iterator;function cT(e){return e===null||typeof e!="object"?null:(e=Die&&e[Die]||e["@@iterator"],typeof e=="function"?e:null)}var Li=Object.assign,Y5;function f2(e){if(Y5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Y5=t&&t[1]||""}return`
`+Y5+e}var K5=!1;function X5(e,t){if(!e||K5)return"";K5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{K5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?f2(e):""}function v8e(e){switch(e.tag){case 5:return f2(e.type);case 16:return f2("Lazy");case 13:return f2("Suspense");case 19:return f2("SuspenseList");case 0:case 2:case 15:return e=X5(e.type,!1),e;case 11:return e=X5(e.type.render,!1),e;case 1:return e=X5(e.type,!0),e;default:return""}}function WB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uw:return"Fragment";case aw:return"Portal";case VB:return"Profiler";case Dq:return"StrictMode";case HB:return"Suspense";case qB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vye:return(e.displayName||"Context")+".Consumer";case yye:return(e._context.displayName||"Context")+".Provider";case Oq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $q:return t=e.displayName||null,t!==null?t:WB(e.type)||"Memo";case Rg:t=e._payload,e=e._init;try{return WB(e(t))}catch{}}return null}function b8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return WB(t);case 8:return t===Dq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function L0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _8e(e){var t=_ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rN(e){e._valueTracker||(e._valueTracker=_8e(e))}function wye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_ye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function GB(e,t){var n=t.checked;return Li({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Oie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=L0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Eye(e,t){t=t.checked,t!=null&&Pq(e,"checked",t,!1)}function YB(e,t){Eye(e,t);var n=L0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?KB(e,t.type,n):t.hasOwnProperty("defaultValue")&&KB(e,t.type,L0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function KB(e,t,n){(t!=="number"||fO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var d2=Array.isArray;function Dw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+L0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function XB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Li({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(d2(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:L0(n)}}function xye(e,t){var n=L0(t.value),r=L0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var iN,Tye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(iN=iN||document.createElement("div"),iN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=iN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w8e=["Webkit","ms","Moz","O"];Object.keys(rC).forEach(function(e){w8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rC[t]=rC[e]})});function Cye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||rC.hasOwnProperty(e)&&rC[e]?(""+t).trim():t+"px"}function Aye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Cye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var E8e=Li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function JB(e,t){if(t){if(E8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function ZB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eU=null;function Mq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tU=null,Ow=null,$w=null;function Fie(e){if(e=XI(e)){if(typeof tU!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=tL(t),tU(e.stateNode,e.type,t))}}function Iye(e){Ow?$w?$w.push(e):$w=[e]:Ow=e}function kye(){if(Ow){var e=Ow,t=$w;if($w=Ow=null,Fie(e),t)for(e=0;e<t.length;e++)Fie(t[e])}}function Rye(e,t){return e(t)}function Nye(){}var Q5=!1;function Pye(e,t,n){if(Q5)return e(t,n);Q5=!0;try{return Rye(e,t,n)}finally{Q5=!1,(Ow!==null||$w!==null)&&(Nye(),kye())}}function oA(e,t){var n=e.stateNode;if(n===null)return null;var r=tL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var nU=!1;if(mm)try{var fT={};Object.defineProperty(fT,"passive",{get:function(){nU=!0}}),window.addEventListener("test",fT,fT),window.removeEventListener("test",fT,fT)}catch{nU=!1}function x8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var iC=!1,dO=null,hO=!1,rU=null,S8e={onError:function(e){iC=!0,dO=e}};function T8e(e,t,n,r,i,s,o,a,u){iC=!1,dO=null,x8e.apply(S8e,arguments)}function C8e(e,t,n,r,i,s,o,a,u){if(T8e.apply(this,arguments),iC){if(iC){var l=dO;iC=!1,dO=null}else throw Error(tt(198));hO||(hO=!0,rU=l)}}function Ib(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jie(e){if(Ib(e)!==e)throw Error(tt(188))}function A8e(e){var t=e.alternate;if(!t){if(t=Ib(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jie(i),e;if(s===r)return jie(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function Oye(e){return e=A8e(e),e!==null?$ye(e):null}function $ye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$ye(e);if(t!==null)return t;e=e.sibling}return null}var Mye=$l.unstable_scheduleCallback,Bie=$l.unstable_cancelCallback,I8e=$l.unstable_shouldYield,k8e=$l.unstable_requestPaint,as=$l.unstable_now,R8e=$l.unstable_getCurrentPriorityLevel,Lq=$l.unstable_ImmediatePriority,Lye=$l.unstable_UserBlockingPriority,pO=$l.unstable_NormalPriority,N8e=$l.unstable_LowPriority,Fye=$l.unstable_IdlePriority,QM=null,oh=null;function P8e(e){if(oh&&typeof oh.onCommitFiberRoot=="function")try{oh.onCommitFiberRoot(QM,e,void 0,(e.current.flags&128)===128)}catch{}}var Ff=Math.clz32?Math.clz32:$8e,D8e=Math.log,O8e=Math.LN2;function $8e(e){return e>>>=0,e===0?32:31-(D8e(e)/O8e|0)|0}var sN=64,oN=4194304;function h2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=h2(a):(s&=o,s!==0&&(r=h2(s)))}else o=n&~i,o!==0?r=h2(o):s!==0&&(r=h2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ff(t),i=1<<n,r|=e[n],t&=~i;return r}function M8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ff(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=M8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function iU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jye(){var e=sN;return sN<<=1,!(sN&4194240)&&(sN=64),e}function J5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function YI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ff(t),e[t]=n}function F8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ff(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Fq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ff(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $r=0;function Bye(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uye,jq,zye,Vye,Hye,sU=!1,aN=[],f0=null,d0=null,h0=null,aA=new Map,uA=new Map,Bg=[],j8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uie(e,t){switch(e){case"focusin":case"focusout":f0=null;break;case"dragenter":case"dragleave":d0=null;break;case"mouseover":case"mouseout":h0=null;break;case"pointerover":case"pointerout":aA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":uA.delete(t.pointerId)}}function dT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=XI(t),t!==null&&jq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function B8e(e,t,n,r,i){switch(t){case"focusin":return f0=dT(f0,e,t,n,r,i),!0;case"dragenter":return d0=dT(d0,e,t,n,r,i),!0;case"mouseover":return h0=dT(h0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return aA.set(s,dT(aA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,uA.set(s,dT(uA.get(s)||null,e,t,n,r,i)),!0}return!1}function qye(e){var t=ev(e.target);if(t!==null){var n=Ib(t);if(n!==null){if(t=n.tag,t===13){if(t=Dye(n),t!==null){e.blockedOn=t,Hye(e.priority,function(){zye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function GP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=oU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);eU=r,n.target.dispatchEvent(r),eU=null}else return t=XI(n),t!==null&&jq(t),e.blockedOn=n,!1;t.shift()}return!0}function zie(e,t,n){GP(e)&&n.delete(t)}function U8e(){sU=!1,f0!==null&&GP(f0)&&(f0=null),d0!==null&&GP(d0)&&(d0=null),h0!==null&&GP(h0)&&(h0=null),aA.forEach(zie),uA.forEach(zie)}function hT(e,t){e.blockedOn===t&&(e.blockedOn=null,sU||(sU=!0,$l.unstable_scheduleCallback($l.unstable_NormalPriority,U8e)))}function lA(e){function t(i){return hT(i,e)}if(0<aN.length){hT(aN[0],e);for(var n=1;n<aN.length;n++){var r=aN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(f0!==null&&hT(f0,e),d0!==null&&hT(d0,e),h0!==null&&hT(h0,e),aA.forEach(t),uA.forEach(t),n=0;n<Bg.length;n++)r=Bg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bg.length&&(n=Bg[0],n.blockedOn===null);)qye(n),n.blockedOn===null&&Bg.shift()}var Mw=Vm.ReactCurrentBatchConfig,gO=!0;function z8e(e,t,n,r){var i=$r,s=Mw.transition;Mw.transition=null;try{$r=1,Bq(e,t,n,r)}finally{$r=i,Mw.transition=s}}function V8e(e,t,n,r){var i=$r,s=Mw.transition;Mw.transition=null;try{$r=4,Bq(e,t,n,r)}finally{$r=i,Mw.transition=s}}function Bq(e,t,n,r){if(gO){var i=oU(e,t,n,r);if(i===null)uj(e,t,r,yO,n),Uie(e,r);else if(B8e(i,e,t,n,r))r.stopPropagation();else if(Uie(e,r),t&4&&-1<j8e.indexOf(e)){for(;i!==null;){var s=XI(i);if(s!==null&&Uye(s),s=oU(e,t,n,r),s===null&&uj(e,t,r,yO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else uj(e,t,r,null,n)}}var yO=null;function oU(e,t,n,r){if(yO=null,e=Mq(r),e=ev(e),e!==null)if(t=Ib(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Dye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yO=e,null}function Wye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R8e()){case Lq:return 1;case Lye:return 4;case pO:case N8e:return 16;case Fye:return 536870912;default:return 16}default:return 16}}var Xg=null,Uq=null,YP=null;function Gye(){if(YP)return YP;var e,t=Uq,n=t.length,r,i="value"in Xg?Xg.value:Xg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return YP=i.slice(e,1<r?1-r:void 0)}function KP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function uN(){return!0}function Vie(){return!1}function Jl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?uN:Vie,this.isPropagationStopped=Vie,this}return Li(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uN)},persist:function(){},isPersistent:uN}),t}var zx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zq=Jl(zx),KI=Li({},zx,{view:0,detail:0}),H8e=Jl(KI),Z5,ej,pT,JM=Li({},KI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pT&&(pT&&e.type==="mousemove"?(Z5=e.screenX-pT.screenX,ej=e.screenY-pT.screenY):ej=Z5=0,pT=e),Z5)},movementY:function(e){return"movementY"in e?e.movementY:ej}}),Hie=Jl(JM),q8e=Li({},JM,{dataTransfer:0}),W8e=Jl(q8e),G8e=Li({},KI,{relatedTarget:0}),tj=Jl(G8e),Y8e=Li({},zx,{animationName:0,elapsedTime:0,pseudoElement:0}),K8e=Jl(Y8e),X8e=Li({},zx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q8e=Jl(X8e),J8e=Li({},zx,{data:0}),qie=Jl(J8e),Z8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e9e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t9e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n9e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=t9e[e])?!!t[e]:!1}function Vq(){return n9e}var r9e=Li({},KI,{key:function(e){if(e.key){var t=Z8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=KP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e9e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vq,charCode:function(e){return e.type==="keypress"?KP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?KP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),i9e=Jl(r9e),s9e=Li({},JM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wie=Jl(s9e),o9e=Li({},KI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vq}),a9e=Jl(o9e),u9e=Li({},zx,{propertyName:0,elapsedTime:0,pseudoElement:0}),l9e=Jl(u9e),c9e=Li({},JM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),f9e=Jl(c9e),d9e=[9,13,27,32],Hq=mm&&"CompositionEvent"in window,sC=null;mm&&"documentMode"in document&&(sC=document.documentMode);var h9e=mm&&"TextEvent"in window&&!sC,Yye=mm&&(!Hq||sC&&8<sC&&11>=sC),Gie=" ",Yie=!1;function Kye(e,t){switch(e){case"keyup":return d9e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lw=!1;function p9e(e,t){switch(e){case"compositionend":return Xye(t);case"keypress":return t.which!==32?null:(Yie=!0,Gie);case"textInput":return e=t.data,e===Gie&&Yie?null:e;default:return null}}function m9e(e,t){if(lw)return e==="compositionend"||!Hq&&Kye(e,t)?(e=Gye(),YP=Uq=Xg=null,lw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yye&&t.locale!=="ko"?null:t.data;default:return null}}var g9e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g9e[e.type]:t==="textarea"}function Qye(e,t,n,r){Iye(r),t=vO(t,"onChange"),0<t.length&&(n=new zq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var oC=null,cA=null;function y9e(e){u1e(e,0)}function ZM(e){var t=dw(e);if(wye(t))return e}function v9e(e,t){if(e==="change")return t}var Jye=!1;if(mm){var nj;if(mm){var rj="oninput"in document;if(!rj){var Xie=document.createElement("div");Xie.setAttribute("oninput","return;"),rj=typeof Xie.oninput=="function"}nj=rj}else nj=!1;Jye=nj&&(!document.documentMode||9<document.documentMode)}function Qie(){oC&&(oC.detachEvent("onpropertychange",Zye),cA=oC=null)}function Zye(e){if(e.propertyName==="value"&&ZM(cA)){var t=[];Qye(t,cA,e,Mq(e)),Pye(y9e,t)}}function b9e(e,t,n){e==="focusin"?(Qie(),oC=t,cA=n,oC.attachEvent("onpropertychange",Zye)):e==="focusout"&&Qie()}function _9e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ZM(cA)}function w9e(e,t){if(e==="click")return ZM(t)}function E9e(e,t){if(e==="input"||e==="change")return ZM(t)}function x9e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yf=typeof Object.is=="function"?Object.is:x9e;function fA(e,t){if(Yf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zB.call(t,i)||!Yf(e[i],t[i]))return!1}return!0}function Jie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zie(e,t){var n=Jie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jie(n)}}function e1e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?e1e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function t1e(){for(var e=window,t=fO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fO(e.document)}return t}function qq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function S9e(e){var t=t1e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&e1e(n.ownerDocument.documentElement,n)){if(r!==null&&qq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Zie(n,s);var o=Zie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var T9e=mm&&"documentMode"in document&&11>=document.documentMode,cw=null,aU=null,aC=null,uU=!1;function ese(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uU||cw==null||cw!==fO(r)||(r=cw,"selectionStart"in r&&qq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),aC&&fA(aC,r)||(aC=r,r=vO(aU,"onSelect"),0<r.length&&(t=new zq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cw)))}function lN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fw={animationend:lN("Animation","AnimationEnd"),animationiteration:lN("Animation","AnimationIteration"),animationstart:lN("Animation","AnimationStart"),transitionend:lN("Transition","TransitionEnd")},ij={},n1e={};mm&&(n1e=document.createElement("div").style,"AnimationEvent"in window||(delete fw.animationend.animation,delete fw.animationiteration.animation,delete fw.animationstart.animation),"TransitionEvent"in window||delete fw.transitionend.transition);function eL(e){if(ij[e])return ij[e];if(!fw[e])return e;var t=fw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in n1e)return ij[e]=t[n];return e}var r1e=eL("animationend"),i1e=eL("animationiteration"),s1e=eL("animationstart"),o1e=eL("transitionend"),a1e=new Map,tse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sy(e,t){a1e.set(e,t),Ab(t,[e])}for(var sj=0;sj<tse.length;sj++){var oj=tse[sj],C9e=oj.toLowerCase(),A9e=oj[0].toUpperCase()+oj.slice(1);Sy(C9e,"on"+A9e)}Sy(r1e,"onAnimationEnd");Sy(i1e,"onAnimationIteration");Sy(s1e,"onAnimationStart");Sy("dblclick","onDoubleClick");Sy("focusin","onFocus");Sy("focusout","onBlur");Sy(o1e,"onTransitionEnd");_E("onMouseEnter",["mouseout","mouseover"]);_E("onMouseLeave",["mouseout","mouseover"]);_E("onPointerEnter",["pointerout","pointerover"]);_E("onPointerLeave",["pointerout","pointerover"]);Ab("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ab("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ab("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ab("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ab("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ab("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var p2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I9e=new Set("cancel close invalid load scroll toggle".split(" ").concat(p2));function nse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,C8e(r,t,void 0,e),e.currentTarget=null}function u1e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;nse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;nse(i,a,l),s=u}}}if(hO)throw e=rU,hO=!1,rU=null,e}function ui(e,t){var n=t[hU];n===void 0&&(n=t[hU]=new Set);var r=e+"__bubble";n.has(r)||(l1e(t,e,2,!1),n.add(r))}function aj(e,t,n){var r=0;t&&(r|=4),l1e(n,e,r,t)}var cN="_reactListening"+Math.random().toString(36).slice(2);function dA(e){if(!e[cN]){e[cN]=!0,gye.forEach(function(n){n!=="selectionchange"&&(I9e.has(n)||aj(n,!1,e),aj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cN]||(t[cN]=!0,aj("selectionchange",!1,t))}}function l1e(e,t,n,r){switch(Wye(t)){case 1:var i=z8e;break;case 4:i=V8e;break;default:i=Bq}n=i.bind(null,t,n,e),i=void 0,!nU||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function uj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ev(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Pye(function(){var l=s,c=Mq(n),f=[];e:{var d=a1e.get(e);if(d!==void 0){var h=zq,p=e;switch(e){case"keypress":if(KP(n)===0)break e;case"keydown":case"keyup":h=i9e;break;case"focusin":p="focus",h=tj;break;case"focusout":p="blur",h=tj;break;case"beforeblur":case"afterblur":h=tj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Hie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=W8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=a9e;break;case r1e:case i1e:case s1e:h=K8e;break;case o1e:h=l9e;break;case"scroll":h=H8e;break;case"wheel":h=f9e;break;case"copy":case"cut":case"paste":h=Q8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Wie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,y!==null&&(E=oA(v,y),E!=null&&m.push(hA(v,E,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==eU&&(p=n.relatedTarget||n.fromElement)&&(ev(p)||p[gm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?ev(p):null,p!==null&&(g=Ib(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Hie,E="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Wie,E="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:dw(h),_=p==null?d:dw(p),d=new m(E,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,E=null,ev(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,E=m),g=E,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=v_(_))v++;for(_=0,E=y;E;E=v_(E))_++;for(;0<v-_;)m=v_(m),v--;for(;0<_-v;)y=v_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=v_(m),y=v_(y)}m=null}else m=null;h!==null&&rse(f,d,h,m,!1),p!==null&&g!==null&&rse(f,g,p,m,!0)}}e:{if(d=l?dw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=v9e;else if(Kie(d))if(Jye)w=E9e;else{w=_9e;var S=b9e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=w9e);if(w&&(w=w(e,l))){Qye(f,w,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&KB(d,"number",d.value)}switch(S=l?dw(l):window,e){case"focusin":(Kie(S)||S.contentEditable==="true")&&(cw=S,aU=l,aC=null);break;case"focusout":aC=aU=cw=null;break;case"mousedown":uU=!0;break;case"contextmenu":case"mouseup":case"dragend":uU=!1,ese(f,n,c);break;case"selectionchange":if(T9e)break;case"keydown":case"keyup":ese(f,n,c)}var x;if(Hq)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else lw?Kye(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Yye&&n.locale!=="ko"&&(lw||C!=="onCompositionStart"?C==="onCompositionEnd"&&lw&&(x=Gye()):(Xg=c,Uq="value"in Xg?Xg.value:Xg.textContent,lw=!0)),S=vO(l,C),0<S.length&&(C=new qie(C,e,null,n,c),f.push({event:C,listeners:S}),x?C.data=x:(x=Xye(n),x!==null&&(C.data=x)))),(x=h9e?p9e(e,n):m9e(e,n))&&(l=vO(l,"onBeforeInput"),0<l.length&&(c=new qie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=x))}u1e(f,t)})}function hA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oA(e,n),s!=null&&r.unshift(hA(e,s,i)),s=oA(e,t),s!=null&&r.push(hA(e,s,i))),e=e.return}return r}function v_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=oA(n,s),u!=null&&o.unshift(hA(n,u,a))):i||(u=oA(n,s),u!=null&&o.push(hA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var k9e=/\r\n?/g,R9e=/\u0000|\uFFFD/g;function ise(e){return(typeof e=="string"?e:""+e).replace(k9e,`
`).replace(R9e,"")}function fN(e,t,n){if(t=ise(t),ise(e)!==t&&n)throw Error(tt(425))}function bO(){}var lU=null,cU=null;function fU(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dU=typeof setTimeout=="function"?setTimeout:void 0,N9e=typeof clearTimeout=="function"?clearTimeout:void 0,sse=typeof Promise=="function"?Promise:void 0,P9e=typeof queueMicrotask=="function"?queueMicrotask:typeof sse<"u"?function(e){return sse.resolve(null).then(e).catch(D9e)}:dU;function D9e(e){setTimeout(function(){throw e})}function lj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),lA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lA(t)}function p0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ose(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vx=Math.random().toString(36).slice(2),jd="__reactFiber$"+Vx,pA="__reactProps$"+Vx,gm="__reactContainer$"+Vx,hU="__reactEvents$"+Vx,O9e="__reactListeners$"+Vx,$9e="__reactHandles$"+Vx;function ev(e){var t=e[jd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gm]||n[jd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ose(e);e!==null;){if(n=e[jd])return n;e=ose(e)}return t}e=n,n=e.parentNode}return null}function XI(e){return e=e[jd]||e[gm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function tL(e){return e[pA]||null}var pU=[],hw=-1;function Ty(e){return{current:e}}function pi(e){0>hw||(e.current=pU[hw],pU[hw]=null,hw--)}function ni(e,t){hw++,pU[hw]=e.current,e.current=t}var F0={},_a=Ty(F0),Bu=Ty(!1),$v=F0;function wE(e,t){var n=e.type.contextTypes;if(!n)return F0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Uu(e){return e=e.childContextTypes,e!=null}function _O(){pi(Bu),pi(_a)}function ase(e,t,n){if(_a.current!==F0)throw Error(tt(168));ni(_a,t),ni(Bu,n)}function c1e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,b8e(e)||"Unknown",i));return Li({},n,r)}function wO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||F0,$v=_a.current,ni(_a,e),ni(Bu,Bu.current),!0}function use(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=c1e(e,t,$v),r.__reactInternalMemoizedMergedChildContext=e,pi(Bu),pi(_a),ni(_a,e)):pi(Bu),ni(Bu,n)}var Np=null,nL=!1,cj=!1;function f1e(e){Np===null?Np=[e]:Np.push(e)}function M9e(e){nL=!0,f1e(e)}function Cy(){if(!cj&&Np!==null){cj=!0;var e=0,t=$r;try{var n=Np;for($r=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Np=null,nL=!1}catch(i){throw Np!==null&&(Np=Np.slice(e+1)),Mye(Lq,Cy),i}finally{$r=t,cj=!1}}return null}var pw=[],mw=0,EO=null,xO=0,mc=[],gc=0,Mv=null,Vp=1,Hp="";function T1(e,t){pw[mw++]=xO,pw[mw++]=EO,EO=e,xO=t}function d1e(e,t,n){mc[gc++]=Vp,mc[gc++]=Hp,mc[gc++]=Mv,Mv=e;var r=Vp;e=Hp;var i=32-Ff(r)-1;r&=~(1<<i),n+=1;var s=32-Ff(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Vp=1<<32-Ff(t)+i|n<<i|r,Hp=s+e}else Vp=1<<s|n<<i|r,Hp=e}function Wq(e){e.return!==null&&(T1(e,1),d1e(e,1,0))}function Gq(e){for(;e===EO;)EO=pw[--mw],pw[mw]=null,xO=pw[--mw],pw[mw]=null;for(;e===Mv;)Mv=mc[--gc],mc[gc]=null,Hp=mc[--gc],mc[gc]=null,Vp=mc[--gc],mc[gc]=null}var Rl=null,xl=null,Ti=!1,wf=null;function h1e(e,t){var n=Sc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function lse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rl=e,xl=p0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rl=e,xl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mv!==null?{id:Vp,overflow:Hp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Sc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rl=e,xl=null,!0):!1;default:return!1}}function mU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gU(e){if(Ti){var t=xl;if(t){var n=t;if(!lse(e,t)){if(mU(e))throw Error(tt(418));t=p0(n.nextSibling);var r=Rl;t&&lse(e,t)?h1e(r,n):(e.flags=e.flags&-4097|2,Ti=!1,Rl=e)}}else{if(mU(e))throw Error(tt(418));e.flags=e.flags&-4097|2,Ti=!1,Rl=e}}}function cse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rl=e}function dN(e){if(e!==Rl)return!1;if(!Ti)return cse(e),Ti=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fU(e.type,e.memoizedProps)),t&&(t=xl)){if(mU(e))throw p1e(),Error(tt(418));for(;t;)h1e(e,t),t=p0(t.nextSibling)}if(cse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xl=p0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xl=null}}else xl=Rl?p0(e.stateNode.nextSibling):null;return!0}function p1e(){for(var e=xl;e;)e=p0(e.nextSibling)}function EE(){xl=Rl=null,Ti=!1}function Yq(e){wf===null?wf=[e]:wf.push(e)}var L9e=Vm.ReactCurrentBatchConfig;function mT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function hN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fse(e){var t=e._init;return t(e._payload)}function m1e(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=v0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,E){return v===null||v.tag!==6?(v=yj(_,y.mode,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,E){var w=_.type;return w===uw?c(y,v,_.props.children,E,_.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Rg&&fse(w)===v.type)?(E=i(v,_.props),E.ref=mT(y,v,_),E.return=y,E):(E=nD(_.type,_.key,_.props,null,y.mode,E),E.ref=mT(y,v,_),E.return=y,E)}function l(y,v,_,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=vj(_,y.mode,E),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,E,w){return v===null||v.tag!==7?(v=Ev(_,y.mode,E,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=yj(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nN:return _=nD(v.type,v.key,v.props,null,y.mode,_),_.ref=mT(y,null,v),_.return=y,_;case aw:return v=vj(v,y.mode,_),v.return=y,v;case Rg:var E=v._init;return f(y,E(v._payload),_)}if(d2(v)||cT(v))return v=Ev(v,y.mode,_,null),v.return=y,v;hN(y,v)}return null}function d(y,v,_,E){var w=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:a(y,v,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case nN:return _.key===w?u(y,v,_,E):null;case aw:return _.key===w?l(y,v,_,E):null;case Rg:return w=_._init,d(y,v,w(_._payload),E)}if(d2(_)||cT(_))return w!==null?null:c(y,v,_,E,null);hN(y,_)}return null}function h(y,v,_,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(_)||null,a(v,y,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case nN:return y=y.get(E.key===null?_:E.key)||null,u(v,y,E,w);case aw:return y=y.get(E.key===null?_:E.key)||null,l(v,y,E,w);case Rg:var S=E._init;return h(y,v,_,S(E._payload),w)}if(d2(E)||cT(E))return y=y.get(_)||null,c(v,y,E,w,null);hN(v,E)}return null}function p(y,v,_,E){for(var w=null,S=null,x=v,C=v=0,A=null;x!==null&&C<_.length;C++){x.index>C?(A=x,x=null):A=x.sibling;var I=d(y,x,_[C],E);if(I===null){x===null&&(x=A);break}e&&x&&I.alternate===null&&t(y,x),v=s(I,v,C),S===null?w=I:S.sibling=I,S=I,x=A}if(C===_.length)return n(y,x),Ti&&T1(y,C),w;if(x===null){for(;C<_.length;C++)x=f(y,_[C],E),x!==null&&(v=s(x,v,C),S===null?w=x:S.sibling=x,S=x);return Ti&&T1(y,C),w}for(x=r(y,x);C<_.length;C++)A=h(x,y,C,_[C],E),A!==null&&(e&&A.alternate!==null&&x.delete(A.key===null?C:A.key),v=s(A,v,C),S===null?w=A:S.sibling=A,S=A);return e&&x.forEach(function(R){return t(y,R)}),Ti&&T1(y,C),w}function m(y,v,_,E){var w=cT(_);if(typeof w!="function")throw Error(tt(150));if(_=w.call(_),_==null)throw Error(tt(151));for(var S=w=null,x=v,C=v=0,A=null,I=_.next();x!==null&&!I.done;C++,I=_.next()){x.index>C?(A=x,x=null):A=x.sibling;var R=d(y,x,I.value,E);if(R===null){x===null&&(x=A);break}e&&x&&R.alternate===null&&t(y,x),v=s(R,v,C),S===null?w=R:S.sibling=R,S=R,x=A}if(I.done)return n(y,x),Ti&&T1(y,C),w;if(x===null){for(;!I.done;C++,I=_.next())I=f(y,I.value,E),I!==null&&(v=s(I,v,C),S===null?w=I:S.sibling=I,S=I);return Ti&&T1(y,C),w}for(x=r(y,x);!I.done;C++,I=_.next())I=h(x,y,C,I.value,E),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?C:I.key),v=s(I,v,C),S===null?w=I:S.sibling=I,S=I);return e&&x.forEach(function(O){return t(y,O)}),Ti&&T1(y,C),w}function g(y,v,_,E){if(typeof _=="object"&&_!==null&&_.type===uw&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case nN:e:{for(var w=_.key,S=v;S!==null;){if(S.key===w){if(w=_.type,w===uw){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Rg&&fse(w)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=mT(y,S,_),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}_.type===uw?(v=Ev(_.props.children,y.mode,E,_.key),v.return=y,y=v):(E=nD(_.type,_.key,_.props,null,y.mode,E),E.ref=mT(y,v,_),E.return=y,y=E)}return o(y);case aw:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=vj(_,y.mode,E),v.return=y,y=v}return o(y);case Rg:return S=_._init,g(y,v,S(_._payload),E)}if(d2(_))return p(y,v,_,E);if(cT(_))return m(y,v,_,E);hN(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=yj(_,y.mode,E),v.return=y,y=v),o(y)):n(y,v)}return g}var xE=m1e(!0),g1e=m1e(!1),SO=Ty(null),TO=null,gw=null,Kq=null;function Xq(){Kq=gw=TO=null}function Qq(e){var t=SO.current;pi(SO),e._currentValue=t}function yU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Lw(e,t){TO=e,Kq=gw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ou=!0),e.firstContext=null)}function Pc(e){var t=e._currentValue;if(Kq!==e)if(e={context:e,memoizedValue:t,next:null},gw===null){if(TO===null)throw Error(tt(308));gw=e,TO.dependencies={lanes:0,firstContext:e}}else gw=gw.next=e;return t}var tv=null;function Jq(e){tv===null?tv=[e]:tv.push(e)}function y1e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Jq(t)):(n.next=i.next,i.next=n),t.interleaved=n,ym(e,r)}function ym(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ng=!1;function Zq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v1e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function m0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ym(e,n)}return i=r.interleaved,i===null?(t.next=t,Jq(r)):(t.next=i.next,i.next=t),r.interleaved=t,ym(e,n)}function XP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fq(e,n)}}function dse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function CO(e,t,n,r){var i=e.updateQueue;Ng=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Li({},f,d);break e;case 2:Ng=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Fv|=o,e.lanes=o,e.memoizedState=f}}function hse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var QI={},ah=Ty(QI),mA=Ty(QI),gA=Ty(QI);function nv(e){if(e===QI)throw Error(tt(174));return e}function eW(e,t){switch(ni(gA,t),ni(mA,e),ni(ah,QI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:QB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=QB(t,e)}pi(ah),ni(ah,t)}function SE(){pi(ah),pi(mA),pi(gA)}function b1e(e){nv(gA.current);var t=nv(ah.current),n=QB(t,e.type);t!==n&&(ni(mA,e),ni(ah,n))}function tW(e){mA.current===e&&(pi(ah),pi(mA))}var Oi=Ty(0);function AO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fj=[];function nW(){for(var e=0;e<fj.length;e++)fj[e]._workInProgressVersionPrimary=null;fj.length=0}var QP=Vm.ReactCurrentDispatcher,dj=Vm.ReactCurrentBatchConfig,Lv=0,Mi=null,ks=null,Qs=null,IO=!1,uC=!1,yA=0,F9e=0;function Ko(){throw Error(tt(321))}function rW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yf(e[n],t[n]))return!1;return!0}function iW(e,t,n,r,i,s){if(Lv=s,Mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,QP.current=e===null||e.memoizedState===null?z9e:V9e,e=n(r,i),uC){s=0;do{if(uC=!1,yA=0,25<=s)throw Error(tt(301));s+=1,Qs=ks=null,t.updateQueue=null,QP.current=H9e,e=n(r,i)}while(uC)}if(QP.current=kO,t=ks!==null&&ks.next!==null,Lv=0,Qs=ks=Mi=null,IO=!1,t)throw Error(tt(300));return e}function sW(){var e=yA!==0;return yA=0,e}function kd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?Mi.memoizedState=Qs=e:Qs=Qs.next=e,Qs}function Dc(){if(ks===null){var e=Mi.alternate;e=e!==null?e.memoizedState:null}else e=ks.next;var t=Qs===null?Mi.memoizedState:Qs.next;if(t!==null)Qs=t,ks=e;else{if(e===null)throw Error(tt(310));ks=e,e={memoizedState:ks.memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},Qs===null?Mi.memoizedState=Qs=e:Qs=Qs.next=e}return Qs}function vA(e,t){return typeof t=="function"?t(e):t}function hj(e){var t=Dc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=ks,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Lv&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Mi.lanes|=c,Fv|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Yf(r,t.memoizedState)||(Ou=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Mi.lanes|=s,Fv|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function pj(e){var t=Dc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Yf(s,t.memoizedState)||(Ou=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _1e(){}function w1e(e,t){var n=Mi,r=Dc(),i=t(),s=!Yf(r.memoizedState,i);if(s&&(r.memoizedState=i,Ou=!0),r=r.queue,oW(S1e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Qs!==null&&Qs.memoizedState.tag&1){if(n.flags|=2048,bA(9,x1e.bind(null,n,r,i,t),void 0,null),uo===null)throw Error(tt(349));Lv&30||E1e(n,t,i)}return i}function E1e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function x1e(e,t,n,r){t.value=n,t.getSnapshot=r,T1e(t)&&C1e(e)}function S1e(e,t,n){return n(function(){T1e(t)&&C1e(e)})}function T1e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yf(e,n)}catch{return!0}}function C1e(e){var t=ym(e,1);t!==null&&jf(t,e,1,-1)}function pse(e){var t=kd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vA,lastRenderedState:e},t.queue=e,e=e.dispatch=U9e.bind(null,Mi,e),[t.memoizedState,e]}function bA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function A1e(){return Dc().memoizedState}function JP(e,t,n,r){var i=kd();Mi.flags|=e,i.memoizedState=bA(1|t,n,void 0,r===void 0?null:r)}function rL(e,t,n,r){var i=Dc();r=r===void 0?null:r;var s=void 0;if(ks!==null){var o=ks.memoizedState;if(s=o.destroy,r!==null&&rW(r,o.deps)){i.memoizedState=bA(t,n,s,r);return}}Mi.flags|=e,i.memoizedState=bA(1|t,n,s,r)}function mse(e,t){return JP(8390656,8,e,t)}function oW(e,t){return rL(2048,8,e,t)}function I1e(e,t){return rL(4,2,e,t)}function k1e(e,t){return rL(4,4,e,t)}function R1e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N1e(e,t,n){return n=n!=null?n.concat([e]):null,rL(4,4,R1e.bind(null,t,e),n)}function aW(){}function P1e(e,t){var n=Dc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function D1e(e,t){var n=Dc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function O1e(e,t,n){return Lv&21?(Yf(n,t)||(n=jye(),Mi.lanes|=n,Fv|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ou=!0),e.memoizedState=n)}function j9e(e,t){var n=$r;$r=n!==0&&4>n?n:4,e(!0);var r=dj.transition;dj.transition={};try{e(!1),t()}finally{$r=n,dj.transition=r}}function $1e(){return Dc().memoizedState}function B9e(e,t,n){var r=y0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M1e(e))L1e(t,n);else if(n=y1e(e,t,n,r),n!==null){var i=Ka();jf(n,e,r,i),F1e(n,t,r)}}function U9e(e,t,n){var r=y0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M1e(e))L1e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Yf(a,o)){var u=t.interleaved;u===null?(i.next=i,Jq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=y1e(e,t,i,r),n!==null&&(i=Ka(),jf(n,e,r,i),F1e(n,t,r))}}function M1e(e){var t=e.alternate;return e===Mi||t!==null&&t===Mi}function L1e(e,t){uC=IO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function F1e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fq(e,n)}}var kO={readContext:Pc,useCallback:Ko,useContext:Ko,useEffect:Ko,useImperativeHandle:Ko,useInsertionEffect:Ko,useLayoutEffect:Ko,useMemo:Ko,useReducer:Ko,useRef:Ko,useState:Ko,useDebugValue:Ko,useDeferredValue:Ko,useTransition:Ko,useMutableSource:Ko,useSyncExternalStore:Ko,useId:Ko,unstable_isNewReconciler:!1},z9e={readContext:Pc,useCallback:function(e,t){return kd().memoizedState=[e,t===void 0?null:t],e},useContext:Pc,useEffect:mse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,JP(4194308,4,R1e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return JP(4194308,4,e,t)},useInsertionEffect:function(e,t){return JP(4,2,e,t)},useMemo:function(e,t){var n=kd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=B9e.bind(null,Mi,e),[r.memoizedState,e]},useRef:function(e){var t=kd();return e={current:e},t.memoizedState=e},useState:pse,useDebugValue:aW,useDeferredValue:function(e){return kd().memoizedState=e},useTransition:function(){var e=pse(!1),t=e[0];return e=j9e.bind(null,e[1]),kd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Mi,i=kd();if(Ti){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),uo===null)throw Error(tt(349));Lv&30||E1e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,mse(S1e.bind(null,r,s,e),[e]),r.flags|=2048,bA(9,x1e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=kd(),t=uo.identifierPrefix;if(Ti){var n=Hp,r=Vp;n=(r&~(1<<32-Ff(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=F9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},V9e={readContext:Pc,useCallback:P1e,useContext:Pc,useEffect:oW,useImperativeHandle:N1e,useInsertionEffect:I1e,useLayoutEffect:k1e,useMemo:D1e,useReducer:hj,useRef:A1e,useState:function(){return hj(vA)},useDebugValue:aW,useDeferredValue:function(e){var t=Dc();return O1e(t,ks.memoizedState,e)},useTransition:function(){var e=hj(vA)[0],t=Dc().memoizedState;return[e,t]},useMutableSource:_1e,useSyncExternalStore:w1e,useId:$1e,unstable_isNewReconciler:!1},H9e={readContext:Pc,useCallback:P1e,useContext:Pc,useEffect:oW,useImperativeHandle:N1e,useInsertionEffect:I1e,useLayoutEffect:k1e,useMemo:D1e,useReducer:pj,useRef:A1e,useState:function(){return pj(vA)},useDebugValue:aW,useDeferredValue:function(e){var t=Dc();return ks===null?t.memoizedState=e:O1e(t,ks.memoizedState,e)},useTransition:function(){var e=pj(vA)[0],t=Dc().memoizedState;return[e,t]},useMutableSource:_1e,useSyncExternalStore:w1e,useId:$1e,unstable_isNewReconciler:!1};function mf(e,t){if(e&&e.defaultProps){t=Li({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Li({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var iL={isMounted:function(e){return(e=e._reactInternals)?Ib(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ka(),i=y0(e),s=nm(r,i);s.payload=t,n!=null&&(s.callback=n),t=m0(e,s,i),t!==null&&(jf(t,e,i,r),XP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ka(),i=y0(e),s=nm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=m0(e,s,i),t!==null&&(jf(t,e,i,r),XP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ka(),r=y0(e),i=nm(n,r);i.tag=2,t!=null&&(i.callback=t),t=m0(e,i,r),t!==null&&(jf(t,e,r,n),XP(t,e,r))}};function gse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!fA(n,r)||!fA(i,s):!0}function j1e(e,t,n){var r=!1,i=F0,s=t.contextType;return typeof s=="object"&&s!==null?s=Pc(s):(i=Uu(t)?$v:_a.current,r=t.contextTypes,s=(r=r!=null)?wE(e,i):F0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=iL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function yse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&iL.enqueueReplaceState(t,t.state,null)}function bU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Zq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Pc(s):(s=Uu(t)?$v:_a.current,i.context=wE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(vU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&iL.enqueueReplaceState(i,i.state,null),CO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function TE(e,t){try{var n="",r=t;do n+=v8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function mj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _U(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var q9e=typeof WeakMap=="function"?WeakMap:Map;function B1e(e,t,n){n=nm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){NO||(NO=!0,RU=r),_U(e,t)},n}function U1e(e,t,n){n=nm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){_U(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){_U(e,t),typeof r!="function"&&(g0===null?g0=new Set([this]):g0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function vse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new q9e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=sBe.bind(null,e,t,n),t.then(e,e))}function bse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _se(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=nm(-1,1),t.tag=2,m0(n,t,1))),n.lanes|=1),e)}var W9e=Vm.ReactCurrentOwner,Ou=!1;function La(e,t,n,r){t.child=e===null?g1e(t,null,n,r):xE(t,e.child,n,r)}function wse(e,t,n,r,i){n=n.render;var s=t.ref;return Lw(t,i),r=iW(e,t,n,r,s,i),n=sW(),e!==null&&!Ou?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vm(e,t,i)):(Ti&&n&&Wq(t),t.flags|=1,La(e,t,r,i),t.child)}function Ese(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!mW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,z1e(e,t,s,r,i)):(e=nD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fA,n(o,r)&&e.ref===t.ref)return vm(e,t,i)}return t.flags|=1,e=v0(s,r),e.ref=t.ref,e.return=t,t.child=e}function z1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(fA(s,r)&&e.ref===t.ref)if(Ou=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ou=!0);else return t.lanes=e.lanes,vm(e,t,i)}return wU(e,t,n,r,i)}function V1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ni(vw,gl),gl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ni(vw,gl),gl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ni(vw,gl),gl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ni(vw,gl),gl|=r;return La(e,t,i,n),t.child}function H1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function wU(e,t,n,r,i){var s=Uu(n)?$v:_a.current;return s=wE(t,s),Lw(t,i),n=iW(e,t,n,r,s,i),r=sW(),e!==null&&!Ou?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,vm(e,t,i)):(Ti&&r&&Wq(t),t.flags|=1,La(e,t,n,i),t.child)}function xse(e,t,n,r,i){if(Uu(n)){var s=!0;wO(t)}else s=!1;if(Lw(t,i),t.stateNode===null)ZP(e,t),j1e(t,n,r),bU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Pc(l):(l=Uu(n)?$v:_a.current,l=wE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&yse(t,o,r,l),Ng=!1;var d=t.memoizedState;o.state=d,CO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Bu.current||Ng?(typeof c=="function"&&(vU(t,n,c,r),u=t.memoizedState),(a=Ng||gse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,v1e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:mf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pc(u):(u=Uu(n)?$v:_a.current,u=wE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&yse(t,o,r,u),Ng=!1,d=t.memoizedState,o.state=d,CO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Bu.current||Ng?(typeof h=="function"&&(vU(t,n,h,r),p=t.memoizedState),(l=Ng||gse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return EU(e,t,n,r,s,i)}function EU(e,t,n,r,i,s){H1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&use(t,n,!1),vm(e,t,s);r=t.stateNode,W9e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=xE(t,e.child,null,s),t.child=xE(t,null,a,s)):La(e,t,a,s),t.memoizedState=r.state,i&&use(t,n,!0),t.child}function q1e(e){var t=e.stateNode;t.pendingContext?ase(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ase(e,t.context,!1),eW(e,t.containerInfo)}function Sse(e,t,n,r,i){return EE(),Yq(i),t.flags|=256,La(e,t,n,r),t.child}var xU={dehydrated:null,treeContext:null,retryLane:0};function SU(e){return{baseLanes:e,cachePool:null,transitions:null}}function W1e(e,t,n){var r=t.pendingProps,i=Oi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ni(Oi,i&1),e===null)return gU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=aL(o,r,0,null),e=Ev(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=SU(n),t.memoizedState=xU,e):uW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return G9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=v0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=v0(a,s):(s=Ev(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?SU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=xU,r}return s=e.child,e=s.sibling,r=v0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uW(e,t){return t=aL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pN(e,t,n,r){return r!==null&&Yq(r),xE(t,e.child,null,n),e=uW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function G9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=mj(Error(tt(422))),pN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=aL({mode:"visible",children:r.children},i,0,null),s=Ev(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&xE(t,e.child,null,o),t.child.memoizedState=SU(o),t.memoizedState=xU,s);if(!(t.mode&1))return pN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=mj(s,r,void 0),pN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ou||a){if(r=uo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ym(e,i),jf(r,e,i,-1))}return pW(),r=mj(Error(tt(421))),pN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=oBe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,xl=p0(i.nextSibling),Rl=t,Ti=!0,wf=null,e!==null&&(mc[gc++]=Vp,mc[gc++]=Hp,mc[gc++]=Mv,Vp=e.id,Hp=e.overflow,Mv=t),t=uW(t,r.children),t.flags|=4096,t)}function Tse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yU(e.return,t,n)}function gj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function G1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(La(e,t,r.children,n),r=Oi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tse(e,n,t);else if(e.tag===19)Tse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ni(Oi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&AO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),gj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&AO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}gj(t,!0,n,null,s);break;case"together":gj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ZP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fv|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=v0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=v0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Y9e(e,t,n){switch(t.tag){case 3:q1e(t),EE();break;case 5:b1e(t);break;case 1:Uu(t.type)&&wO(t);break;case 4:eW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ni(SO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ni(Oi,Oi.current&1),t.flags|=128,null):n&t.child.childLanes?W1e(e,t,n):(ni(Oi,Oi.current&1),e=vm(e,t,n),e!==null?e.sibling:null);ni(Oi,Oi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return G1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ni(Oi,Oi.current),r)break;return null;case 22:case 23:return t.lanes=0,V1e(e,t,n)}return vm(e,t,n)}var Y1e,TU,K1e,X1e;Y1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};TU=function(){};K1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,nv(ah.current);var s=null;switch(n){case"input":i=GB(e,i),r=GB(e,r),s=[];break;case"select":i=Li({},i,{value:void 0}),r=Li({},r,{value:void 0}),s=[];break;case"textarea":i=XB(e,i),r=XB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bO)}JB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(iA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(iA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ui("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};X1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function gT(e,t){if(!Ti)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function K9e(e,t,n){var r=t.pendingProps;switch(Gq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(t),null;case 1:return Uu(t.type)&&_O(),Xo(t),null;case 3:return r=t.stateNode,SE(),pi(Bu),pi(_a),nW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(dN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wf!==null&&(DU(wf),wf=null))),TU(e,t),Xo(t),null;case 5:tW(t);var i=nv(gA.current);if(n=t.type,e!==null&&t.stateNode!=null)K1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Xo(t),null}if(e=nv(ah.current),dN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[jd]=t,r[pA]=s,e=(t.mode&1)!==0,n){case"dialog":ui("cancel",r),ui("close",r);break;case"iframe":case"object":case"embed":ui("load",r);break;case"video":case"audio":for(i=0;i<p2.length;i++)ui(p2[i],r);break;case"source":ui("error",r);break;case"img":case"image":case"link":ui("error",r),ui("load",r);break;case"details":ui("toggle",r);break;case"input":Oie(r,s),ui("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ui("invalid",r);break;case"textarea":Mie(r,s),ui("invalid",r)}JB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&fN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fN(r.textContent,a,e),i=["children",""+a]):iA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ui("scroll",r)}switch(n){case"input":rN(r),$ie(r,s,!0);break;case"textarea":rN(r),Lie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[jd]=t,e[pA]=r,Y1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=ZB(n,r),n){case"dialog":ui("cancel",e),ui("close",e),i=r;break;case"iframe":case"object":case"embed":ui("load",e),i=r;break;case"video":case"audio":for(i=0;i<p2.length;i++)ui(p2[i],e);i=r;break;case"source":ui("error",e),i=r;break;case"img":case"image":case"link":ui("error",e),ui("load",e),i=r;break;case"details":ui("toggle",e),i=r;break;case"input":Oie(e,r),i=GB(e,r),ui("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Li({},r,{value:void 0}),ui("invalid",e);break;case"textarea":Mie(e,r),i=XB(e,r),ui("invalid",e);break;default:i=r}JB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Aye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Tye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&sA(e,u):typeof u=="number"&&sA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(iA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ui("scroll",e):u!=null&&Pq(e,s,u,o))}switch(n){case"input":rN(e),$ie(e,r,!1);break;case"textarea":rN(e),Lie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+L0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Dw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Dw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=bO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xo(t),null;case 6:if(e&&t.stateNode!=null)X1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=nv(gA.current),nv(ah.current),dN(t)){if(r=t.stateNode,n=t.memoizedProps,r[jd]=t,(s=r.nodeValue!==n)&&(e=Rl,e!==null))switch(e.tag){case 3:fN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jd]=t,t.stateNode=r}return Xo(t),null;case 13:if(pi(Oi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ti&&xl!==null&&t.mode&1&&!(t.flags&128))p1e(),EE(),t.flags|=98560,s=!1;else if(s=dN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[jd]=t}else EE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xo(t),s=!1}else wf!==null&&(DU(wf),wf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oi.current&1?$s===0&&($s=3):pW())),t.updateQueue!==null&&(t.flags|=4),Xo(t),null);case 4:return SE(),TU(e,t),e===null&&dA(t.stateNode.containerInfo),Xo(t),null;case 10:return Qq(t.type._context),Xo(t),null;case 17:return Uu(t.type)&&_O(),Xo(t),null;case 19:if(pi(Oi),s=t.memoizedState,s===null)return Xo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)gT(s,!1);else{if($s!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=AO(e),o!==null){for(t.flags|=128,gT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ni(Oi,Oi.current&1|2),t.child}e=e.sibling}s.tail!==null&&as()>CE&&(t.flags|=128,r=!0,gT(s,!1),t.lanes=4194304)}else{if(!r)if(e=AO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ti)return Xo(t),null}else 2*as()-s.renderingStartTime>CE&&n!==1073741824&&(t.flags|=128,r=!0,gT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=as(),t.sibling=null,n=Oi.current,ni(Oi,r?n&1|2:n&1),t):(Xo(t),null);case 22:case 23:return hW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gl&1073741824&&(Xo(t),t.subtreeFlags&6&&(t.flags|=8192)):Xo(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function X9e(e,t){switch(Gq(t),t.tag){case 1:return Uu(t.type)&&_O(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return SE(),pi(Bu),pi(_a),nW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tW(t),null;case 13:if(pi(Oi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));EE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pi(Oi),null;case 4:return SE(),null;case 10:return Qq(t.type._context),null;case 22:case 23:return hW(),null;case 24:return null;default:return null}}var mN=!1,ua=!1,Q9e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function yw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wi(e,t,r)}else n.current=null}function CU(e,t,n){try{n()}catch(r){Wi(e,t,r)}}var Cse=!1;function J9e(e,t){if(lU=gO,e=t1e(),qq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(cU={focusedElem:e,selectionRange:n},gO=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:mf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(E){Wi(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Cse,Cse=!1,p}function lC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&CU(t,n,s)}i=i.next}while(i!==r)}}function sL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function AU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Q1e(e){var t=e.alternate;t!==null&&(e.alternate=null,Q1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jd],delete t[pA],delete t[hU],delete t[O9e],delete t[$9e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function J1e(e){return e.tag===5||e.tag===3||e.tag===4}function Ase(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||J1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function IU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bO));else if(r!==4&&(e=e.child,e!==null))for(IU(e,t,n),e=e.sibling;e!==null;)IU(e,t,n),e=e.sibling}function kU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kU(e,t,n),e=e.sibling;e!==null;)kU(e,t,n),e=e.sibling}var So=null,yf=!1;function yg(e,t,n){for(n=n.child;n!==null;)Z1e(e,t,n),n=n.sibling}function Z1e(e,t,n){if(oh&&typeof oh.onCommitFiberUnmount=="function")try{oh.onCommitFiberUnmount(QM,n)}catch{}switch(n.tag){case 5:ua||yw(n,t);case 6:var r=So,i=yf;So=null,yg(e,t,n),So=r,yf=i,So!==null&&(yf?(e=So,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):So.removeChild(n.stateNode));break;case 18:So!==null&&(yf?(e=So,n=n.stateNode,e.nodeType===8?lj(e.parentNode,n):e.nodeType===1&&lj(e,n),lA(e)):lj(So,n.stateNode));break;case 4:r=So,i=yf,So=n.stateNode.containerInfo,yf=!0,yg(e,t,n),So=r,yf=i;break;case 0:case 11:case 14:case 15:if(!ua&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&CU(n,t,o),i=i.next}while(i!==r)}yg(e,t,n);break;case 1:if(!ua&&(yw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wi(n,t,a)}yg(e,t,n);break;case 21:yg(e,t,n);break;case 22:n.mode&1?(ua=(r=ua)||n.memoizedState!==null,yg(e,t,n),ua=r):yg(e,t,n);break;default:yg(e,t,n)}}function Ise(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Q9e),t.forEach(function(r){var i=aBe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:So=a.stateNode,yf=!1;break e;case 3:So=a.stateNode.containerInfo,yf=!0;break e;case 4:So=a.stateNode.containerInfo,yf=!0;break e}a=a.return}if(So===null)throw Error(tt(160));Z1e(s,o,i),So=null,yf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Wi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eve(t,e),t=t.sibling}function eve(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rf(t,e),Ed(e),r&4){try{lC(3,e,e.return),sL(3,e)}catch(m){Wi(e,e.return,m)}try{lC(5,e,e.return)}catch(m){Wi(e,e.return,m)}}break;case 1:rf(t,e),Ed(e),r&512&&n!==null&&yw(n,n.return);break;case 5:if(rf(t,e),Ed(e),r&512&&n!==null&&yw(n,n.return),e.flags&32){var i=e.stateNode;try{sA(i,"")}catch(m){Wi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Eye(i,s),ZB(a,o);var l=ZB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Aye(i,f):c==="dangerouslySetInnerHTML"?Tye(i,f):c==="children"?sA(i,f):Pq(i,c,f,l)}switch(a){case"input":YB(i,s);break;case"textarea":xye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Dw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Dw(i,!!s.multiple,s.defaultValue,!0):Dw(i,!!s.multiple,s.multiple?[]:"",!1))}i[pA]=s}catch(m){Wi(e,e.return,m)}}break;case 6:if(rf(t,e),Ed(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Wi(e,e.return,m)}}break;case 3:if(rf(t,e),Ed(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lA(t.containerInfo)}catch(m){Wi(e,e.return,m)}break;case 4:rf(t,e),Ed(e);break;case 13:rf(t,e),Ed(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fW=as())),r&4&&Ise(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ua=(l=ua)||c,rf(t,e),ua=l):rf(t,e),Ed(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:lC(4,d,d.return);break;case 1:yw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Wi(r,n,m)}}break;case 5:yw(d,d.return);break;case 22:if(d.memoizedState!==null){Rse(f);continue}}h!==null?(h.return=d,xt=h):Rse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Cye("display",o))}catch(m){Wi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Wi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rf(t,e),Ed(e),r&4&&Ise(e);break;case 21:break;default:rf(t,e),Ed(e)}}function Ed(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(J1e(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(sA(i,""),r.flags&=-33);var s=Ase(e);kU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ase(e);IU(e,a,o);break;default:throw Error(tt(161))}}catch(u){Wi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Z9e(e,t,n){xt=e,tve(e)}function tve(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||mN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ua;a=mN;var l=ua;if(mN=o,(ua=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?Nse(i):u!==null?(u.return=o,xt=u):Nse(i);for(;s!==null;)xt=s,tve(s),s=s.sibling;xt=i,mN=a,ua=l}kse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):kse(e)}}function kse(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||sL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ua)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&hse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&lA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ua||t.flags&512&&AU(t)}catch(d){Wi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Rse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Nse(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sL(4,t)}catch(u){Wi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Wi(t,i,u)}}var s=t.return;try{AU(t)}catch(u){Wi(t,s,u)}break;case 5:var o=t.return;try{AU(t)}catch(u){Wi(t,o,u)}}}catch(u){Wi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var eBe=Math.ceil,RO=Vm.ReactCurrentDispatcher,lW=Vm.ReactCurrentOwner,kc=Vm.ReactCurrentBatchConfig,ur=0,uo=null,xs=null,Po=0,gl=0,vw=Ty(0),$s=0,_A=null,Fv=0,oL=0,cW=0,cC=null,Cu=null,fW=0,CE=1/0,Cp=null,NO=!1,RU=null,g0=null,gN=!1,Qg=null,PO=0,fC=0,NU=null,eD=-1,tD=0;function Ka(){return ur&6?as():eD!==-1?eD:eD=as()}function y0(e){return e.mode&1?ur&2&&Po!==0?Po&-Po:L9e.transition!==null?(tD===0&&(tD=jye()),tD):(e=$r,e!==0||(e=window.event,e=e===void 0?16:Wye(e.type)),e):1}function jf(e,t,n,r){if(50<fC)throw fC=0,NU=null,Error(tt(185));YI(e,n,r),(!(ur&2)||e!==uo)&&(e===uo&&(!(ur&2)&&(oL|=n),$s===4&&Ug(e,Po)),zu(e,r),n===1&&ur===0&&!(t.mode&1)&&(CE=as()+500,nL&&Cy()))}function zu(e,t){var n=e.callbackNode;L8e(e,t);var r=mO(e,e===uo?Po:0);if(r===0)n!==null&&Bie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Bie(n),t===1)e.tag===0?M9e(Pse.bind(null,e)):f1e(Pse.bind(null,e)),P9e(function(){!(ur&6)&&Cy()}),n=null;else{switch(Bye(r)){case 1:n=Lq;break;case 4:n=Lye;break;case 16:n=pO;break;case 536870912:n=Fye;break;default:n=pO}n=lve(n,nve.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nve(e,t){if(eD=-1,tD=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(Fw()&&e.callbackNode!==n)return null;var r=mO(e,e===uo?Po:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=DO(e,r);else{t=r;var i=ur;ur|=2;var s=ive();(uo!==e||Po!==t)&&(Cp=null,CE=as()+500,wv(e,t));do try{rBe();break}catch(a){rve(e,a)}while(!0);Xq(),RO.current=s,ur=i,xs!==null?t=0:(uo=null,Po=0,t=$s)}if(t!==0){if(t===2&&(i=iU(e),i!==0&&(r=i,t=PU(e,i))),t===1)throw n=_A,wv(e,0),Ug(e,r),zu(e,as()),n;if(t===6)Ug(e,r);else{if(i=e.current.alternate,!(r&30)&&!tBe(i)&&(t=DO(e,r),t===2&&(s=iU(e),s!==0&&(r=s,t=PU(e,s))),t===1))throw n=_A,wv(e,0),Ug(e,r),zu(e,as()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:C1(e,Cu,Cp);break;case 3:if(Ug(e,r),(r&130023424)===r&&(t=fW+500-as(),10<t)){if(mO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ka(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=dU(C1.bind(null,e,Cu,Cp),t);break}C1(e,Cu,Cp);break;case 4:if(Ug(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ff(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=as()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eBe(r/1960))-r,10<r){e.timeoutHandle=dU(C1.bind(null,e,Cu,Cp),r);break}C1(e,Cu,Cp);break;case 5:C1(e,Cu,Cp);break;default:throw Error(tt(329))}}}return zu(e,as()),e.callbackNode===n?nve.bind(null,e):null}function PU(e,t){var n=cC;return e.current.memoizedState.isDehydrated&&(wv(e,t).flags|=256),e=DO(e,t),e!==2&&(t=Cu,Cu=n,t!==null&&DU(t)),e}function DU(e){Cu===null?Cu=e:Cu.push.apply(Cu,e)}function tBe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Yf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ug(e,t){for(t&=~cW,t&=~oL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ff(t),r=1<<n;e[n]=-1,t&=~r}}function Pse(e){if(ur&6)throw Error(tt(327));Fw();var t=mO(e,0);if(!(t&1))return zu(e,as()),null;var n=DO(e,t);if(e.tag!==0&&n===2){var r=iU(e);r!==0&&(t=r,n=PU(e,r))}if(n===1)throw n=_A,wv(e,0),Ug(e,t),zu(e,as()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,C1(e,Cu,Cp),zu(e,as()),null}function dW(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(CE=as()+500,nL&&Cy())}}function jv(e){Qg!==null&&Qg.tag===0&&!(ur&6)&&Fw();var t=ur;ur|=1;var n=kc.transition,r=$r;try{if(kc.transition=null,$r=1,e)return e()}finally{$r=r,kc.transition=n,ur=t,!(ur&6)&&Cy()}}function hW(){gl=vw.current,pi(vw)}function wv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,N9e(n)),xs!==null)for(n=xs.return;n!==null;){var r=n;switch(Gq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_O();break;case 3:SE(),pi(Bu),pi(_a),nW();break;case 5:tW(r);break;case 4:SE();break;case 13:pi(Oi);break;case 19:pi(Oi);break;case 10:Qq(r.type._context);break;case 22:case 23:hW()}n=n.return}if(uo=e,xs=e=v0(e.current,null),Po=gl=t,$s=0,_A=null,cW=oL=Fv=0,Cu=cC=null,tv!==null){for(t=0;t<tv.length;t++)if(n=tv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}tv=null}return e}function rve(e,t){do{var n=xs;try{if(Xq(),QP.current=kO,IO){for(var r=Mi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}IO=!1}if(Lv=0,Qs=ks=Mi=null,uC=!1,yA=0,lW.current=null,n===null||n.return===null){$s=1,_A=t,xs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Po,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=bse(o);if(h!==null){h.flags&=-257,_se(h,o,a,s,t),h.mode&1&&vse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){vse(s,l,t),pW();break e}u=Error(tt(426))}}else if(Ti&&a.mode&1){var g=bse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),_se(g,o,a,s,t),Yq(TE(u,a));break e}}s=u=TE(u,a),$s!==4&&($s=2),cC===null?cC=[s]:cC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=B1e(s,u,t);dse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(g0===null||!g0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=U1e(s,a,t);dse(s,E);break e}}s=s.return}while(s!==null)}ove(n)}catch(w){t=w,xs===n&&n!==null&&(xs=n=n.return);continue}break}while(!0)}function ive(){var e=RO.current;return RO.current=kO,e===null?kO:e}function pW(){($s===0||$s===3||$s===2)&&($s=4),uo===null||!(Fv&268435455)&&!(oL&268435455)||Ug(uo,Po)}function DO(e,t){var n=ur;ur|=2;var r=ive();(uo!==e||Po!==t)&&(Cp=null,wv(e,t));do try{nBe();break}catch(i){rve(e,i)}while(!0);if(Xq(),ur=n,RO.current=r,xs!==null)throw Error(tt(261));return uo=null,Po=0,$s}function nBe(){for(;xs!==null;)sve(xs)}function rBe(){for(;xs!==null&&!I8e();)sve(xs)}function sve(e){var t=uve(e.alternate,e,gl);e.memoizedProps=e.pendingProps,t===null?ove(e):xs=t,lW.current=null}function ove(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=X9e(n,t),n!==null){n.flags&=32767,xs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$s=6,xs=null;return}}else if(n=K9e(n,t,gl),n!==null){xs=n;return}if(t=t.sibling,t!==null){xs=t;return}xs=t=e}while(t!==null);$s===0&&($s=5)}function C1(e,t,n){var r=$r,i=kc.transition;try{kc.transition=null,$r=1,iBe(e,t,n,r)}finally{kc.transition=i,$r=r}return null}function iBe(e,t,n,r){do Fw();while(Qg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(F8e(e,s),e===uo&&(xs=uo=null,Po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gN||(gN=!0,lve(pO,function(){return Fw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kc.transition,kc.transition=null;var o=$r;$r=1;var a=ur;ur|=4,lW.current=null,J9e(e,n),eve(n,e),S9e(cU),gO=!!lU,cU=lU=null,e.current=n,Z9e(n),k8e(),ur=a,$r=o,kc.transition=s}else e.current=n;if(gN&&(gN=!1,Qg=e,PO=i),s=e.pendingLanes,s===0&&(g0=null),P8e(n.stateNode),zu(e,as()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(NO)throw NO=!1,e=RU,RU=null,e;return PO&1&&e.tag!==0&&Fw(),s=e.pendingLanes,s&1?e===NU?fC++:(fC=0,NU=e):fC=0,Cy(),null}function Fw(){if(Qg!==null){var e=Bye(PO),t=kc.transition,n=$r;try{if(kc.transition=null,$r=16>e?16:e,Qg===null)var r=!1;else{if(e=Qg,Qg=null,PO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:lC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(Q1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,xt=_;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sL(9,a)}}catch(w){Wi(a,a.return,w)}if(a===o){xt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,xt=E;break e}xt=a.return}}if(ur=i,Cy(),oh&&typeof oh.onPostCommitFiberRoot=="function")try{oh.onPostCommitFiberRoot(QM,e)}catch{}r=!0}return r}finally{$r=n,kc.transition=t}}return!1}function Dse(e,t,n){t=TE(n,t),t=B1e(e,t,1),e=m0(e,t,1),t=Ka(),e!==null&&(YI(e,1,t),zu(e,t))}function Wi(e,t,n){if(e.tag===3)Dse(e,e,n);else for(;t!==null;){if(t.tag===3){Dse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(g0===null||!g0.has(r))){e=TE(n,e),e=U1e(t,e,1),t=m0(t,e,1),e=Ka(),t!==null&&(YI(t,1,e),zu(t,e));break}}t=t.return}}function sBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ka(),e.pingedLanes|=e.suspendedLanes&n,uo===e&&(Po&n)===n&&($s===4||$s===3&&(Po&130023424)===Po&&500>as()-fW?wv(e,0):cW|=n),zu(e,t)}function ave(e,t){t===0&&(e.mode&1?(t=oN,oN<<=1,!(oN&130023424)&&(oN=4194304)):t=1);var n=Ka();e=ym(e,t),e!==null&&(YI(e,t,n),zu(e,n))}function oBe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ave(e,n)}function aBe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),ave(e,n)}var uve;uve=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bu.current)Ou=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ou=!1,Y9e(e,t,n);Ou=!!(e.flags&131072)}else Ou=!1,Ti&&t.flags&1048576&&d1e(t,xO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ZP(e,t),e=t.pendingProps;var i=wE(t,_a.current);Lw(t,n),i=iW(null,t,r,e,i,n);var s=sW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Uu(r)?(s=!0,wO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zq(t),i.updater=iL,t.stateNode=i,i._reactInternals=t,bU(t,r,e,n),t=EU(null,t,r,!0,s,n)):(t.tag=0,Ti&&s&&Wq(t),La(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ZP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=lBe(r),e=mf(r,e),i){case 0:t=wU(null,t,r,e,n);break e;case 1:t=xse(null,t,r,e,n);break e;case 11:t=wse(null,t,r,e,n);break e;case 14:t=Ese(null,t,r,mf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),wU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),xse(e,t,r,i,n);case 3:e:{if(q1e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,v1e(e,t),CO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=TE(Error(tt(423)),t),t=Sse(e,t,r,n,i);break e}else if(r!==i){i=TE(Error(tt(424)),t),t=Sse(e,t,r,n,i);break e}else for(xl=p0(t.stateNode.containerInfo.firstChild),Rl=t,Ti=!0,wf=null,n=g1e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(EE(),r===i){t=vm(e,t,n);break e}La(e,t,r,n)}t=t.child}return t;case 5:return b1e(t),e===null&&gU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,fU(r,i)?o=null:s!==null&&fU(r,s)&&(t.flags|=32),H1e(e,t),La(e,t,o,n),t.child;case 6:return e===null&&gU(t),null;case 13:return W1e(e,t,n);case 4:return eW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xE(t,null,r,n):La(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),wse(e,t,r,i,n);case 7:return La(e,t,t.pendingProps,n),t.child;case 8:return La(e,t,t.pendingProps.children,n),t.child;case 12:return La(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ni(SO,r._currentValue),r._currentValue=o,s!==null)if(Yf(s.value,o)){if(s.children===i.children&&!Bu.current){t=vm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=nm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),yU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),yU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}La(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Lw(t,n),i=Pc(i),r=r(i),t.flags|=1,La(e,t,r,n),t.child;case 14:return r=t.type,i=mf(r,t.pendingProps),i=mf(r.type,i),Ese(e,t,r,i,n);case 15:return z1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),ZP(e,t),t.tag=1,Uu(r)?(e=!0,wO(t)):e=!1,Lw(t,n),j1e(t,r,i),bU(t,r,i,n),EU(null,t,r,!0,e,n);case 19:return G1e(e,t,n);case 22:return V1e(e,t,n)}throw Error(tt(156,t.tag))};function lve(e,t){return Mye(e,t)}function uBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sc(e,t,n,r){return new uBe(e,t,n,r)}function mW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lBe(e){if(typeof e=="function")return mW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oq)return 11;if(e===$q)return 14}return 2}function v0(e,t){var n=e.alternate;return n===null?(n=Sc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")mW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case uw:return Ev(n.children,i,s,t);case Dq:o=8,i|=8;break;case VB:return e=Sc(12,n,t,i|2),e.elementType=VB,e.lanes=s,e;case HB:return e=Sc(13,n,t,i),e.elementType=HB,e.lanes=s,e;case qB:return e=Sc(19,n,t,i),e.elementType=qB,e.lanes=s,e;case bye:return aL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yye:o=10;break e;case vye:o=9;break e;case Oq:o=11;break e;case $q:o=14;break e;case Rg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Sc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Ev(e,t,n,r){return e=Sc(7,e,r,t),e.lanes=n,e}function aL(e,t,n,r){return e=Sc(22,e,r,t),e.elementType=bye,e.lanes=n,e.stateNode={isHidden:!1},e}function yj(e,t,n){return e=Sc(6,e,null,t),e.lanes=n,e}function vj(e,t,n){return t=Sc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J5(0),this.expirationTimes=J5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gW(e,t,n,r,i,s,o,a,u){return e=new cBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Sc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zq(s),e}function fBe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cve(e){if(!e)return F0;e=e._reactInternals;e:{if(Ib(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Uu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Uu(n))return c1e(e,n,t)}return t}function fve(e,t,n,r,i,s,o,a,u){return e=gW(n,r,!0,e,i,s,o,a,u),e.context=cve(null),n=e.current,r=Ka(),i=y0(n),s=nm(r,i),s.callback=t??null,m0(n,s,i),e.current.lanes=i,YI(e,i,r),zu(e,r),e}function uL(e,t,n,r){var i=t.current,s=Ka(),o=y0(i);return n=cve(n),t.context===null?t.context=n:t.pendingContext=n,t=nm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=m0(i,t,o),e!==null&&(jf(e,i,o,s),XP(e,i,o)),o}function OO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ose(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yW(e,t){Ose(e,t),(e=e.alternate)&&Ose(e,t)}function dBe(){return null}var dve=typeof reportError=="function"?reportError:function(e){console.error(e)};function vW(e){this._internalRoot=e}lL.prototype.render=vW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));uL(e,t,null,null)};lL.prototype.unmount=vW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jv(function(){uL(null,e,null,null)}),t[gm]=null}};function lL(e){this._internalRoot=e}lL.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bg.length&&t!==0&&t<Bg[n].priority;n++);Bg.splice(n,0,e),n===0&&qye(e)}};function bW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $se(){}function hBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=OO(o);s.call(l)}}var o=fve(t,r,e,0,null,!1,!1,"",$se);return e._reactRootContainer=o,e[gm]=o.current,dA(e.nodeType===8?e.parentNode:e),jv(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=OO(u);a.call(l)}}var u=gW(e,0,!1,null,null,!1,!1,"",$se);return e._reactRootContainer=u,e[gm]=u.current,dA(e.nodeType===8?e.parentNode:e),jv(function(){uL(t,u,n,r)}),u}function fL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=OO(o);a.call(u)}}uL(t,o,e,i)}else o=hBe(n,t,e,i,r);return OO(o)}Uye=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=h2(t.pendingLanes);n!==0&&(Fq(t,n|1),zu(t,as()),!(ur&6)&&(CE=as()+500,Cy()))}break;case 13:jv(function(){var r=ym(e,1);if(r!==null){var i=Ka();jf(r,e,1,i)}}),yW(e,1)}};jq=function(e){if(e.tag===13){var t=ym(e,134217728);if(t!==null){var n=Ka();jf(t,e,134217728,n)}yW(e,134217728)}};zye=function(e){if(e.tag===13){var t=y0(e),n=ym(e,t);if(n!==null){var r=Ka();jf(n,e,t,r)}yW(e,t)}};Vye=function(){return $r};Hye=function(e,t){var n=$r;try{return $r=e,t()}finally{$r=n}};tU=function(e,t,n){switch(t){case"input":if(YB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=tL(r);if(!i)throw Error(tt(90));wye(r),YB(r,i)}}}break;case"textarea":xye(e,n);break;case"select":t=n.value,t!=null&&Dw(e,!!n.multiple,t,!1)}};Rye=dW;Nye=jv;var pBe={usingClientEntryPoint:!1,Events:[XI,dw,tL,Iye,kye,dW]},yT={findFiberByHostInstance:ev,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mBe={bundleType:yT.bundleType,version:yT.version,rendererPackageName:yT.rendererPackageName,rendererConfig:yT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Oye(e),e===null?null:e.stateNode},findFiberByHostInstance:yT.findFiberByHostInstance||dBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yN.isDisabled&&yN.supportsFiber)try{QM=yN.inject(mBe),oh=yN}catch{}}Ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pBe;Ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bW(t))throw Error(tt(200));return fBe(e,t,null,n)};Ql.createRoot=function(e,t){if(!bW(e))throw Error(tt(299));var n=!1,r="",i=dve;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=gW(e,1,!1,null,null,n,!1,r,i),e[gm]=t.current,dA(e.nodeType===8?e.parentNode:e),new vW(t)};Ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=Oye(t),e=e===null?null:e.stateNode,e};Ql.flushSync=function(e){return jv(e)};Ql.hydrate=function(e,t,n){if(!cL(t))throw Error(tt(200));return fL(null,e,t,!0,n)};Ql.hydrateRoot=function(e,t,n){if(!bW(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dve;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fve(t,null,e,1,n??null,i,!1,s,o),e[gm]=t.current,dA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new lL(t)};Ql.render=function(e,t,n){if(!cL(t))throw Error(tt(200));return fL(null,e,t,!1,n)};Ql.unmountComponentAtNode=function(e){if(!cL(e))throw Error(tt(40));return e._reactRootContainer?(jv(function(){fL(null,null,e,!1,function(){e._reactRootContainer=null,e[gm]=null})}),!0):!1};Ql.unstable_batchedUpdates=dW;Ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!cL(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return fL(e,t,n,!1,r)};Ql.version="18.3.1-next-f1338f8080-20240426";function hve(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hve)}catch(e){console.error(e)}}hve(),hye.exports=Ql;var JI=hye.exports;const m2=Xl(JI);var Mse=JI;UB.createRoot=Mse.createRoot,UB.hydrateRoot=Mse.hydrateRoot;var Bd=function(){return Bd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bd.apply(this,arguments)};function ZI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Mp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Lse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function gBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function rv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function bj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function dC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Lse=="function"?Lse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var rD="right-scroll-bar-position",iD="width-before-scroll-bar",yBe="with-scroll-bars-hidden",vBe="--removed-body-scroll-bar-size";function _j(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bBe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var _Be=typeof window<"u"?k.useLayoutEffect:k.useEffect,Fse=new WeakMap;function wBe(e,t){var n=bBe(null,function(r){return e.forEach(function(i){return _j(i,r)})});return _Be(function(){var r=Fse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||_j(a,null)}),s.forEach(function(a){i.has(a)||_j(a,o)})}Fse.set(n,e)},[e]),n}function EBe(e){return e}function xBe(e,t){t===void 0&&(t=EBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function SBe(e){e===void 0&&(e={});var t=xBe(null);return t.options=Bd({async:!0,ssr:!1},e),t}var pve=function(e){var t=e.sideCar,n=ZI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Bd({},n))};pve.isSideCarExport=!0;function TBe(e,t){return e.useMedium(t),pve}var mve=SBe(),wj=function(){},dL=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:wj,onWheelCapture:wj,onTouchMoveCapture:wj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,_=ZI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,w=wBe([n,t]),S=Bd(Bd({},_),i);return k.createElement(k.Fragment,null,c&&k.createElement(E,{sideCar:mve,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?k.cloneElement(k.Children.only(a),Bd(Bd({},S),{ref:w})):k.createElement(y,Bd({},S,{className:u,ref:w}),a))});dL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dL.classNames={fullWidth:iD,zeroRight:rD};var CBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ABe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=CBe();return t&&e.setAttribute("nonce",t),e}function IBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var RBe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ABe())&&(IBe(t,n),kBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},NBe=function(){var e=RBe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},gve=function(){var e=NBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},PBe={left:0,top:0,right:0,gap:0},Ej=function(e){return parseInt(e||"",10)||0},DBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Ej(n),Ej(r),Ej(i)]},OBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return PBe;var t=DBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$Be=gve(),jw="data-scroll-locked",MBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(yBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(jw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(iD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(rD," .").concat(rD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(iD," .").concat(iD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(jw,`] {
    `).concat(vBe,": ").concat(a,`px;
  }
`)},jse=function(){var e=parseInt(document.body.getAttribute(jw)||"0",10);return isFinite(e)?e:0},LBe=function(){k.useEffect(function(){return document.body.setAttribute(jw,(jse()+1).toString()),function(){var e=jse()-1;e<=0?document.body.removeAttribute(jw):document.body.setAttribute(jw,e.toString())}},[])},FBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;LBe();var s=k.useMemo(function(){return OBe(i)},[i]);return k.createElement($Be,{styles:MBe(s,!t,i,n?"":"!important")})},OU=!1;if(typeof window<"u")try{var vN=Object.defineProperty({},"passive",{get:function(){return OU=!0,!0}});window.addEventListener("test",vN,vN),window.removeEventListener("test",vN,vN)}catch{OU=!1}var b_=OU?{passive:!1}:!1,jBe=function(e){return e.tagName==="TEXTAREA"},yve=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jBe(e)&&n[t]==="visible")},BBe=function(e){return yve(e,"overflowY")},UBe=function(e){return yve(e,"overflowX")},Bse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=vve(e,r);if(i){var s=bve(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},VBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},vve=function(e,t){return e==="v"?BBe(t):UBe(t)},bve=function(e,t){return e==="v"?zBe(t):VBe(t)},HBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},qBe=function(e,t,n,r,i){var s=HBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=bve(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&vve(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},bN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Use=function(e){return[e.deltaX,e.deltaY]},zse=function(e){return e&&"current"in e?e.current:e},WBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},GBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},YBe=0,__=[];function KBe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(YBe++)[0],s=k.useState(gve)[0],o=k.useRef(e);k.useEffect(function(){o.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=gBe([e.lockRef.current],(e.shards||[]).map(zse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=bN(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-y[0],E="deltaY"in m?m.deltaY:v[1]-y[1],w,S=m.target,x=Math.abs(_)>Math.abs(E)?"h":"v";if("touches"in m&&x==="h"&&S.type==="range")return!1;var C=Bse(x,S);if(!C)return!0;if(C?w=x:(w=x==="v"?"h":"v",C=Bse(x,S)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||E)&&(r.current=w),!w)return!0;var A=r.current||w;return qBe(A,g,m,A==="h"?_:E,!0)},[]),u=k.useCallback(function(m){var g=m;if(!(!__.length||__[__.length-1]!==s)){var y="deltaY"in g?Use(g):bN(g),v=t.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&WBe(w.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(zse).filter(Boolean).filter(function(w){return w.contains(g.target)}),E=_.length>0?a(g,_[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=k.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:XBe(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(E){return E!==_})},1)},[]),c=k.useCallback(function(m){n.current=bN(m),r.current=void 0},[]),f=k.useCallback(function(m){l(m.type,Use(m),m.target,a(m,e.lockRef.current))},[]),d=k.useCallback(function(m){l(m.type,bN(m),m.target,a(m,e.lockRef.current))},[]);k.useEffect(function(){return __.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,b_),document.addEventListener("touchmove",u,b_),document.addEventListener("touchstart",c,b_),function(){__=__.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,b_),document.removeEventListener("touchmove",u,b_),document.removeEventListener("touchstart",c,b_)}},[]);var h=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:GBe(i)}):null,h?k.createElement(FBe,{gapMode:e.gapMode}):null)}function XBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const QBe=TBe(mve,KBe);var hL=k.forwardRef(function(e,t){return k.createElement(dL,Bd({},e,{ref:t,sideCar:QBe}))});hL.classNames=dL.classNames;function Qr(e){return Object.keys(e)}function xj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function _W(e,t){const n={...e},r=t;return xj(e)&&xj(t)&&Object.keys(t).forEach(i=>{xj(r[i])&&i in e?n[i]=_W(n[i],r[i]):n[i]=r[i]}),n}function JBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function ZBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function wA(e){const t=ZBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Sj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function _ve(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?Sj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?Sj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?Sj(s):s}}return r}return n}const Te=_ve("rem",{shouldScale:!0}),$O=_ve("em");function Ay(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function wve(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Iy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function po(e){const t=k.createContext(null);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>{const i=k.useContext(t);if(i===null)throw new Error(e);return i}]}function Hx(e=null){const t=k.createContext(e);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>k.useContext(t)]}function MO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function LO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function eUe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function tUe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function nUe(e,t,n){return LO(e,n)===LO(t,n)}function wW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=LO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>nUe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=tUe(l,u,r),f=eUe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const rUe={app:100,modal:200,popover:300,overlay:400,max:9999};function Zl(e){return rUe[e]}const iUe=()=>{};function sUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||iUe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function nn(e,t="size",n=!0){if(e!==void 0)return wve(e)?n?Te(e):e:`var(--${t}-${e})`}function ls(e){return nn(e,"mantine-spacing")}function zr(e){return e===void 0?"var(--mantine-radius-default)":nn(e,"mantine-radius")}function lo(e){return nn(e,"mantine-font-size")}function Eve(e){return nn(e,"mantine-line-height",!1)}function EW(e){if(e)return nn(e,"mantine-shadow",!1)}function qp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function xW(e,t){return e in t.breakpoints?wA(t.breakpoints[e]):wA(e)}function EA(e,t){const n=e.map(r=>({value:r,px:xW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Rf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function oUe(e,t,n){var r;return n?Array.from(((r=LO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function aUe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Zd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Bw(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function B1(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function pL(e,t){const n=B1(e),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Vse=["mousedown","touchstart"];function uUe(e,t,n){const r=k.useRef();return k.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Vse).forEach(s=>document.addEventListener(s,i)),()=>{(t||Vse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function lUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function cUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function fUe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=k.useState(n?t:cUe(e)),s=k.useRef();return k.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),lUe(s.current,o=>i(o.matches))},[e]),r}const kb=typeof document<"u"?k.useLayoutEffect:k.useEffect;function xh(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function xve({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return xh(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function dUe(e,t="body > :not(script)"){const n=Bw(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const hUe=/input|select|textarea|button|object/,Sve="a, input, select, textarea, button, object, [tabindex]";function pUe(e){return e.style.display==="none"}function mUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(pUe(n))return!1;n=n.parentNode}return!0}function Tve(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function $U(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Tve(e));return(hUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&mUe(e)}function Cve(e){const t=Tve(e);return(Number.isNaN(t)||t>=0)&&$U(e)}function gUe(e){return Array.from(e.querySelectorAll(Sve)).filter(Cve)}function yUe(e,t){const n=gUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function vUe(e=!0){const t=k.useRef(),n=k.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Sve));o=a.find(Cve)||a.find($U)||null,!o&&$U(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=k.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=dUe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&yUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const bUe=e=>(e+1)%1e6;function _Ue(){const[,e]=k.useReducer(bUe,0);return e}const wUe=wr.useId||(()=>{});function EUe(){const e=wUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ta(e){const t=EUe(),[n,r]=k.useState(t);return kb(()=>{r(Bw())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Ave(e,t,n){k.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function SW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Ive(...e){return t=>{e.forEach(n=>SW(n,t))}}function ps(...e){return k.useCallback(Ive(...e),e)}function kve(e,t,n="ltr"){const r=k.useRef(null),i=k.useRef(!1),s=k.useRef(!1),o=k.useRef(0),[a,u]=k.useState(!1);return k.useEffect(()=>{i.current=!0},[]),k.useEffect(()=>{var v,_;const l=({x:E,y:w})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const x=Zd((E-S.left)/S.width,0,1);e({x:n==="ltr"?x:1-x,y:Zd((w-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),y(E)},y=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Cs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=k.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function mL(e,t){return fUe("(prefers-reduced-motion: reduce)",e,t)}const xUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Bf(e){const t=k.useRef(0),n=k.useRef(null),[r,i]=k.useState(xUe),s=k.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return k.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function SUe(e){const[t,{width:n,height:r}]=Bf(e);return{ref:t,width:n,height:r}}function TUe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function CUe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function AUe(e){return t=>CUe(TUe(e),t)}function IUe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{AUe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function gL(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=k.useState(e),o=k.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=k.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=k.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function kUe(e,t,n={autoInvoke:!1}){const r=k.useRef(null),i=k.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=k.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return k.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function RUe(e,t,n){const r=k.useRef(),i=k.useRef(null);return k.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function NUe(){const[e,t]=k.useState(!1);return k.useEffect(()=>t(!0),[]),e}function PUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function DUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});kb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>PUe(`${e}:${String(r)}`,i[0])}return[t,n]}var OUe={};function Rve(){return typeof process<"u"&&OUe?"production":"development"}function Nve(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Nve(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Zi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Nve(e))&&(r&&(r+=" "),r+=t);return r}const $Ue={};function MUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Zi(t[r],i):t[r]=i})}),t}function yL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||$Ue);return MUe(s)}function FO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Pve=k.createContext(null);function ky(){const e=k.useContext(Pve);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function LUe(){return ky().cssVariablesResolver}function FUe(){return ky().classNamesPrefix}function TW(){return ky().getStyleNonce}function jUe(){return ky().withStaticClasses}function BUe(){return ky().headless}function UUe(){var e;return(e=ky().stylesTransform)==null?void 0:e.sx}function zUe(){var e;return(e=ky().stylesTransform)==null?void 0:e.styles}function VUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function HUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function qUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function WUe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function CW(e){return VUe(e)?HUe(e):e.startsWith("rgb")?qUe(e):e.startsWith("hsl")?WUe(e):{r:0,g:0,b:0,a:1}}function _N(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=CW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function xA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Tj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function GUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function YUe(e){if(e.startsWith("oklch("))return(GUe(e)||0)/100;const{r:t,g:n,b:r}=CW(e),i=t/255,s=n/255,o=r/255,a=Tj(i),u=Tj(s),l=Tj(o);return .2126*a+.7152*u+.0722*l}function vT(e,t=.179){return e.startsWith("var(")?!1:YUe(e)>t}function zh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:vT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:vT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:vT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][xA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:vT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:vT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Mr(e,t){const n=zh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function MU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Mr(n.from,t),i=Mr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Rd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=CW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const w_=Rd,KUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=zh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:_N(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Rd(a,.1),hover:Rd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:Rd(e,.1),hover:Rd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Rd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Rd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Rd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:Rd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:_N(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:_N(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:_N(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:MU(r,t),hover:MU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},XUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Hse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",AW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:XUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:KUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Hse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Hse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function qse(e){return e==="auto"||e==="dark"||e==="light"}function QUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return qse(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&qse(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const JUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Wse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Cj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Gse(e){if(!(e.primaryColor in e.colors))throw new Error(JUe);if(typeof e.primaryShade=="object"&&(!Cj(e.primaryShade.dark)||!Cj(e.primaryShade.light)))throw new Error(Wse);if(typeof e.primaryShade=="number"&&!Cj(e.primaryShade))throw new Error(Wse)}function ZUe(e,t){var r;if(!t)return Gse(e),e;const n=_W(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Gse(n),n}const IW=k.createContext(null),e7e=()=>k.useContext(IW)||AW;function ms(){const e=k.useContext(IW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Dve({theme:e,children:t,inherit:n=!0}){const r=e7e(),i=k.useMemo(()=>ZUe(n?r:AW,e),[e,r,n]);return b.jsx(IW.Provider,{value:i,children:t})}Dve.displayName="@mantine/core/MantineThemeProvider";function t7e(){const e=ms(),t=TW(),n=Qr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=wA(e.breakpoints[i]),a=s?`${o-.1}px`:$O(o-.1),u=s?`${o}px`:$O(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return b.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Aj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Ij(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function n7e(e,t){const n=Aj(e.variables),r=n?Ij(t,n):"",i=Aj(e.dark),s=i?Ij(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Aj(e.light),a=o?Ij(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Ry({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&zh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Yse(e,t){return Ry({color:e.colors[e.primaryColor][xA(e,t)],theme:e,autoContrast:null})}function wN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=xA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:w_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:w_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:w_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=xA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:w_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:w_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:w_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function r7e(e){return Array.isArray(e)?e:Array(10).fill(e)}function i7e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function E_(e,t,n){Qr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Ove=e=>{const t=xA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Yse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Yse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};E_(r.variables,e.breakpoints,"breakpoint"),E_(r.variables,e.spacing,"spacing"),E_(r.variables,e.fontSizes,"font-size"),E_(r.variables,e.lineHeights,"line-height"),E_(r.variables,e.shadows,"shadow"),E_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Qr(e.colors).forEach(s=>{const o=e.colors[s];if(i7e(o)){Object.assign(r.light,wN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,wN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,wN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,wN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Qr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function s7e({theme:e,generator:t}){const n=Ove(e),r=t==null?void 0:t(e);return r?_W(n,r):n}const kj=Ove(AW);function o7e(e){const t={variables:{},light:{},dark:{}};return Qr(e.variables).forEach(n=>{kj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Qr(e.light).forEach(n=>{kj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Qr(e.dark).forEach(n=>{kj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function a7e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function $ve({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ms(),r=TW(),i=LUe(),s=s7e({theme:n,generator:i}),o=e===":root"&&t,a=o?o7e(s):s,u=n7e(a,e);return u?b.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":a7e(e)}`}}):null}$ve.displayName="@mantine/CssVariables";function u7e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function x_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function l7e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=k.useRef(),[s,o]=k.useState(()=>e.get(t)),a=r||s,u=k.useCallback(c=>{r||(x_(c,n),o(c),e.set(c))},[e.set,a,r]),l=k.useCallback(()=>{o(t),x_(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),kb(()=>{x_(e.get(t),n)},[]),k.useEffect(()=>{var f;if(r)return x_(r,n),()=>{};r===void 0&&x_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&x_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function c7e({respectReducedMotion:e,getRootElement:t}){kb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}u7e();function Mve({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=QUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=l7e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return c7e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),b.jsx(Pve.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:b.jsxs(Dve,{theme:e,children:[o&&b.jsx($ve,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&b.jsx(t7e,{}),t]})})}Mve.displayName="@mantine/core/MantineProvider";function Hm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ms();return{resolvedClassNames:yL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:FO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const f7e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function d7e({theme:e,options:t,unstyled:n}){return Zi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||f7e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function h7e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return yL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Kse({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return yL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function p7e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function m7e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function g7e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function y7e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=yL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function v7e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function b7e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Zi(d7e({theme:e,options:t,unstyled:a||h}),y7e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),v7e({options:t,classes:o,selector:r,unstyled:a}),Kse({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Kse({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),h7e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),p7e({rootSelector:l,selector:r,className:u}),m7e({selector:r,classes:o,unstyled:a||h}),d&&!h&&g7e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function _7e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return FO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function LU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...LU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function w7e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Ay(n[r])}}),t),{})}function E7e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=w7e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function x7e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&_7e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&FO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&FO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...E7e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?LU({style:u,theme:e}):null,...LU({style:r==null?void 0:r.style,theme:e})}}function S7e({props:e,stylesCtx:t,themeName:n}){var o;const r=ms(),i=(o=zUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function dt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ms(),h=FUe(),p=jUe(),m=BUe(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:v}=S7e({props:n,stylesCtx:r,themeName:g});return(_,E)=>({className:b7e({theme:d,options:E,themeName:g,selector:_,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([E==null?void 0:E.styles,l])}),style:x7e({theme:d,themeName:g,selector:_,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function qx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=ms(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Ay(n)}}function Rj(e){return Qr(e).reduce((t,n)=>e[n]!==void 0?`${t}${JBe(n)}:${e[n]};`:t,"").trim()}function T7e({selector:e,styles:t,media:n,container:r}){const i=t?Rj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Rj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Rj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Rb(e){const t=TW();return b.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:T7e(e)}})}function Nb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:E,c:w,opacity:S,ff:x,fz:C,fw:A,lts:I,ta:R,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:z,h:H,mih:P,mah:U,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Xe,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...ze}=e;return{styleProps:Ay({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:E,c:w,opacity:S,ff:x,fz:C,fw:A,lts:I,ta:R,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:z,h:H,mih:P,mah:U,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Xe,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:ze}}const C7e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function kW(e,t){const n=zh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function A7e(e,t){const n=zh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:kW(e,t)}function I7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),r7e.length>0&&(s+=` ${kW(i.join(" "),t)}`),s.trim()}return e}const Xse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function k7e(e){return typeof e=="string"&&e in Xse?Xse[e]:e}const R7e=["h1","h2","h3","h4","h5","h6"];function N7e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&R7e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function P7e(e){return e}const D7e=["h1","h2","h3","h4","h5","h6"];function O7e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&D7e.includes(e)?`var(--mantine-${e}-line-height)`:e}function $7e(e){return typeof e=="number"?Te(e):e}function M7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Nj={color:kW,textColor:A7e,fontSize:N7e,spacing:M7e,identity:P7e,size:$7e,lineHeight:O7e,fontFamily:k7e,border:I7e};function Qse(e){return e.replace("(min-width: ","").replace("em)","")}function L7e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Qse(i))-Number(Qse(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function F7e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function j7e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function B7e(e){return typeof e=="object"&&e!==null?Qr(e).filter(t=>t!=="base"):[]}function U7e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Lve({styleProps:e,data:t,theme:n}){return L7e(Qr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=j7e(e[i]);if(!F7e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Nj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=B7e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Nj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Nj[s.type](U7e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function ek(){return`__m__-${k.useId().replace(/:/g,"")}`}function RW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...RW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Fve(e){return e.startsWith("data-")?e:`data-${e}`}function z7e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Fve(n)]=e[n]),t},{})}function jve(e){return e?typeof e=="string"?{[Fve(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...jve(n)}),{}):z7e(e):null}function FU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...FU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function V7e({theme:e,style:t,vars:n,styleProps:r}){const i=FU(t,e),s=FU(n,e);return{...i,...s,...r}}const Bve=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=ms(),g=e||"div",{styleProps:y,rest:v}=Nb(h),_=UUe(),E=(C=_==null?void 0:_())==null?void 0:C(y.sx),w=ek(),S=Lve({styleProps:y,theme:m,data:C7e}),x={ref:p,style:V7e({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Zi(r,E,{[w]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":wve(o)?void 0:o||void 0,size:d,...jve(s),...v};return b.jsxs(b.Fragment,{children:[S.hasResponsiveStyles&&b.jsx(Rb,{selector:`.${w}`,styles:S.styles,media:S.media}),typeof f=="function"?f(x):b.jsx(g,{...x})]})});Bve.displayName="@mantine/core/Box";const me=Bve;function Uve(e){return e}function Me(e){const t=k.forwardRef(e);return t.extend=Uve,t}function zs(e){const t=k.forwardRef(e);return t.extend=Uve,t}const H7e=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Vh(){return k.useContext(H7e)}function q7e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Pj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const bT=typeof window<"u"&&window.requestAnimationFrame;function W7e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=k.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=k.useState(r?{}:o),l=p=>{JI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||q7e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}xh(()=>{typeof bT=="function"&&bT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),bT(()=>{const p=Pj(i);c({...f(p),height:p})})}:()=>{const p=Pj(i);c({...f(p),willChange:"height",height:p}),bT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Pj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Ive(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const G7e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},vL=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",G7e,e),c=ms(),f=mL(),h=(c.respectReducedMotion?f:!1)?0:i,p=W7e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?b.jsx(me,{...l,children:n}):null:b.jsx(me,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...RW(o,c)},ref:t,...l}),children:n})});vL.displayName="@mantine/core/Collapse";const[Y7e,qc]=po("ScrollArea.Root component was not found in tree");function AE(e,t){const n=B1(t);kb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const K7e=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=qc(),[s,o]=k.useState(0),[a,u]=k.useState(0),l=!!(s&&a);return AE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),AE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?b.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),X7e=k.forwardRef((e,t)=>{const n=qc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(K7e,{...e,ref:t}):null}),Q7e={scrollHideDelay:1e3,type:"hover"},zve=k.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",Q7e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=k.useState(null),[l,c]=k.useState(null),[f,d]=k.useState(null),[h,p]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(0),[_,E]=k.useState(0),[w,S]=k.useState(!1),[x,C]=k.useState(!1),A=ps(t,I=>u(I));return b.jsx(Y7e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:w,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:E},children:b.jsx(me,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});zve.displayName="@mantine/core/ScrollAreaRoot";function Vve(e,t){const n=e/t;return Number.isNaN(n)?0:n}function bL(e){const t=Vve(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Hve(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function J7e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Jse(e,t,n="ltr"){const r=bL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=J7e(e,u);return Hve([0,o],[0,a])(l)}function Z7e(e,t,n,r="ltr"){const i=bL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return Hve([u,l],f)(e)}function qve(e,t){return e>0&&e<t}function jO(e){return e?parseInt(e,10):0}function xv(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[eze,Wve]=po("ScrollAreaScrollbar was not found in tree"),Gve=k.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=qc(),[h,p]=k.useState(null),m=ps(t,C=>p(C)),g=k.useRef(null),y=k.useRef(""),{viewport:v}=d,_=n.content-n.viewport,E=B1(l),w=B1(a),S=pL(c,10),x=C=>{if(g.current){const A=C.clientX-g.current.left,I=C.clientY-g.current.top;u({x:A,y:I})}};return k.useEffect(()=>{const C=A=>{const I=A.target;(h==null?void 0:h.contains(I))&&E(A,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,_,E]),k.useEffect(w,[n,w]),AE(h,S),AE(d.content,S),b.jsx(eze,{value:{scrollbar:h,hasThumb:r,onThumbChange:B1(i),onThumbPointerUp:B1(s),onThumbPositionChange:w,onThumbPointerDown:B1(o)},children:b.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:xv(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x(C))}),onPointerMove:xv(e.onPointerMove,x),onPointerUp:xv(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),tze=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=qc(),[a,u]=k.useState(),l=k.useRef(null),c=ps(t,l,o.onScrollbarXChange);return k.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),b.jsx(Gve,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${bL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),qve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:jO(a.paddingLeft),paddingEnd:jO(a.paddingRight)}})}})}),nze=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=qc(),[a,u]=k.useState(),l=k.useRef(null),c=ps(t,l,o.onScrollbarYChange);return k.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),b.jsx(Gve,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${bL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),qve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:jO(a.paddingTop),paddingEnd:jO(a.paddingBottom)}})}})}),NW=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Vh(),s=qc(),o=k.useRef(null),a=k.useRef(0),[u,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Vve(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>Z7e(h,a.current,u,p);return n==="horizontal"?b.jsx(tze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Jse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?b.jsx(nze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Jse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Yve=k.forwardRef((e,t)=>{const n=qc(),{forceMount:r,...i}=e,[s,o]=k.useState(!1),a=e.orientation==="horizontal",u=pL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return AE(n.viewport,u),AE(n.content,u),r||s?b.jsx(NW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),rze=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=qc(),[s,o]=k.useState(!1);return k.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?b.jsx(Yve,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),ize=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=qc(),s=e.orientation==="horizontal",[o,a]=k.useState("hidden"),u=pL(()=>a("idle"),100);return k.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),k.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?b.jsx(NW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:xv(e.onPointerEnter,()=>a("interacting")),onPointerLeave:xv(e.onPointerLeave,()=>a("idle"))}):null}),Zse=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=qc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return k.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?b.jsx(rze,{...r,ref:t,forceMount:n}):i.type==="scroll"?b.jsx(ize,{...r,ref:t,forceMount:n}):i.type==="auto"?b.jsx(Yve,{...r,ref:t,forceMount:n}):i.type==="always"?b.jsx(NW,{...r,ref:t}):null});function sze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const oze=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=qc(),s=Wve(),{onThumbPositionChange:o}=s,a=ps(t,c=>s.onThumbChange(c)),u=k.useRef(),l=pL(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=sze(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),b.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:xv(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:xv(e.onPointerUp,s.onThumbPointerUp)})}),eoe=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wve();return n||i.hasThumb?b.jsx(oze,{ref:t,...r}):null}),Kve=k.forwardRef(({children:e,style:t,...n},r)=>{const i=qc(),s=ps(r,i.onViewportChange);return b.jsx(me,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:b.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Kve.displayName="@mantine/core/ScrollAreaViewport";var PW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Xve={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},aze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),bm=Me((e,t)=>{const n=xe("ScrollArea",Xve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[_,E]=k.useState(!1),w=dt({name:"ScrollArea",props:n,classes:PW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:aze});return b.jsxs(zve,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...w("root"),...v,children:[b.jsx(Kve,{...d,...w("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var x;(x=d==null?void 0:d.onScroll)==null||x.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&b.jsx(Zse,{...w("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:b.jsx(eoe,{...w("thumb")})}),(y==="xy"||y==="y")&&b.jsx(Zse,{...w("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:b.jsx(eoe,{...w("thumb")})}),b.jsx(X7e,{...w("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});bm.displayName="@mantine/core/ScrollArea";const DW=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",Xve,e);return b.jsx(me,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:b.jsx(me,{style:{display:"flex",flexDirection:"column",flex:1},children:b.jsx(bm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});bm.classes=PW;DW.displayName="@mantine/core/ScrollAreaAutosize";DW.classes=PW;bm.Autosize=DW;var Qve={root:"m_87cf2631"};const uze={__staticSelector:"UnstyledButton"},Ts=zs((e,t)=>{const n=xe("UnstyledButton",uze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=dt({name:s,props:n,classes:Qve,className:r,style:l,classNames:a,styles:u,unstyled:o});return b.jsx(me,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Ts.classes=Qve;Ts.displayName="@mantine/core/UnstyledButton";var Jve={root:"m_515a97f8"};const lze={},OW=Me((e,t)=>{const n=xe("VisuallyHidden",lze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=dt({name:"VisuallyHidden",classes:Jve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return b.jsx(me,{component:"span",ref:t,...c("root"),...l})});OW.classes=Jve;OW.displayName="@mantine/core/VisuallyHidden";var Zve={root:"m_1b7284a3"};const cze={},fze=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:zr(t),"--paper-shadow":EW(n)}}),Wx=zs((e,t)=>{const n=xe("Paper",cze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=dt({name:"Paper",props:n,classes:Zve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:fze});return b.jsx(me,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});Wx.classes=Zve;Wx.displayName="@mantine/core/Paper";function Gx(e){return ebe(e)?(e.nodeName||"").toLowerCase():"#document"}function Vu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qm(e){var t;return(t=(ebe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ebe(e){return e instanceof Node||e instanceof Vu(e).Node}function Ci(e){return e instanceof Element||e instanceof Vu(e).Element}function Ml(e){return e instanceof HTMLElement||e instanceof Vu(e).HTMLElement}function jU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vu(e).ShadowRoot}function tk(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Oc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function dze(e){return["table","td","th"].includes(Gx(e))}function $W(e){const t=MW(),n=Oc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hze(e){let t=_m(e);for(;Ml(t)&&!j0(t);){if($W(t))return t;t=_m(t)}return null}function MW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function j0(e){return["html","body","#document"].includes(Gx(e))}function Oc(e){return Vu(e).getComputedStyle(e)}function _L(e){return Ci(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function _m(e){if(Gx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||jU(e)&&e.host||qm(e);return jU(t)?t.host:t}function tbe(e){const t=_m(e);return j0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ml(t)&&tk(t)?t:tbe(t)}function rm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=tbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Vu(i);return s?t.concat(o,o.visualViewport||[],tk(i)?i:[],o.frameElement&&n?rm(o.frameElement):[]):t.concat(i,rm(i,[],n))}function toe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function SA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&jU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function nbe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function rbe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function pze(e){return yze()?!1:!noe()&&e.width===0&&e.height===0||noe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function mze(){return/apple/i.test(navigator.vendor)}function noe(){const e=/android/i;return e.test(nbe())||e.test(rbe())}function gze(){return nbe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function yze(){return rbe().includes("jsdom/")}function BU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function vze(e){return"nativeEvent"in e}function bze(e){return e.matches("html,body")}function iv(e){return(e==null?void 0:e.ownerDocument)||document}function Dj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function G_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const _ze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function wze(e){return Ml(e)&&e.matches(_ze)}const Sl=Math.min,la=Math.max,BO=Math.round,EN=Math.floor,B0=e=>({x:e,y:e}),Eze={left:"right",right:"left",bottom:"top",top:"bottom"},xze={start:"end",end:"start"};function UU(e,t,n){return la(e,Sl(t,n))}function wm(e,t){return typeof e=="function"?e(t):e}function Kf(e){return e.split("-")[0]}function Yx(e){return e.split("-")[1]}function LW(e){return e==="x"?"y":"x"}function FW(e){return e==="y"?"height":"width"}function Pb(e){return["top","bottom"].includes(Kf(e))?"y":"x"}function jW(e){return LW(Pb(e))}function Sze(e,t,n){n===void 0&&(n=!1);const r=Yx(e),i=jW(e),s=FW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=UO(o)),[o,UO(o)]}function Tze(e){const t=UO(e);return[zU(e),t,zU(t)]}function zU(e){return e.replace(/start|end/g,t=>xze[t])}function Cze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Aze(e,t,n,r){const i=Yx(e);let s=Cze(Kf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(zU)))),s}function UO(e){return e.replace(/left|right|bottom|top/g,t=>Eze[t])}function Ize(e){return{top:0,right:0,bottom:0,left:0,...e}}function BW(e){return typeof e!="number"?Ize(e):{top:e,right:e,bottom:e,left:e}}function IE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function roe(e,t,n){let{reference:r,floating:i}=e;const s=Pb(t),o=jW(t),a=FW(o),u=Kf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Yx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const kze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=roe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:E,reset:w}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...E}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(d=w.placement),w.rects&&(l=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:f}=roe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function UW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=wm(t,e),p=BW(h),g=a[d?f==="floating"?"reference":"floating":f],y=IE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},w=IE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:u}):v);return{top:(y.top-w.top+p.top)/E.y,bottom:(w.bottom-y.bottom+p.bottom)/E.y,left:(y.left-w.left+p.left)/E.x,right:(w.right-y.right+p.right)/E.x}}const Rze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=wm(e,t)||{};if(l==null)return{};const f=BW(c),d={x:n,y:r},h=jW(i),p=FW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],w=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let x=S?S[_]:0;(!x||!await(o.isElement==null?void 0:o.isElement(S)))&&(x=a.floating[_]||s.floating[p]);const C=E/2-w/2,A=x/2-m[p]/2-1,I=Sl(f[y],A),R=Sl(f[v],A),O=I,D=x-m[p]-R,$=x/2-m[p]/2+C,F=UU(O,$,D),M=!u.arrow&&Yx(i)!=null&&$!==F&&s.reference[p]/2-($<O?I:R)-m[p]/2<0,B=M?$<O?$-O:$-D:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),Nze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=wm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Kf(i),v=Kf(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(v||!m?[UO(a)]:Tze(a));!d&&p!=="none"&&E.push(...Aze(a,m,p,_));const w=[a,...E],S=await UW(t,g),x=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&x.push(S[y]),f){const O=Sze(i,o,_);x.push(S[O[0]],S[O[1]])}if(C=[...C,{placement:i,overflows:x}],!x.every(O=>O<=0)){var A,I;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,D=w[O];if(D)return{data:{index:O,overflows:C},reset:{placement:D}};let $=(I=C.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:I.placement;if(!$)switch(h){case"bestFit":{var R;const F=(R=C.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:R[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function ibe(e){const t=Sl(...e.map(s=>s.left)),n=Sl(...e.map(s=>s.top)),r=la(...e.map(s=>s.right)),i=la(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Pze(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>IE(ibe(i)))}const Dze=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=wm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Pze(c),d=IE(ibe(c)),h=BW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Pb(n)==="y"){const I=f[0],R=f[f.length-1],O=Kf(n)==="top",D=I.top,$=R.bottom,F=O?I.left:R.left,M=O?I.right:R.right,B=M-F,z=$-D;return{top:D,bottom:$,left:F,right:M,width:B,height:z,x:F,y:D}}const g=Kf(n)==="left",y=la(...f.map(I=>I.right)),v=Sl(...f.map(I=>I.left)),_=f.filter(I=>g?I.left===v:I.right===y),E=_[0].top,w=_[_.length-1].bottom,S=v,x=y,C=x-S,A=w-E;return{top:E,bottom:w,left:S,right:x,width:C,height:A,x:S,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Oze(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Kf(n),a=Yx(n),u=Pb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=wm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const $ze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Oze(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Mze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=wm(e,t),l={x:n,y:r},c=await UW(t,u),f=Pb(Kf(i)),d=LW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=UU(v,h,_)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=UU(v,p,_)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Lze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=wm(e,t),c={x:n,y:r},f=Pb(i),d=LW(f);let h=c[d],p=c[f];const m=wm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const _=d==="y"?"height":"width",E=s.reference[d]-s.floating[_]+g.mainAxis,w=s.reference[d]+s.reference[_]-g.mainAxis;h<E?h=E:h>w&&(h=w)}if(l){var y,v;const _=d==="y"?"width":"height",E=["top","left"].includes(Kf(i)),w=s.reference[f]-s.floating[_]+(E&&((y=o.offset)==null?void 0:y[f])||0)+(E?0:g.crossAxis),S=s.reference[f]+s.reference[_]+(E?0:((v=o.offset)==null?void 0:v[f])||0)-(E?g.crossAxis:0);p<w?p=w:p>S&&(p=S)}return{[d]:h,[f]:p}}}},Fze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=wm(e,t),u=await UW(t,a),l=Kf(n),c=Yx(n),f=Pb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Sl(h-u[p],g),_=Sl(d-u[m],y),E=!t.middlewareData.shift;let w=v,S=_;if(f?S=c||E?Sl(_,y):y:w=c||E?Sl(v,g):g,E&&!c){const C=la(u.left,0),A=la(u.right,0),I=la(u.top,0),R=la(u.bottom,0);f?S=d-2*(C!==0||A!==0?C+A:la(u.left,u.right)):w=h-2*(I!==0||R!==0?I+R:la(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:w});const x=await i.getDimensions(s.floating);return d!==x.width||h!==x.height?{reset:{rects:!0}}:{}}}};function sbe(e){const t=Oc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ml(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=BO(n)!==s||BO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function zW(e){return Ci(e)?e:e.contextElement}function Uw(e){const t=zW(e);if(!Ml(t))return B0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=sbe(t);let o=(s?BO(n.width):n.width)/r,a=(s?BO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const jze=B0(0);function obe(e){const t=Vu(e);return!MW()||!t.visualViewport?jze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Bze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vu(e)?!1:t}function Bv(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=zW(e);let o=B0(1);t&&(r?Ci(r)&&(o=Uw(r)):o=Uw(e));const a=Bze(s,n,r)?obe(s):B0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Vu(s),h=r&&Ci(r)?Vu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Uw(m),y=m.getBoundingClientRect(),v=Oc(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,E=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=_,l+=E,p=Vu(m),m=p.frameElement}}return IE({width:c,height:f,x:u,y:l})}const Uze=[":popover-open",":modal"];function VW(e){return Uze.some(t=>{try{return e.matches(t)}catch{return!1}})}function zze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=qm(r),a=t?VW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=B0(1);const c=B0(0),f=Ml(r);if((f||!f&&!s)&&((Gx(r)!=="body"||tk(o))&&(u=_L(r)),Ml(r))){const d=Bv(r);l=Uw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Vze(e){return Array.from(e.getClientRects())}function abe(e){return Bv(qm(e)).left+_L(e).scrollLeft}function Hze(e){const t=qm(e),n=_L(e),r=e.ownerDocument.body,i=la(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=la(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+abe(e);const a=-n.scrollTop;return Oc(r).direction==="rtl"&&(o+=la(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function qze(e,t){const n=Vu(e),r=qm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=MW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function Wze(e,t){const n=Bv(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ml(e)?Uw(e):B0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function ioe(e,t,n){let r;if(t==="viewport")r=qze(e,n);else if(t==="document")r=Hze(qm(e));else if(Ci(t))r=Wze(t,n);else{const i=obe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return IE(r)}function ube(e,t){const n=_m(e);return n===t||!Ci(n)||j0(n)?!1:Oc(n).position==="fixed"||ube(n,t)}function Gze(e,t){const n=t.get(e);if(n)return n;let r=rm(e,[],!1).filter(a=>Ci(a)&&Gx(a)!=="body"),i=null;const s=Oc(e).position==="fixed";let o=s?_m(e):e;for(;Ci(o)&&!j0(o);){const a=Oc(o),u=$W(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||tk(o)&&!u&&ube(e,o))?r=r.filter(c=>c!==o):i=a,o=_m(o)}return t.set(e,r),r}function Yze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?VW(t)?[]:Gze(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=ioe(t,c,i);return l.top=la(f.top,l.top),l.right=Sl(f.right,l.right),l.bottom=Sl(f.bottom,l.bottom),l.left=la(f.left,l.left),l},ioe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Kze(e){const{width:t,height:n}=sbe(e);return{width:t,height:n}}function Xze(e,t,n){const r=Ml(t),i=qm(t),s=n==="fixed",o=Bv(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=B0(0);if(r||!r&&!s)if((Gx(t)!=="body"||tk(i))&&(a=_L(t)),r){const f=Bv(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=abe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Oj(e){return Oc(e).position==="static"}function soe(e,t){return!Ml(e)||Oc(e).position==="fixed"?null:t?t(e):e.offsetParent}function lbe(e,t){const n=Vu(e);if(VW(e))return n;if(!Ml(e)){let i=_m(e);for(;i&&!j0(i);){if(Ci(i)&&!Oj(i))return i;i=_m(i)}return n}let r=soe(e,t);for(;r&&dze(r)&&Oj(r);)r=soe(r,t);return r&&j0(r)&&Oj(r)&&!$W(r)?n:r||hze(e)||n}const Qze=async function(e){const t=this.getOffsetParent||lbe,n=this.getDimensions,r=await n(e.floating);return{reference:Xze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Jze(e){return Oc(e).direction==="rtl"}const Zze={convertOffsetParentRelativeRectToViewportRelativeRect:zze,getDocumentElement:qm,getClippingRect:Yze,getOffsetParent:lbe,getElementRects:Qze,getClientRects:Vze,getDimensions:Kze,getScale:Uw,isElement:Ci,isRTL:Jze};function eVe(e,t){let n=null,r;const i=qm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=EN(c),p=EN(i.clientWidth-(l+f)),m=EN(i.clientHeight-(c+d)),g=EN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:la(0,Sl(1,u))||1};let _=!0;function E(w){const S=w[0].intersectionRatio;if(S!==u){if(!_)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(e)}return o(!0),s}function tVe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=zW(e),c=i||s?[...l?rm(l):[],...rm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?eVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Bv(e):null;u&&g();function g(){const y=Bv(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const nVe=$ze,rVe=Mze,iVe=Nze,sVe=Fze,ooe=Rze,oVe=Dze,aVe=Lze,uVe=(e,t,n)=>{const r=new Map,i={platform:Zze,...n},s={...i.platform,_c:r};return kze(e,t,{...i,platform:s})};var sD=typeof document<"u"?k.useLayoutEffect:k.useEffect;function zO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!zO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!zO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function cbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function aoe(e,t){const n=cbe(e);return Math.round(t*n)/n}function uoe(e){const t=k.useRef(e);return sD(()=>{t.current=e}),t}function lVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=k.useState(r);zO(d,r)||h(r);const[p,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),_=k.useCallback(B=>{B!==x.current&&(x.current=B,y(B))},[]),E=s||p,w=o||g,S=k.useRef(null),x=k.useRef(null),C=k.useRef(c),A=u!=null,I=uoe(u),R=uoe(i),O=k.useCallback(()=>{if(!S.current||!x.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),uVe(S.current,x.current,B).then(z=>{const H={...z,isPositioned:!0};D.current&&!zO(C.current,H)&&(C.current=H,JI.flushSync(()=>{f(H)}))})},[d,t,n,R]);sD(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const D=k.useRef(!1);sD(()=>(D.current=!0,()=>{D.current=!1}),[]),sD(()=>{if(E&&(S.current=E),w&&(x.current=w),E&&w){if(I.current)return I.current(E,w,O);O()}},[E,w,O,I,A]);const $=k.useMemo(()=>({reference:S,floating:x,setReference:v,setFloating:_}),[v,_]),F=k.useMemo(()=>({reference:E,floating:w}),[E,w]),M=k.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const z=aoe(F.floating,c.x),H=aoe(F.floating,c.y);return a?{...B,transform:"translate("+z+"px, "+H+"px)",...cbe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:H}},[n,a,F.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:M}),[c,O,$,F,M])}const cVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ooe({element:r.current,padding:i}).fn(n):{}:r?ooe({element:r,padding:i}).fn(n):{}}}},fbe=(e,t)=>({...nVe(e),options:[e,t]}),HW=(e,t)=>({...rVe(e),options:[e,t]}),loe=(e,t)=>({...aVe(e),options:[e,t]}),VU=(e,t)=>({...iVe(e),options:[e,t]}),fVe=(e,t)=>({...sVe(e),options:[e,t]}),HU=(e,t)=>({...oVe(e),options:[e,t]}),dbe=(e,t)=>({...cVe(e),options:[e,t]}),hbe={...cO},dVe=hbe.useInsertionEffect,hVe=dVe||(e=>e());function zg(e){const t=k.useRef(()=>{});return hVe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var uh=typeof document<"u"?k.useLayoutEffect:k.useEffect;let coe=!1,pVe=0;const foe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+pVe++;function mVe(){const[e,t]=k.useState(()=>coe?foe():void 0);return uh(()=>{e==null&&t(foe())},[]),k.useEffect(()=>{coe=!0},[]),e}const gVe=hbe.useId,pbe=gVe||mVe;function yVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const vVe=k.createContext(null),bVe=k.createContext(null),qW=()=>{var e;return((e=k.useContext(vVe))==null?void 0:e.id)||null},WW=()=>k.useContext(bVe);function GW(e){return"data-floating-ui-"+e}function doe(e){const t=k.useRef(e);return uh(()=>{t.current=e}),t}const hoe=GW("safe-polygon");function oD(e,t,n){return n&&!BU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function _Ve(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=WW(),m=qW(),g=doe(c),y=doe(l),v=k.useRef(),_=k.useRef(-1),E=k.useRef(),w=k.useRef(-1),S=k.useRef(!0),x=k.useRef(!1),C=k.useRef(()=>{}),A=k.useCallback(()=>{var D;const $=(D=i.current.openEvent)==null?void 0:D.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);k.useEffect(()=>{if(!u)return;function D($){let{open:F}=$;F||(clearTimeout(_.current),clearTimeout(w.current),S.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[u,s]),k.useEffect(()=>{if(!u||!g.current||!n)return;function D(F){A()&&r(!1,F,"hover")}const $=iv(a).documentElement;return $.addEventListener("mouseleave",D),()=>{$.removeEventListener("mouseleave",D)}},[a,n,r,u,g,A]);const I=k.useCallback(function(D,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=oD(y.current,"close",v.current);M&&!E.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,D,F),M)):$&&(clearTimeout(_.current),r(!1,D,F))},[y,r]),R=zg(()=>{C.current(),E.current=void 0}),O=zg(()=>{if(x.current){const D=iv(a).body;D.style.pointerEvents="",D.removeAttribute(hoe),x.current=!1}});return k.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(_.current),S.current=!1,f&&!BU(v.current)||d>0&&!oD(y.current,"open"))return;const z=oD(y.current,"open",v.current);z?_.current=window.setTimeout(()=>{r(!0,B,"hover")},z):r(!0,B,"hover")}function F(B){if(D())return;C.current();const z=iv(a);if(clearTimeout(w.current),g.current&&i.current.floatingContext){n||clearTimeout(_.current),E.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),R(),I(B,!0,"safe-polygon")}});const P=E.current;z.addEventListener("mousemove",P),C.current=()=>{z.removeEventListener("mousemove",P)};return}(v.current==="touch"?!SA(a,B.relatedTarget):!0)&&I(B)}function M(B){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),R(),I(B)}})(B))}if(Ci(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,I,R,O,r,n,p,y,g,i]),uh(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&A()){const F=iv(a).body;if(F.setAttribute(hoe,""),F.style.pointerEvents="none",x.current=!0,Ci(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(z=>z.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),uh(()=>{n||(v.current=void 0,R(),O())},[n,R,O]),k.useEffect(()=>()=>{R(),clearTimeout(_.current),clearTimeout(w.current),O()},[u,o,R,O]),k.useMemo(()=>{if(!u)return{};function D($){v.current=$.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove($){function F(){S.current||r(!0,$.nativeEvent,"hover")}f&&!BU(v.current)||n||d===0||(clearTimeout(w.current),v.current==="touch"?F():w.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(_.current)},onMouseLeave($){I($.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const qU=()=>{},mbe=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:qU,setState:qU,isInstantPhase:!1}),gbe=()=>k.useContext(mbe);function wVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=k.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=k.useRef(null),a=k.useCallback(u=>{s({currentId:u})},[]);return uh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),k.createElement(mbe.Provider,{value:k.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function EVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=gbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return uh(()=>{u&&(f({delay:{open:1,close:oD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),uh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),uh(()=>{l===qU||!n||l(o)},[n,l,o]),a}function $j(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const xVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},SVe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},poe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function TVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=WW(),v=zg(typeof c=="function"?c:()=>!1),_=typeof c=="function"?v:c,E=k.useRef(!1),w=k.useRef(!1),{escapeKey:S,outsidePress:x}=poe(m),{escapeKey:C,outsidePress:A}=poe(g),I=zg($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?$j(y.nodesRef.current,M):[];if(!S&&($.stopPropagation(),B.length>0)){let z=!0;if(B.forEach(H=>{var P;if((P=H.context)!=null&&P.open&&!H.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,vze($)?$.nativeEvent:$,"escape-key")}),R=zg($=>{var F;const M=()=>{var B;I($),(B=G_($))==null||B.removeEventListener("keydown",M)};(F=G_($))==null||F.addEventListener("keydown",M)}),O=zg($=>{var F;const M=E.current;E.current=!1;const B=w.current;if(w.current=!1,f==="click"&&B||M||typeof _=="function"&&!_($))return;const z=G_($),H="["+GW("inert")+"]",P=iv(o).querySelectorAll(H);let U=Ci(z)?z:null;for(;U&&!j0(U);){const G=_m(U);if(j0(G)||!Ci(G))break;U=G}if(P.length&&Ci(z)&&!bze(z)&&!SA(z,o)&&Array.from(P).every(G=>!SA(U,G)))return;if(Ml(z)&&o){const G=z.clientWidth>0&&z.scrollWidth>z.clientWidth,ne=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let ce=ne&&$.offsetX>z.clientWidth;if(ne&&Oc(z).direction==="rtl"&&(ce=$.offsetX<=z.offsetWidth-z.clientWidth),ce||G&&$.offsetY>z.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&$j(y.nodesRef.current,W).some(G=>{var ne;return Dj($,(ne=G.context)==null?void 0:ne.elements.floating)});if(Dj($,o)||Dj($,s)||j)return;const q=y?$j(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),D=zg($=>{var F;const M=()=>{var B;O($),(B=G_($))==null||B.removeEventListener(f,M)};(F=G_($))==null||F.addEventListener(f,M)});return k.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=x;function $(B){r(!1,B,"ancestor-scroll")}const F=iv(o);l&&F.addEventListener("keydown",C?R:I,C),_&&F.addEventListener(f,A?D:O,A);let M=[];return p&&(Ci(s)&&(M=rm(s)),Ci(o)&&(M=M.concat(rm(o))),!Ci(i)&&i&&i.contextElement&&(M=M.concat(rm(i.contextElement)))),M=M.filter(B=>{var z;return B!==((z=F.defaultView)==null?void 0:z.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",C?R:I,C),_&&F.removeEventListener(f,A?D:O,A),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,_,f,n,r,p,u,S,x,I,C,R,O,A,D]),k.useEffect(()=>{E.current=!1},[_,f]),k.useMemo(()=>u?{reference:{onKeyDown:I,[xVe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[SVe[f]]:()=>{E.current=!0}}}:{},[u,d,f,h,r,I])}function CVe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=pbe(),s=k.useRef({}),[o]=k.useState(()=>yVe()),a=qW()!=null,[u,l]=k.useState(r.reference),c=zg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=k.useMemo(()=>({setPositionReference:l}),[]),d=k.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return k.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function YW(e){e===void 0&&(e={});const{nodeId:t}=e,n=CVe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=k.useState(null),[a,u]=k.useState(null),c=(i==null?void 0:i.reference)||s,f=k.useRef(null),d=WW();uh(()=>{c&&(f.current=c)},[c]);const h=lVe({...e,elements:{...i,...a&&{reference:a}}}),p=k.useCallback(_=>{const E=Ci(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;u(E),h.refs.setReference(E)},[h.refs]),m=k.useCallback(_=>{(Ci(_)||_===null)&&(f.current=_,o(_)),(Ci(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Ci(_))&&h.refs.setReference(_)},[h.refs]),g=k.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=k.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=k.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return uh(()=>{r.dataRef.current.floatingContext=v;const _=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);_&&(_.context=v)}),k.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function AVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=k.useRef(!1),c=k.useRef(),f=k.useRef(!0);return k.useEffect(()=>{if(!a)return;const d=Vu(o);function h(){!n&&Ml(o)&&o===toe(iv(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),k.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),k.useEffect(()=>()=>{clearTimeout(c.current)},[]),k.useMemo(()=>a?{reference:{onPointerDown(d){pze(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=G_(d.nativeEvent);if(u&&Ci(h))try{if(mze()&&gze())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!wze(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ci(h)&&h.hasAttribute(GW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=toe(o?o.ownerDocument:document);!h&&g===o||SA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||SA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const moe="active",goe="selected";function Mj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[moe]:o,[goe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[moe,goe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function IVe(e){e===void 0&&(e=[]);const t=e,n=k.useCallback(s=>Mj(s,e,"reference"),t),r=k.useCallback(s=>Mj(s,e,"floating"),t),i=k.useCallback(s=>Mj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return k.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const kVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function RVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=kVe.get(o))!=null?n:o,u=pbe(),c=qW()!=null;return k.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function ybe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function yoe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function voe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const NVe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function PVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[NVe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...yoe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...yoe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...voe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...voe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const KW=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Vh();return s?b.jsx("div",{...l,ref:c,style:{...u,...PVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});KW.displayName="@mantine/core/FloatingArrow";const[DVe,vbe]=po("Popover component was not found in the tree");function wL({children:e,active:t=!0,refProp:n="ref"}){const r=vUe(t),i=ps(r,e==null?void 0:e.ref);return Iy(e)?k.cloneElement(e,{[n]:i}):e}function bbe(e){return b.jsx(OW,{tabIndex:-1,"data-autofocus":!0,...e})}wL.displayName="@mantine/core/FocusTrap";bbe.displayName="@mantine/core/FocusTrapInitialFocus";wL.InitialFocus=bbe;function OVe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const $Ve={},_be=k.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",$Ve,e),[s,o]=k.useState(!1),a=k.useRef(null);return kb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:OVe(i),SW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:JI.createPortal(b.jsx(b.Fragment,{children:n}),a.current)});_be.displayName="@mantine/core/Portal";function Kx({withinPortal:e=!0,children:t,...n}){return e?b.jsx(_be,{...n,children:t}):b.jsx(b.Fragment,{children:t})}Kx.displayName="@mantine/core/OptionalPortal";const _T=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),xN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{..._T("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{..._T("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{..._T("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{..._T("top"),common:{transformOrigin:"top left"}},"pop-top-right":{..._T("top"),common:{transformOrigin:"top right"}}},boe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function MVe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in xN?{transitionProperty:xN[e].transitionProperty,...i,...xN[e].common,...xN[e][boe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[boe[t]]}}function LVe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ms(),l=mL(),c=u.respectReducedMotion?l:!1,[f,d]=k.useState(c?0:e),[h,p]=k.useState(r?"entered":"exited"),m=k.useRef(-1),g=k.useRef(-1),y=v=>{const _=v?i:s,E=v?o:a;window.clearTimeout(m.current);const w=c?0:v?e:t;d(w),w===0?(typeof _=="function"&&_(),typeof E=="function"&&E(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{m2.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof _=="function"&&_(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof E=="function"&&E(),p(v?"entered":"exited")},w)})})};return xh(()=>{y(r)},[r]),k.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Wm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=LVe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?b.jsx(b.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:b.jsx(b.Fragment,{children:s(MVe({transition:t,duration:f,state:d,timingFunction:h}))})}Wm.displayName="@mantine/core/Transition";var wbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const FVe={},XW=Me((e,t)=>{var g,y,v,_;const n=xe("PopoverDropdown",FVe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=vbe(),h=xve({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ps(t,d.floating);return d.disabled?null:b.jsx(Kx,{...d.portalProps,withinPortal:d.withinPortal,children:b.jsx(Wm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(_=d.transitionProps)==null?void 0:_.duration,children:E=>b.jsx(wL,{active:d.trapFocus,children:b.jsxs(me,{...p,...f,variant:u,ref:m,onKeyDownCapture:sUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,b.jsx(KW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});XW.classes=wbe;XW.displayName="@mantine/core/PopoverDropdown";const jVe={refProp:"ref",popupType:"dialog"},Ebe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",jVe,e);if(!Iy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=vbe(),u=ps(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...o,...l,...a.targetProps,className:Zi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Ebe.displayName="@mantine/core/PopoverTarget";function xbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return tVe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),xh(()=>{t.update()},r),xh(()=>{s(o=>o+1)},[e])}function BVe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function UVe(e,t){const n=BVe(e.middlewares),r=[fbe(e.offset)];return n.shift&&r.push(HW(typeof n.shift=="boolean"?{limiter:loe(),padding:5}:{limiter:loe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?VU():VU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?HU():HU(n.inline)),r.push(dbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(fVe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function zVe(e){const[t,n]=Cs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=YW({strategy:e.strategy,placement:e.position,middleware:UVe(e,()=>s)});return xbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),xh(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),xh(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const VVe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Zl("popover"),__staticSelector:"Popover",width:"max-content"},HVe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:zr(t),"--popover-shadow":EW(n)}});function Do(e){var _e,ke,ze,ct,Ot,We;const t=xe("Popover",VVe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:_,withinPortal:E,portalProps:w,closeOnEscape:S,clickOutsideEvents:x,trapFocus:C,onClose:A,onOpen:I,onChange:R,zIndex:O,radius:D,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:z,disabled:H,returnFocus:P,variant:U,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=dt({name:B,props:t,classes:wbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:HVe}),ce=k.useRef(null),[de,he]=k.useState(null),[ve,Ie]=k.useState(null),{dir:be}=Vh(),Xe=Ta(F),Ue=zVe({middlewares:c,width:l,position:ybe(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:R,onOpen:I,onClose:A,strategy:q});uUe(()=>_&&Ue.onClose(),x,[de,ve]);const yt=k.useCallback(ge=>{he(ge),Ue.floating.refs.setReference(ge)},[Ue.floating.refs.setReference]),it=k.useCallback(ge=>{Ie(ge),Ue.floating.refs.setFloating(ge)},[Ue.floating.refs.setFloating]);return b.jsx(DVe,{value:{returnFocus:P,disabled:H,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:C,withinPortal:E,portalProps:w,zIndex:O,radius:D,shadow:$,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Xe}-target`,getDropdownId:()=>`${Xe}-dropdown`,withRoles:z,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:ne},children:n})}Do.Target=Ebe;Do.Dropdown=XW;Do.displayName="@mantine/core/Popover";Do.extend=e=>e;var Nf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const qVe=k.forwardRef(({className:e,...t},n)=>b.jsxs(me,{component:"span",className:Zi(Nf.barsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Nf.bar}),b.jsx("span",{className:Nf.bar}),b.jsx("span",{className:Nf.bar})]})),WVe=k.forwardRef(({className:e,...t},n)=>b.jsxs(me,{component:"span",className:Zi(Nf.dotsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Nf.dot}),b.jsx("span",{className:Nf.dot}),b.jsx("span",{className:Nf.dot})]})),GVe=k.forwardRef(({className:e,...t},n)=>b.jsx(me,{component:"span",className:Zi(Nf.ovalLoader,e),...t,ref:n})),Sbe={bars:qVe,oval:GVe,dots:WVe},YVe={loaders:Sbe,type:"oval"},KVe=(e,{size:t,color:n})=>({root:{"--loader-size":nn(t,"loader-size"),"--loader-color":n?Mr(n,e):void 0}}),Wc=Me((e,t)=>{const n=xe("Loader",YVe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=dt({name:"Loader",props:n,classes:Nf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:KVe});return p?b.jsx(me,{...g("root"),ref:t,...m,children:p}):b.jsx(me,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Wc.defaultLoaders=Sbe;Wc.classes=Nf;Wc.displayName="@mantine/core/Loader";var EL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const _oe={orientation:"horizontal"},XVe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),QW=Me((e,t)=>{const n=xe("ActionIconGroup",_oe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",_oe,e),p=dt({name:"ActionIconGroup",props:n,classes:EL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:XVe,rootSelector:"group"});return b.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});QW.classes=EL;QW.displayName="@mantine/core/ActionIconGroup";const QVe={},JVe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":nn(t,"ai-size"),"--ai-radius":n===void 0?void 0:zr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Db=zs((e,t)=>{const n=xe("ActionIcon",QVe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":_,autoContrast:E,mod:w,...S}=n,x=dt({name:["ActionIcon",p],props:n,className:r,style:u,classes:EL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:JVe});return b.jsxs(Ts,{...x("root",{active:!v&&!l&&!_}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||_},w],children:[b.jsx(Wm,{mounted:!!l,transition:"slide-down",duration:150,children:C=>b.jsx(me,{component:"span",...x("loader",{style:C}),"aria-hidden":!0,children:b.jsx(Wc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),b.jsx(me,{component:"span",mod:{loading:l},...x("icon"),children:y})]})});Db.classes=EL;Db.displayName="@mantine/core/ActionIcon";Db.Group=QW;const Tbe=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:b.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Tbe.displayName="@mantine/core/CloseIcon";var Cbe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const ZVe={variant:"subtle"},eHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":nn(t,"cb-size"),"--cb-radius":n===void 0?void 0:zr(n),"--cb-icon-size":Te(r)}}),Gm=zs((e,t)=>{const n=xe("CloseButton",ZVe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=dt({name:"CloseButton",props:n,className:a,style:l,classes:Cbe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:eHe});return b.jsxs(Ts,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||b.jsx(Tbe,{}),i]})});Gm.classes=Cbe;Gm.displayName="@mantine/core/CloseButton";function tHe(e){return k.Children.toArray(e).filter(Boolean)}var Abe={root:"m_4081bf90"};const nHe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},rHe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":ls(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),si=Me((e,t)=>{const n=xe("Group",nHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,..._}=n,E=tHe(u),w=E.length,S=ls(l??"md"),C={childWidth:`calc(${100/w}% - (${S} - ${S} / ${w}))`},A=dt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:Abe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:rHe});return b.jsx(me,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,..._,children:E})});si.classes=Abe;si.displayName="@mantine/core/Group";var Ibe={root:"m_9814e45f"};const iHe={zIndex:Zl("modal")},sHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Rd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:zr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),TA=zs((e,t)=>{const n=xe("Overlay",iHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,..._}=n,E=dt({name:"Overlay",props:n,classes:Ibe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sHe});return b.jsx(me,{ref:t,...E("root"),mod:[{center:c,fixed:l},v],..._,children:f})});TA.classes=Ibe;TA.displayName="@mantine/core/Overlay";const[oHe,Ym]=po("ModalBase component was not found in tree");function aHe({opened:e,transitionDuration:t}){const[n,r]=k.useState(e),i=k.useRef(),o=mL()?0:t;return k.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function uHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ta(e),[u,l]=k.useState(!1),[c,f]=k.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=aHe({opened:n,transitionDuration:d});return Ave("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),xve({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const kbe=k.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,..._},E)=>{const{_id:w,titleMounted:S,bodyMounted:x,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:I}=uHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return b.jsx(Kx,{...c,withinPortal:l,children:b.jsx(oHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${w}-title`,getBodyId:()=>`${w}-body`,titleMounted:S,bodyMounted:x,setTitleMounted:A,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:b.jsx(hL,{enabled:C&&f,...v,children:b.jsx(me,{ref:E,..._,__vars:{...g,"--mb-z-index":(h||Zl("modal")).toString(),"--mb-shadow":EW(p),"--mb-padding":ls(m)},children:d})})})})});function lHe(){const e=Ym();return k.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var kE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const JW=k.forwardRef(({className:e,...t},n)=>{const r=lHe(),i=Ym();return b.jsx(me,{ref:n,...t,id:r,className:Zi({[kE.body]:!i.unstyled},e)})});JW.displayName="@mantine/core/ModalBaseBody";const ZW=k.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Ym();return b.jsx(Gm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Zi({[kE.close]:!i.unstyled},e),unstyled:i.unstyled})});ZW.displayName="@mantine/core/ModalBaseCloseButton";const Rbe=k.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Ym();return b.jsx(Wm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>b.jsx("div",{...n,className:Zi({[kE.inner]:!a.unstyled},n.className),children:b.jsx(wL,{active:a.opened&&a.trapFocus,children:b.jsx(Wx,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Zi({[kE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),eG=k.forwardRef(({className:e,...t},n)=>{const r=Ym();return b.jsx(me,{component:"header",ref:n,className:Zi({[kE.header]:!r.unstyled},e),...t})});eG.displayName="@mantine/core/ModalBaseHeader";const cHe={duration:200,timingFunction:"ease",transition:"fade"};function fHe(e){const t=Ym();return{...cHe,...t.transitionProps,...e}}const tG=k.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Ym(),o=fHe(t);return b.jsx(Wm,{mounted:s.opened,...o,transition:"fade",children:a=>b.jsx(TA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});tG.displayName="@mantine/core/ModalBaseOverlay";function dHe(){const e=Ym();return k.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const nG=k.forwardRef(({className:e,...t},n)=>{const r=dHe(),i=Ym();return b.jsx(me,{component:"h2",ref:n,className:Zi({[kE.title]:!i.unstyled},e),...t,id:r})});nG.displayName="@mantine/core/ModalBaseTitle";function Nbe({children:e}){return b.jsx(b.Fragment,{children:e})}const[hHe,Xx]=Hx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Gc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const woe={},pHe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Te(2)})`}}),xL=Me((e,t)=>{const n=xe("InputDescription",woe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",woe,n),p=Xx(),m=dt({name:["InputWrapper",c],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:pHe}),g=f&&(p==null?void 0:p.getStyles)||m;return b.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});xL.classes=Gc;xL.displayName="@mantine/core/InputDescription";const mHe={},gHe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Te(2)})`}}),SL=Me((e,t)=>{const n=xe("InputError",mHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=dt({name:["InputWrapper",c],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:gHe}),m=Xx(),g=f&&(m==null?void 0:m.getStyles)||p;return b.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});SL.classes=Gc;SL.displayName="@mantine/core/InputError";const Eoe={labelElement:"label"},yHe=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0}}),TL=Me((e,t)=>{const n=xe("InputLabel",Eoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Eoe,n),_=dt({name:["InputWrapper",m],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:yHe}),E=Xx(),w=(E==null?void 0:E.getStyles)||_;return b.jsxs(me,{...w("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&b.jsx("span",{...w("required"),"aria-hidden":!0,children:" *"})]})});TL.classes=Gc;TL.displayName="@mantine/core/InputLabel";const xoe={},rG=Me((e,t)=>{const n=xe("InputPlaceholder",xoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",xoe,n),p=dt({name:["InputPlaceholder",l],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return b.jsx(me,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});rG.classes=Gc;rG.displayName="@mantine/core/InputPlaceholder";function vHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const bHe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},_He=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Te(2)})`}}),iG=Me((e,t)=>{const n=xe("InputWrapper",bHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:_,labelElement:E,children:w,withAsterisk:S,id:x,required:C,__stylesApiProps:A,mod:I,...R}=n,O=dt({name:["InputWrapper",f],props:A||n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_He}),D={size:l,variant:c,__staticSelector:f},$=Ta(x),F=typeof S=="boolean"?S:C,M=(_==null?void 0:_.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,z=$,H=!!m&&typeof m!="boolean",P=!!g,U=`${H?M:""} ${P?B:""}`,W=U.trim().length>0?U.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&b.jsx(TL,{labelElement:E,id:j,htmlFor:z,required:F,...D,...y,children:p},"label"),G=P&&b.jsx(xL,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=b.jsx(k.Fragment,{children:d(w)},"input"),ce=H&&k.createElement(SL,{..._,...D,size:(_==null?void 0:_.size)||D.size,key:"error",id:(_==null?void 0:_.id)||M},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return b.jsx(hHe,{value:{getStyles:O,describedBy:W,inputId:z,labelId:j,...vHe(h,{hasDescription:P,hasError:H})},children:b.jsx(me,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...O("root"),...R,children:de})})});iG.classes=Gc;iG.displayName="@mantine/core/InputWrapper";const wHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},EHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":nn(t.size,"input-height"),"--input-fz":lo(t.size),"--input-radius":t.radius===void 0?void 0:zr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?nn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),gi=zs((e,t)=>{const n=xe("Input",wHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:_,rightSectionWidth:E,rightSectionPointerEvents:w,leftSectionPointerEvents:S,variant:x,vars:C,pointer:A,multiline:I,radius:R,id:O,withAria:D,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:z,rest:H}=Nb(B),P=Xx(),U={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=dt({name:["Input",l],props:c||n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:C,varsResolver:EHe}),j=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return b.jsxs(me,{...W("wrapper"),...z,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:x,size:f,children:[m&&b.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),b.jsx(me,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:x,__size:M,...W("input")}),v&&b.jsx("div",{..._,"data-position":"right",...W("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:v})]})});gi.classes=Gc;gi.Wrapper=iG;gi.Label=TL;gi.Error=SL;gi.Description=xL;gi.Placeholder=rG;gi.displayName="@mantine/core/Input";function Pbe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:E,inputContainer:w,inputWrapperOrder:S,withAsterisk:x,variant:C,vars:A,mod:I,...R}=r,{styleProps:O,rest:D}=Nb(R),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:_,style:E,inputContainer:w,inputWrapperOrder:S,withAsterisk:x,variant:C,id:v,mod:I,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:_,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const xHe={__staticSelector:"InputBase",withAria:!0},Yc=zs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Pbe("InputBase",xHe,e);return b.jsx(gi.Wrapper,{...r,children:b.jsx(gi,{...n,...i,ref:t})})});Yc.classes={...gi.classes,...gi.Wrapper.classes};Yc.displayName="@mantine/core/InputBase";const SHe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Dbe={root:"m_8bffd616"};const THe={},Rt=zs((e,t)=>{const n=xe("Flex",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=dt({name:"Flex",classes:Dbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=ms(),_=ek(),E=Lve({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:SHe});return b.jsxs(b.Fragment,{children:[E.hasResponsiveStyles&&b.jsx(Rb,{selector:`.${_}`,styles:E.styles,media:E.media}),b.jsx(me,{ref:t,...y("root",{className:_,style:Ay(E.inlineStyles)}),...g})]})});Rt.classes=Dbe;Rt.displayName="@mantine/core/Flex";function CHe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function AHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=k.useRef(),[s,o]=k.useState(!1),[a,u]=k.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=k.useRef(),d=k.useRef();return k.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),k.useEffect(()=>{if(t){const h=p=>{CHe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),kUe(()=>{Rve()!=="test"&&o(!0)},20,{autoInvoke:!0}),RUe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Obe={root:"m_96b553a6"};const IHe={},kHe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),sG=Me((e,t)=>{const n=xe("FloatingIndicator",IHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=dt({name:"FloatingIndicator",classes:Obe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kHe}),g=k.useRef(null),{initialized:y,hidden:v}=AHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),_=ps(t,g);return!l||!c?null:b.jsx(me,{ref:_,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});sG.displayName="@mantine/core/FloatingIndicator";sG.classes=Obe;const[RHe,oG]=po("Accordion component was not found in the tree");function RE({style:e,size:t=16,...n}){return b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}RE.displayName="@mantine/core/AccordionChevron";const[NHe,$be]=po("Accordion.Item component was not found in the tree");var nk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const PHe={},aG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",PHe,e),{value:m}=$be(),g=oG(),y=g.isItemActive(m),v=typeof g.order=="number",_=`h${g.order}`,E=b.jsxs(Ts,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:w=>{l==null||l(w),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:wW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[b.jsx(me,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),b.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&b.jsx(me,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?b.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});aG.displayName="@mantine/core/AccordionControl";aG.classes=nk;const DHe={},uG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",DHe,e),c=oG();return b.jsx(NHe,{value:{value:a},children:b.jsx(me,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});uG.displayName="@mantine/core/AccordionItem";uG.classes=nk;const OHe={},lG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",OHe,e),{value:l}=$be(),c=oG();return b.jsx(vL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:b.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});lG.displayName="@mantine/core/AccordionPanel";lG.classes=nk;const $He={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:b.jsx(RE,{})},MHe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Te(n),"--accordion-radius":r===void 0?void 0:zr(r)}});function Eu(e){const t=xe("Accordion",$He,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:_,chevron:E,variant:w,radius:S,...x}=t,C=Ta(h),[A,I]=Cs({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=$=>Array.isArray(A)?A.includes($):$===A,O=$=>{const F=Array.isArray(A)?A.includes($)?A.filter(M=>M!==$):[...A,$]:$===A?null:$;I(F)},D=dt({name:"Accordion",classes:nk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:MHe});return b.jsx(RHe,{value:{isItemActive:R,onChange:O,getControlId:MO(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:MO(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:E,loop:p,getStyles:D,variant:w,unstyled:o},children:b.jsx(me,{...D("root"),id:C,...x,variant:w,"data-accordion":!0,children:u})})}const LHe=e=>e;Eu.extend=LHe;Eu.classes=nk;Eu.displayName="@mantine/core/Accordion";Eu.Item=uG;Eu.Panel=lG;Eu.Control=aG;Eu.Chevron=RE;var Mbe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const FHe={},jHe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:zr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Qx=Me((e,t)=>{const n=xe("Alert",FHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:_,...E}=n,w=dt({name:"Alert",classes:Mbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jHe}),S=Ta(h),x=f&&`${S}-title`||void 0,C=`${S}-body`;return b.jsx(me,{id:S,...w("root",{variant:v}),variant:v,ref:t,...E,role:"alert","aria-describedby":C,"aria-labelledby":x,children:b.jsxs("div",{...w("wrapper"),children:[p&&b.jsx("div",{...w("icon"),children:p}),b.jsxs("div",{...w("body"),children:[f&&b.jsx("div",{...w("title"),"data-with-close-button":m||void 0,children:b.jsx("span",{id:x,...w("label"),children:f})}),d&&b.jsx("div",{id:C,...w("message"),"data-variant":v,children:d})]}),m&&b.jsx(Gm,{...w("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Qx.classes=Mbe;Qx.displayName="@mantine/core/Alert";var Lbe={root:"m_b6d8b162"};function BHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const UHe={inherit:!1},zHe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":lo(i),"--text-lh":Eve(i),"--text-gradient":t==="gradient"?MU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Mr(s,e):void 0}}),Ke=zs((e,t)=>{const n=xe("Text",UHe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,..._}=n,E=dt({name:["Text",l],props:n,classes:Lbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:zHe});return b.jsx(me,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":BHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,..._})});Ke.classes=Lbe;Ke.displayName="@mantine/core/Text";var Fbe={root:"m_849cf0da"};const VHe={underline:"hover"},Ob=zs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",VHe,e);return b.jsx(Ke,{component:"a",ref:t,className:Zi({[Fbe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Ob.classes=Fbe;Ob.displayName="@mantine/core/Anchor";const[HHe,Jx]=po("AppShell was not found in tree");var Ny={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const qHe={},cG=Me((e,t)=>{const n=xe("AppShellAside",qHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Jx();return h.disabled?null:b.jsx(me,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});cG.classes=Ny;cG.displayName="@mantine/core/AppShellAside";const WHe={},fG=Me((e,t)=>{var p;const n=xe("AppShellFooter",WHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Jx();return h.disabled?null:b.jsx(me,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Zi({[hL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});fG.classes=Ny;fG.displayName="@mantine/core/AppShellFooter";const GHe={},dG=Me((e,t)=>{var p;const n=xe("AppShellHeader",GHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Jx();return h.disabled?null:b.jsx(me,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Zi({[hL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});dG.classes=Ny;dG.displayName="@mantine/core/AppShellHeader";const YHe={},hG=Me((e,t)=>{const n=xe("AppShellMain",YHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Jx();return b.jsx(me,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});hG.classes=Ny;hG.displayName="@mantine/core/AppShellMain";function rk(e){return typeof e=="object"?e.base:e}function ik(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function sk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function KHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),ik(s)){const f=Te(rk(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(sk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Qr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=xW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function XHe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(ik(r)){const o=Te(rk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}sk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Qr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function QHe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(ik(r)){const o=Te(rk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}sk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Qr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function JHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),ik(s)){const f=Te(rk(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(sk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Qr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=xW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Lj(e){return Number(e)===0?"0px":ls(e)}function ZHe({padding:e,baseStyles:t,minMediaStyles:n}){ik(e)&&(t["--app-shell-padding"]=Lj(rk(e))),sk(e)&&(e.base&&(t["--app-shell-padding"]=Lj(e.base)),Qr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Lj(e[r]))}))}function eqe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};JHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),KHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),QHe({baseStyles:u,minMediaStyles:o,header:t}),XHe({baseStyles:u,minMediaStyles:o,footer:n}),ZHe({baseStyles:u,minMediaStyles:o,padding:i});const l=EA(Qr(o),s).map(d=>({query:`(min-width: ${$O(d.px)})`,styles:o[d.value]})),c=EA(Qr(a),s).map(d=>({query:`(max-width: ${$O(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function tqe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ms(),o=ky(),{media:a,baseStyles:u}=eqe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return b.jsx(Rb,{media:a,styles:u,selector:o.cssVariablesSelector})}const nqe={},pG=Me((e,t)=>{const n=xe("AppShellNavbar",nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Jx();return h.disabled?null:b.jsx(me,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});pG.classes=Ny;pG.displayName="@mantine/core/AppShellNavbar";const rqe={},mG=zs((e,t)=>{const n=xe("AppShellSection",rqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Jx();return b.jsx(me,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});mG.classes=Ny;mG.displayName="@mantine/core/AppShellSection";function iqe({transitionDuration:e,disabled:t}){const[n,r]=k.useState(!0),i=k.useRef(),s=k.useRef();return Ave("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),kb(()=>{k.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const sqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Zl("app")},oqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),mi=Me((e,t)=>{const n=xe("AppShell",sqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:_,offsetScrollbars:E,mod:w,...S}=n,x=dt({name:"AppShell",classes:Ny,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oqe}),C=iqe({disabled:y,transitionDuration:d});return b.jsxs(HHe,{value:{getStyles:x,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:E},children:[b.jsx(tqe,{navbar:l,header:p,aside:v,footer:_,padding:f}),b.jsx(me,{ref:t,...x("root"),mod:[{resizing:C,layout:g,disabled:y},w],...S})]})});mi.classes=Ny;mi.displayName="@mantine/core/AppShell";mi.Navbar=pG;mi.Header=dG;mi.Main=hG;mi.Aside=cG;mi.Footer=fG;mi.Section=mG;function jbe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>jbe(t))}:e}function Bbe(e){return e?e.map(t=>jbe(t)):[]}function gG(e){return e.reduce((t,n)=>"group"in n?{...t,...gG(n.items)}:(t[n.value]=n,t),{})}var Qu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const aqe={error:null},uqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":nn(t,"combobox-chevron-size")}}),yG=Me((e,t)=>{const n=xe("ComboboxChevron",aqe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=dt({name:"ComboboxChevron",classes:Qu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:uqe,rootSelector:"chevron"});return b.jsx(me,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:b.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});yG.classes=Qu;yG.displayName="@mantine/core/ComboboxChevron";const[lqe,Kc]=po("Combobox component was not found in tree"),Ube=k.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>b.jsx(Gm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Ube.displayName="@mantine/core/ComboboxClearButton";const cqe={},vG=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",cqe,e),u=Kc();return b.jsx(Do.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});vG.classes=Qu;vG.displayName="@mantine/core/ComboboxDropdown";const fqe={refProp:"ref"},zbe=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",fqe,e);if(Kc(),!Iy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return b.jsx(Do.Target,{ref:t,refProp:r,children:n})});zbe.displayName="@mantine/core/ComboboxDropdownTarget";const dqe={},bG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",dqe,e),u=Kc();return b.jsx(me,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});bG.classes=Qu;bG.displayName="@mantine/core/ComboboxEmpty";function _G({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Kc(),[a,u]=k.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const hqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Vbe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",hqe,e);if(!Iy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Kc(),f=_G({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return k.cloneElement(n,{...f,...l,[r]:ps(t,c.store.targetRef,n==null?void 0:n.ref)})});Vbe.displayName="@mantine/core/ComboboxEventsTarget";const pqe={},wG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",pqe,e),u=Kc();return b.jsx(me,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});wG.classes=Qu;wG.displayName="@mantine/core/ComboboxFooter";const mqe={},EG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",mqe,e),c=Kc();return b.jsxs(me,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&b.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});EG.classes=Qu;EG.displayName="@mantine/core/ComboboxGroup";const gqe={},xG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",gqe,e),u=Kc();return b.jsx(me,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});xG.classes=Qu;xG.displayName="@mantine/core/ComboboxHeader";function Hbe({value:e,valuesDivider:t=",",...n}){return b.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Hbe.displayName="@mantine/core/ComboboxHiddenInput";const yqe={},SG=Me((e,t)=>{const n=xe("ComboboxOption",yqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Kc(),v=k.useId(),_=l||v;return b.jsx(me,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var w;h?E.preventDefault():((w=y.onOptionSubmit)==null||w.call(y,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(E)}})});SG.classes=Qu;SG.displayName="@mantine/core/ComboboxOption";const vqe={},TG=Me((e,t)=>{const n=xe("ComboboxOptions",vqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Kc(),d=Ta(a);return k.useEffect(()=>{f.store.setListId(d)},[d]),b.jsx(me,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});TG.classes=Qu;TG.displayName="@mantine/core/ComboboxOptions";const bqe={withAriaAttributes:!0,withKeyboardNavigation:!0},CG=Me((e,t)=>{const n=xe("ComboboxSearch",bqe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Kc(),h=d.getStyles("search"),p=_G({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return b.jsx(gi,{ref:ps(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});CG.classes=Qu;CG.displayName="@mantine/core/ComboboxSearch";const _qe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},qbe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",_qe,e);if(!Iy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Kc(),f=_G({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=k.cloneElement(n,{...f,...l});return b.jsx(Do.Target,{ref:ps(t,c.store.targetRef),children:d})});qbe.displayName="@mantine/core/ComboboxTarget";function wqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Eqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function xqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function AG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Cs({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=k.useRef(null),c=k.useRef(-1),f=k.useRef(null),d=k.useRef(null),h=k.useRef(-1),p=k.useRef(-1),m=k.useRef(-1),g=k.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=k.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=k.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),_=k.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),E=k.useCallback(M=>{const B=document.getElementById(l.current),z=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!z)return null;const H=M>=z.length?0:M<0?z.length-1:M;return c.current=H,z!=null&&z[H]&&!z[H].hasAttribute("data-combobox-disabled")?(_(),z[H].setAttribute("data-combobox-selected","true"),z[H].setAttribute("aria-selected","true"),z[H].scrollIntoView({block:"nearest",behavior:o}),z[H].id):null},[o,_]),w=k.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(B).findIndex(H=>H===M);return E(z)}return E(0)},[E]),S=k.useCallback(()=>E(Eqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),x=k.useCallback(()=>E(wqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),C=k.useCallback(()=>E(xqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),A=k.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var P;const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(z).findIndex(U=>U.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((P=z[H])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=k.useCallback(()=>{c.current=-1,_()},[_]),R=k.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=k.useCallback(M=>{l.current=M},[]),D=k.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=k.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=k.useCallback(()=>c.current,[]);return k.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:E,selectFirstOption:C,selectActiveOption:w,selectNextOption:S,selectPreviousOption:x,resetSelectedOption:I,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:R,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:$}}const Sqe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Tqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":lo(t),"--combobox-option-padding":nn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":lo(t),"--combobox-option-padding":nn(t,"combobox-option-padding")}});function Kn(e){const t=xe("Combobox",Sqe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=AG(),y=o||g,v=dt({name:h||"Combobox",classes:Qu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Tqe}),_=()=>{l==null||l(),y.closeDropdown()};return b.jsx(lqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:b.jsx(Do,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:s})})}const Cqe=e=>e;Kn.extend=Cqe;Kn.classes=Qu;Kn.displayName="@mantine/core/Combobox";Kn.Target=qbe;Kn.Dropdown=vG;Kn.Options=TG;Kn.Option=SG;Kn.Search=CG;Kn.Empty=bG;Kn.Chevron=yG;Kn.Footer=wG;Kn.Header=xG;Kn.EventsTarget=Vbe;Kn.DropdownTarget=zbe;Kn.Group=EG;Kn.ClearButton=Ube;Kn.HiddenInput=Hbe;var Wbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Gbe=Wbe,CL=k.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:_,...E},w)=>{const S=dt({name:e,props:t,className:n,style:y,classes:Wbe,classNames:r,styles:i,unstyled:s});return b.jsx(me,{...S("root"),ref:w,__vars:{"--label-fz":lo(d),"--label-lh":nn(d,"label-lh")},mod:[{"label-position":h},_],variant:g,size:d,...E,children:b.jsxs(me,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,b.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&b.jsx(me,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&b.jsx(gi.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&b.jsx(gi.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});CL.displayName="@mantine/core/InlineInput";const Ybe=k.createContext(null),Aqe=Ybe.Provider,Kbe=()=>k.useContext(Ybe),[Iqe,kqe]=Hx();var Xbe={card:"m_26775b0a"};const Rqe={withBorder:!0},Nqe=(e,{radius:t})=>({card:{"--card-radius":zr(t)}}),IG=Me((e,t)=>{const n=xe("CheckboxCard",Rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=dt({name:"CheckboxCard",classes:Xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nqe,rootSelector:"card"}),g=Kbe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return b.jsx(Iqe,{value:{checked:y},children:b.jsx(Ts,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});IG.displayName="@mantine/core/CheckboxCard";IG.classes=Xbe;function kG({children:e,role:t}){const n=Xx();return n?b.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):b.jsx(b.Fragment,{children:e})}const Pqe={},RG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",Pqe,e),[c,f]=Cs({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(Aqe,{value:{value:c,onChange:d,size:s},children:b.jsx(gi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:b.jsx(kG,{role:"group",children:a})})})});RG.classes=gi.Wrapper.classes;RG.displayName="@mantine/core/CheckboxGroup";function Qbe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return b.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:b.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jbe({indeterminate:e,...t}){return e?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:b.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):b.jsx(Qbe,{...t})}var Zbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Dqe={icon:Jbe},Oqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":nn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:zr(t),"--checkbox-color":s==="outline"?u:Mr(n,e),"--checkbox-icon-color":i?Mr(i,e):qx(o,e)?Ry({color:n,theme:e,autoContrast:o}):void 0}}},NG=Me((e,t)=>{const n=xe("CheckboxIndicator",Dqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,..._}=n,E=l,w=dt({name:"CheckboxIndicator",classes:Zbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oqe,rootSelector:"indicator"}),S=kqe(),x=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return b.jsx(me,{ref:t,...w("indicator",{variant:y}),variant:y,mod:[{checked:x,disabled:v},g],..._,children:b.jsx(E,{indeterminate:c,...w("icon")})})});NG.displayName="@mantine/core/CheckboxIndicator";NG.classes=Zbe;var e_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const $qe={labelPosition:"right",icon:Jbe},Mqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":nn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:zr(t),"--checkbox-color":s==="outline"?u:Mr(n,e),"--checkbox-icon-color":i?Mr(i,e):qx(o,e)?Ry({color:n,theme:e,autoContrast:o}):void 0}}},Tl=Me((e,t)=>{const n=xe("Checkbox",$qe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:_,disabled:E,variant:w,indeterminate:S,icon:x,rootRef:C,iconColor:A,onChange:I,autoContrast:R,mod:O,...D}=n,$=Kbe(),F=d||($==null?void 0:$.size),M=x,B=dt({name:"Checkbox",props:n,classes:e_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mqe}),{styleProps:z,rest:H}=Nb(D),P=Ta(f),U=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),I==null||I(W)}}:{};return b.jsx(CL,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:_,disabled:E,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:w,ref:C,mod:O,...z,...p,children:b.jsxs(me,{...B("inner"),mod:{"data-label-position":y},children:[b.jsx(me,{component:"input",id:P,ref:t,checked:g,disabled:E,mod:{error:!!_,indeterminate:S},...B("input",{focusable:!0,variant:w}),onChange:I,...H,...U,type:"checkbox"}),b.jsx(M,{indeterminate:S,...B("icon")})]})})});Tl.classes={...e_e,...Gbe};Tl.displayName="@mantine/core/Checkbox";Tl.Group=RG;Tl.Indicator=NG;Tl.Card=IG;function NE(e){return"group"in e}function t_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;NE(o)&&i.push({group:o.group,items:t_e({options:o.items,search:t,limit:n-i.length})}),NE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Lqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function n_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(NE(n))n_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Fqe(e,t){return Array.isArray(e)?e.includes(t):e===t}function r_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!NE(e)){const a=Fqe(n,e.value),u=t&&a&&b.jsx(Qbe,{className:Qu.optionsDropdownCheckIcon}),l=b.jsxs(b.Fragment,{children:[r==="left"&&u,b.jsx("span",{children:e.label}),r==="right"&&u]});return b.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Zi({[Qu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>b.jsx(r_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return b.jsx(Kn.Group,{label:e.group,children:o})}function i_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){n_e(e);const _=typeof i=="string"?(r||t_e)({options:e,search:u?i:"",limit:s??1/0}):e,E=Lqe(_),w=_.map(S=>b.jsx(r_e,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},NE(S)?S.group:S.value));return b.jsx(Kn.Dropdown,{hidden:t||n&&E,children:b.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?b.jsx(bm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:w}):w,E&&d&&b.jsx(Kn.Empty,{children:d})]})})}var s_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const jqe={},Bqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":nn(s,"badge-height"),"--badge-padding-x":nn(s,"badge-padding-x"),"--badge-fz":nn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:zr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Mr(n,e):void 0}}},b0=zs((e,t)=>{const n=xe("Badge",jqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:_,...E}=n,w=dt({name:"Badge",props:n,classes:s_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bqe});return b.jsxs(me,{variant:m,mod:[{block:g,circle:v},_],...w("root",{variant:m}),ref:t,...E,children:[d&&b.jsx("span",{...w("section"),"data-position":"left",children:d}),b.jsx("span",{...w("label"),children:p}),h&&b.jsx("span",{...w("section"),"data-position":"right",children:h})]})});b0.classes=s_e;b0.displayName="@mantine/core/Badge";var o_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const Uqe={},zqe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Mr(t,e):void 0,"--burger-size":nn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),PG=Me((e,t)=>{const n=xe("Burger",Uqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=dt({name:"Burger",classes:o_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zqe});return b.jsxs(Ts,{...p("root"),ref:t,...h,children:[b.jsx(me,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});PG.classes=o_e;PG.displayName="@mantine/core/Burger";var AL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Soe={orientation:"horizontal"},Vqe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),DG=Me((e,t)=>{const n=xe("ButtonGroup",Soe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Soe,e),p=dt({name:"ButtonGroup",props:n,classes:AL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Vqe,rootSelector:"group"});return b.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});DG.classes=AL;DG.displayName="@mantine/core/ButtonGroup";const Hqe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},qqe={},Wqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":nn(s,"button-height"),"--button-padding-x":nn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?lo(s.replace("compact-","")):lo(s),"--button-radius":t===void 0?void 0:zr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},en=zs((e,t)=>{const n=xe("Button",qqe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:_,"data-disabled":E,autoContrast:w,mod:S,...x}=n,C=dt({name:"Button",props:n,classes:AL,className:s,style:r,classNames:y,styles:v,unstyled:_,vars:i,varsResolver:Wqe}),A=!!l,I=!!c;return b.jsxs(Ts,{ref:t,...C("root",{active:!a&&!p&&!E}),unstyled:_,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":A,"with-right-section":I},S],...x,children:[b.jsx(Wm,{mounted:!!p,transition:Hqe,duration:150,children:R=>b.jsx(me,{component:"span",...C("loader",{style:R}),"aria-hidden":!0,children:b.jsx(Wc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),b.jsxs("span",{...C("inner"),children:[l&&b.jsx(me,{component:"span",...C("section"),mod:{position:"left"},children:l}),b.jsx(me,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&b.jsx(me,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});en.classes=AL;en.displayName="@mantine/core/Button";en.Group=DG;const[Gqe,Yqe]=po("Card component was not found in tree");var OG={root:"m_e615b15f",section:"m_599a2148"};const Kqe={},IL=zs((e,t)=>{const n=xe("CardSection",Kqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=Yqe();return b.jsx(me,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});IL.classes=OG;IL.displayName="@mantine/core/CardSection";const Xqe={},Qqe=(e,{padding:t})=>({root:{"--card-padding":ls(t)}}),$b=zs((e,t)=>{const n=xe("Card",Xqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=dt({name:"Card",props:n,classes:OG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qqe}),h=k.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===IL?k.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return b.jsx(Gqe,{value:{getStyles:d},children:b.jsx(Wx,{ref:t,unstyled:a,...d("root"),...f,children:p})})});$b.classes=OG;$b.displayName="@mantine/core/Card";$b.Section=IL;var a_e={root:"m_4451eb3a"};const Jqe={},Ll=zs((e,t)=>{const n=xe("Center",Jqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=dt({name:"Center",props:n,classes:a_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return b.jsx(me,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Ll.classes=a_e;Ll.displayName="@mantine/core/Center";var u_e={root:"m_b183c0a2"};const Zqe={},eWe=(e,{color:t})=>({root:{"--code-bg":t?Mr(t,e):void 0}}),hC=Me((e,t)=>{const n=xe("Code",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=dt({name:"Code",props:n,classes:u_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe});return b.jsx(me,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});hC.classes=u_e;hC.displayName="@mantine/core/Code";var l_e={root:"m_7485cace"};const tWe={},nWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:nn(t,"container-size")}}),$c=Me((e,t)=>{const n=xe("Container",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=dt({name:"Container",classes:l_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nWe});return b.jsx(me,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});$c.classes=l_e;$c.displayName="@mantine/core/Container";var c_e={root:"m_3eebeb36",label:"m_9e365f20"};const rWe={orientation:"horizontal"},iWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Mr(t,e):void 0,"--divider-border-style":n,"--divider-size":nn(r,"divider-size")}}),PE=Me((e,t)=>{const n=xe("Divider",rWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=dt({name:"Divider",classes:c_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iWe});return b.jsx(me,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&b.jsx(me,{component:"span",mod:{position:d},...m("label"),children:f})})});PE.classes=c_e;PE.displayName="@mantine/core/Divider";const[sWe,Zx]=po("Drawer component was not found in tree");var Km={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const oWe={},kL=Me((e,t)=>{const n=xe("DrawerBody",oWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Zx();return b.jsx(JW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});kL.classes=Km;kL.displayName="@mantine/core/DrawerBody";const aWe={},RL=Me((e,t)=>{const n=xe("DrawerCloseButton",aWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Zx();return b.jsx(ZW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});RL.classes=Km;RL.displayName="@mantine/core/DrawerCloseButton";const uWe={},NL=Me((e,t)=>{const n=xe("DrawerContent",uWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Zx(),d=f.scrollAreaComponent||Nbe;return b.jsx(Rbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:b.jsx(d,{style:{height:"100vh"},children:u})})});NL.classes=Km;NL.displayName="@mantine/core/DrawerContent";const lWe={},PL=Me((e,t)=>{const n=xe("DrawerHeader",lWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Zx();return b.jsx(eG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});PL.classes=Km;PL.displayName="@mantine/core/DrawerHeader";const cWe={},DL=Me((e,t)=>{const n=xe("DrawerOverlay",cWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Zx();return b.jsx(tG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});DL.classes=Km;DL.displayName="@mantine/core/DrawerOverlay";function fWe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function dWe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const hWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},pWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},mWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),position:"left"},gWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":nn(n,"drawer-size"),"--drawer-flex":dWe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":fWe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),OL=Me((e,t)=>{const n=xe("DrawerRoot",mWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Vh(),m=dt({name:"Drawer",classes:Km,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gWe}),g=(p==="rtl"?pWe:hWe)[c];return b.jsx(sWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:b.jsx(kbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});OL.classes=Km;OL.displayName="@mantine/core/DrawerRoot";const yWe={},$L=Me((e,t)=>{const n=xe("DrawerTitle",yWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Zx();return b.jsx(nG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});$L.classes=Km;$L.displayName="@mantine/core/DrawerTitle";const vWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),withOverlay:!0,withCloseButton:!0},Hh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",vWe,e),l=!!n||s;return b.jsxs(OL,{ref:t,...u,children:[r&&b.jsx(DL,{...i}),b.jsxs(NL,{children:[l&&b.jsxs(PL,{children:[n&&b.jsx($L,{children:n}),s&&b.jsx(RL,{...o})]}),b.jsx(kL,{children:a})]})]})});Hh.classes=Km;Hh.displayName="@mantine/core/Drawer";Hh.Root=OL;Hh.Overlay=DL;Hh.Content=NL;Hh.Body=kL;Hh.Header=PL;Hh.Title=$L;Hh.CloseButton=RL;function bWe({open:e,close:t,openDelay:n,closeDelay:r}){const i=k.useRef(-1),s=k.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return k.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[_We,f_e]=po("Grid component was not found in tree"),WU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Toe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":WU(e,t),Coe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Aoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function wWe({span:e,order:t,offset:n,selector:r}){var d;const i=ms(),s=f_e(),a=Rf(e)===void 0?12:Rf(e),u=Ay({"--col-order":(d=Rf(t))==null?void 0:d.toString(),"--col-flex-grow":Coe(a,s.grow),"--col-flex-basis":WU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Toe(a,s.columns,s.grow),"--col-offset":Aoe(Rf(n),s.columns)}),l=Qr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Coe(e[p],s.grow),h[p]["--col-flex-basis"]=WU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Toe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Aoe(n[p],s.columns)),h},{}),f=EA(Qr(l),i).filter(h=>Qr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return b.jsx(Rb,{styles:u,media:f,selector:r})}var $G={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const EWe={span:12},MG=Me((e,t)=>{const n=xe("GridCol",EWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=f_e(),h=ek();return b.jsxs(b.Fragment,{children:[b.jsx(wWe,{selector:`.${h}`,span:u,order:l,offset:c}),b.jsx(me,{ref:t,...d.getStyles("col",{className:Zi(i,h),style:s,classNames:r,styles:o}),...f})]})});MG.classes=$G;MG.displayName="@mantine/core/GridCol";function xWe({gutter:e,selector:t}){const n=ms(),r=Ay({"--grid-gutter":ls(Rf(e))}),i=Qr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=ls(e[u])),a),{}),o=EA(Qr(i),n).filter(a=>Qr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return b.jsx(Rb,{styles:r,media:o,selector:t})}const SWe={gutter:"md",grow:!1,columns:12},TWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),qa=Me((e,t)=>{const n=xe("Grid",SWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=dt({name:"Grid",classes:$G,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TWe}),y=ek();return b.jsxs(_We,{value:{getStyles:g,grow:l,columns:f},children:[b.jsx(xWe,{selector:`.${y}`,...n}),b.jsx(me,{ref:t,...g("root",{className:y}),...m,children:b.jsx("div",{...g("inner"),children:p})})]})});qa.classes=$G;qa.displayName="@mantine/core/Grid";qa.Col=MG;var d_e={root:"m_9e117634"};const CWe={},AWe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:zr(t),"--image-object-fit":n}}),Py=zs((e,t)=>{const n=xe("Image",CWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=k.useState(!c);k.useEffect(()=>y(!c),[c]);const v=dt({name:"Image",classes:d_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AWe});return g&&h?b.jsx(me,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):b.jsx(me,{component:"img",ref:t,...v("root"),src:c,onError:_=>{l==null||l(_),y(!0)},mod:p,...m})});Py.classes=d_e;Py.displayName="@mantine/core/Image";function GU(){return GU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GU.apply(null,arguments)}function IWe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var kWe=k.useLayoutEffect,RWe=function(t){var n=k.useRef(t);return kWe(function(){n.current=t}),n},Ioe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},NWe=function(t,n){var r=k.useRef();return k.useCallback(function(i){t.current=i,r.current&&Ioe(r.current,null),r.current=n,n&&Ioe(n,i)},[n])},koe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},PWe=function(t){Object.keys(koe).forEach(function(n){t.style.setProperty(n,koe[n],"important")})},Roe=PWe,Na=null,Noe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function DWe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Na||(Na=document.createElement("textarea"),Na.setAttribute("tabindex","-1"),Na.setAttribute("aria-hidden","true"),Roe(Na)),Na.parentNode===null&&document.body.appendChild(Na);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Na.style[h]=o[h]}),Roe(Na),Na.value=t;var u=Noe(Na,e);Na.value=t,u=Noe(Na,e),Na.value="x";var l=Na.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Poe=function(){},OWe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},$We=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],MWe=!!document.documentElement.currentStyle,LWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=OWe($We,n),i=r.boxSizing;if(i==="")return null;MWe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},FWe=LWe;function h_e(e,t,n){var r=RWe(n);k.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var jWe=function(t){h_e(window,"resize",t)},BWe=function(t){h_e(document.fonts,"loadingdone",t)},UWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],zWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Poe:o,u=t.onHeightChange,l=u===void 0?Poe:u,c=IWe(t,UWe),f=c.value!==void 0,d=k.useRef(null),h=NWe(d,n),p=k.useRef(0),m=k.useRef(),g=function(){var _=d.current,E=r&&m.current?m.current:FWe(_);if(E){m.current=E;var w=DWe(E,_.value||_.placeholder||"x",s,i),S=w[0],x=w[1];p.current!==S&&(p.current=S,_.style.setProperty("height",S+"px","important"),l(S,{rowHeight:x}))}},y=function(_){f||g(),a(_)};return k.useLayoutEffect(g),jWe(g),BWe(g),k.createElement("textarea",GU({},c,{onChange:y,ref:h}))},VWe=k.forwardRef(zWe);const HWe={},LG=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",HWe,e),u=n&&Rve()!=="test",l=u?{maxRows:r,minRows:i}:{};return b.jsx(Yc,{component:u?VWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});LG.classes=Yc.classes;LG.displayName="@mantine/core/Textarea";const[qWe,WWe]=po("List component was not found in tree");var FG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const GWe={},jG=Me((e,t)=>{const n=xe("ListItem",GWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=WWe(),h=u||d.icon,p={classNames:r,styles:o};return b.jsx(me,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:b.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&b.jsx("span",{...d.getStyles("itemIcon",p),children:h}),b.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});jG.classes=FG;jG.displayName="@mantine/core/ListItem";const YWe={type:"unordered"},KWe=(e,{size:t,spacing:n})=>({root:{"--list-fz":lo(t),"--list-lh":Eve(t),"--list-spacing":ls(n)}}),Uf=Me((e,t)=>{const n=xe("List",YWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=dt({name:"List",classes:FG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KWe});return b.jsx(qWe,{value:{center:p,icon:d,getStyles:v},children:b.jsx(me,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Uf.classes=FG;Uf.displayName="@mantine/core/List";Uf.Item=jG;var p_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Doe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Zl("overlay")},XWe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Fl=Me((e,t)=>{const n=xe("LoadingOverlay",Doe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ms(),g=dt({name:"LoadingOverlay",classes:p_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XWe}),y={...Doe.overlayProps,...f};return b.jsx(Wm,{transition:"fade",...l,mounted:!!d,children:v=>b.jsxs(me,{...g("root",{style:v}),ref:t,...p,children:[b.jsx(Wc,{...g("loader"),unstyled:a,...c}),b.jsx(TA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),b.jsx(TA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Fl.classes=p_e;Fl.displayName="@mantine/core/LoadingOverlay";const[QWe,ok]=po("Menu component was not found in the tree");var eS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const JWe={},BG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",JWe,e),u=ok();return b.jsx(me,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});BG.classes=eS;BG.displayName="@mantine/core/MenuDivider";const ZWe={},UG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",ZWe,e),f=k.useRef(null),d=ok(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=qp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=qp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return b.jsxs(Do.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ps(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[b.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});UG.classes=eS;UG.displayName="@mantine/core/MenuDropdown";const eGe={},zG=zs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",eGe,e),p=ok(),m=ms(),{dir:g}=Vh(),y=k.useRef(),v=p.getItemIndex(y.current),_=h,E=qp(_.onMouseLeave,()=>p.setHovered(-1)),w=qp(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=qp(_.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),x=qp(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?zh({color:a,theme:m}):null;return b.jsxs(Ts,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:x,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ps(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:w,onMouseLeave:E,onClick:S,onKeyDown:wW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&b.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});zG.classes=eS;zG.displayName="@mantine/core/MenuItem";const tGe={},VG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",tGe,e),u=ok();return b.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});VG.classes=eS;VG.displayName="@mantine/core/MenuLabel";const nGe={refProp:"ref"},m_e=k.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",nGe,e);if(!Iy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=ok(),o=qp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=qp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=qp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return b.jsx(Do.Target,{refProp:r,popupType:"menu",ref:t,...i,children:k.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});m_e.displayName="@mantine/core/MenuTarget";const rGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Au(e){const t=xe("Menu",rGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:_,menuItemTabIndex:E,keepMounted:w,...S}=t,x=dt({name:"Menu",classes:eS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:I}]=aUe(),[R,O]=Cs({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,$]=k.useState(!1),F=()=>{O(!1),$(!1),R&&(i==null||i())},M=()=>{O(!0),!R&&(r==null||r())},B=()=>{R?F():M()},{openDropdown:z,closeDropdown:H}=bWe({open:M,close:F,closeDelay:p,openDelay:h}),P=j=>oUe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:U,resolvedStyles:W}=Hm({classNames:m,styles:g,props:t});return xh(()=>{I()},[R]),b.jsx(QWe,{value:{getStyles:x,opened:R,toggleDropdown:B,getItemIndex:P,hovered:C,setHovered:A,openedViaClick:D,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:z,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:E},children:b.jsx(Do,{...S,opened:R,onChange:B,defaultOpened:o,trapFocus:w?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:w,children:n})})}Au.extend=e=>e;Au.classes=eS;Au.displayName="@mantine/core/Menu";Au.Item=zG;Au.Label=VG;Au.Dropdown=UG;Au.Target=m_e;Au.Divider=BG;const[iGe,tS]=po("Modal component was not found in tree");var Xm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const sGe={},ML=Me((e,t)=>{const n=xe("ModalBody",sGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return b.jsx(JW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});ML.classes=Xm;ML.displayName="@mantine/core/ModalBody";const oGe={},LL=Me((e,t)=>{const n=xe("ModalCloseButton",oGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return b.jsx(ZW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});LL.classes=Xm;LL.displayName="@mantine/core/ModalCloseButton";const aGe={},FL=Me((e,t)=>{const n=xe("ModalContent",aGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=tS(),f=c.scrollAreaComponent||Nbe;return b.jsx(Rbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:b.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});FL.classes=Xm;FL.displayName="@mantine/core/ModalContent";const uGe={},jL=Me((e,t)=>{const n=xe("ModalHeader",uGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return b.jsx(eG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});jL.classes=Xm;jL.displayName="@mantine/core/ModalHeader";const lGe={},BL=Me((e,t)=>{const n=xe("ModalOverlay",lGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return b.jsx(tG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});BL.classes=Xm;BL.displayName="@mantine/core/ModalOverlay";const cGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},fGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:zr(t),"--modal-size":nn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),UL=Me((e,t)=>{const n=xe("ModalRoot",cGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=dt({name:m,classes:Xm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fGe});return b.jsx(iGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:b.jsx(kbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});UL.classes=Xm;UL.displayName="@mantine/core/ModalRoot";const dGe={},zL=Me((e,t)=>{const n=xe("ModalTitle",dGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=tS();return b.jsx(nG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});zL.classes=Xm;zL.displayName="@mantine/core/ModalTitle";const hGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Zl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},$i=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",hGe,e),c=!!n||s;return b.jsxs(UL,{ref:t,radius:u,...l,children:[r&&b.jsx(BL,{...i}),b.jsxs(FL,{radius:u,children:[c&&b.jsxs(jL,{children:[n&&b.jsx(zL,{children:n}),s&&b.jsx(LL,{...o})]}),b.jsx(ML,{children:a})]})]})});$i.classes=Xm;$i.displayName="@mantine/core/Modal";$i.Root=UL;$i.Overlay=BL;$i.Content=FL;$i.Body=ML;$i.Header=jL;$i.Title=zL;$i.CloseButton=LL;const[pGe,HG]=Hx(),[mGe,gGe]=Hx();var VL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const yGe={},vGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?nn(t):nn(n,"pg-gap")}}),qG=Me((e,t)=>{const n=xe("PillGroup",yGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=HG(),h=(d==null?void 0:d.size)||l||void 0,p=dt({name:"PillGroup",classes:VL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vGe,stylesCtx:{size:h},rootSelector:"group"});return b.jsx(mGe,{value:{size:h,disabled:c},children:b.jsx(me,{ref:t,size:h,...p("group"),...f})})});qG.classes=VL;qG.displayName="@mantine/core/PillGroup";const bGe={variant:"default"},_Ge=(e,{radius:t},{size:n})=>({root:{"--pill-fz":nn(n,"pill-fz"),"--pill-height":nn(n,"pill-height"),"--pill-radius":t===void 0?void 0:zr(t)}}),CA=Me((e,t)=>{const n=xe("Pill",bGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,_=gGe(),E=HG(),w=m||(_==null?void 0:_.size)||void 0,S=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",x=dt({name:"Pill",classes:VL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ge,stylesCtx:{size:w}});return b.jsxs(me,{component:"span",ref:t,variant:S,size:w,...x("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...v,children:[b.jsx("span",{...x("label"),children:c}),f&&b.jsx(Gm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...x("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});CA.classes=VL;CA.displayName="@mantine/core/Pill";CA.Group=qG;var g_e={field:"m_45c4369d"};const wGe={type:"visible"},WG=Me((e,t)=>{const n=xe("PillsInputField",wGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=HG(),g=Xx(),y=dt({name:"PillsInputField",classes:g_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return b.jsx(me,{component:"input",ref:ps(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!d&&_.stopPropagation()})});WG.classes=g_e;WG.displayName="@mantine/core/PillsInputField";const EGe={},VO=Me((e,t)=>{const n=xe("PillsInput",EGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=k.useRef();return b.jsx(pGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:b.jsx(Yc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});VO.displayName="@mantine/core/PillsInput";VO.Field=WG;function xGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(NE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const SGe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},GG=Me((e,t)=>{const n=xe("MultiSelect",SGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:_,selectFirstOptionOnChange:E,onOptionSubmit:w,comboboxProps:S,filter:x,limit:C,withScrollArea:A,maxDropdownHeight:I,searchValue:R,defaultSearchValue:O,onSearchChange:D,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:z,radius:H,rightSection:P,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Xe,wrapperProps:Ue,description:yt,label:it,error:_e,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:We,hidePickedOptions:ge,withErrorStyles:ht,name:vt,form:pe,id:Ae,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Ar,required:Fn,mod:cr,renderOption:gn,onRemove:An,onClear:nr,scrollAreaProps:rr,...Vo}=n,ji=Ta(Ae),In=Bbe(m),Bi=gG(In),Ir=AG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{_==null||_(),Ir.resetSelectedOption()}}),{styleProps:vs,rest:{type:dp,autoComplete:fl,...bd}}=Nb(Vo),[Sr,Ni]=Cs({value:c,defaultValue:f,finalValue:[],onChange:d}),[Jr,du]=Cs({value:R,defaultValue:O,finalValue:"",onChange:D}),Ia=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ka,resolvedStyles:oe}=Hm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ir.toggleDropdown()),ot.key==="Backspace"&&Jr.length===0&&Sr.length>0&&(An==null||An(Sr[Sr.length-1]),Ni(Sr.slice(0,Sr.length-1)))},ae=Sr.map((ot,St)=>{var qt,On;return b.jsx(CA,{withRemoveButton:!$&&!((qt=Bi[ot])!=null&&qt.disabled),onRemove:()=>{Ni(Sr.filter(jn=>ot!==jn)),An==null||An(ot)},unstyled:a,disabled:F,...Ia("pill"),children:((On=Bi[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});k.useEffect(()=>{E&&Ir.selectFirstOption()},[E,Sr]);const Ce=He&&Sr.length>0&&!F&&!$&&b.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ni([]),du("")}}),Se=xGe({data:In,value:Sr});return b.jsxs(b.Fragment,{children:[b.jsxs(Kn,{store:Ir,classNames:ka,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{w==null||w(ot),du(""),Ir.updateSelectedOptionIndex("selected"),Sr.includes(Bi[ot].value)?(Ni(Sr.filter(St=>St!==Bi[ot].value)),An==null||An(Bi[ot].value)):Sr.length<ke&&Ni([...Sr,Bi[ot].value])},...S,children:[b.jsx(Kn.DropdownTarget,{children:b.jsx(VO,{...vs,__staticSelector:"MultiSelect",classNames:ka,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:P||Ce||b.jsx(Kn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ce?"all":"none"),rightSectionWidth:U,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Xe,wrapperProps:Ue,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ce?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ir.openDropdown():Ir.toggleDropdown(),"data-expanded":Ir.dropdownOpened||void 0,id:ji,required:Fn,mod:cr,children:b.jsxs(CA.Group,{disabled:F,unstyled:a,...Ia("pillsList"),children:[ae,b.jsx(Kn.EventsTarget,{autoComplete:fl,children:b.jsx(VO.Field,{...bd,ref:t,id:ji,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Ia("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),ze&&Ir.openDropdown()},onBlur:ot=>{B==null||B(ot),Ir.closeDropdown(),du("")},onKeyDown:ee,value:Jr,onChange:ot=>{du(ot.currentTarget.value),ze&&Ir.openDropdown(),E&&Ir.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),b.jsx(i_e,{data:ge?Se:In,hidden:$||F,filter:x,search:Jr,limit:C,hiddenWhenEmpty:!ze||!ct||ge&&Se.length===0&&Jr.trim().length===0,withScrollArea:A,maxDropdownHeight:I,filterOptions:ze,value:Sr,checkIconPosition:We,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${ji}-label`:void 0,"aria-label":it?void 0:Vo["aria-label"],renderOption:gn,scrollAreaProps:rr})]}),b.jsx(Kn.HiddenInput,{name:vt,valuesDivider:Ar,value:Sr,form:pe,disabled:F,..._t})]})});GG.classes={...Yc.classes,...Kn.classes};GG.displayName="@mantine/core/MultiSelect";var y_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const TGe={},CGe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":ls(r)}}},HL=zs((e,t)=>{const n=xe("NavLink",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:_,disableRightSectionRotation:E,noWrap:w,childrenOffset:S,onKeyDown:x,autoContrast:C,mod:A,...I}=n,R=dt({name:"NavLink",props:n,classes:y_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CGe}),[O,D]=Cs({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),D(!O))};return b.jsxs(b.Fragment,{children:[b.jsxs(Ts,{...R("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{x==null||x(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...I,children:[g&&b.jsx(me,{component:"span",...R("section"),mod:{position:"left"},children:g}),b.jsxs(me,{...R("body"),mod:{"no-wrap":w},children:[b.jsx(me,{component:"span",...R("label"),children:v}),b.jsx(me,{component:"span",mod:{active:p},...R("description"),children:_})]}),($||y)&&b.jsx(me,{...R("section"),component:"span",mod:{rotate:O&&!E,position:"right"},children:$?y||b.jsx(RE,{...R("chevron")}):y})]}),b.jsx(vL,{in:O,...R("collapse"),children:b.jsx("div",{...R("children"),children:d})})]})});HL.classes=y_e;HL.displayName="@mantine/core/NavLink";var v_e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const AGe={withCloseButton:!0},IGe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:zr(t),"--notification-color":n?Mr(n,e):void 0}}),YG=Me((e,t)=>{const n=xe("Notification",AGe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:_,mod:E,...w}=n,S=dt({name:"Notification",classes:v_e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:_,varsResolver:IGe});return b.jsxs(me,{...S("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:v,...w,role:"alert",children:[c&&!o&&b.jsx("div",{...S("icon"),children:c}),o&&b.jsx(Wc,{size:28,color:i,...S("loader")}),b.jsxs("div",{...S("body"),children:[l&&b.jsx("div",{...S("title"),children:l}),b.jsx(me,{...S("description"),mod:{"data-with-title":!!l},children:f})]}),a&&b.jsx(Gm,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...S("closeButton")})]})});YG.classes=v_e;YG.displayName="@mantine/core/Notification";function b_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var AA;(function(e){e.event="event",e.props="prop"})(AA||(AA={}));function Vg(){}function kGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function IA(e){return!!(e||"").match(/\d/)}function zw(e){return e==null}function RGe(e){return typeof e=="number"&&isNaN(e)}function __e(e){return zw(e)||RGe(e)||typeof e=="number"&&!isFinite(e)}function w_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function NGe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function PGe(e,t,n){var r=NGe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function DGe(e){var t=k.useRef(e);t.current=e;var n=k.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function KG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function OGe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function E_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Ooe(e,t){return Array(t+1).join(e)}function x_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Ooe("0",Math.abs(o))+i:o>=a?i=i+Ooe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function $oe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=KG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=E_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function U1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var S_e=kGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),$Ge=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function MGe(e,t,n){return Math.min(Math.max(e,t),n)}function Fj(e){return Math.max(e.selectionStart,e.selectionEnd)}function LGe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function FGe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function jGe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function BGe(e,t,n,r,i,s,o){o===void 0&&(o=jGe);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var _=y===-1||d[y]===-1?0:d[y]+1;return _>v?v:r-_<v-r?_:v}function Moe(e,t,n,r){var i=e.length;if(t=MGe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function UGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(IA(e[n])||IA(e[n-1]));return t}function T_e(e,t,n,r,i,s){s===void 0&&(s=Vg);var o=DGe(function(p,m){var g,y;return __e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?x_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=k.useState(function(){return o(zw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;zw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return k.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function zGe(e){return e.replace(/[^0-9]/g,"")}function VGe(e){return e}function HGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=VGe);var a=e.removeFormatting;a===void 0&&(a=zGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Vg);var h=e.onKeyDown;h===void 0&&(h=Vg);var p=e.onMouseUp;p===void 0&&(p=Vg);var m=e.onFocus;m===void 0&&(m=Vg);var g=e.onBlur;g===void 0&&(g=Vg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=UGe);var _=e.isValidInputCharacter;_===void 0&&(_=IA);var E=e.isCharacterSame,w=b_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=T_e(y,u,!!l,o,a,c),x=S[0],C=x.formattedValue,A=x.numAsString,I=S[1],R=k.useRef(),O=k.useRef({formattedValue:C,numAsString:A}),D=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},I(_e,ke)},$=k.useState(!1),F=$[0],M=$[1],B=k.useRef(null),z=k.useRef({setCaretTimeout:null,focusTimeout:null});k.useEffect(function(){return M(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var H=o,P=function(_e,ke){var ze=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(ze)?void 0:ze}},U=function(_e,ke,ze){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(U1(_e,ke),z.current.setCaretTimeout=setTimeout(function(){_e.value===ze&&_e.selectionStart!==ke&&U1(_e,ke)},0))},W=function(_e,ke,ze){return Moe(_e,ke,v(_e),ze)},j=function(_e,ke,ze){var ct=v(ke),Ot=BGe(ke,C,_e,ze,ct,_,E);return Ot=Moe(ke,Ot,ct),Ot},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var ze=_e.input,ct=_e.source,Ot=_e.event,We=_e.numAsString,ge;if(ze){var ht=_e.inputValue||ze.value,vt=Fj(ze);ze.value=ke,ge=j(ht,ke,vt),ge!==void 0&&U(ze,ge,ke)}ke!==C&&D(P(ke,We),{event:Ot,source:ct})};k.useEffect(function(){var _e=O.current,ke=_e.formattedValue,ze=_e.numAsString;(C!==ke||A!==ze)&&D(P(C,A),{event:void 0,source:AA.props})},[C,A]);var G=B.current?Fj(B.current):void 0,ne=typeof window<"u"?k.useLayoutEffect:k.useEffect;ne(function(){var _e=B.current;if(C!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,C,G);_e.value=C,U(_e,ke,C)}},[C]);var ce=function(_e,ke,ze){var ct=ke.target,Ot=R.current?$Ge(R.current,ct.selectionEnd):S_e(C,_e),We=Object.assign(Object.assign({},Ot),{lastValue:C}),ge=a(_e,We),ht=H(ge);if(ge=a(ht,void 0),f&&!f(P(ht,ge))){var vt=ke.target,pe=Fj(vt),Ae=j(_e,C,pe);return vt.value=C,U(vt,Ae,C),!1}return q({formattedValue:ht,numAsString:ge,inputValue:_e,event:ke,source:ze,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var ze=_e.selectionStart,ct=_e.selectionEnd;R.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,ze=ke.value,ct=ce(ze,_e,AA.event);ct&&d(_e),R.current=void 0},ve=function(_e){var ke=_e.target,ze=_e.key,ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge;ze==="ArrowLeft"||ze==="Backspace"?ge=Math.max(ct-1,0):ze==="ArrowRight"?ge=Math.min(ct+1,We.length):ze==="Delete"&&(ge=ct);var ht=0;ze==="Delete"&&ct===Ot&&(ht=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(ge===void 0||ct!==Ot&&!vt){h(_e),de(ke,ht);return}var pe=ge;if(vt){var Ae=ze==="ArrowLeft"?"left":"right";pe=W(We,ge,Ae),pe!==ge&&_e.preventDefault()}else ze==="Delete"&&!_(We[ge])?pe=W(We,ge,"right"):ze==="Backspace"&&!_(We[ge])&&(pe=W(We,ge,"left"));pe!==ge&&U(ke,pe,We),h(_e),de(ke,ht)},Ie=function(_e){var ke=_e.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Ot){var ge=W(We,ct);ge!==ct&&U(ke,ge,We)}};ze(),requestAnimationFrame(function(){ze()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,ze=_e.currentTarget;B.current=ke,z.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge=W(We,ct);ge!==ct&&!(ct===0&&Ot===We.length)&&U(ke,ge,We),m(Object.assign(Object.assign({},_e),{currentTarget:ze}))},0)},Xe=function(_e){B.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(_e)},Ue=F&&LGe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},w,{type:t,value:C,onChange:he,onKeyDown:ve,onMouseUp:Ie,onFocus:be,onBlur:Xe});if(n==="text")return i?wr.createElement(wr.Fragment,null,i(C,w)||null):wr.createElement("span",Object.assign({},w,{ref:s}),C);if(r){var it=r;return wr.createElement(it,Object.assign({},yt,{ref:s}))}return wr.createElement("input",Object.assign({},yt,{ref:s}))}function Loe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=qL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=KG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=E_e(p,n,!!r)),l&&(h=PGe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function qL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function qGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function WGe(e,t){return new RegExp("(^-)|[0-9]|"+w_e(e),"g")}function GGe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function YGe(e,t,n){var r;t===void 0&&(t=FGe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=qL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(IA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,z,H){var P=!1,U=!1;s.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,U=!0):o.startsWith("-")&&B.length===o.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return U&&(W=2),W&&(B=B.substring(W),z-=W,H-=W),{value:B,start:z,end:H,hasNegation:P}},v=y(e,c,f),_=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var E=y(t.lastValue,u.start,u.end),w=E.start,S=E.end,x=E.value,C=e.substring(c,f);e.length&&x.length&&(w>x.length-o.length||S<s.length)&&!(C&&o.startsWith(C))&&(e=x);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=qGe(_?"-"+e:e,i),e=(e.match(WGe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(w_e(p),"g"),function(B,z){return z===O?".":""});var D=KG(e,i),$=D.beforeDecimal,F=D.afterDecimal,M=D.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function KGe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function XGe(e){var t=qL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function QGe(e){e=XGe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Vg);var s=e.onBlur;s===void 0&&(s=Vg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=b_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=qL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return Loe(M,e)},_=function(M,B){return YGe(M,B,e)},E=zw(f)?c:f,w=d??GGe(E,l,t);zw(f)?zw(c)||(w=w||typeof c=="number"):w=w||typeof f=="number";var S=function(M){return __e(M)?M:(typeof M=="number"&&(M=x_e(M)),w&&typeof a=="number"?$oe(M,a,!!u):M)},x=T_e(S(f),S(c),!!w,v,_,h),C=x[0],A=C.numAsString,I=C.formattedValue,R=x[1],O=function(M){var B=M.target,z=M.key,H=B.selectionStart,P=B.selectionEnd,U=B.value;if(U===void 0&&(U=""),(z==="Backspace"||z==="Delete")&&P<l.length){M.preventDefault();return}if(H!==P){i(M);return}z==="Backspace"&&U[0]==="-"&&H===l.length+1&&n&&U1(B,1),a&&u&&(z==="Backspace"&&U[H-1]===g?(U1(B,H-1),M.preventDefault()):z==="Delete"&&U[H]===g&&M.preventDefault()),y!=null&&y.includes(z)&&U[H]===g&&U1(B,H+1);var W=o===!0?",":o;z==="Backspace"&&U[H-1]===W&&U1(B,H-1),z==="Delete"&&U[H]===W&&U1(B,H+1),i(M)},D=function(M){var B=A;if(B.match(/\d/g)||(B=""),r||(B=OGe(B)),u&&a&&(B=$oe(B,a,u)),B!==A){var z=Loe(B,e);R({formattedValue:z,value:B,floatValue:parseFloat(B)},{event:M,source:AA.event})}s(M)},$=function(M){return M===g?!0:IA(M)},F=function(M){var B=M.currentValue,z=M.lastValue,H=M.formattedValue,P=M.currentValueIndex,U=M.formattedValueIndex,W=B[P],j=H[U],q=S_e(z,B),G=q.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:R,format:v,removeFormatting:_,getCaretBoundary:function(M){return KGe(M,e)},onKeyDown:O,onBlur:D})}function JGe(e){var t=QGe(e);return wr.createElement(HGe,Object.assign({},t))}function Foe({direction:e,style:t,...n}){return b.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var YU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const ZGe=/^(0\.0*|-0(\.0*)?)$/,eYe=/^-?0\d+(\.\d+)?\.?$/;function tYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function joe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const nYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},rYe=(e,{size:t})=>({controls:{"--ni-chevron-size":nn(t,"ni-chevron-size")}}),XG=Me((e,t)=>{const n=xe("NumberInput",nYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:_,allowDecimal:E,decimalScale:w,onKeyDown:S,onKeyDownCapture:x,handlersRef:C,startValue:A,disabled:I,rightSectionPointerEvents:R,allowNegative:O,readOnly:D,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:z,withKeyboardEvents:H,trimLeadingZeroesOnBlur:P,...U}=n,W=dt({name:"NumberInput",classes:YU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:rYe}),{resolvedClassNames:j,resolvedStyles:q}=Hm({classNames:i,styles:s,props:n}),[G,ne]=Cs({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&M!==void 0,de=k.useRef(null),he=k.useRef(null),ve=k.useRef(0),Ie=(ge,ht)=>{ht.source==="event"&&ne(tYe(ge.floatValue)&&!ZGe.test(ge.value)&&!(z&&eYe.test(ge.value))?ge.floatValue:ge.value),l==null||l(ge,ht)},be=ge=>{const ht=String(ge).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},Xe=ge=>{de.current&&typeof ge<"u"&&de.current.setSelectionRange(ge,ge)},Ue=k.useRef();Ue.current=()=>{let ge;const ht=be(G),vt=be(p),pe=Math.max(ht,vt),Ae=10**pe;if(typeof G!="number"||Number.isNaN(G))ge=Zd(A,h,d);else if(d!==void 0){const ut=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;ge=ut<=d?ut:d}else ge=(Math.round(G*Ae)+Math.round(p*Ae))/Ae;const He=ge.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Xe((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=k.useRef();yt.current=()=>{let ge;const ht=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=be(G),pe=be(p),Ae=Math.max(vt,pe),He=10**Ae;if(typeof G!="number"||Number.isNaN(G))ge=Zd(A,ht,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;ge=ht!==void 0&&_t<ht?ht:_t}const ut=ge.toFixed(Ae);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Xe((_t=de.current)==null?void 0:_t.value.length)},0)};const it=ge=>{S==null||S(ge),!(D||!H)&&(ge.key==="ArrowUp"&&(ge.preventDefault(),Ue.current()),ge.key==="ArrowDown"&&(ge.preventDefault(),yt.current()))},_e=ge=>{if(x==null||x(ge),ge.key==="Backspace"){const ht=de.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ge.preventDefault(),window.setTimeout(()=>Xe(0),0))}};SW(C,{increment:Ue.current,decrement:yt.current});const ke=ge=>{ge?Ue.current():yt.current(),ve.current+=1},ze=ge=>{if(ke(ge),ce){const ht=typeof M=="number"?M:M(ve.current);he.current=window.setTimeout(()=>ze(ge),ht)}},ct=(ge,ht)=>{var vt;ge.preventDefault(),(vt=de.current)==null||vt.focus(),ke(ht),ce&&(he.current=window.setTimeout(()=>ze(ht),B))},Ot=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ve.current=0},We=b.jsxs("div",{...W("controls"),children:[b.jsx(Ts,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:b.jsx(Foe,{direction:"up"})}),b.jsx(Ts,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:b.jsx(Foe,{direction:"down"})})]});return b.jsx(Yc,{component:JGe,allowNegative:O,className:Zi(YU.root,r),size:$,...U,readOnly:D,disabled:I,value:G,getInputRef:ps(t,de),onValueChange:Ie,rightSection:m||D?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?w:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:z,onBlur:ge=>{if(_==null||_(ge),v==="blur"&&typeof G=="number"&&Zd(G,h,d)!==G&&ne(Zd(G,h,d)),P&&typeof G=="string"){const ht=G.replace(/^0+/,""),vt=parseFloat(ht);ne(Number.isNaN(vt)?ht:vt)}},isAllowed:ge=>v==="strict"?y?y(ge)&&joe(ge.floatValue,h,d):joe(ge.floatValue,h,d):y?y(ge):!0})});XG.classes={...Yc.classes,...YU};XG.displayName="@mantine/core/NumberInput";const[iYe,C_e]=po("Progress.Root component was not found in tree");var ak={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const sYe={},QG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",sYe,e),u=C_e();return b.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});QG.classes=ak;QG.displayName="@mantine/core/ProgressLabel";const oYe={},aYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":nn(t,"progress-size"),"--progress-radius":n===void 0?void 0:zr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),WL=Me((e,t)=>{const n=xe("ProgressRoot",oYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=dt({name:"Progress",classes:ak,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aYe});return b.jsx(iYe,{value:{getStyles:d,autoContrast:l},children:b.jsx(me,{ref:t,...d("root"),...f})})});WL.classes=ak;WL.displayName="@mantine/core/ProgressRoot";const uYe={withAria:!0},GL=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",uYe,e),p=C_e(),m=ms(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return b.jsx(me,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Mr(l,m),"--progress-label-color":qx(p.autoContrast,m)?Ry({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});GL.classes=ak;GL.displayName="@mantine/core/ProgressSection";const lYe={},nS=Me((e,t)=>{const n=xe("Progress",lYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Hm({classNames:i,styles:s,props:n});return b.jsx(WL,{ref:t,classNames:d,styles:h,vars:o,...f,children:b.jsx(GL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});nS.classes=ak;nS.displayName="@mantine/core/Progress";nS.Section=GL;nS.Root=WL;nS.Label=QG;const[cYe,A_e]=Hx(),[fYe,dYe]=Hx();var I_e={card:"m_9dc8ae12"};const hYe={withBorder:!0},pYe=(e,{radius:t})=>({card:{"--card-radius":zr(t)}}),JG=Me((e,t)=>{const n=xe("RadioCard",hYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=dt({name:"RadioCard",classes:I_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pYe,rootSelector:"card"}),{dir:v}=Vh(),_=A_e(),E=typeof l=="boolean"?l:(_==null?void 0:_.value)===d||!1,w=p||(_==null?void 0:_.name),S=x=>{if(m==null||m(x),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(x.nativeEvent.code)){x.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${w||"__mantine"}"]`)),A=C.findIndex(O=>O===x.target),I=A+1>=C.length?0:A+1,R=A-1<0?C.length-1:A-1;x.nativeEvent.code==="ArrowDown"&&(C[I].focus(),C[I].click()),x.nativeEvent.code==="ArrowUp"&&(C[R].focus(),C[R].click()),x.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?R:I].focus(),C[v==="ltr"?R:I].click()),x.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?I:R].focus(),C[v==="ltr"?I:R].click())}};return b.jsx(fYe,{value:{checked:E},children:b.jsx(Ts,{ref:t,mod:[{"with-border":f,checked:E},c],...y("card"),...g,role:"radio","aria-checked":E,name:w,onClick:x=>{h==null||h(x),_==null||_.onChange(d||"")},onKeyDown:S})})});JG.displayName="@mantine/core/RadioCard";JG.classes=I_e;const mYe={},ZG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",mYe,e),f=Ta(u),[d,h]=Cs({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return b.jsx(cYe,{value:{value:d,onChange:p,size:s,name:f},children:b.jsx(gi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:b.jsx(kG,{role:"radiogroup",children:a})})})});ZG.classes=gi.Wrapper.classes;ZG.displayName="@mantine/core/RadioGroup";function k_e({size:e,style:t,...n}){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:b.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var R_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const gYe={icon:k_e},yYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":nn(r,"radio-size"),"--radio-radius":t===void 0?void 0:zr(t),"--radio-color":s==="outline"?u:Mr(n,e),"--radio-icon-size":nn(r,"radio-icon-size"),"--radio-icon-color":i?Mr(i,e):qx(o,e)?Ry({color:n,theme:e,autoContrast:o}):void 0}}},eY=Me((e,t)=>{const n=xe("RadioIndicator",gYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,_=l,E=dt({name:"RadioIndicator",classes:R_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yYe,rootSelector:"indicator"}),w=dYe(),S=typeof p=="boolean"?p:(w==null?void 0:w.checked)||!1;return b.jsx(me,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:b.jsx(_,{...E("icon")})})});eY.displayName="@mantine/core/RadioIndicator";eY.classes=R_e;var N_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const vYe={labelPosition:"right"},bYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=zh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":nn(t,"radio-size"),"--radio-radius":n===void 0?void 0:zr(n),"--radio-color":s==="outline"?u:Mr(r,e),"--radio-icon-color":i?Mr(i,e):qx(o,e)?Ry({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":nn(t,"radio-icon-size")}}},Uv=Me((e,t)=>{const n=xe("Radio",vYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:_,icon:E=k_e,rootRef:w,iconColor:S,onChange:x,mod:C,...A}=n,I=dt({name:"Radio",classes:N_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bYe}),R=A_e(),O=(R==null?void 0:R.size)??c,D=n.size?c:O,{styleProps:$,rest:F}=Nb(A),M=Ta(l),B=R?{checked:R.value===F.value,name:F.name??R.name,onChange:z=>{R.onChange(z),x==null||x(z)}}:{};return b.jsx(CL,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:w,mod:C,...$,..._,children:b.jsxs(me,{...I("inner"),mod:{"label-position":d},children:[b.jsx(me,{...I("radio",{focusable:!0,variant:y}),onChange:x,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),b.jsx(E,{...I("icon"),"aria-hidden":!0})]})})});Uv.classes=N_e;Uv.displayName="@mantine/core/Radio";Uv.Group=ZG;Uv.Card=JG;Uv.Indicator=eY;const _Ye={duration:100,transition:"fade"};function wYe(e,t){return{..._Ye,...t,...e}}function EYe({offset:e,position:t}){const[n,r]=k.useState(!1),i=k.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=YW({placement:t,middleware:[HW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=k.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return k.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=rm(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var YL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const xYe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Zl("popover")},SYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:zr(t),"--tooltip-bg":n?Mr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),tY=Me((e,t)=>{const n=xe("TooltipFloating",xYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:_,vars:E,portalProps:w,...S}=n,x=ms(),C=dt({name:"TooltipFloating",props:n,classes:YL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:SYe}),{handleMouseMove:A,x:I,y:R,opened:O,boundaryRef:D,floating:$,setOpened:F}=EYe({offset:p,position:m});if(!Iy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=ps(D,r.ref,t),B=H=>{var P,U;(U=(P=r.props).onMouseEnter)==null||U.call(P,H),A(H),F(!0)},z=H=>{var P,U;(U=(P=r.props).onMouseLeave)==null||U.call(P,H),F(!1)};return b.jsxs(b.Fragment,{children:[b.jsx(Kx,{...w,withinPortal:s,children:b.jsx(me,{...S,...C("tooltip",{style:{...RW(o,x),zIndex:y,display:!v&&O?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:_,ref:$,mod:{multiline:g},children:h})}),k.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:z})]})});tY.classes=YL;tY.displayName="@mantine/core/TooltipFloating";const P_e=k.createContext(!1),TYe=P_e.Provider,CYe=()=>k.useContext(P_e),AYe={openDelay:0,closeDelay:0};function D_e(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",AYe,e);return b.jsx(TYe,{value:!0,children:b.jsx(wVe,{delay:{open:t,close:n},children:r})})}D_e.displayName="@mantine/core/TooltipGroup";function IYe(e){var S,x,C;const[t,n]=k.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=CYe(),o=Ta(),{delay:a,currentId:u,setCurrentId:l}=gbe(),c=k.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=YW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[fbe(e.offset),HW({padding:8}),VU(),dbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[HU()]:[]]}),{getReferenceProps:_,getFloatingProps:E}=IVe([_Ve(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((x=e.events)!=null&&x.touch)}),AVe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),RVe(h,{role:"tooltip"}),TVe(h,{enabled:typeof e.opened>"u"}),EVe(h,{id:o})]);xbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),xh(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const w=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:_,isGroupPhase:w,opened:i,placement:g}}const Boe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Zl("popover"),positionDependencies:[]},kYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:zr(t),"--tooltip-bg":n?Mr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),li=Me((e,t)=>{const n=xe("Tooltip",Boe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:_,arrowSize:E,arrowOffset:w,arrowRadius:S,arrowPosition:x,offset:C,transitionProps:A,multiline:I,events:R,zIndex:O,disabled:D,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:z,variant:H,keepMounted:P,vars:U,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",Boe,n),{dir:ne}=Vh(),ce=k.useRef(null),de=IYe({position:ybe(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:ce,arrowOffset:w,offset:typeof C=="number"?C+(_?E/2:0):C,positionDependencies:[...$,r],inline:z,strategy:q}),he=dt({name:"Tooltip",props:n,classes:YL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:kYe});if(!Iy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ve=ps(de.reference,r.ref,t),Ie=wYe(A,{duration:100,transition:"fade"});return b.jsxs(b.Fragment,{children:[b.jsx(Kx,{...W,withinPortal:f,children:b.jsx(Wm,{...Ie,keepMounted:P,mounted:!D&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>b.jsxs(me,{...G,variant:H,mod:[{multiline:I},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,b.jsx(KW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:_,position:de.placement,arrowSize:E,arrowOffset:w,arrowRadius:S,arrowPosition:x,...he("arrow")})]})})}),k.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ve,className:Zi(v,r.props.className),...r.props}))]})});li.classes=YL;li.displayName="@mantine/core/Tooltip";li.Floating=tY;li.Group=D_e;var O_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const RYe={withItemsBorders:!0},NYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:zr(t),"--sc-color":n?Mr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":nn(i,"sc-padding"),"--sc-font-size":lo(i)}}),KL=Me((e,t)=>{var ne,ce;const n=xe("SegmentedControl",RYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:_,color:E,transitionDuration:w,transitionTimingFunction:S,variant:x,autoContrast:C,withItemsBorders:A,mod:I,...R}=n,O=dt({name:"SegmentedControl",props:n,classes:O_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NYe}),D=ms(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=NUe(),[M,B]=k.useState(null),[z,H]=k.useState({}),P=(de,he)=>{z[he]=de,H(z)},[U,W]=Cs({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Ta(p),q=$.map(de=>k.createElement(me,{...O("control"),mod:{active:U===de.value,orientation:v},key:de.value},k.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:U===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":D.focusRing,key:`${de.value}-input`}),k.createElement(me,{component:"label",...O("label"),mod:{active:U===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>P(he,de.value),__vars:{"--sc-label-color":E!==void 0?Ry({color:E,theme:D,autoContrast:C}):void 0},key:`${de.value}-label`},b.jsx("span",{...O("innerLabel"),children:de.label})))),G=ps(t,de=>B(de));return l.length===0?null:b.jsxs(me,{...O("root"),variant:x,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":A},I],...R,role:"radiogroup",children:[typeof U=="string"&&b.jsx(sG,{target:z[U],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});KL.classes=O_e;KL.displayName="@mantine/core/SegmentedControl";const PYe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},uk=Me((e,t)=>{const n=xe("Select",PYe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:E,readOnly:w,disabled:S,filter:x,limit:C,withScrollArea:A,maxDropdownHeight:I,size:R,searchable:O,rightSection:D,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:z,searchValue:H,defaultSearchValue:P,onSearchChange:U,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ve,autoComplete:Ie,scrollAreaProps:be,...Xe}=n,Ue=k.useMemo(()=>Bbe(m),[m]),yt=k.useMemo(()=>gG(Ue),[Ue]),it=Ta(G),[_e,ke,ze]=Cs({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Ot,We]=Cs({value:H,defaultValue:P,finalValue:ct?ct.label:"",onChange:U}),ge=AG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ge.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ge.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:vt}=Hm({props:n,styles:i,classNames:r});k.useEffect(()=>{v&&ge.selectFirstOption()},[v,_e]),k.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!_e&&!S&&!w&&b.jsx(Kn.ClearButton,{size:R,...ce,onClear:()=>{ke(null,null),We(""),ve==null||ve()}});return b.jsxs(b.Fragment,{children:[b.jsxs(Kn,{store:ge,__staticSelector:"Select",classNames:ht,styles:vt,unstyled:s,readOnly:w,onOptionSubmit:Ae=>{_==null||_(Ae);const He=W&&yt[Ae].value===_e?null:yt[Ae],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),ge.closeDropdown()},size:R,...E,children:[b.jsx(Kn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:b.jsx(Yc,{id:it,ref:t,rightSection:D||pe||b.jsx(Kn.Chevron,{size:R,error:j,unstyled:s}),rightSectionPointerEvents:q||(pe?"all":"none"),...Xe,size:R,__staticSelector:"Select",disabled:S,readOnly:w||!O,value:Ot,onChange:Ae=>{We(Ae.currentTarget.value),ge.openDropdown(),v&&ge.selectFirstOption()},onFocus:Ae=>{O&&ge.openDropdown(),f==null||f(Ae)},onBlur:Ae=>{var He;O&&ge.closeDropdown(),We(_e!=null&&((He=yt[_e])==null?void 0:He.label)||""),d==null||d(Ae)},onClick:Ae=>{O?ge.openDropdown():ge.toggleDropdown(),h==null||h(Ae)},classNames:ht,styles:vt,unstyled:s,pointer:!O,error:j})}),b.jsx(i_e,{data:Ue,hidden:w||S,filter:x,search:Ot,limit:C,hiddenWhenEmpty:!O||!M,withScrollArea:A,maxDropdownHeight:I,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:Xe.label?`${it}-label`:void 0,"aria-label":Xe.label?void 0:Xe["aria-label"],renderOption:he,scrollAreaProps:be})]}),b.jsx(Kn.HiddenInput,{value:_e,name:B,form:z,disabled:S,...de})]})});uk.classes={...Yc.classes,...Kn.classes};uk.displayName="@mantine/core/Select";function DYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ms(),s=t===void 0?e:t,o=Ay({"--sg-spacing-x":ls(Rf(e)),"--sg-spacing-y":ls(Rf(s)),"--sg-cols":(c=Rf(n))==null?void 0:c.toString()}),a=Qr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=ls(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=ls(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=EA(Qr(a),i).filter(f=>Qr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return b.jsx(Rb,{styles:o,media:l,selector:r})}function jj(e){return typeof e=="object"&&e!==null?Qr(e):[]}function OYe(e){return e.sort((t,n)=>wA(t)-wA(n))}function $Ye({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...jj(e),...jj(t),...jj(n)]));return OYe(r)}function MYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Ay({"--sg-spacing-x":ls(Rf(e)),"--sg-spacing-y":ls(Rf(i)),"--sg-cols":(l=Rf(n))==null?void 0:l.toString()}),o=$Ye({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=ls(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=ls(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return b.jsx(Rb,{styles:s,container:u,selector:r})}var $_e={container:"m_925c2d2c",root:"m_2415a157"};const LYe={cols:1,spacing:"md",type:"media"},nY=Me((e,t)=>{const n=xe("SimpleGrid",LYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=dt({name:"SimpleGrid",classes:$_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=ek();return d==="container"?b.jsxs(b.Fragment,{children:[b.jsx(MYe,{...n,selector:`.${m}`}),b.jsx("div",{...p("container"),children:b.jsx(me,{ref:t,...p("root",{className:m}),...h})})]}):b.jsxs(b.Fragment,{children:[b.jsx(DYe,{...n,selector:`.${m}`}),b.jsx(me,{ref:t,...p("root",{className:m}),...h})]})});nY.classes=$_e;nY.displayName="@mantine/core/SimpleGrid";const[M_e,XL]=po("SliderProvider was not found in tree"),rY=k.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=XL();return b.jsx(me,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});rY.displayName="@mantine/core/SliderRoot";const HO=k.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=XL(),[_,E]=k.useState(!1),w=l||s||_||h&&p;return b.jsxs(me,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{E(!0),typeof f=="function"&&f()},onBlur:()=>{E(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,b.jsx(Wm,{mounted:i!=null&&!!w,transition:"fade",duration:0,...u,children:S=>b.jsx("div",{...v("label",{style:S}),children:i})})]})});HO.displayName="@mantine/core/SliderThumb";function qO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function FYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function L_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=XL();if(!e)return null;const u=e.map((l,c)=>k.createElement(me,{...a("markWrapper"),__vars:{"--mark-offset":`${qO({value:l.value,min:t,max:n})}%`},key:c},b.jsx(me,{...a("mark"),mod:{filled:FYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&b.jsx("div",{...a("markLabel"),children:l.label})));return b.jsx("div",{children:u})}L_e.displayName="@mantine/core/SliderMarks";function iY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=XL();return b.jsx(b.Fragment,{children:b.jsx(me,{...u("trackContainer"),mod:{disabled:r},...o,children:b.jsxs(me,{...u("track"),mod:{inverted:s,disabled:r},children:[b.jsx(me,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,b.jsx(L_e,{...a,offset:i,disabled:r,inverted:s})]})})})}iY.displayName="@mantine/core/SliderTrack";function KU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function hc(e,t){return parseFloat(e.toFixed(t))}function F_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var QL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const jYe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},BYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":nn(t,"slider-size"),"--slider-color":n?Mr(n,e):void 0,"--slider-radius":i===void 0?void 0:zr(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),JL=Me((e,t)=>{const n=xe("Slider",jYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:E,thumbChildren:w,disabled:S,unstyled:x,scale:C,inverted:A,className:I,style:R,vars:O,hiddenInputProps:D,...$}=n,F=dt({name:"Slider",props:n,classes:QL,classNames:r,className:I,styles:i,style:R,vars:O,varsResolver:BYe,unstyled:x}),{dir:M}=Vh(),[B,z]=k.useState(!1),[H,P]=Cs({value:typeof s=="number"?Zd(s,l,c):s,defaultValue:typeof h=="number"?Zd(h,l,c):h,finalValue:Zd(0,l,c),onChange:o}),U=k.useRef(H),W=k.useRef(),j=k.useRef(),q=qO({value:H,min:l,max:c}),G=C(H),ne=typeof g=="function"?g(G):g,ce=d??F_e(f),de=k.useCallback(({x:be})=>{if(!S){const Xe=KU({value:be,min:l,max:c,step:f,precision:ce});P(Xe),U.current=Xe}},[S,l,c,f,ce,P]),{ref:he,active:ve}=kve(de,{onScrubEnd:()=>a==null?void 0:a(U.current)},M),Ie=be=>{var Xe,Ue,yt,it,_e,ke;if(!S)switch(be.key){case"ArrowUp":{be.preventDefault(),(Xe=j.current)==null||Xe.focus();const ze=hc(Math.min(Math.max(H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowRight":{be.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=hc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const ze=hc(Math.min(Math.max(H-f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const ze=hc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),ce);P(ze),a==null||a(ze);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),P(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),P(c),a==null||a(c);break}}};return b.jsx(M_e,{value:{getStyles:F},children:b.jsxs(rY,{...$,ref:ps(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:S,children:[b.jsx(iY,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:E?()=>z(!0):void 0,onMouseLeave:E?()=>z(!1):void 0},children:b.jsx(HO,{max:c,min:l,value:G,position:q,dragging:ve,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:E,isHovered:B,disabled:S,children:w})}),b.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});JL.classes=QL;JL.displayName="@mantine/core/Slider";function UYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const zYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":nn(t,"slider-size"),"--slider-color":n?Mr(n,e):void 0,"--slider-radius":i===void 0?void 0:zr(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),VYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},DE=Me((e,t)=>{const n=xe("RangeSlider",VYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:_,labelAlwaysOn:E,thumbFromLabel:w,thumbToLabel:S,showLabelOnHover:x,thumbChildren:C,disabled:A,unstyled:I,scale:R,inverted:O,className:D,style:$,vars:F,hiddenInputProps:M,...B}=n,z=dt({name:"Slider",props:n,classes:QL,classNames:r,className:D,styles:i,style:$,vars:F,varsResolver:zYe,unstyled:I}),{dir:H}=Vh(),[P,U]=k.useState(-1),[W,j]=k.useState(!1),[q,G]=Cs({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=k.useRef(q),ce=k.useRef([]),de=k.useRef(void 0),he=[qO({value:q[0],min:l,max:c}),qO({value:q[1],min:l,max:c})],ve=p??F_e(h),Ie=We=>{G(We),ne.current=We};k.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(We,ge,ht)=>{const vt=[...ne.current];vt[ge]=We,ge===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[ge]=ne.current[ge]),vt[1]-We>d&&(vt[1]=We+d)),ge===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[ge]=ne.current[ge]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=hc(vt[0],ve),vt[1]=hc(vt[1],ve),Ie(vt),ht&&(a==null||a(ne.current))},Xe=We=>{if(!A){const ge=KU({value:We,min:l,max:c,step:h,precision:ve});be(ge,de.current,!1)}},{ref:Ue,active:yt}=kve(({x:We})=>Xe(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(We){de.current=We}const _e=We=>{Ue.current.focus();const ge=Ue.current.getBoundingClientRect(),ht=UYe(We.nativeEvent),vt=KU({value:ht-ge.left,max:c,min:l,step:h,containerWidth:ge.width}),pe=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ae=H==="ltr"?pe:pe===1?0:1;de.current=Ae},ke=()=>P!==1&&P!==0?(U(0),0):P,ze=We=>{if(!A)switch(We.key){case"ArrowUp":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(hc(Math.min(Math.max(ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowRight":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(hc(Math.min(Math.max(H==="rtl"?ne.current[ge]-h:ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowDown":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(hc(Math.min(Math.max(ne.current[ge]-h,l),c),ve),ge,!0);break}case"ArrowLeft":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(hc(Math.min(Math.max(H==="rtl"?ne.current[ge]+h:ne.current[ge]-h,l),c),ve),ge,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:_,labelAlwaysOn:E,onBlur:()=>U(-1)},Ot=Array.isArray(C);return b.jsx(M_e,{value:{getStyles:z},children:b.jsxs(rY,{...B,size:u,ref:t,disabled:A,children:[b.jsxs(iY,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:x?()=>j(!0):void 0,onMouseLeave:x?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[b.jsx(HO,{...ct,value:R(q[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(hc(R(q[0]),ve)):v,ref:We=>{ce.current[0]=We},thumbLabel:w,onMouseDown:()=>it(0),onFocus:()=>U(0),showLabelOnHover:x,isHovered:W,disabled:A,children:Ot?C[0]:C}),b.jsx(HO,{...ct,thumbLabel:S,value:R(q[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(hc(R(q[1]),ve)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>U(1),showLabelOnHover:x,isHovered:W,disabled:A,children:Ot?C[1]:C})]}),b.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),b.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});DE.classes=QL;DE.displayName="@mantine/core/RangeSlider";const HYe={},Nl=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",HYe,e);return b.jsx(me,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Nl.displayName="@mantine/core/Space";var j_e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const qYe={maxHeight:100,initialState:!1},WYe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),sY=Me((e,t)=>{const n=xe("Spoiler",qYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=dt({name:"Spoiler",classes:j_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WYe}),_=Ta(g),E=`${_}-region`,[w,S]=k.useState(l),{ref:x,height:C}=SUe(),A=w?f:d,I=A!==null&&c<C;return b.jsxs(me,{...v("root"),id:_,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&b.jsx(Ob,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":w,"aria-controls":E,...v("control"),children:A}),b.jsx("div",{...v("content",{style:{maxHeight:w?C?Te(C):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:E,children:b.jsx("div",{ref:x,children:h})})]})});sY.classes=j_e;sY.displayName="@mantine/core/Spoiler";var B_e={root:"m_6d731127"};const GYe={gap:"md",align:"stretch",justify:"flex-start"},YYe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":ls(t),"--stack-align":n,"--stack-justify":r}}),Wa=Me((e,t)=>{const n=xe("Stack",GYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=dt({name:"Stack",props:n,classes:B_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YYe});return b.jsx(me,{ref:t,...p("root"),variant:d,...h})});Wa.classes=B_e;Wa.displayName="@mantine/core/Stack";const U_e=k.createContext(null),KYe=U_e.Provider,XYe=()=>k.useContext(U_e),QYe={},oY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",QYe,e),[c,f]=Cs({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(KYe,{value:{value:c,onChange:d,size:s},children:b.jsx(gi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:b.jsx(kG,{role:"group",children:a})})})});oY.classes=gi.Wrapper.classes;oY.displayName="@mantine/core/SwitchGroup";var z_e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const JYe={labelPosition:"right"},ZYe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:zr(t),"--switch-height":nn(r,"switch-height"),"--switch-width":nn(r,"switch-width"),"--switch-thumb-size":nn(r,"switch-thumb-size"),"--switch-label-font-size":nn(r,"switch-label-font-size"),"--switch-track-label-padding":nn(r,"switch-track-label-padding"),"--switch-color":n?Mr(n,e):void 0}}),Vw=Me((e,t)=>{const n=xe("Switch",JYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:_,defaultChecked:E,onChange:w,labelPosition:S,description:x,error:C,disabled:A,variant:I,rootRef:R,mod:O,...D}=n,$=XYe(),F=p||($==null?void 0:$.size),M=dt({name:"Switch",props:n,classes:z_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZYe}),{styleProps:B,rest:z}=Nb(D),H=Ta(h),P=$?{checked:$.value.includes(z.value),onChange:$.onChange}:{},[U,W]=Cs({value:P.checked??_,defaultValue:E,finalValue:!1});return b.jsxs(CL,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:S,label:c,description:x,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":P.checked||void 0,variant:I,ref:R,mod:O,...B,...g,children:[b.jsx("input",{...z,disabled:A,checked:U,onChange:j=>{var q;$?(q=P.onChange)==null||q.call(P,j):w==null||w(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),b.jsxs(me,{"aria-hidden":"true",mod:{error:C,"label-position":S},...M("track"),children:[b.jsx(me,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),b.jsx("span",{...M("trackLabel"),children:U?d:f})]})]})});Vw.classes={...z_e,...Gbe};Vw.displayName="@mantine/core/Switch";Vw.Group=oY;const[eKe,tKe]=po("Table component was not found in the tree");var lk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function nKe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Mb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=tKe();return b.jsx(me,{component:e,ref:s,...nKe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=lk,r}const XU=Mb("th",{columnBorder:!0}),V_e=Mb("td",{columnBorder:!0}),aD=Mb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),H_e=Mb("thead",{stickyHeader:!0}),q_e=Mb("tbody"),W_e=Mb("tfoot"),G_e=Mb("caption",{captionSide:!0});function aY({data:e}){return b.jsxs(b.Fragment,{children:[e.caption&&b.jsx(G_e,{children:e.caption}),e.head&&b.jsx(H_e,{children:b.jsx(aD,{children:e.head.map((t,n)=>b.jsx(XU,{children:t},n))})}),e.body&&b.jsx(q_e,{children:e.body.map((t,n)=>b.jsx(aD,{children:t.map((r,i)=>b.jsx(V_e,{children:r},i))},n))}),e.foot&&b.jsx(W_e,{children:b.jsx(aD,{children:e.foot.map((t,n)=>b.jsx(XU,{children:t},n))})})]})}aY.displayName="@mantine/core/TableDataRenderer";const rKe={type:"scrollarea"},iKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),uY=Me((e,t)=>{const n=xe("TableScrollContainer",rKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=dt({name:"TableScrollContainer",classes:lk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iKe,rootSelector:"scrollContainer"});return b.jsx(me,{component:f==="scrollarea"?bm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:b.jsx("div",{...h("scrollContainerInner"),children:l})})});uY.classes=lk;uY.displayName="@mantine/core/TableScrollContainer";const sKe={withRowBorders:!0,verticalSpacing:7},oKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":ls(r),"--table-vertical-spacing":ls(i),"--table-border-color":s?Mr(s,e):void 0,"--table-striped-color":u&&o?Mr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Mr(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),Ht=Me((e,t)=>{const n=xe("Table",sKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:_,layout:E,variant:w,data:S,children:x,stickyHeader:C,stickyHeaderOffset:A,mod:I,...R}=n,O=dt({name:"Table",props:n,className:i,style:s,classes:lk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:oKe});return b.jsx(eKe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:b.jsx(me,{component:"table",variant:w,ref:t,mod:[{"data-with-table-border":v},I],...O("table"),...R,children:x||!!S&&b.jsx(aY,{data:S})})})});Ht.classes=lk;Ht.displayName="@mantine/core/Table";Ht.Td=V_e;Ht.Th=XU;Ht.Tr=aD;Ht.Thead=H_e;Ht.Tbody=q_e;Ht.Tfoot=W_e;Ht.Caption=G_e;Ht.ScrollContainer=uY;Ht.DataRenderer=aY;const[aKe,lY]=po("Tabs component was not found in the tree");var ck={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const uKe={},cY=Me((e,t)=>{const n=xe("TabsList",uKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=lY();return b.jsx(me,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});cY.classes=ck;cY.displayName="@mantine/core/TabsList";const lKe={},fY=Me((e,t)=>{const n=xe("TabsPanel",lKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=lY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return b.jsx(me,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});fY.classes=ck;fY.displayName="@mantine/core/TabsPanel";const cKe={},dY=Me((e,t)=>{const n=xe("TabsTab",cKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ms(),{dir:_}=Vh(),E=lY(),w=a===E.value,S=C=>{E.onChange(E.allowTabDeactivation&&a===E.value?null:a),u==null||u(C)},x={classNames:h,styles:p,props:n};return b.jsxs(Ts,{...y,...E.getStyles("tab",{className:r,style:d,variant:E.variant,...x}),disabled:c,unstyled:E.unstyled,variant:E.variant,mod:[{active:w,disabled:c,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},g],ref:t,role:"tab",id:E.getTabId(a),"aria-selected":w,tabIndex:w||E.value===null?0:-1,"aria-controls":E.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Mr(f,v):void 0},onKeyDown:wW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:_,onKeyDown:l}),children:[o&&b.jsx("span",{...E.getStyles("tabSection",x),"data-position":"left",children:o}),i&&b.jsx("span",{...E.getStyles("tabLabel",x),children:i}),s&&b.jsx("span",{...E.getStyles("tabSection",x),"data-position":"right",children:s})]})});dY.classes=ck;dY.displayName="@mantine/core/TabsTab";const Uoe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",fKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},dKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":zr(t),"--tabs-color":Mr(n,e),"--tabs-text-color":qx(r,e)?Ry({color:n,theme:e,autoContrast:r}):void 0}}),ss=Me((e,t)=>{const n=xe("Tabs",fKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:_,unstyled:E,className:w,style:S,vars:x,autoContrast:C,mod:A,...I}=n,R=Ta(l),[O,D]=Cs({value:i,defaultValue:r,finalValue:null,onChange:s}),$=dt({name:"Tabs",props:n,classes:ck,className:w,style:S,classNames:v,styles:_,unstyled:E,vars:x,varsResolver:dKe});return b.jsx(aKe,{value:{placement:g,value:O,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:MO(`${R}-tab`,Uoe),getPanelId:MO(`${R}-panel`,Uoe),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:E,getStyles:$},children:b.jsx(me,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...I,children:a})})});ss.classes=ck;ss.displayName="@mantine/core/Tabs";ss.Tab=dY;ss.Panel=fY;ss.List=cY;const hKe={},Wp=Me((e,t)=>{const n=xe("TextInput",hKe,e);return b.jsx(Yc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Wp.classes=Yc.classes;Wp.displayName="@mantine/core/TextInput";const pKe=["h1","h2","h3","h4","h5","h6"];function mKe(e,t){const n=t!==void 0?t:`h${e}`;return pKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Y_e={root:"m_8a5d1357"};const gKe={order:1},yKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=mKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ai=Me((e,t)=>{const n=xe("Title",gKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=dt({name:"Title",props:n,classes:Y_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:yKe});return[1,2,3,4,5,6].includes(u)?b.jsx(me,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Ai.classes=Y_e;Ai.displayName="@mantine/core/Title";function vKe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function bKe(e){return k.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function _Ke(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const wKe=()=>vKe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Lb=wKe(),EKe=(e=Lb)=>bKe(e);function rS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=_Ke(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function xKe(e,t=Lb){const n=e.id||Bw();return rS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function K_e(e,t=Lb){return rS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function SKe(e,t=Lb){return rS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function TKe(e=Lb){rS(e,()=>[])}function CKe(e=Lb){rS(e,t=>t.slice(0,e.getState().limit))}const Fb={show:xKe,hide:K_e,update:SKe,clean:TKe,cleanQueue:CKe,updateState:rS};function QU(){return QU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QU.apply(null,arguments)}function X_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function JU(e,t){return JU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},JU(e,t)}function Q_e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,JU(e,t)}var J_e={exports:{}},AKe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",IKe=AKe,kKe=IKe;function Z_e(){}function ewe(){}ewe.resetWarningCache=Z_e;var RKe=function(){function e(r,i,s,o,a,u){if(u!==kKe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ewe,resetWarningCache:Z_e};return n.PropTypes=n,n};J_e.exports=RKe();var NKe=J_e.exports;const zoe=Xl(NKe),Voe={disabled:!1},WO=wr.createContext(null);var PKe=function(t){return t.scrollTop},g2="unmounted",A1="exited",I1="entering",Y_="entered",ZU="exiting",Qm=function(e){Q_e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=A1,s.appearStatus=I1):u=Y_:r.unmountOnExit||r.mountOnEnter?u=g2:u=A1,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===g2?{status:A1}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==I1&&o!==Y_&&(s=I1):(o===I1||o===Y_)&&(s=ZU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===I1){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:m2.findDOMNode(this);o&&PKe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===A1&&this.setState({status:g2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[m2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Voe.disabled){this.safeSetState({status:Y_},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:I1},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:Y_},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:m2.findDOMNode(this);if(!s||Voe.disabled){this.safeSetState({status:A1},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ZU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:A1},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:m2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===g2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=X_e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wr.createElement(WO.Provider,{value:null},typeof o=="function"?o(i,a):wr.cloneElement(wr.Children.only(o),a))},t}(wr.Component);Qm.contextType=WO;Qm.propTypes={};function S_(){}Qm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:S_,onEntering:S_,onEntered:S_,onExit:S_,onExiting:S_,onExited:S_};Qm.UNMOUNTED=g2;Qm.EXITED=A1;Qm.ENTERING=I1;Qm.ENTERED=Y_;Qm.EXITING=ZU;function DKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hY(e,t){var n=function(s){return t&&k.isValidElement(s)?t(s):s},r=Object.create(null);return e&&k.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function OKe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function sv(e,t,n){return n[t]!=null?n[t]:e.props[t]}function $Ke(e,t){return hY(e.children,function(n){return k.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:sv(n,"appear",e),enter:sv(n,"enter",e),exit:sv(n,"exit",e)})})}function MKe(e,t,n){var r=hY(e.children),i=OKe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(k.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=k.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=k.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:sv(o,"exit",e),enter:sv(o,"enter",e)}):!u&&a&&!c?i[s]=k.cloneElement(o,{in:!1}):u&&a&&k.isValidElement(l)&&(i[s]=k.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:sv(o,"exit",e),enter:sv(o,"enter",e)}))}}),i}var LKe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},FKe={component:"div",childFactory:function(t){return t}},Pg=function(e){Q_e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(DKe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?$Ke(i,a):MKe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=hY(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=QU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=X_e(i,["component","childFactory"]),u=this.state.contextValue,l=LKe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?wr.createElement(WO.Provider,{value:u},l):wr.createElement(WO.Provider,{value:u},wr.createElement(s,a,l))},t}(wr.Component);Pg.propTypes={};Pg.defaultProps=FKe;const twe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function jKe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),twe.reduce((n,r)=>(n[r]=[],n),{}))}const Hoe={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},BKe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function UKe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Hoe[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:BKe[o]},l={opacity:0,maxHeight:0,transform:Hoe[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function zKe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const nwe=k.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=zKe(n,e.autoClose),l=k.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return k.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),k.useEffect(()=>(d(),c),[u]),b.jsx(YG,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});nwe.displayName="@mantine/notifications/NotificationContainer";var rwe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const VKe=Qm,HKe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Zl("overlay"),store:Lb,withinPortal:!0},qKe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),Jm=Me((e,t)=>{const n=xe("Notifications",HKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,..._}=n,E=ms(),w=EKe(g),S=_Ue(),x=mL(),C=k.useRef({}),A=k.useRef(0),R=(E.respectReducedMotion?x:!1)?1:f,O=dt({name:"Notifications",classes:rwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qKe});k.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),xh(()=>{w.notifications.length>A.current&&setTimeout(()=>S(),0),A.current=w.notifications.length},[w.notifications]);const D=jKe(w.notifications,l),$=twe.reduce((F,M)=>(F[M]=D[M].map(({style:B,...z})=>b.jsx(VKe,{timeout:R,onEnter:()=>C.current[z.id].offsetHeight,nodeRef:{current:C.current[z.id]},children:H=>b.jsx(nwe,{ref:P=>{C.current[z.id]=P},data:z,onHide:P=>K_e(P,g),autoClose:c,...O("notification",{style:{...UKe({state:H,position:M,transitionDuration:R,maxHeight:h}),...B}})})},z.id)),F),{});return b.jsxs(Kx,{withinPortal:v,...y,children:[b.jsx(me,{...O("root"),"data-position":"top-center",ref:t,..._,children:b.jsx(Pg,{children:$["top-center"]})}),b.jsx(me,{...O("root"),"data-position":"top-left",..._,children:b.jsx(Pg,{children:$["top-left"]})}),b.jsx(me,{...O("root"),"data-position":"top-right",..._,children:b.jsx(Pg,{children:$["top-right"]})}),b.jsx(me,{...O("root"),"data-position":"bottom-right",..._,children:b.jsx(Pg,{children:$["bottom-right"]})}),b.jsx(me,{...O("root"),"data-position":"bottom-left",..._,children:b.jsx(Pg,{children:$["bottom-left"]})}),b.jsx(me,{...O("root"),"data-position":"bottom-center",..._,children:b.jsx(Pg,{children:$["bottom-center"]})})]})});Jm.classes=rwe;Jm.displayName="@mantine/notifications/Notifications";Jm.show=Fb.show;Jm.hide=Fb.hide;Jm.update=Fb.update;Jm.clean=Fb.clean;Jm.cleanQueue=Fb.cleanQueue;Jm.updateState=Fb.updateState;const iwe=k.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),gs=()=>k.useContext(iwe);function WKe({children:e}){const[t,n]=wr.useState(void 0),r=wr.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return b.jsx(iwe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kA(){return kA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kA.apply(this,arguments)}var Jg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jg||(Jg={}));const qoe="popstate";function GKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return e7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:owe(i)}return KKe(t,n,null,e)}function cs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function swe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YKe(){return Math.random().toString(36).substr(2,8)}function Woe(e,t){return{usr:e.state,key:e.key,idx:t}}function e7(e,t,n,r){return n===void 0&&(n=null),kA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?iS(t):t,{state:n,key:t&&t.key||r||YKe()})}function owe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function iS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function KKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Jg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(kA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Jg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Jg.Push;let v=e7(m.location,g,y);l=c()+1;let _=Woe(v,l),E=m.createHref(v);try{o.pushState(_,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Jg.Replace;let v=e7(m.location,g,y);l=c();let _=Woe(v,l),E=m.createHref(v);o.replaceState(_,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:owe(g);return v=v.replace(/ $/,"%20"),cs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qoe,f),u=g,()=>{i.removeEventListener(qoe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Goe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Goe||(Goe={}));function XKe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?iS(t):t,i=lwe(r.pathname||"/",n);if(i==null)return null;let s=awe(e);QKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=lXe(i);o=oXe(s[a],u)}return o}function awe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(cs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=_0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(cs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),awe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:iXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of uwe(s.path))i(s,o,u)}),t}function uwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function QKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sXe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JKe=/^:[\w-]+$/,ZKe=3,eXe=2,tXe=1,nXe=10,rXe=-2,Yoe=e=>e==="*";function iXe(e,t){let n=e.split("/"),r=n.length;return n.some(Yoe)&&(r+=rXe),t&&(r+=eXe),n.filter(i=>!Yoe(i)).reduce((i,s)=>i+(JKe.test(s)?ZKe:s===""?tXe:nXe),r)}function sXe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function oXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=aXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:_0([i,c.pathname]),pathnameBase:hXe(_0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=_0([i,c.pathnameBase]))}return s}function aXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=uXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function uXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),swe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function lXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return swe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lwe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function cXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?iS(e):e;return{pathname:n?n.startsWith("/")?n:fXe(n,t):t,search:pXe(r),hash:mXe(i)}}function fXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function pY(e,t){let n=dXe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function mY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=iS(e):(i=kA({},e),cs(!i.pathname||!i.pathname.includes("?"),Bj("?","pathname","search",i)),cs(!i.pathname||!i.pathname.includes("#"),Bj("#","pathname","hash",i)),cs(!i.search||!i.search.includes("#"),Bj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=cXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const _0=e=>e.join("/").replace(/\/\/+/g,"/"),hXe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cwe=["post","put","patch","delete"];new Set(cwe);const yXe=["get",...cwe];new Set(yXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RA(){return RA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RA.apply(this,arguments)}const gY=k.createContext(null),vXe=k.createContext(null),jb=k.createContext(null),ZL=k.createContext(null),qh=k.createContext({outlet:null,matches:[],isDataRoute:!1}),fwe=k.createContext(null);function dwe(e,t){let{relative:n}={};sS()||cs(!1);let{basename:r,navigator:i}=k.useContext(jb),{hash:s,pathname:o,search:a}=EXe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:_0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function sS(){return k.useContext(ZL)!=null}function Dy(){return sS()||cs(!1),k.useContext(ZL).location}function hwe(e){k.useContext(jb).static||k.useLayoutEffect(e)}function Wh(){let{isDataRoute:e}=k.useContext(qh);return e?DXe():bXe()}function bXe(){sS()||cs(!1);let e=k.useContext(gY),{basename:t,future:n,navigator:r}=k.useContext(jb),{matches:i}=k.useContext(qh),{pathname:s}=Dy(),o=JSON.stringify(pY(i,n.v7_relativeSplatPath)),a=k.useRef(!1);return hwe(()=>{a.current=!0}),k.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=mY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:_0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const _Xe=k.createContext(null);function wXe(e){let t=k.useContext(qh).outlet;return t&&k.createElement(_Xe.Provider,{value:e},t)}function Em(){let{matches:e}=k.useContext(qh),t=e[e.length-1];return t?t.params:{}}function EXe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=k.useContext(jb),{matches:i}=k.useContext(qh),{pathname:s}=Dy(),o=JSON.stringify(pY(i,r.v7_relativeSplatPath));return k.useMemo(()=>mY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function pwe(e,t){return xXe(e,t)}function xXe(e,t,n,r){sS()||cs(!1);let{navigator:i}=k.useContext(jb),{matches:s}=k.useContext(qh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Dy(),c;if(t){var f;let g=typeof t=="string"?iS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||cs(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=XKe(e,{pathname:h}),m=IXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:_0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:_0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?k.createElement(ZL.Provider,{value:{location:RA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Jg.Pop}},m):m}function SXe(){let e=PXe(),t=gXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,null)}const TXe=k.createElement(SXe,null);class CXe extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(qh.Provider,{value:this.props.routeContext},k.createElement(fwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AXe(e){let{routeContext:t,match:n,children:r}=e,i=k.useContext(gY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(qh.Provider,{value:t},r)}function IXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||cs(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||TXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let _;return h?_=m:p?_=g:f.route.Component?_=k.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,k.createElement(AXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?k.createElement(CXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var mwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mwe||{}),GO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(GO||{});function kXe(e){let t=k.useContext(gY);return t||cs(!1),t}function RXe(e){let t=k.useContext(vXe);return t||cs(!1),t}function NXe(e){let t=k.useContext(qh);return t||cs(!1),t}function gwe(e){let t=NXe(),n=t.matches[t.matches.length-1];return n.route.id||cs(!1),n.route.id}function PXe(){var e;let t=k.useContext(fwe),n=RXe(GO.UseRouteError),r=gwe(GO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function DXe(){let{router:e}=kXe(mwe.UseNavigateStable),t=gwe(GO.UseNavigateStable),n=k.useRef(!1);return hwe(()=>{n.current=!0}),k.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,RA({fromRouteId:t},s)))},[e,t])}function yY(e){let{to:t,replace:n,state:r,relative:i}=e;sS()||cs(!1);let{future:s,static:o}=k.useContext(jb),{matches:a}=k.useContext(qh),{pathname:u}=Dy(),l=Wh(),c=mY(t,pY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return k.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function OXe(e){return wXe(e.context)}function Sp(e){cs(!1)}function $Xe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Jg.Pop,navigator:s,static:o=!1,future:a}=e;sS()&&cs(!1);let u=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:u,navigator:s,static:o,future:RA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=iS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=k.useMemo(()=>{let g=lwe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:k.createElement(jb.Provider,{value:l},k.createElement(ZL.Provider,{children:n,value:m}))}function MXe(e){let{children:t,location:n}=e;return pwe(t7(t),n)}new Promise(()=>{});function t7(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let s=[...t,i];if(r.type===k.Fragment){n.push.apply(n,t7(r.props.children,s));return}r.type!==Sp&&cs(!1),!r.props.index||!r.props.children||cs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=t7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function LXe(e,t){let n=n7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const FXe="6";try{window.__reactRouterVersion=FXe}catch{}const jXe="startTransition",Koe=cO[jXe];function BXe(e){let{basename:t,children:n,future:r,window:i}=e,s=k.useRef();s.current==null&&(s.current=GKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=k.useCallback(f=>{l&&Koe?Koe(()=>u(f)):u(f)},[u,l]);return k.useLayoutEffect(()=>o.listen(c),[o,c]),k.createElement($Xe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Xoe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Xoe||(Xoe={}));var Qoe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qoe||(Qoe={}));function vY(e){let t=k.useRef(n7(e)),n=k.useRef(!1),r=Dy(),i=k.useMemo(()=>LXe(r.search,n.current?null:t.current),[r.search]),s=Wh(),o=k.useCallback((a,u)=>{const l=n7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const bY=k.createContext(null);bY.displayName="@mantine/modals/ModalsContext";function UXe(){const e=k.useContext(bY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function zXe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=UXe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return b.jsxs(b.Fragment,{children:[l&&b.jsx(me,{mb:"md",children:l}),b.jsxs(si,{justify:"flex-end",...o,children:[b.jsx(en,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),b.jsx(en,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[VXe,e6]=DUe("mantine-modals");e6("openModal");e6("closeModal");e6("closeAllModals");const Joe=e6("openConfirmModal");function Zoe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function HXe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Zoe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Zoe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function qXe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function WXe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=k.useReducer(HXe,{modals:[],current:null}),o=k.useRef(i);o.current=i;const a=k.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=k.useCallback(({modalId:g,...y})=>{const v=g||Bw();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=k.useCallback(({modalId:g,...y})=>{const v=g||Bw();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=k.useCallback((g,{modalId:y,...v})=>{const _=y||Bw();return s({type:"OPEN",modal:{id:_,type:"context",props:v,ctx:g}}),_},[s]),f=k.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);VXe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,_=r[g.ctx];return{modalProps:v,content:b.jsx(_,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=qXe(g.props);return{modalProps:y,content:b.jsx(zXe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:b.jsx(b.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return b.jsxs(bY.Provider,{value:d,children:[b.jsx($i,{zIndex:Zl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GXe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=(e,t,n,r)=>{const i=k.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>k.createElement("svg",{ref:f,...GXe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>k.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YXe=Tn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KXe=Tn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eae=Tn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XXe=Tn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QXe=Tn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JXe=Tn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZXe=Tn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eQe=Tn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tQe=Tn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nQe=Tn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ywe=Tn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rQe=Tn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tae=Tn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iQe=Tn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sQe=Tn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oQe=Tn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aQe=Tn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uQe=Tn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lQe=Tn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cQe=Tn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vwe=Tn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fQe=Tn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dQe=Tn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hQe=Tn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pQe=Tn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mQe=Tn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bwe=Tn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gQe=Tn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yQe=Tn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vQe=Tn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bQe=Tn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Qe=Tn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _we=Tn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wQe=Tn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wwe=Tn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EQe=Tn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ewe=Tn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Y=Tn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wY=Tn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xQe=Tn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function xwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Hu="/study/";function nae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Swe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const SQe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,CQe={};function rae(e,t){return(CQe.jsx?TQe:SQe).test(e)}const AQe=/[ \t\n\f\r]/g;function IQe(e){return typeof e=="object"?e.type==="text"?iae(e.value):!1:iae(e)}function iae(e){return e.replace(AQe,"")===""}let fk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};fk.prototype.property={};fk.prototype.normal={};fk.prototype.space=null;function Twe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new fk(n,r,t)}function NA(e){return e.toLowerCase()}let Xc=class{constructor(t,n){this.property=t,this.attribute=n}};Xc.prototype.space=null;Xc.prototype.boolean=!1;Xc.prototype.booleanish=!1;Xc.prototype.overloadedBoolean=!1;Xc.prototype.number=!1;Xc.prototype.commaSeparated=!1;Xc.prototype.spaceSeparated=!1;Xc.prototype.commaOrSpaceSeparated=!1;Xc.prototype.mustUseProperty=!1;Xc.prototype.defined=!1;let kQe=0;const yn=Bb(),_s=Bb(),Cwe=Bb(),nt=Bb(),ti=Bb(),Hw=Bb(),hl=Bb();function Bb(){return 2**++kQe}const r7=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:_s,commaOrSpaceSeparated:hl,commaSeparated:Hw,number:nt,overloadedBoolean:Cwe,spaceSeparated:ti},Symbol.toStringTag,{value:"Module"})),Uj=Object.keys(r7);class EY extends Xc{constructor(t,n,r,i){let s=-1;if(super(t,n),sae(this,"space",i),typeof r=="number")for(;++s<Uj.length;){const o=Uj[s];sae(this,Uj[s],(r&r7[o])===r7[o])}}}EY.prototype.defined=!0;function sae(e,t,n){n&&(e[t]=n)}const RQe={}.hasOwnProperty;function oS(e){const t={},n={};let r;for(r in e.properties)if(RQe.call(e.properties,r)){const i=e.properties[r],s=new EY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[NA(r)]=r,n[NA(s.attribute)]=r}return new fk(t,n,e.space)}const Awe=oS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Iwe=oS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function kwe(e,t){return t in e?e[t]:t}function Rwe(e,t){return kwe(e,t.toLowerCase())}const Nwe=oS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Rwe,properties:{xmlns:null,xmlnsXLink:null}}),Pwe=oS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:_s,ariaAutoComplete:null,ariaBusy:_s,ariaChecked:_s,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ti,ariaCurrent:null,ariaDescribedBy:ti,ariaDetails:null,ariaDisabled:_s,ariaDropEffect:ti,ariaErrorMessage:null,ariaExpanded:_s,ariaFlowTo:ti,ariaGrabbed:_s,ariaHasPopup:null,ariaHidden:_s,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ti,ariaLevel:nt,ariaLive:null,ariaModal:_s,ariaMultiLine:_s,ariaMultiSelectable:_s,ariaOrientation:null,ariaOwns:ti,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:_s,ariaReadOnly:_s,ariaRelevant:null,ariaRequired:_s,ariaRoleDescription:ti,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:_s,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),NQe=oS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Rwe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hw,acceptCharset:ti,accessKey:ti,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ti,autoFocus:yn,autoPlay:yn,blocking:ti,capture:null,charSet:null,checked:yn,cite:null,className:ti,cols:nt,colSpan:null,content:null,contentEditable:_s,controls:yn,controlsList:ti,coords:nt|Hw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:Cwe,draggable:_s,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ti,height:nt,hidden:yn,high:nt,href:null,hrefLang:null,htmlFor:ti,httpEquiv:ti,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ti,itemRef:ti,itemScope:yn,itemType:ti,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:nt,pattern:null,ping:ti,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ti,required:yn,reversed:yn,rows:nt,rowSpan:nt,sandbox:ti,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:_s,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:_s,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ti,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:_s,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),PQe=oS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:kwe,properties:{about:hl,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ti,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hw,g2:Hw,glyphName:Hw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:hl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ti,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hl,rev:hl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hl,requiredFeatures:hl,requiredFonts:hl,requiredFormats:hl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:hl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hl,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),DQe=/^data[-\w.:]+$/i,oae=/-[a-z]/g,OQe=/[A-Z]/g;function t6(e,t){const n=NA(t);let r=t,i=Xc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&DQe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(oae,MQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!oae.test(s)){let o=s.replace(OQe,$Qe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=EY}return new i(r,t)}function $Qe(e){return"-"+e.toLowerCase()}function MQe(e){return e.charAt(1).toUpperCase()}const LQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dk=Twe([Iwe,Awe,Nwe,Pwe,NQe],"html"),Oy=Twe([Iwe,Awe,Nwe,Pwe,PQe],"svg");function aae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Dwe(e){return e.join(" ").trim()}var Owe={},uae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,FQe=/\n/g,jQe=/^\s*/,BQe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,UQe=/^:\s*/,zQe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,VQe=/^[;\s]*/,HQe=/^\s+|\s+$/g,qQe=`
`,lae="/",cae="*",z1="",WQe="comment",GQe="declaration",YQe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(FQe);m&&(n+=m.length);var g=p.lastIndexOf(qQe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(jQe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(lae!=e.charAt(0)||cae!=e.charAt(1))){for(var m=2;z1!=e.charAt(m)&&(cae!=e.charAt(m)||lae!=e.charAt(m+1));)++m;if(m+=2,z1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:WQe,comment:g})}}function d(){var p=s(),m=u(BQe);if(m){if(f(),!u(UQe))return a("property missing ':'");var g=u(zQe),y=p({type:GQe,property:fae(m[0].replace(uae,z1)),value:g?fae(g[0].replace(uae,z1)):z1});return u(VQe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function fae(e){return e?e.replace(HQe,z1):z1}var KQe=no&&no.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Owe,"__esModule",{value:!0});var XQe=KQe(YQe);function QQe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,XQe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var dae=Owe.default=QQe;const JQe=dae.default||dae,n6=$we("end"),Gh=$we("start");function $we(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function ZQe(e){const t=Gh(e),n=n6(e);if(t&&n)return{start:t,end:n}}function pC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?hae(e.position):"start"in e||"end"in e?hae(e):"line"in e||"column"in e?i7(e):""}function i7(e){return pae(e&&e.line)+":"+pae(e&&e.column)}function hae(e){return i7(e&&e.start)+"-"+i7(e&&e.end)}function pae(e){return e&&typeof e=="number"?e:1}class Ca extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=pC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ca.prototype.file="";Ca.prototype.name="";Ca.prototype.reason="";Ca.prototype.message="";Ca.prototype.stack="";Ca.prototype.column=void 0;Ca.prototype.line=void 0;Ca.prototype.ancestors=void 0;Ca.prototype.cause=void 0;Ca.prototype.fatal=void 0;Ca.prototype.place=void 0;Ca.prototype.ruleId=void 0;Ca.prototype.source=void 0;const xY={}.hasOwnProperty,eJe=new Map,tJe=/[A-Z]/g,nJe=/-([a-z])/g,rJe=new Set(["table","tbody","thead","tfoot","tr"]),iJe=new Set(["td","th"]),Mwe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function sJe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=hJe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=dJe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Oy:dk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Lwe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Lwe(e,t,n){if(t.type==="element")return oJe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return aJe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lJe(e,t,n);if(t.type==="mdxjsEsm")return uJe(e,t);if(t.type==="root")return cJe(e,t,n);if(t.type==="text")return fJe(e,t)}function oJe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Oy,e.schema=i),e.ancestors.push(t);const s=jwe(e,t.tagName,!1),o=pJe(e,t);let a=TY(e,t);return rJe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!IQe(u):!0})),Fwe(e,o,s,t),SY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function aJe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}PA(e,t.position)}function uJe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);PA(e,t.position)}function lJe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Oy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:jwe(e,t.name,!0),o=mJe(e,t),a=TY(e,t);return Fwe(e,o,s,t),SY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function cJe(e,t,n){const r={};return SY(r,TY(e,t)),e.create(t,e.Fragment,r,n)}function fJe(e,t){return t.value}function Fwe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function SY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function dJe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function hJe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Gh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function pJe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&xY.call(t.properties,i)){const s=gJe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&iJe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function mJe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else PA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else PA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function TY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:eJe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Lwe(e,s,o);a!==void 0&&n.push(a)}return n}function gJe(e,t,n){const r=t6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Swe(n):Dwe(n)),r.property==="style"){let i=typeof n=="object"?n:yJe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=vJe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?LQe[r.property]||r.property:r.attribute,n]}}function yJe(e,t){const n={};try{JQe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ca("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Mwe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(nJe,_Je)),n[o]=s}}function jwe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=rae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=rae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return xY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);PA(e)}function PA(e,t){const n=new Ca("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Mwe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function vJe(e){const t={};let n;for(n in e)xY.call(e,n)&&(t[bJe(n)]=e[n]);return t}function bJe(e){let t=e.replace(tJe,wJe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function _Je(e,t){return t.toUpperCase()}function wJe(e){return"-"+e.toLowerCase()}const zj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},EJe={};function xJe(e,t){const n=EJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Bwe(e,r,i)}function Bwe(e,t,n){if(SJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return mae(e.children,t,n)}return Array.isArray(e)?mae(e,t,n):""}function mae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Bwe(e[i],t,n);return r.join("")}function SJe(e){return!!(e&&typeof e=="object")}const gae=document.createElement("i");function CY(e){const t="&"+e+";";gae.innerHTML=t;const n=gae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function xm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function yc(e,t){return e.length>0?(xm(e,e.length,0,t),e):t}const yae={}.hasOwnProperty;function TJe(e){const t={};let n=-1;for(;++n<e.length;)CJe(t,e[n]);return t}function CJe(e,t){let n;for(n in t){const i=(yae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){yae.call(i,o)||(i[o]=[]);const a=s[o];AJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function AJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);xm(e,0,0,r)}function Uwe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function qw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ud=$y(/[A-Za-z]/),Cl=$y(/[\dA-Za-z]/),IJe=$y(/[#-'*+\--9=?A-Z^-~]/);function s7(e){return e!==null&&(e<32||e===127)}const o7=$y(/\d/),kJe=$y(/[\dA-Fa-f]/),RJe=$y(/[!-/:-@[-`{-~]/);function tn(e){return e!==null&&e<-2}function qu(e){return e!==null&&(e<0||e===32)}function _r(e){return e===-2||e===-1||e===32}const NJe=$y(new RegExp("\\p{P}|\\p{S}","u")),PJe=$y(/\s/);function $y(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function aS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Cl(e.charCodeAt(n+1))&&Cl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ri(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return _r(u)?(e.enter(n),a(u)):t(u)}function a(u){return _r(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const DJe={tokenize:OJe};function OJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ri(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return tn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const $Je={tokenize:MJe},vae={tokenize:LJe};function MJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const E=t.events.length;let w=E,S;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){S=t.events[w][1].end;break}y(r);let x=E;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},S),x++;return xm(t.events,w+1,0,t.events.slice(E)),t.events.length=x,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(vae,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(vae,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return tn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,E){const w=t.sliceStream(_);if(E&&w.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(w),t.parser.lazy[_.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const x=t.events.length;let C=x,A,I;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){I=t.events[C][1].end;break}A=!0}for(y(r),S=x;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;xm(t.events,C+1,0,t.events.slice(x)),t.events.length=S}}function y(_){let E=n.length;for(;E-- >_;){const w=n[E];t.containerState=w[1],w[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function LJe(e,t,n){return ri(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function bae(e){if(e===null||qu(e)||PJe(e))return 1;if(NJe(e))return 2}function AY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const a7={name:"attention",tokenize:jJe,resolveAll:FJe};function FJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);_ae(f,-u),_ae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=yc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=yc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=yc(l,AY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=yc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=yc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,xm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function jJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=bae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=bae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function _ae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const BJe={name:"autolink",tokenize:UJe};function UJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Ud(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Cl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Cl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||s7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):IJe(h)?(e.consume(h),l):n(h)}function c(h){return Cl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Cl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const r6={tokenize:zJe,partial:!0};function zJe(e,t,n){return r;function r(s){return _r(s)?ri(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||tn(s)?t(s):n(s)}}const zwe={name:"blockQuote",tokenize:VJe,continuation:{tokenize:HJe},exit:qJe};function VJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return _r(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function HJe(e,t,n){const r=this;return i;function i(o){return _r(o)?ri(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(zwe,t,n)(o)}}function qJe(e){e.exit("blockQuote")}const Vwe={name:"characterEscape",tokenize:WJe};function WJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return RJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Hwe={name:"characterReference",tokenize:GJe};function GJe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Cl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=kJe,c):(e.enter("characterReferenceValue"),s=7,o=o7,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Cl&&!CY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const wae={tokenize:KJe,partial:!0},Eae={name:"codeFenced",tokenize:YJe,concrete:!0};function YJe(e,t,n){const r=this,i={tokenize:w,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const x=r.events[r.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),_r(S)?ri(e,f,"whitespace")(S):f(S))}function f(S){return S===null||tn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(wae,m,E)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||tn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):_r(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ri(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||tn(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||tn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,E,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&_r(S)?ri(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||tn(S)?e.check(wae,m,E)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||tn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),_)}function E(S){return e.exit("codeFenced"),t(S)}function w(S,x,C){let A=0;return I;function I(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),R}function R(F){return S.enter("codeFencedFence"),_r(F)?ri(S,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(S.enter("codeFencedFenceSequence"),D(F)):C(F)}function D(F){return F===a?(A++,S.consume(F),D):A>=o?(S.exit("codeFencedFenceSequence"),_r(F)?ri(S,$,"whitespace")(F):$(F)):C(F)}function $(F){return F===null||tn(F)?(S.exit("codeFencedFence"),x(F)):C(F)}}}function KJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Vj={name:"codeIndented",tokenize:QJe},XJe={tokenize:JJe,partial:!0};function QJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ri(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):tn(l)?e.attempt(XJe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||tn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function JJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ri(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):tn(o)?i(o):n(o)}}const ZJe={name:"codeText",tokenize:nZe,resolve:eZe,previous:tZe};function eZe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function tZe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function nZe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):tn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||tn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class rZe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&wT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),wT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),wT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);wT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);wT(this.left,n.reverse())}}}function wT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function qwe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new rZe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,iZe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return xm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function iZe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const sZe={tokenize:uZe,resolve:aZe},oZe={tokenize:lZe,partial:!0};function aZe(e){return qwe(e),e}function uZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):tn(a)?e.check(oZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function lZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ri(e,s,"linePrefix")}function s(o){if(o===null||tn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Wwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||s7(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||tn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||qu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||s7(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Gwe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):tn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||tn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!_r(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Ywe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):tn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ri(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||tn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function mC(e,t){let n;return r;function r(i){return tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):_r(i)?ri(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const cZe={name:"definition",tokenize:dZe},fZe={tokenize:hZe,partial:!0};function dZe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Gwe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=qw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return qu(h)?mC(e,l)(h):l(h)}function l(h){return Wwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(fZe,f,f)(h)}function f(h){return _r(h)?ri(e,d,"whitespace")(h):d(h)}function d(h){return h===null||tn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function hZe(e,t,n){return r;function r(a){return qu(a)?mC(e,i)(a):n(a)}function i(a){return Ywe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return _r(a)?ri(e,o,"whitespace")(a):o(a)}function o(a){return a===null||tn(a)?t(a):n(a)}}const pZe={name:"hardBreakEscape",tokenize:mZe};function mZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return tn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const gZe={name:"headingAtx",tokenize:vZe,resolve:yZe};function yZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},xm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function vZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||qu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||tn(c)?(e.exit("atxHeading"),t(c)):_r(c)?ri(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||qu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const bZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],xae=["pre","script","style","textarea"],_Ze={name:"htmlFlow",tokenize:SZe,resolveTo:xZe,concrete:!0},wZe={tokenize:CZe,partial:!0},EZe={tokenize:TZe,partial:!0};function xZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function SZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):Ud(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Ud(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return Ud(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||qu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&xae.includes(G)?(i=1,r.interrupt?t(j):O(j)):bZe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):_(j))}return j===45||Cl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return _r(j)?(e.consume(j),v):I(j)}function _(j){return j===47?(e.consume(j),I):j===58||j===95||Ud(j)?(e.consume(j),E):_r(j)?(e.consume(j),_):I(j)}function E(j){return j===45||j===46||j===58||j===95||Cl(j)?(e.consume(j),E):w(j)}function w(j){return j===61?(e.consume(j),S):_r(j)?(e.consume(j),w):_(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,x):_r(j)?(e.consume(j),S):C(j)}function x(j){return j===u?(e.consume(j),u=null,A):j===null||tn(j)?n(j):(e.consume(j),x)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||qu(j)?w(j):(e.consume(j),C)}function A(j){return j===47||j===62||_r(j)?_(j):n(j)}function I(j){return j===62?(e.consume(j),R):n(j)}function R(j){return j===null||tn(j)?O(j):_r(j)?(e.consume(j),R):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),U):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),H):tn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(wZe,W,D)(j)):j===null||tn(j)?(e.exit("htmlFlowData"),D(j)):(e.consume(j),O)}function D(j){return e.check(EZe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||tn(j)?D(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),P):O(j)}function B(j){return j===47?(e.consume(j),o="",z):O(j)}function z(j){if(j===62){const q=o.toLowerCase();return xae.includes(q)?(e.consume(j),U):O(j)}return Ud(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),z):O(j)}function H(j){return j===93?(e.consume(j),P):O(j)}function P(j){return j===62?(e.consume(j),U):j===45&&i===2?(e.consume(j),P):O(j)}function U(j){return j===null||tn(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),U)}function W(j){return e.exit("htmlFlow"),t(j)}}function TZe(e,t,n){const r=this;return i;function i(o){return tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function CZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(r6,t,n)}}const AZe={name:"htmlText",tokenize:IZe};function IZe(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),w):P===63?(e.consume(P),_):Ud(P)?(e.consume(P),C):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):Ud(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):tn(P)?(o=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?M(P):P===45?d(P):f(P)}function p(P){const U="CDATA[";return P===U.charCodeAt(s++)?(e.consume(P),s===U.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):tn(P)?(o=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?M(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?M(P):tn(P)?(o=v,B(P)):(e.consume(P),v)}function _(P){return P===null?n(P):P===63?(e.consume(P),E):tn(P)?(o=_,B(P)):(e.consume(P),_)}function E(P){return P===62?M(P):_(P)}function w(P){return Ud(P)?(e.consume(P),S):n(P)}function S(P){return P===45||Cl(P)?(e.consume(P),S):x(P)}function x(P){return tn(P)?(o=x,B(P)):_r(P)?(e.consume(P),x):M(P)}function C(P){return P===45||Cl(P)?(e.consume(P),C):P===47||P===62||qu(P)?A(P):n(P)}function A(P){return P===47?(e.consume(P),M):P===58||P===95||Ud(P)?(e.consume(P),I):tn(P)?(o=A,B(P)):_r(P)?(e.consume(P),A):M(P)}function I(P){return P===45||P===46||P===58||P===95||Cl(P)?(e.consume(P),I):R(P)}function R(P){return P===61?(e.consume(P),O):tn(P)?(o=R,B(P)):_r(P)?(e.consume(P),R):A(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):tn(P)?(o=O,B(P)):_r(P)?(e.consume(P),O):(e.consume(P),$)}function D(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):tn(P)?(o=D,B(P)):(e.consume(P),D)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||qu(P)?A(P):(e.consume(P),$)}function F(P){return P===47||P===62||qu(P)?A(P):n(P)}function M(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),z}function z(P){return _r(P)?ri(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):H(P)}function H(P){return e.enter("htmlTextData"),o(P)}}const IY={name:"labelEnd",tokenize:OZe,resolveTo:DZe,resolveAll:PZe},kZe={tokenize:$Ze},RZe={tokenize:MZe},NZe={tokenize:LZe};function PZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function DZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=yc(a,e.slice(s+1,s+r+3)),a=yc(a,[["enter",c,t]]),a=yc(a,AY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=yc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=yc(a,e.slice(o+1)),a=yc(a,[["exit",u,t]]),xm(e,s,e.length,a),e}function OZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(qw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(kZe,c,o?c:f)(d):d===91?e.attempt(RZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(NZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function $Ze(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return qu(f)?mC(e,s)(f):s(f)}function s(f){return f===41?c(f):Wwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return qu(f)?mC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Ywe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return qu(f)?mC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function MZe(e,t,n){const r=this;return i;function i(a){return Gwe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(qw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function LZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const FZe={name:"labelStartImage",tokenize:jZe,resolveAll:IY.resolveAll};function jZe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const BZe={name:"labelStartLink",tokenize:UZe,resolveAll:IY.resolveAll};function UZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Hj={name:"lineEnding",tokenize:zZe};function zZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ri(e,t,"linePrefix")}}const uD={name:"thematicBreak",tokenize:VZe};function VZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||tn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),_r(l)?ri(e,a,"whitespace")(l):a(l))}}const vu={name:"list",tokenize:WZe,continuation:{tokenize:GZe},exit:KZe},HZe={tokenize:XZe,partial:!0},qZe={tokenize:YZe,partial:!0};function WZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:o7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(uD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return o7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(r6,r.interrupt?n:c,e.attempt(HZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return _r(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function GZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(r6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ri(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!_r(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(qZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ri(e,e.attempt(vu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function YZe(e,t,n){const r=this;return ri(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function KZe(e){e.exit(this.containerState.type)}function XZe(e,t,n){const r=this;return ri(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!_r(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Sae={name:"setextUnderline",tokenize:JZe,resolveTo:QZe};function QZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function JZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),_r(l)?ri(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||tn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const ZZe={tokenize:eet};function eet(e){const t=this,n=e.attempt(r6,r,e.attempt(this.parser.constructs.flowInitial,i,ri(e,e.attempt(this.parser.constructs.flow,i,e.attempt(sZe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const tet={resolveAll:Xwe()},net=Kwe("string"),ret=Kwe("text");function Kwe(e){return{tokenize:t,resolveAll:Xwe(e==="text"?iet:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Xwe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function iet(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function set(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:E,attempt:x(w),check:x(S),interrupt:x(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=yc(o,R),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=AY(s,l.events,l),l.events)}function d(R,O){return aet(h(R),O)}function h(R){return oet(o,R)}function p(){const{line:R,column:O,offset:D,_index:$,_bufferIndex:F}=r;return{line:R,column:O,offset:D,_index:$,_bufferIndex:F}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(R){c=c(R)}function v(R){tn(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function _(R,O){const D=O||{};return D.type=R,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function E(R){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function w(R,O){C(R,O.from)}function S(R,O){O.restore()}function x(R,O){return D;function D($,F,M){let B,z,H,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):U($);function U(ne){return ce;function ce(de){const he=de!==null&&ne[de],ve=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return W(Ie)(de)}}function W(ne){return B=ne,z=0,ne.length===0?M:j(ne[z])}function j(ne){return ce;function ce(de){return P=A(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(de)}}function q(ne){return R(H,P),F}function G(ne){return P.restore(),++z<B.length?j(B[z]):M}}}function C(R,O){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&xm(l.events,O,l.events.length-O,R.resolve(l.events.slice(O),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function A(){const R=p(),O=l.previous,D=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=R,l.previous=O,l.currentConstruct=D,l.events.length=$,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function oet(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function aet(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const uet={42:vu,43:vu,45:vu,48:vu,49:vu,50:vu,51:vu,52:vu,53:vu,54:vu,55:vu,56:vu,57:vu,62:zwe},cet={91:cZe},fet={[-2]:Vj,[-1]:Vj,32:Vj},det={35:gZe,42:uD,45:[Sae,uD],60:_Ze,61:Sae,95:uD,96:Eae,126:Eae},het={38:Hwe,92:Vwe},pet={[-5]:Hj,[-4]:Hj,[-3]:Hj,33:FZe,38:Hwe,42:a7,60:[BJe,AZe],91:BZe,92:[pZe,Vwe],93:IY,95:a7,96:ZJe},met={null:[a7,tet]},get={null:[42,95]},yet={null:[]},vet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:get,contentInitial:cet,disable:yet,document:uet,flow:det,flowInitial:fet,insideSpan:met,string:het,text:pet},Symbol.toStringTag,{value:"Module"}));function bet(e){const n=TJe([vet,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(DJe),document:i($Je),flow:i(ZZe),string:i(net),text:i(ret)};return r;function i(s){return o;function o(a){return set(r,s,a)}}}function _et(e){for(;!qwe(e););return e}const Tae=/[\0\t\n\r]/g;function wet(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Tae.lastIndex=f,l=Tae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Eet=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function xet(e){return e.replace(Eet,Tet)}function Tet(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Uwe(n.slice(s?2:1),s?16:10)}return CY(n)||e}const Qwe={}.hasOwnProperty;function Cet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Aet(n)(_et(bet(n).document().write(wet()(e,t,!0))))}function Aet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(yt),blockQuote:s(ve),characterEscape:A,characterReference:A,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Xe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:A,htmlText:s(_e,o),htmlTextData:A,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ge),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(F),codeTextData:I,data:I,definition:u(),definitionDestinationString:E,definitionLabelString:v,definitionTitleString:_,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:I,htmlText:u($),htmlTextData:I,image:u(B),label:H,labelText:z,lineEnding:R,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:P,resourceTitleString:U,resource:W,setextHeading:u(C),setextHeadingLineSequence:x,setextHeadingText:S,strong:u(),thematicBreak:u()}};Jwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ae={type:"root",children:[]};const He={stack:[Ae],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(pe,Ln,_t)}for(_t=-1;++_t<pe.length;){const Ln=t[pe[_t][0]];Qwe.call(Ln,pe[_t][1].type)&&Ln[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||Cae).call(He,void 0,Ln[0])}for(Ae.position={start:vg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:vg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ae=t.transforms[_t](Ae)||Ae;return Ae}function i(pe,Ae,He){let ut=Ae-1,_t=-1,Ln=!1,Ar,Fn,cr,gn;for(;++ut<=He;){const An=pe[ut];switch(An[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{An[0]==="enter"?_t++:_t--,gn=void 0;break}case"lineEndingBlank":{An[0]==="enter"&&(Ar&&!gn&&!_t&&!cr&&(cr=ut),gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gn=void 0}if(!_t&&An[0]==="enter"&&An[1].type==="listItemPrefix"||_t===-1&&An[0]==="exit"&&(An[1].type==="listUnordered"||An[1].type==="listOrdered")){if(Ar){let nr=ut;for(Fn=void 0;nr--;){const rr=pe[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(pe[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Ar._spread=!0),Ar.end=Object.assign({},Fn?pe[Fn][1].start:An[1].end),pe.splice(Fn||ut,0,["exit",Ar,An[2]]),ut++,He++}if(An[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},An[1].start),end:void 0};Ar=nr,pe.splice(ut,0,["enter",nr,An[2]]),ut++,He++,cr=void 0,gn=!0}}}return pe[Ae][1]._spread=Ln,He}function s(pe,Ae){return He;function He(ut){a.call(this,pe(ut),ut),Ae&&Ae.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ae,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ae,He]),pe.position={start:vg(Ae.start),end:void 0}}function u(pe){return Ae;function Ae(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ae){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ae?Ae.call(this,pe,ut[0]):(ut[1]||Cae).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+pC({start:pe.start,end:pe.end})+"): its not open");He.position.end=vg(pe.end)}function c(){return xJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ae=this.stack[this.stack.length-2];Ae.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.lang=pe}function p(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=qw(this.sliceSerialize(pe)).toLowerCase()}function _(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=pe}function E(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=pe}function w(pe){const Ae=this.stack[this.stack.length-1];if(!Ae.depth){const He=this.sliceSerialize(pe).length;Ae.depth=He}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function x(pe){const Ae=this.stack[this.stack.length-1];Ae.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:vg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function I(pe){const Ae=this.stack.pop();Ae.value+=this.sliceSerialize(pe),Ae.position.end=vg(pe.end)}function R(pe){const Ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ae.children[Ae.children.length-1];He.position.end=vg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ae.type)&&(A.call(this,pe),I.call(this,pe))}function O(){this.data.atHardBreak=!0}function D(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=pe}function $(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=pe}function F(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.value=pe}function M(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ae,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ae=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ae,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function z(pe){const Ae=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=xet(Ae),He.identifier=qw(Ae).toLowerCase()}function H(){const pe=this.stack[this.stack.length-1],Ae=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ae}function P(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.url=pe}function U(){const pe=this.resume(),Ae=this.stack[this.stack.length-1];Ae.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(pe){const Ae=this.resume(),He=this.stack[this.stack.length-1];He.label=Ae,He.identifier=qw(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ae=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=Uwe(Ae,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=CY(Ae);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ae=this.stack.pop();Ae.position.end=vg(pe.end)}function de(pe){I.call(this,pe);const Ae=this.stack[this.stack.length-1];Ae.url=this.sliceSerialize(pe)}function he(pe){I.call(this,pe);const Ae=this.stack[this.stack.length-1];Ae.url="mailto:"+this.sliceSerialize(pe)}function ve(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Ot(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function vg(e){return{line:e.line,column:e.column,offset:e.offset}}function Jwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Jwe(e,r):Iet(e,r)}}function Iet(e,t){let n;for(n in t)if(Qwe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Cae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+pC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+pC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+pC({start:t.start,end:t.end})+") is still open")}function ket(e){const t=this;t.parser=n;function n(r){return Cet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Ret(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Net(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Pet(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Det(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Oet(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $et(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=aS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Met(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Let(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Zwe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Fet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zwe(e,t);const i={src:aS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function jet(e,t){const n={src:aS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Bet(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Uet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zwe(e,t);const i={href:aS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function zet(e,t){const n={href:aS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Vet(e,t,n){const r=e.all(t),i=n?Het(n):eEe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Het(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=eEe(n[r])}return t}function eEe(e){const t=e.spread;return t??e.children.length>1}function qet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Wet(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Get(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Yet(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ket(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Gh(t.children[1]),u=n6(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Xet(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Qet(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Aae=9,Iae=32;function Jet(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(kae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(kae(t.slice(i),i>0,!1)),s.join("")}function kae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Aae||s===Iae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Aae||s===Iae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Zet(e,t){const n={type:"text",value:Jet(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function ett(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ttt={blockquote:Ret,break:Net,code:Pet,delete:Det,emphasis:Oet,footnoteReference:$et,heading:Met,html:Let,imageReference:Fet,image:jet,inlineCode:Bet,linkReference:Uet,link:zet,listItem:Vet,list:qet,paragraph:Wet,root:Get,strong:Yet,table:Ket,tableCell:Qet,tableRow:Xet,text:Zet,thematicBreak:ett,toml:SN,yaml:SN,definition:SN,footnoteDefinition:SN};function SN(){}const tEe=-1,i6=0,YO=1,KO=2,kY=3,RY=4,NY=5,PY=6,nEe=7,rEe=8,Rae=typeof self=="object"?self:globalThis,ntt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case i6:case tEe:return n(o,i);case YO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case KO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case kY:return n(new Date(o),i);case RY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case NY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case PY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case nEe:{const{name:a,message:u}=o;return n(new Rae[a](u),i)}case rEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Rae[s](o),i)};return r},Nae=e=>ntt(new Map,e)(0),T_="",{toString:rtt}={},{keys:itt}=Object,ET=e=>{const t=typeof e;if(t!=="object"||!e)return[i6,t];const n=rtt.call(e).slice(8,-1);switch(n){case"Array":return[YO,T_];case"Object":return[KO,T_];case"Date":return[kY,T_];case"RegExp":return[RY,T_];case"Map":return[NY,T_];case"Set":return[PY,T_]}return n.includes("Array")?[YO,n]:n.includes("Error")?[nEe,n]:[KO,n]},TN=([e,t])=>e===i6&&(t==="function"||t==="symbol"),stt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=ET(o);switch(a){case i6:{let c=o;switch(u){case"bigint":a=rEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([tEe],o)}return i([a,c],o)}case YO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case KO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of itt(o))(e||!TN(ET(o[d])))&&c.push([s(d),s(o[d])]);return f}case kY:return i([a,o.toISOString()],o);case RY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case NY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(TN(ET(d))||TN(ET(h))))&&c.push([s(d),s(h)]);return f}case PY:{const c=[],f=i([a,c],o);for(const d of o)(e||!TN(ET(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Pae=(e,{json:t,lossy:n}={})=>{const r=[];return stt(!(t||n),!!t,new Map,r)(e),r},OE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Nae(Pae(e,t)):structuredClone(e):(e,t)=>Nae(Pae(e,t));function ott(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function att(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function utt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ott,r=e.options.footnoteBackLabel||att,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=aS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...OE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const iEe=function(e){if(e==null)return dtt;if(typeof e=="function")return s6(e);if(typeof e=="object")return Array.isArray(e)?ltt(e):ctt(e);if(typeof e=="string")return ftt(e);throw new Error("Expected function, string, or object as test")};function ltt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=iEe(e[n]);return s6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function ctt(e){const t=e;return s6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function ftt(e){return s6(t);function t(n){return n&&n.type===e}}function s6(e){return t;function t(n,r,i){return!!(htt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function dtt(){return!0}function htt(e){return e!==null&&typeof e=="object"&&"type"in e}const sEe=[],ptt=!0,Dae=!1,mtt="skip";function gtt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=iEe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=sEe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=ytt(n(u,c)),h[0]===Dae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==mtt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Dae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function ytt(e){return Array.isArray(e)?e:typeof e=="number"?[ptt,e]:e==null?sEe:[e]}function DY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),gtt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const u7={}.hasOwnProperty,vtt={};function btt(e,t){const n=t||vtt,r=new Map,i=new Map,s=new Map,o={...ttt,...n.handlers},a={all:l,applyData:wtt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:_tt,wrap:xtt};return DY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(u7.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=OE(g);return y.children=a.all(c),y}return OE(c)}return(a.options.unknownHandler||Ett)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Oae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Oae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function _tt(e,t){e.position&&(t.position=ZQe(e))}function wtt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,OE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Ett(e,t){const n=t.data||{},r="value"in t&&!(u7.call(n,"hProperties")||u7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function xtt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Oae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function $ae(e,t){const n=btt(e,t),r=n.one(e,void 0),i=utt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Stt(e,t){return e&&"run"in e?async function(n,r){const i=$ae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return $ae(n,{file:r,...t||e})}}function Mae(e){if(e)throw e}var lD=Object.prototype.hasOwnProperty,oEe=Object.prototype.toString,Lae=Object.defineProperty,Fae=Object.getOwnPropertyDescriptor,jae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):oEe.call(t)==="[object Array]"},Bae=function(t){if(!t||oEe.call(t)!=="[object Object]")return!1;var n=lD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&lD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||lD.call(t,i)},Uae=function(t,n){Lae&&n.name==="__proto__"?Lae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},zae=function(t,n){if(n==="__proto__")if(lD.call(t,n)){if(Fae)return Fae(t,n).value}else return;return t[n]},Ttt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=zae(a,n),i=zae(t,n),a!==i&&(c&&i&&(Bae(i)||(s=jae(i)))?(s?(s=!1,o=r&&jae(r)?r:[]):o=r&&Bae(r)?r:{},Uae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Uae(a,{name:n,newValue:i}));return a};const qj=Xl(Ttt);function l7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ctt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Att(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Att(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Nd={basename:Itt,dirname:ktt,extname:Rtt,join:Ntt,sep:"/"};function Itt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');hk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function ktt(e){if(hk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Rtt(e){hk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ntt(...e){let t=-1,n;for(;++t<e.length;)hk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Ptt(n)}function Ptt(e){hk(e);const t=e.codePointAt(0)===47;let n=Dtt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Dtt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function hk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Ott={cwd:$tt};function $tt(){return"/"}function c7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Mtt(e){if(typeof e=="string")e=new URL(e);else if(!c7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Ltt(e)}function Ltt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Wj=["history","path","basename","stem","extname","dirname"];class aEe{constructor(t){let n;t?c7(t)?n={path:t}:typeof t=="string"||Ftt(t)?n={value:t}:n=t:n={},this.cwd=Ott.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Wj.length;){const s=Wj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Wj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Nd.basename(this.path):void 0}set basename(t){Yj(t,"basename"),Gj(t,"basename"),this.path=Nd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Nd.dirname(this.path):void 0}set dirname(t){Vae(this.basename,"dirname"),this.path=Nd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Nd.extname(this.path):void 0}set extname(t){if(Gj(t,"extname"),Vae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Nd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){c7(t)&&(t=Mtt(t)),Yj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Nd.basename(this.path,this.extname):void 0}set stem(t){Yj(t,"stem"),Gj(t,"stem"),this.path=Nd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ca(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Gj(e,t){if(e&&e.includes(Nd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Nd.sep+"`")}function Yj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Vae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ftt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const jtt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Btt={}.hasOwnProperty;class OY extends jtt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ctt()}copy(){const t=new OY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(qj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Qj("data",this.frozen),this.namespace[t]=n,this):Btt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Qj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=CN(t),r=this.parser||this.Parser;return Kj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Kj("process",this.parser||this.Parser),Xj("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=CN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Vtt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Kj("processSync",this.parser||this.Parser),Xj("processSync",this.compiler||this.Compiler),this.process(t,i),qae("processSync","process",n),r;function i(s,o){n=!0,Mae(s),r=o}}run(t,n,r){Hae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=CN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),qae("runSync","run",r),i;function s(o,a){Mae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=CN(n),i=this.compiler||this.Compiler;return Xj("stringify",i),Hae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Qj("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=qj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];l7(m)&&l7(h)&&(h=qj(!0,m,h)),r[d]=[l,h,...p]}}}}const Utt=new OY().freeze();function Kj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Xj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Qj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Hae(e){if(!l7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function qae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function CN(e){return ztt(e)?e:new aEe(e)}function ztt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Vtt(e){return typeof e=="string"||Htt(e)}function Htt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const qtt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Wae=[],Gae={allowDangerousHtml:!0},Wtt=/^(https?|ircs?|mailto|xmpp)$/i,Gtt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Ytt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Wae,u=e.remarkPlugins||Wae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Gae}:Gae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Ktt,h=Utt().use(ket).use(u).use(Stt,l).use(a),p=new aEe;typeof r=="string"&&(p.value=r);for(const v of Gtt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+qtt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),DY(g,y),sJe(g,{Fragment:b.Fragment,components:s,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function y(v,_,E){if(v.type==="raw"&&E&&typeof _=="number")return c?E.children.splice(_,1):E.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let w;for(w in zj)if(Object.hasOwn(zj,w)&&Object.hasOwn(v.properties,w)){const S=v.properties[w],x=zj[w];(x===null||x.includes(v.tagName))&&(v.properties[w]=d(String(S||""),w,v))}}if(v.type==="element"){let w=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!w&&n&&typeof _=="number"&&(w=!n(v,_,E)),w&&E&&typeof _=="number")return f&&v.children?E.children.splice(_,1,...v.children):E.children.splice(_,1),_}}}function Ktt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Wtt.test(e.slice(0,t))?e:""}const Yae=/[#.]/g;function Xtt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Yae.lastIndex=i;const a=Yae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Qtt=new Set(["button","menu","reset","submit"]),f7={}.hasOwnProperty;function uEe(e,t,n){const r=n&&tnt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Xtt(s,t),l.tagName=l.tagName.toLowerCase(),r&&f7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Jtt(o,l.tagName)){let c;for(c in o)f7.call(o,c)&&Ztt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)d7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Jtt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Qtt.has(e.type.toLowerCase()):!("value"in e)}function Ztt(e,t,n,r){const i=t6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=aae(r):i.commaSeparated?o=nae(r):i.commaOrSpaceSeparated?o=aae(nae(r).join(" ")):o=Kae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?ent(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Kae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function d7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)d7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?d7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Kae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||NA(n)===NA(t)))return!0}return n}function ent(e){const t=[];let n;for(n in e)f7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function tnt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const nnt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],rnt=uEe(dk,"div"),int=uEe(Oy,"g",nnt),Jj=/\r?\n|\r/g;function snt(e){const t=String(e),n=[];for(Jj.lastIndex=0;Jj.test(t);)n.push(Jj.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const ov={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lEe={}.hasOwnProperty,ont=Object.prototype;function ant(e,t){const n=t||{};return $Y({file:n.file||void 0,location:!1,schema:n.space==="svg"?Oy:dk,verbose:n.verbose||!1},e)}function $Y(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},cD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:cEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=snt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},cD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},cD(e,r,n),n}default:return n=unt(e,t),n}}function cEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=$Y(e,t[n]);r.push(i)}return r}function unt(e,t){const n=e.schema;e.schema=t.namespaceURI===ov.svg?Oy:dk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;lEe.call(ont,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?int:rnt)(t.tagName,i,cEe(e,t.childNodes));if(cD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&bw(u.startTag),c=u&&u.endTag&&bw(u.endTag),f=$Y(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function cD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=lnt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function lnt(e,t,n){const r=bw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)lEe.call(n.attrs,o)&&(s[t6(e.schema,o).property]=bw(n.attrs[o]));n.startTag;const a=bw(n.startTag),u=n.endTag?bw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function bw(e){const t=Xae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Xae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Xae(e){return e.line&&e.column?e:void 0}const Qae={}.hasOwnProperty;function fEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Qae.call(i,e)){const u=String(i[e]);o=Qae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const cnt={},fnt={}.hasOwnProperty,dEe=fEe("type",{handlers:{root:hnt,element:vnt,text:gnt,comment:ynt,doctype:mnt}});function dnt(e,t){const r=(t||cnt).space;return dEe(e,r==="svg"?Oy:dk)}function hnt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=MY(e.children,n,t),uS(e,n),n}function pnt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=MY(e.children,n,t),uS(e,n),n}function mnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return uS(e,t),t}function gnt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return uS(e,t),t}function ynt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return uS(e,t),t}function vnt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Oy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&fnt.call(e.properties,s)){const u=bnt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:ov[o],childNodes:[],parentNode:null};return a.childNodes=MY(e.children,a,r),uS(e,a),e.tagName==="template"&&e.content&&(a.content=pnt(e.content,r)),a}function bnt(e,t,n){const r=t6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Swe(n):Dwe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=ov[r.space]}return i}function MY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=dEe(e[r],n);s.parentNode=t,i.push(s)}return i}function uS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const _nt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],wnt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),_i="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const gu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function hEe(e){return e>=55296&&e<=57343}function Ent(e){return e>=56320&&e<=57343}function xnt(e,t){return(e-55296)*1024+9216+t}function pEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function mEe(e){return e>=64976&&e<=65007||wnt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const Snt=65536;class Tnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Snt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Ent(n))return this.pos++,this._addGap(),xnt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,hEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){pEe(t)?this._err(Ne.controlCharacterInInputStream):mEe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kn=kn||(kn={}));function gEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Sg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Cnt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Zj;const Ant=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Int=(Zj=String.fromCodePoint)!==null&&Zj!==void 0?Zj:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function knt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Ant.get(e))!==null&&t!==void 0?t:e}var eo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(eo||(eo={}));const Rnt=32;var eh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(eh||(eh={}));function h7(e){return e>=eo.ZERO&&e<=eo.NINE}function Nnt(e){return e>=eo.UPPER_A&&e<=eo.UPPER_F||e>=eo.LOWER_A&&e<=eo.LOWER_F}function Pnt(e){return e>=eo.UPPER_A&&e<=eo.UPPER_Z||e>=eo.LOWER_A&&e<=eo.LOWER_Z||h7(e)}function Dnt(e){return e===eo.EQUALS||Pnt(e)}var Gs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Gs||(Gs={}));var V1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(V1||(V1={}));class Ont{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Gs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=V1.Strict}startEntity(t){this.decodeMode=t,this.state=Gs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Gs.EntityStart:return t.charCodeAt(n)===eo.NUM?(this.state=Gs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Gs.NamedEntity,this.stateNamedEntity(t,n));case Gs.NumericStart:return this.stateNumericStart(t,n);case Gs.NumericDecimal:return this.stateNumericDecimal(t,n);case Gs.NumericHex:return this.stateNumericHex(t,n);case Gs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Rnt)===eo.LOWER_X?(this.state=Gs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Gs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(h7(i)||Nnt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(h7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===eo.SEMI)this.consumed+=1;else if(this.decodeMode===V1.Strict)return 0;return this.emitCodePoint(knt(this.result),this.consumed),this.errors&&(t!==eo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&eh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=vEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===V1.Attribute&&(s===0||Dnt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&eh.VALUE_LENGTH)>>14,s!==0){if(o===eo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==V1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&eh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~eh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Gs.NamedEntity:return this.result!==0&&(this.decodeMode!==V1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Gs.NumericDecimal:return this.emitNumericEntity(0,2);case Gs.NumericHex:return this.emitNumericEntity(0,3);case Gs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Gs.EntityStart:return 0}}}function yEe(e){let t="";const n=new Ont(e,r=>t+=Int(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function vEe(e,t,n,r){const i=(t&eh.BRANCH_LENGTH)>>7,s=t&eh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}yEe(Sg);yEe(Cnt);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var w0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(w0=w0||(w0={}));var vl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(vl=vl||(vl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const $nt=new Map([[Ee.A,N.A],[Ee.ADDRESS,N.ADDRESS],[Ee.ANNOTATION_XML,N.ANNOTATION_XML],[Ee.APPLET,N.APPLET],[Ee.AREA,N.AREA],[Ee.ARTICLE,N.ARTICLE],[Ee.ASIDE,N.ASIDE],[Ee.B,N.B],[Ee.BASE,N.BASE],[Ee.BASEFONT,N.BASEFONT],[Ee.BGSOUND,N.BGSOUND],[Ee.BIG,N.BIG],[Ee.BLOCKQUOTE,N.BLOCKQUOTE],[Ee.BODY,N.BODY],[Ee.BR,N.BR],[Ee.BUTTON,N.BUTTON],[Ee.CAPTION,N.CAPTION],[Ee.CENTER,N.CENTER],[Ee.CODE,N.CODE],[Ee.COL,N.COL],[Ee.COLGROUP,N.COLGROUP],[Ee.DD,N.DD],[Ee.DESC,N.DESC],[Ee.DETAILS,N.DETAILS],[Ee.DIALOG,N.DIALOG],[Ee.DIR,N.DIR],[Ee.DIV,N.DIV],[Ee.DL,N.DL],[Ee.DT,N.DT],[Ee.EM,N.EM],[Ee.EMBED,N.EMBED],[Ee.FIELDSET,N.FIELDSET],[Ee.FIGCAPTION,N.FIGCAPTION],[Ee.FIGURE,N.FIGURE],[Ee.FONT,N.FONT],[Ee.FOOTER,N.FOOTER],[Ee.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[Ee.FORM,N.FORM],[Ee.FRAME,N.FRAME],[Ee.FRAMESET,N.FRAMESET],[Ee.H1,N.H1],[Ee.H2,N.H2],[Ee.H3,N.H3],[Ee.H4,N.H4],[Ee.H5,N.H5],[Ee.H6,N.H6],[Ee.HEAD,N.HEAD],[Ee.HEADER,N.HEADER],[Ee.HGROUP,N.HGROUP],[Ee.HR,N.HR],[Ee.HTML,N.HTML],[Ee.I,N.I],[Ee.IMG,N.IMG],[Ee.IMAGE,N.IMAGE],[Ee.INPUT,N.INPUT],[Ee.IFRAME,N.IFRAME],[Ee.KEYGEN,N.KEYGEN],[Ee.LABEL,N.LABEL],[Ee.LI,N.LI],[Ee.LINK,N.LINK],[Ee.LISTING,N.LISTING],[Ee.MAIN,N.MAIN],[Ee.MALIGNMARK,N.MALIGNMARK],[Ee.MARQUEE,N.MARQUEE],[Ee.MATH,N.MATH],[Ee.MENU,N.MENU],[Ee.META,N.META],[Ee.MGLYPH,N.MGLYPH],[Ee.MI,N.MI],[Ee.MO,N.MO],[Ee.MN,N.MN],[Ee.MS,N.MS],[Ee.MTEXT,N.MTEXT],[Ee.NAV,N.NAV],[Ee.NOBR,N.NOBR],[Ee.NOFRAMES,N.NOFRAMES],[Ee.NOEMBED,N.NOEMBED],[Ee.NOSCRIPT,N.NOSCRIPT],[Ee.OBJECT,N.OBJECT],[Ee.OL,N.OL],[Ee.OPTGROUP,N.OPTGROUP],[Ee.OPTION,N.OPTION],[Ee.P,N.P],[Ee.PARAM,N.PARAM],[Ee.PLAINTEXT,N.PLAINTEXT],[Ee.PRE,N.PRE],[Ee.RB,N.RB],[Ee.RP,N.RP],[Ee.RT,N.RT],[Ee.RTC,N.RTC],[Ee.RUBY,N.RUBY],[Ee.S,N.S],[Ee.SCRIPT,N.SCRIPT],[Ee.SECTION,N.SECTION],[Ee.SELECT,N.SELECT],[Ee.SOURCE,N.SOURCE],[Ee.SMALL,N.SMALL],[Ee.SPAN,N.SPAN],[Ee.STRIKE,N.STRIKE],[Ee.STRONG,N.STRONG],[Ee.STYLE,N.STYLE],[Ee.SUB,N.SUB],[Ee.SUMMARY,N.SUMMARY],[Ee.SUP,N.SUP],[Ee.TABLE,N.TABLE],[Ee.TBODY,N.TBODY],[Ee.TEMPLATE,N.TEMPLATE],[Ee.TEXTAREA,N.TEXTAREA],[Ee.TFOOT,N.TFOOT],[Ee.TD,N.TD],[Ee.TH,N.TH],[Ee.THEAD,N.THEAD],[Ee.TITLE,N.TITLE],[Ee.TR,N.TR],[Ee.TRACK,N.TRACK],[Ee.TT,N.TT],[Ee.U,N.U],[Ee.UL,N.UL],[Ee.SVG,N.SVG],[Ee.VAR,N.VAR],[Ee.WBR,N.WBR],[Ee.XMP,N.XMP]]);function lS(e){var t;return(t=$nt.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Je=N,Mnt={[Fe.HTML]:new Set([Je.ADDRESS,Je.APPLET,Je.AREA,Je.ARTICLE,Je.ASIDE,Je.BASE,Je.BASEFONT,Je.BGSOUND,Je.BLOCKQUOTE,Je.BODY,Je.BR,Je.BUTTON,Je.CAPTION,Je.CENTER,Je.COL,Je.COLGROUP,Je.DD,Je.DETAILS,Je.DIR,Je.DIV,Je.DL,Je.DT,Je.EMBED,Je.FIELDSET,Je.FIGCAPTION,Je.FIGURE,Je.FOOTER,Je.FORM,Je.FRAME,Je.FRAMESET,Je.H1,Je.H2,Je.H3,Je.H4,Je.H5,Je.H6,Je.HEAD,Je.HEADER,Je.HGROUP,Je.HR,Je.HTML,Je.IFRAME,Je.IMG,Je.INPUT,Je.LI,Je.LINK,Je.LISTING,Je.MAIN,Je.MARQUEE,Je.MENU,Je.META,Je.NAV,Je.NOEMBED,Je.NOFRAMES,Je.NOSCRIPT,Je.OBJECT,Je.OL,Je.P,Je.PARAM,Je.PLAINTEXT,Je.PRE,Je.SCRIPT,Je.SECTION,Je.SELECT,Je.SOURCE,Je.STYLE,Je.SUMMARY,Je.TABLE,Je.TBODY,Je.TD,Je.TEMPLATE,Je.TEXTAREA,Je.TFOOT,Je.TH,Je.THEAD,Je.TITLE,Je.TR,Je.TRACK,Je.UL,Je.WBR,Je.XMP]),[Fe.MATHML]:new Set([Je.MI,Je.MO,Je.MN,Je.MS,Je.MTEXT,Je.ANNOTATION_XML]),[Fe.SVG]:new Set([Je.TITLE,Je.FOREIGN_OBJECT,Je.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function bEe(e){return e===Je.H1||e===Je.H2||e===Je.H3||e===Je.H4||e===Je.H5||e===Je.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const Lnt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const us={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function gC(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function y2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Fnt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Tg(e){return Fnt(e)||y2(e)}function p7(e){return Tg(e)||gC(e)}function _Ee(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function wEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function jnt(e){return gC(e)||_Ee(e)||wEe(e)}function AN(e){return e+32}function EEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Bnt(e){return e===X.EQUALS_SIGN||p7(e)}function Jae(e){return EEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Unt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Tnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(gEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=lS(t.tagName),t.type===kn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=EEe(t)?kn.WHITESPACE_CHARACTER:t===X.NULL?kn.NULL_CHARACTER:kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Sg[0];s>=0&&(s=vEe(Sg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Sg[s];const a=o&eh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Bnt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Sg[s]&~eh.VALUE_LENGTH]:u===1?[Sg[++s]]:[Sg[++s],Sg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Tg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Tg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=_i;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(y2(t)?AN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Tg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Tg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Tg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Tg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Tg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(gu.SCRIPT,!1)&&Jae(this.preprocessor.peek(gu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<gu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(gu.SCRIPT,!1)&&Jae(this.preprocessor.peek(gu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<gu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=_i;break}default:this.currentAttr.name+=String.fromCodePoint(y2(t)?AN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=_i;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=_i;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=_i;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=_i;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(gu.DASH_DASH,!0)?(this._createCommentToken(gu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(gu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(gu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(gu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(gu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=_i;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(y2(t))this._createDoctypeToken(String.fromCharCode(AN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(_i),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=_i;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(y2(t)?AN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(gu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(gu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:p7(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){p7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:gC(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){jnt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){_Ee(t)?this.charRefCode=this.charRefCode*16+t-55:wEe(t)?this.charRefCode=this.charRefCode*16+t-87:gC(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){gC(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(hEe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(mEe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(pEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=Lnt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const xEe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),Zae=new Set([...xEe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),IN=new Map([[N.APPLET,Fe.HTML],[N.CAPTION,Fe.HTML],[N.HTML,Fe.HTML],[N.MARQUEE,Fe.HTML],[N.OBJECT,Fe.HTML],[N.TABLE,Fe.HTML],[N.TD,Fe.HTML],[N.TEMPLATE,Fe.HTML],[N.TH,Fe.HTML],[N.ANNOTATION_XML,Fe.MATHML],[N.MI,Fe.MATHML],[N.MN,Fe.MATHML],[N.MO,Fe.MATHML],[N.MS,Fe.MATHML],[N.MTEXT,Fe.MATHML],[N.DESC,Fe.SVG],[N.FOREIGN_OBJECT,Fe.SVG],[N.TITLE,Fe.SVG]]),znt=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],Vnt=[N.TR,N.TEMPLATE,N.HTML],Hnt=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],qnt=[N.TABLE,N.TEMPLATE,N.HTML],Wnt=[N.TD,N.TH];class Gnt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(znt,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Wnt,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(qnt,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Hnt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(Vnt,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(IN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(bEe(n)&&r===Fe.HTML)return!0;if(IN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===N.UL||r===N.OL)&&i===Fe.HTML||IN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===N.BUTTON&&i===Fe.HTML||IN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;xEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Zae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Zae.has(this.currentTagId);)this.pop()}}const e8=3;var Ef;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Ef=Ef||(Ef={}));const eue={type:Ef.Marker};class Ynt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Ef.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<e8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<e8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=e8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(eue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Ef.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ef.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(eue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Ef.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Ef.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Ef.Element&&n.element===t)}}function tue(e){return{nodeName:"#text",value:e,parentNode:null}}const K_={createDocument(){return{nodeName:"#document",mode:vl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};K_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(K_.isTextNode(n)){n.value+=t;return}}K_.appendChild(e,tue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&K_.isTextNode(r)?r.value+=t:K_.insertBefore(e,tue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},SEe="html",Knt="about:legacy-compat",Xnt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",TEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Qnt=[...TEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Jnt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),CEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Znt=[...CEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function nue(e,t){return t.some(n=>e.startsWith(n))}function ert(e){return e.name===SEe&&e.publicId===null&&(e.systemId===null||e.systemId===Knt)}function trt(e){if(e.name!==SEe)return vl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Xnt)return vl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Jnt.has(n))return vl.QUIRKS;let r=t===null?Qnt:TEe;if(nue(n,r))return vl.QUIRKS;if(r=t===null?CEe:Znt,nue(n,r))return vl.LIMITED_QUIRKS}return vl.NO_QUIRKS}const rue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},nrt="definitionurl",rrt="definitionURL",irt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),srt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),ort=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),art=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function urt(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===w0.COLOR||r===w0.SIZE||r===w0.FACE)||art.has(t)}function AEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===nrt){e.attrs[t].name=rrt;break}}function IEe(e){for(let t=0;t<e.attrs.length;t++){const n=irt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function LY(e){for(let t=0;t<e.attrs.length;t++){const n=srt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function lrt(e){const t=ort.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=lS(e.tagName))}function crt(e,t){return t===Fe.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function frt(e,t,n){if(t===Fe.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===w0.ENCODING){const i=n[r].value.toLowerCase();return i===rue.TEXT_HTML||i===rue.APPLICATION_XML}}return t===Fe.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function drt(e,t,n,r){return(!r||r===Fe.HTML)&&frt(e,t,n)||(!r||r===Fe.MATHML)&&crt(e,t)}const hrt="hidden",prt=8,mrt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const grt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},kEe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),iue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:K_,onParseError:null};let sue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...iue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Unt(this.options,this),this.activeFormattingElements=new Ynt(this.treeAdapter),this.fragmentContextID=r?lS(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Gnt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...iue,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:grt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=us.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=us.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=us.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=us.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=us.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case kn.CHARACTER:{this.onCharacter(t);break}case kn.NULL_CHARACTER:{this.onNullCharacter(t);break}case kn.COMMENT:{this.onComment(t);break}case kn.DOCTYPE:{this.onDoctype(t);break}case kn.START_TAG:{this._processStartTag(t);break}case kn.END_TAG:{this.onEndTag(t);break}case kn.EOF:{this.onEof(t);break}case kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return drt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Ef.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ie.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ie.IN_TABLE;return}case N.BODY:{this.insertionMode=ie.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return kEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Mnt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Wit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{xT(this,t);break}case ie.BEFORE_HTML:{yC(this,t);break}case ie.BEFORE_HEAD:{vC(this,t);break}case ie.IN_HEAD:{bC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{_C(this,t);break}case ie.AFTER_HEAD:{wC(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{NEe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{t8(this,t);break}case ie.IN_TABLE_TEXT:{LEe(this,t);break}case ie.IN_COLUMN_GROUP:{XO(this,t);break}case ie.AFTER_BODY:{QO(this,t);break}case ie.AFTER_AFTER_BODY:{fD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){qit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{xT(this,t);break}case ie.BEFORE_HTML:{yC(this,t);break}case ie.BEFORE_HEAD:{vC(this,t);break}case ie.IN_HEAD:{bC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{_C(this,t);break}case ie.AFTER_HEAD:{wC(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{t8(this,t);break}case ie.IN_COLUMN_GROUP:{XO(this,t);break}case ie.AFTER_BODY:{QO(this,t);break}case ie.AFTER_AFTER_BODY:{fD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){m7(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{m7(this,t);break}case ie.IN_TABLE_TEXT:{ST(this,t);break}case ie.AFTER_BODY:{xrt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Srt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Trt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{ST(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Git(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{xT(this,t);break}case ie.BEFORE_HTML:{Crt(this,t);break}case ie.BEFORE_HEAD:{Irt(this,t);break}case ie.IN_HEAD:{od(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Nrt(this,t);break}case ie.AFTER_HEAD:{Drt(this,t);break}case ie.IN_BODY:{Aa(this,t);break}case ie.IN_TABLE:{$E(this,t);break}case ie.IN_TABLE_TEXT:{ST(this,t);break}case ie.IN_CAPTION:{kit(this,t);break}case ie.IN_COLUMN_GROUP:{BY(this,t);break}case ie.IN_TABLE_BODY:{u6(this,t);break}case ie.IN_ROW:{l6(this,t);break}case ie.IN_CELL:{Pit(this,t);break}case ie.IN_SELECT:{BEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Oit(this,t);break}case ie.IN_TEMPLATE:{Mit(this,t);break}case ie.AFTER_BODY:{Fit(this,t);break}case ie.IN_FRAMESET:{jit(this,t);break}case ie.AFTER_FRAMESET:{Uit(this,t);break}case ie.AFTER_AFTER_BODY:{Vit(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Hit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Yit(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{xT(this,t);break}case ie.BEFORE_HTML:{Art(this,t);break}case ie.BEFORE_HEAD:{krt(this,t);break}case ie.IN_HEAD:{Rrt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Prt(this,t);break}case ie.AFTER_HEAD:{Ort(this,t);break}case ie.IN_BODY:{a6(this,t);break}case ie.TEXT:{bit(this,t);break}case ie.IN_TABLE:{DA(this,t);break}case ie.IN_TABLE_TEXT:{ST(this,t);break}case ie.IN_CAPTION:{Rit(this,t);break}case ie.IN_COLUMN_GROUP:{Nit(this,t);break}case ie.IN_TABLE_BODY:{g7(this,t);break}case ie.IN_ROW:{jEe(this,t);break}case ie.IN_CELL:{Dit(this,t);break}case ie.IN_SELECT:{UEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{$it(this,t);break}case ie.IN_TEMPLATE:{Lit(this,t);break}case ie.AFTER_BODY:{VEe(this,t);break}case ie.IN_FRAMESET:{Bit(this,t);break}case ie.AFTER_FRAMESET:{zit(this,t);break}case ie.AFTER_AFTER_BODY:{fD(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{xT(this,t);break}case ie.BEFORE_HTML:{yC(this,t);break}case ie.BEFORE_HEAD:{vC(this,t);break}case ie.IN_HEAD:{bC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{_C(this,t);break}case ie.AFTER_HEAD:{wC(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{$Ee(this,t);break}case ie.TEXT:{_it(this,t);break}case ie.IN_TABLE_TEXT:{ST(this,t);break}case ie.IN_TEMPLATE:{zEe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{jY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{REe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{t8(this,t);break}case ie.IN_TABLE_TEXT:{MEe(this,t);break}}}};function yrt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):OEe(e,t),n}function vrt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function brt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=mrt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=_rt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function _rt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function wrt(e,t,n){const r=e.treeAdapter.getTagName(t),i=lS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Ert(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function FY(e,t){for(let n=0;n<prt;n++){const r=yrt(e,t);if(!r)break;const i=vrt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=brt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&wrt(e,o,s),Ert(e,i,r)}}function m7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function xrt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Srt(e,t){e._appendCommentNode(t,e.document)}function jY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Trt(e,t){e._setDocumentType(t);const n=t.forceQuirks?vl.QUIRKS:trt(t);ert(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function xT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,vl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Crt(e,t){t.tagID===N.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):yC(e,t)}function Art(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&yC(e,t)}function yC(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Irt(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:vC(e,t)}}function krt(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?vC(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function vC(e,t){e._insertFakeElement(Ee.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function od(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,us.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,us.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,us.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,us.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:bC(e,t)}}function Rrt(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{bC(e,t);break}case N.TEMPLATE:{Ub(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Ub(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function bC(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function Nrt(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{od(e,t);break}case N.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:_C(e,t)}}function Prt(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case N.BR:{_C(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function _C(e,t){const n=t.type===kn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Drt(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),od(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:wC(e,t)}}function Ort(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{wC(e,t);break}case N.TEMPLATE:{Ub(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function wC(e,t){e._insertFakeElement(Ee.BODY,N.BODY),e.insertionMode=ie.IN_BODY,o6(e,t)}function o6(e,t){switch(t.type){case kn.CHARACTER:{NEe(e,t);break}case kn.WHITESPACE_CHARACTER:{REe(e,t);break}case kn.COMMENT:{m7(e,t);break}case kn.START_TAG:{Aa(e,t);break}case kn.END_TAG:{a6(e,t);break}case kn.EOF:{$Ee(e,t);break}}}function REe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function NEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function $rt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Mrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Lrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function Frt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function jrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),bEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function Brt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Urt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function zrt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Vrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=us.PLAINTEXT}function Hrt(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function qrt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(FY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Wrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Grt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(FY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Yrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Krt(e,t){e.treeAdapter.getDocumentMode(e.document)!==vl.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function PEe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function DEe(e){const t=gEe(e,w0.TYPE);return t!=null&&t.toLowerCase()===hrt}function Xrt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),DEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Qrt(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function Jrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Zrt(e,t){t.tagName=Ee.IMG,t.tagID=N.IMG,PEe(e,t)}function eit(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=us.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function tit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function nit(e,t){e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function oue(e,t){e._switchToTextParsing(t,us.RAWTEXT)}function rit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function iit(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function sit(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function oit(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,Fe.HTML)}function ait(e,t){e._reconstructActiveFormattingElements(),AEe(t),LY(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function uit(e,t){e._reconstructActiveFormattingElements(),IEe(t),LY(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function aue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Aa(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{Wrt(e,t);break}case N.A:{qrt(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{jrt(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Frt(e,t);break}case N.LI:case N.DD:case N.DT:{zrt(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{PEe(e,t);break}case N.HR:{Jrt(e,t);break}case N.RB:case N.RTC:{sit(e,t);break}case N.RT:case N.RP:{oit(e,t);break}case N.PRE:case N.LISTING:{Brt(e,t);break}case N.XMP:{tit(e,t);break}case N.SVG:{uit(e,t);break}case N.HTML:{$rt(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{od(e,t);break}case N.BODY:{Mrt(e,t);break}case N.FORM:{Urt(e,t);break}case N.NOBR:{Grt(e,t);break}case N.MATH:{ait(e,t);break}case N.TABLE:{Krt(e,t);break}case N.INPUT:{Xrt(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{Qrt(e,t);break}case N.IMAGE:{Zrt(e,t);break}case N.BUTTON:{Hrt(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Yrt(e,t);break}case N.IFRAME:{nit(e,t);break}case N.SELECT:{rit(e,t);break}case N.OPTION:case N.OPTGROUP:{iit(e,t);break}case N.NOEMBED:{oue(e,t);break}case N.FRAMESET:{Lrt(e,t);break}case N.TEXTAREA:{eit(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?oue(e,t):aue(e,t);break}case N.PLAINTEXT:{Vrt(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:aue(e,t)}}function lit(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function cit(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,VEe(e,t))}function fit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function dit(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function hit(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(Ee.P,N.P),e._closePElement()}function pit(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function mit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function git(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function yit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function vit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function OEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function a6(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{FY(e,t);break}case N.P:{hit(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{fit(e,t);break}case N.LI:{pit(e);break}case N.DD:case N.DT:{mit(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{git(e);break}case N.BR:{vit(e);break}case N.BODY:{lit(e,t);break}case N.HTML:{cit(e,t);break}case N.FORM:{dit(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{yit(e,t);break}case N.TEMPLATE:{Ub(e,t);break}default:OEe(e,t)}}function $Ee(e,t){e.tmplInsertionModeStack.length>0?zEe(e,t):jY(e,t)}function bit(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function _it(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function t8(e,t){if(kEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case kn.CHARACTER:{LEe(e,t);break}case kn.WHITESPACE_CHARACTER:{MEe(e,t);break}}else pk(e,t)}function wit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function Eit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function xit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,N.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,BY(e,t)}function Sit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Tit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,N.TBODY),e.insertionMode=ie.IN_TABLE_BODY,u6(e,t)}function Cit(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Ait(e,t){DEe(t)?e._appendElement(t,Fe.HTML):pk(e,t),t.ackSelfClosing=!0}function Iit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function $E(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{Tit(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{od(e,t);break}case N.COL:{xit(e,t);break}case N.FORM:{Iit(e,t);break}case N.TABLE:{Cit(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Sit(e,t);break}case N.INPUT:{Ait(e,t);break}case N.CAPTION:{wit(e,t);break}case N.COLGROUP:{Eit(e,t);break}default:pk(e,t)}}function DA(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Ub(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:pk(e,t)}}function pk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,o6(e,t),e.fosterParentingEnabled=n}function MEe(e,t){e.pendingCharacterTokens.push(t)}function LEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ST(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)pk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const FEe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function kit(e,t){const n=t.tagID;FEe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,$E(e,t)):Aa(e,t)}function Rit(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===N.TABLE&&DA(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:a6(e,t)}}function BY(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{od(e,t);break}default:XO(e,t)}}function Nit(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TEMPLATE:{Ub(e,t);break}case N.COL:break;default:XO(e,t)}}function XO(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function u6(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,N.TR),e.insertionMode=ie.IN_ROW,l6(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,$E(e,t));break}default:$E(e,t)}}function g7(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,DA(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:DA(e,t)}}function l6(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,u6(e,t));break}default:$E(e,t)}}function jEe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,g7(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,g7(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:DA(e,t)}}function Pit(e,t){const n=t.tagID;FEe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),l6(e,t)):Aa(e,t)}function Dit(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),jEe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:a6(e,t)}}function BEe(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{od(e,t);break}}}function UEe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Ub(e,t);break}}}function Oit(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):BEe(e,t)}function $it(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):UEe(e,t)}function Mit(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{od(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,$E(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,BY(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,u6(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,l6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Aa(e,t)}}function Lit(e,t){t.tagID===N.TEMPLATE&&Ub(e,t)}function zEe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):jY(e,t)}function Fit(e,t){t.tagID===N.HTML?Aa(e,t):QO(e,t)}function VEe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else QO(e,t)}function QO(e,t){e.insertionMode=ie.IN_BODY,o6(e,t)}function jit(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.FRAMESET:{e._insertElement(t,Fe.HTML);break}case N.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{od(e,t);break}}}function Bit(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Uit(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.NOFRAMES:{od(e,t);break}}}function zit(e,t){t.tagID===N.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Vit(e,t){t.tagID===N.HTML?Aa(e,t):fD(e,t)}function fD(e,t){e.insertionMode=ie.IN_BODY,o6(e,t)}function Hit(e,t){switch(t.tagID){case N.HTML:{Aa(e,t);break}case N.NOFRAMES:{od(e,t);break}}}function qit(e,t){t.chars=_i,e._insertCharacters(t)}function Wit(e,t){e._insertCharacters(t),e.framesetOk=!1}function HEe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Git(e,t){if(urt(t))HEe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?AEe(t):r===Fe.SVG&&(lrt(t),IEe(t)),LY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Yit(e,t){if(t.tagID===N.P||t.tagID===N.BR){HEe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const Kit=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),uue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function qEe(e,t){const n=sst(e),r=fEe("type",{handlers:{root:Xit,element:Qit,text:Jit,comment:GEe,doctype:Zit,raw:tst},unknown:nst}),i={parser:n?new sue(uue):sue.getFragmentParser(void 0,uue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),cS(i,Gh());const s=n?i.parser.document:i.parser.getFragment(),o=ant(s,{file:i.options.file});return i.stitches&&DY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function WEe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Xit(e,t){WEe(e.children,t)}function Qit(e,t){rst(e,t),WEe(e.children,t),ist(e,t)}function Jit(e,t){const n={type:kn.CHARACTER,chars:e.value,location:mk(e)};cS(t,Gh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Zit(e,t){const n={type:kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:mk(e)};cS(t,Gh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function est(e,t){t.stitches=!0;const n=ost(e);if("children"in e&&"children"in n){const r=qEe({type:"root",children:e.children},t.options);n.children=r.children}GEe({type:"comment",value:{stitch:n}},t)}function GEe(e,t){const n=e.value,r={type:kn.COMMENT,data:n,location:mk(e)};cS(t,Gh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function tst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,YEe(t,Gh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function nst(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))est(n,t);else{let r="";throw Kit.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function cS(e,t){YEe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=us.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function YEe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function rst(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===us.PLAINTEXT)return;cS(t,Gh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:ov.html;i===ov.html&&n==="svg"&&(i=ov.svg);const s=dnt({...e,children:[]},{space:i===ov.svg?"svg":"html"}),o={type:kn.START_TAG,tagName:n,tagID:lS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:mk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function ist(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&_nt.includes(n)||t.parser.tokenizer.state===us.PLAINTEXT)return;cS(t,n6(e));const r={type:kn.END_TAG,tagName:n,tagID:lS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:mk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===us.RCDATA||t.parser.tokenizer.state===us.RAWTEXT||t.parser.tokenizer.state===us.SCRIPT_DATA)&&(t.parser.tokenizer.state=us.DATA)}function sst(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function mk(e){const t=Gh(e)||{line:void 0,column:void 0,offset:void 0},n=n6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function ost(e){return"children"in e?OE({...e,children:[]}):OE(e)}function ast(e){return function(t,n){return qEe(t,{...e,file:n})}}function Za({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return b.jsx(Py,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return b.jsx(Ke,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return b.jsx(Ai,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return b.jsx(Ai,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return b.jsx(Ai,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return b.jsx(Ai,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return b.jsx(Ai,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return b.jsx(Ai,{...s,order:6,...s,pb:12})},a({node:i,...s}){return b.jsx(Ob,{...s,ref:void 0})},ul({node:i,...s}){return b.jsx(Uf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return b.jsx(Uf,{type:"ordered",withPadding:!0,...o,pb:8})}};return b.jsx(Ytt,{components:n,rehypePlugins:[ast],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function y7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return b.jsx(Za,{text:n})}const ust="https://github.com/revisit-studies/study/tree/main/public/";function lst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Wh();return b.jsx(mi.Main,{children:b.jsxs($c,{size:"xs",px:"xs",children:[b.jsx(Py,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Hu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),b.jsx(Ke,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=xwe(i);return b.jsx(Ts,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:b.jsxs($b,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Ke,{fw:"bold",children:i}),b.jsxs(Rt,{align:"center",direction:"row",children:[b.jsx(eae,{color:"red"}),b.jsx(Ke,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),b.jsx(y7,{issues:s.errors,type:"error"})]}):b.jsxs(b.Fragment,{children:[b.jsxs(Rt,{direction:"row",justify:"space-between",children:[b.jsx(Ke,{fw:"bold",children:s.studyMetadata.title}),b.jsx(Db,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Hu}${o}`,children:b.jsx(uQe,{style:{paddingTop:4}})})]}),b.jsxs(Ke,{c:"dimmed",children:[b.jsx(Ke,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),b.jsx(Ke,{c:"dimmed",children:s.studyMetadata.description}),b.jsx(Ke,{c:"dimmed",ta:"right",style:{paddingRight:5},children:b.jsxs(Ob,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${ust}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs(Rt,{align:"center",direction:"row",children:[b.jsx(eae,{color:"orange"}),b.jsx(Ke,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),b.jsx(y7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var KEe={exports:{}},XEe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=k;function cst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fst=typeof Object.is=="function"?Object.is:cst,dst=gk.useSyncExternalStore,hst=gk.useRef,pst=gk.useEffect,mst=gk.useMemo,gst=gk.useDebugValue;XEe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=hst(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=mst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,fst(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=dst(e,s[0],s[1]);return pst(function(){o.hasValue=!0,o.value=a},[a]),gst(a),a};KEe.exports=XEe;var yst=KEe.exports,Al="default"in cO?wr:cO,lue=Symbol.for("react-redux-context"),cue=typeof globalThis<"u"?globalThis:{};function vst(){if(!Al.createContext)return{};const e=cue[lue]??(cue[lue]=new Map);let t=e.get(Al.createContext);return t||(t=Al.createContext(null),e.set(Al.createContext,t)),t}var U0=vst(),bst=()=>{throw new Error("uSES not initialized!")};function UY(e=U0){return function(){return Al.useContext(e)}}var QEe=UY(),JEe=bst,_st=e=>{JEe=e},wst=(e,t)=>e===t;function Est(e=U0){const t=e===U0?QEe:UY(e),n=(r,i={})=>{const{equalityFn:s=wst,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Al.useRef(!0);const d=Al.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=JEe(u.addNestedSub,a.getState,l||a.getState,d,s);return Al.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var xst=Est();function Sst(e){e()}function Tst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Sst(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var fue={notify(){},get:()=>[]};function Cst(e,t){let n,r=fue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Tst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=fue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Ast=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ist=typeof navigator<"u"&&navigator.product==="ReactNative",kst=Ast||Ist?Al.useLayoutEffect:Al.useEffect;function Rst({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Al.useMemo(()=>{const l=Cst(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Al.useMemo(()=>e.getState(),[e]);kst(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||U0;return Al.createElement(u.Provider,{value:o},n)}var Nst=Rst;function ZEe(e=U0){const t=e===U0?QEe:UY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Pst=ZEe();function Dst(e=U0){const t=e===U0?Pst:ZEe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var exe=Dst();_st(yst.useSyncExternalStoreWithSelector);function xo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ost=typeof Symbol=="function"&&Symbol.observable||"@@observable",due=Ost,n8=()=>Math.random().toString(36).substring(7).split("").join("."),$st={INIT:`@@redux/INIT${n8()}`,REPLACE:`@@redux/REPLACE${n8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${n8()}`},JO=$st;function zY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function txe(e,t,n){if(typeof e!="function")throw new Error(xo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xo(1));return n(txe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(xo(3));return i}function f(g){if(typeof g!="function")throw new Error(xo(4));if(u)throw new Error(xo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(xo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!zY(g))throw new Error(xo(7));if(typeof g.type>"u")throw new Error(xo(8));if(typeof g.type!="string")throw new Error(xo(17));if(u)throw new Error(xo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(xo(10));r=g,d({type:JO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(xo(11));function v(){const E=y;E.next&&E.next(c())}return v(),{unsubscribe:g(v)}},[due](){return this}}}return d({type:JO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[due]:p}}function Mst(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:JO.INIT})>"u")throw new Error(xo(12));if(typeof n(void 0,{type:JO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xo(13))})}function Lst(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Mst(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(xo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function ZO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Fst(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(xo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=ZO(...a)(i.dispatch),{...i,dispatch:s}}}function jst(e){return zY(e)&&"type"in e&&typeof e.type=="string"}var nxe=Symbol.for("immer-nothing"),hue=Symbol.for("immer-draftable"),jl=Symbol.for("immer-state");function Sf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ME=Object.getPrototypeOf;function z0(e){return!!e&&!!e[jl]}function Sm(e){var t;return e?rxe(e)||Array.isArray(e)||!!e[hue]||!!((t=e.constructor)!=null&&t[hue])||f6(e)||d6(e):!1}var Bst=Object.prototype.constructor.toString();function rxe(e){if(!e||typeof e!="object")return!1;const t=ME(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Bst}function e3(e,t){c6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function c6(e){const t=e[jl];return t?t.type_:Array.isArray(e)?1:f6(e)?2:d6(e)?3:0}function v7(e,t){return c6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ixe(e,t,n){const r=c6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Ust(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function f6(e){return e instanceof Map}function d6(e){return e instanceof Set}function k1(e){return e.copy_||e.base_}function b7(e,t){if(f6(e))return new Map(e);if(d6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=rxe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[jl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(ME(e),r)}else{const r=ME(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function VY(e,t=!1){return h6(e)||z0(e)||!Sm(e)||(c6(e)>1&&(e.set=e.add=e.clear=e.delete=zst),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>VY(r,!0))),e}function zst(){Sf(2)}function h6(e){return Object.isFrozen(e)}var Vst={};function zv(e){const t=Vst[e];return t||Sf(0,e),t}var OA;function sxe(){return OA}function Hst(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pue(e,t){t&&(zv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function _7(e){w7(e),e.drafts_.forEach(qst),e.drafts_=null}function w7(e){e===OA&&(OA=e.parent_)}function mue(e){return OA=Hst(OA,e)}function qst(e){const t=e[jl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[jl].modified_&&(_7(t),Sf(4)),Sm(e)&&(e=t3(t,e),t.parent_||n3(t,e)),t.patches_&&zv("Patches").generateReplacementPatches_(n[jl].base_,e,t.patches_,t.inversePatches_)):e=t3(t,n,[]),_7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==nxe?e:void 0}function t3(e,t,n){if(h6(t))return t;const r=t[jl];if(!r)return e3(t,(i,s)=>yue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return n3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),e3(s,(a,u)=>yue(e,r,i,a,u,n,o)),n3(e,i,!1),n&&e.patches_&&zv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function yue(e,t,n,r,i,s,o){if(z0(i)){const a=s&&t&&t.type_!==3&&!v7(t.assigned_,r)?s.concat(r):void 0,u=t3(e,i,a);if(ixe(n,r,u),z0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Sm(i)&&!h6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;t3(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&n3(e,i)}}function n3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&VY(t,n)}function Wst(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:sxe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=HY;n&&(i=[r],s=$A);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var HY={get(e,t){if(t===jl)return e;const n=k1(e);if(!v7(n,t))return Gst(e,n,t);const r=n[t];return e.finalized_||!Sm(r)?r:r===r8(e.base_,t)?(i8(e),e.copy_[t]=x7(r,e)):r},has(e,t){return t in k1(e)},ownKeys(e){return Reflect.ownKeys(k1(e))},set(e,t,n){const r=oxe(k1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=r8(k1(e),t),s=i==null?void 0:i[jl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Ust(n,i)&&(n!==void 0||v7(e.base_,t)))return!0;i8(e),E7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return r8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,i8(e),E7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=k1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Sf(11)},getPrototypeOf(e){return ME(e.base_)},setPrototypeOf(){Sf(12)}},$A={};e3(HY,(e,t)=>{$A[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$A.deleteProperty=function(e,t){return $A.set.call(this,e,t,void 0)};$A.set=function(e,t,n){return HY.set.call(this,e[0],t,n,e[0])};function r8(e,t){const n=e[jl];return(n?k1(n):e)[t]}function Gst(e,t,n){var i;const r=oxe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function oxe(e,t){if(!(t in e))return;let n=ME(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ME(n)}}function E7(e){e.modified_||(e.modified_=!0,e.parent_&&E7(e.parent_))}function i8(e){e.copy_||(e.copy_=b7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Yst=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Sf(6),r!==void 0&&typeof r!="function"&&Sf(7);let i;if(Sm(t)){const s=mue(this),o=x7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?_7(s):w7(s)}return pue(s,r),gue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===nxe&&(i=void 0),this.autoFreeze_&&VY(i,!0),r){const s=[],o=[];zv("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Sf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Sm(e)||Sf(8),z0(e)&&(e=axe(e));const t=mue(this),n=x7(e,void 0);return n[jl].isManual_=!0,w7(t),n}finishDraft(e,t){const n=e&&e[jl];(!n||!n.isManual_)&&Sf(9);const{scope_:r}=n;return pue(r,t),gue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=zv("Patches").applyPatches_;return z0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function x7(e,t){const n=f6(e)?zv("MapSet").proxyMap_(e,t):d6(e)?zv("MapSet").proxySet_(e,t):Wst(e,t);return(t?t.scope_:sxe()).drafts_.push(n),n}function axe(e){return z0(e)||Sf(10,e),uxe(e)}function uxe(e){if(!Sm(e)||h6(e))return e;const t=e[jl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=b7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=b7(e,!0);return e3(n,(r,i)=>{ixe(n,r,uxe(i))}),t&&(t.finalized_=!1),n}var Bl=new Yst,lxe=Bl.produce;Bl.produceWithPatches.bind(Bl);Bl.setAutoFreeze.bind(Bl);Bl.setUseStrictShallowCopy.bind(Bl);Bl.applyPatches.bind(Bl);Bl.createDraft.bind(Bl);Bl.finishDraft.bind(Bl);function Kst(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Xst(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Qst(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var vue=e=>Array.isArray(e)?e:[e];function Jst(e){const t=Array.isArray(e[0])?e[0]:e;return Qst(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Zst(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var eot=class{constructor(e){this.value=e}deref(){return this.value}},tot=typeof WeakRef<"u"?WeakRef:eot,not=0,bue=1;function kN(){return{s:not,v:void 0,o:null,p:null}}function qY(e,t={}){let n=kN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=kN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=kN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===bue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new tot(c):c}return l.s=bue,l.v=c,c}return o.clearCache=()=>{n=kN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function cxe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Kst(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=qY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=vue(d),y=vue(p),v=Jst(i),_=f(function(){return s++,l.apply(null,arguments)},...g),E=h(function(){o++;const S=Zst(v,arguments);return a=_.apply(null,S),a},...y);return Object.assign(E,{resultFunc:l,memoizedResultFunc:_,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var fxe=cxe(qY),rot=Object.assign((e,t=fxe)=>{Xst(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>rot});function dxe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var iot=dxe(),sot=dxe,oot=(...e)=>{const t=cxe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(z0(o)?axe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};oot(qY);var aot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ZO:ZO.apply(null,arguments)};function LE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Wu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>jst(r)&&r.type===e,n}var hxe=class v2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,v2.prototype)}static get[Symbol.species](){return v2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new v2(...t[0].concat(this)):new v2(...t.concat(this))}};function _ue(e){return Sm(e)?lxe(e,()=>{}):e}function wue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Wu(10));const r=n.insert(t,e);return e.set(t,r),r}function uot(e){return typeof e=="boolean"}var lot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new hxe;return n&&(uot(n)?o.push(iot):o.push(sot(n.extraArgument))),o},cot="RTK_autoBatch",pxe=e=>t=>{setTimeout(t,e)},fot=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pxe(10),dot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?fot:e.type==="callback"?e.queueNotification:pxe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[cot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},hot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new hxe(e);return r&&i.push(dot(typeof r=="object"?r:void 0)),i},pot=!0;function mot(e){const t=lot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(zY(n))a=Lst(n);else throw new Error(Wu(1));let u;typeof r=="function"?u=r(t):u=t();let l=ZO;i&&(l=aot({trace:!pot,...typeof i=="object"&&i}));const c=Fst(...u),f=hot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return txe(a,s,h)}function mxe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Wu(28));if(a in t)throw new Error(Wu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function got(e){return typeof e=="function"}function yot(e,t){let[n,r,i]=mxe(t),s;if(got(e))s=()=>_ue(e());else{const a=_ue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(z0(c)){const h=f(c,u);return h===void 0?c:h}else{if(Sm(c))return lxe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Wu(9))}return d}}return c},a)}return o.getInitialState=s,o}var vot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",bot=(e=21)=>{let t="",n=e;for(;n--;)t+=vot[Math.random()*64|0];return t},_ot=Symbol.for("rtk-slice-createasyncthunk");function wot(e,t){return`${e}/${t}`}function Eot({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[_ot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Wu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Tot()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,E){const w=typeof _=="string"?_:_.type;if(!w)throw new Error(Wu(12));if(w in l.sliceCaseReducersByType)throw new Error(Wu(13));return l.sliceCaseReducersByType[w]=E,c},addMatcher(_,E){return l.sliceMatchers.push({matcher:_,reducer:E}),c},exposeAction(_,E){return l.actionCreators[_]=E,c},exposeCaseReducer(_,E){return l.sliceCaseReducersByName[_]=E,c}};u.forEach(_=>{const E=a[_],w={reducerName:_,type:wot(s,_),createNotation:typeof i.reducers=="function"};Aot(E)?kot(w,E,c,t):Cot(w,E,c)});function f(){const[_={},E=[],w=void 0]=typeof i.extraReducers=="function"?mxe(i.extraReducers):[i.extraReducers],S={..._,...l.sliceCaseReducersByType};return yot(i.initialState,x=>{for(let C in S)x.addCase(C,S[C]);for(let C of l.sliceMatchers)x.addMatcher(C.matcher,C.reducer);for(let C of E)x.addMatcher(C.matcher,C.reducer);w&&x.addDefaultCase(w)})}const d=_=>_,h=new Map;let p;function m(_,E){return p||(p=f()),p(_,E)}function g(){return p||(p=f()),p.getInitialState()}function y(_,E=!1){function w(x){let C=x[_];return typeof C>"u"&&E&&(C=g()),C}function S(x=d){const C=wue(h,E,{insert:()=>new WeakMap});return wue(C,x,{insert:()=>{const A={};for(const[I,R]of Object.entries(i.selectors??{}))A[I]=xot(R,x,g,E);return A}})}return{reducerPath:_,getSelectors:S,get selectors(){return S(w)},selectSlice:w}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(_,{reducerPath:E,...w}={}){const S=E??o;return _.inject({reducerPath:S,reducer:m},w),{...v,...y(S,!0)}}};return v}}function xot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Sot=Eot();function Tot(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Cot({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Iot(r))throw new Error(Wu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?LE(e,o):LE(e))}function Aot(e){return e._reducerDefinitionType==="asyncThunk"}function Iot(e){return e._reducerDefinitionType==="reducerWithPrepare"}function kot({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Wu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||RN,pending:a||RN,rejected:u||RN,settled:l||RN})}function RN(){}var Rot=(e,t)=>{if(typeof e!="function")throw new Error(Wu(32))},WY="listenerMiddleware",Not=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=LE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Wu(21));return Rot(s),{predicate:i,type:t,effect:s}},Pot=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Not(e);return{id:bot(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Wu(22))}}},{withTypes:()=>Pot}),Dot=Object.assign(LE(`${WY}/add`),{withTypes:()=>Dot});LE(`${WY}/removeAll`);var Oot=Object.assign(LE(`${WY}/remove`),{withTypes:()=>Oot});function Wu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Tm(e){return e.components.flatMap(t=>typeof t=="string"?t:Tm(t))}function gxe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:gxe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function yxe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Tm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Tm(e).length-1}];r+=1}else{const o=yxe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function vxe(e,t){const n=yxe(e,t,0);return typeof n=="number"?null:n}function bxe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=bxe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function $ot(e,t){const n=bxe(e,t,0);return n.found?n.distance:-1}function _xe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(..._xe(i,`${t}-${s}`))}),n}function GY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>GY(n,`${t}-${r}`))}}async function Mot(e,t,n,r,i){const s=Tm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[]}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Sot({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:_}}}});return{store:mot({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const wxe=k.createContext(null);function Yh(){return k.useContext(wxe).actions}const Kh=exe,co=xst;function Lot(e){return co(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Fot=fxe(e=>e.sequence,e=>Tm(e));function YY(){return co(Fot)}function My(){const{studyId:e}=Em();return`${e}`}function Zm(){const{index:e}=Em(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Ly(){const e=Zm(),t=YY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var r3={exports:{}};r3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",E="[object RegExp]",w="[object Set]",S="[object String]",x="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[R]=j[O]=j[D]=j[$]=j[F]=j[M]=j[B]=j[z]=j[H]=!0,j[a]=j[u]=j[A]=j[c]=j[I]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[E]=j[w]=j[S]=j[C]=!1;var q=typeof no=="object"&&no&&no.Object===Object&&no,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ve=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ve&&ve.binding&&ve.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Xe(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,At=Array(te);++Re<te;)At[Re]=ue(Re);return At}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=ne["__core-js_shared__"],We=ze.toString,ge=ct.hasOwnProperty,ht=function(){var te=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,pe=We.call(Object),Ae=RegExp("^"+We.call(ge).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=_e(Object.getPrototypeOf,Object),Ar=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,gn=ut?ut.toStringTag:void 0,An=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,Vo=Date.now,ji=qe(ne,"Map"),In=qe(Object,"create"),Bi=function(){function te(){}return function(ue){if(!gp(ue))return{};if(Ar)return Ar(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ir(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function vs(){this.__data__=In?In(null):{},this.size=0}function dp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function fl(te){var ue=this.__data__;if(In){var Re=ue[te];return Re===r?void 0:Re}return ge.call(ue,te)?ue[te]:void 0}function bd(te){var ue=this.__data__;return In?ue[te]!==void 0:ge.call(ue,te)}function Sr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=In&&ue===void 0?r:ue,this}Ir.prototype.clear=vs,Ir.prototype.delete=dp,Ir.prototype.get=fl,Ir.prototype.has=bd,Ir.prototype.set=Sr;function Ni(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function Jr(){this.__data__=[],this.size=0}function du(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var At=ue.length-1;return Re==At?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Ia(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function ka(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,At=Jn(Re,te);return At<0?(++this.size,Re.push([te,ue])):Re[At][1]=ue,this}Ni.prototype.clear=Jr,Ni.prototype.delete=du,Ni.prototype.get=Ia,Ni.prototype.has=ka,Ni.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var At=te[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Ir,map:new(ji||Ni),string:new Ir}}function Ce(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),At=Re.size;return Re.set(te,ue),this.size+=Re.size==At?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ce,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=St;function qt(te){var ue=this.__data__=new Ni(te);this.size=ue.size}function On(){this.__data__=new Ni,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function pn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function kr(te,ue){var Re=this.__data__;if(Re instanceof Ni){var At=Re.__data__;if(!ji||At.length<n-1)return At.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(At)}return Re.set(te,ue),this.size=Re.size,this}qt.prototype.clear=On,qt.prototype.delete=jn,qt.prototype.get=pn,qt.prototype.has=ir,qt.prototype.set=kr;function Vt(te,ue){var Re=pp(te),At=!Re&&hu(te),$n=!Re&&!At&&mp(te),Tr=!Re&&!At&&!$n&&GR(te),Wr=Re||At||$n||Tr,Un=Wr?Ue(te.length,String):[],Gr=Un.length;for(var ns in te)Wr&&(ns=="length"||$n&&(ns=="offset"||ns=="parent")||Tr&&(ns=="buffer"||ns=="byteLength"||ns=="byteOffset")||Et(ns,Gr))||Un.push(ns);return Un}function sr(te,ue,Re){(Re!==void 0&&!rc(te[ue],Re)||Re===void 0&&!(ue in te))&&Pi(te,ue,Re)}function qr(te,ue,Re){var At=te[ue];(!(ge.call(te,ue)&&rc(At,Re))||Re===void 0&&!(ue in te))&&Pi(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(rc(te[Re][0],ue))return Re;return-1}function Pi(te,ue,Re){ue=="__proto__"&&An?An(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var qs=Oe();function Zr(te){return te==null?te===void 0?x:y:gn&&gn in Object(te)?Ge(te):qo(te)}function yo(te){return pu(te)&&Zr(te)==a}function Ui(te){if(!gp(te)||Bn(te))return!1;var ue=uT(te)?Ae:U;return ue.test(HR(te))}function zi(te){return pu(te)&&WR(te.length)&&!!j[Zr(te)]}function Ho(te){if(!gp(te))return Nr(te);var ue=Rr(te),Re=[];for(var At in te)At=="constructor"&&(ue||!ge.call(te,At))||Re.push(At);return Re}function Ra(te,ue,Re,At,$n){te!==ue&&qs(ue,function(Tr,Wr){if($n||($n=new qt),gp(Tr))Ws(te,ue,Wr,Re,Ra,At,$n);else{var Un=At?At(hp(te,Wr),Tr,Wr+"",te,ue,$n):void 0;Un===void 0&&(Un=Tr),sr(te,Wr,Un)}},l1)}function Ws(te,ue,Re,At,$n,Tr,Wr){var Un=hp(te,Re),Gr=hp(ue,Re),ns=Wr.get(Gr);if(ns){sr(te,Re,ns);return}var Wo=Tr?Tr(Un,Gr,Re+"",te,ue,Wr):void 0,f1=Wo===void 0;if(f1){var yp=pp(Gr),p_=!yp&&mp(Gr),m_=!yp&&!p_&&GR(Gr);Wo=Gr,yp||p_||m_?pp(Un)?Wo=Un:qR(Un)?Wo=fe(Un):p_?(f1=!1,Wo=Y(Gr)):m_?(f1=!1,Wo=Z(Gr)):Wo=[]:V5(Gr)||hu(Gr)?(Wo=Un,hu(Un)?Wo=u1(Un):(!gp(Un)||uT(Un))&&(Wo=st(Gr))):f1=!1}f1&&(Wr.set(Gr,Wo),$n(Wo,Gr,At,Tr,Wr),Wr.delete(Gr)),sr(te,Re,Wo)}function nc(te,ue){return aT(wd(te,ue,gg),te+"")}var _d=An?function(te,ue){return An(te,"toString",{configurable:!0,enumerable:!1,value:c1(ue),writable:!0})}:gg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,At=te.length;for(ue||(ue=Array(At));++Re<At;)ue[Re]=te[Re];return ue}function ye(te,ue,Re,At){var $n=!Re;Re||(Re={});for(var Tr=-1,Wr=ue.length;++Tr<Wr;){var Un=ue[Tr],Gr=void 0;Gr===void 0&&(Gr=te[Un]),$n?Pi(Re,Un,Gr):qr(Re,Un,Gr)}return Re}function le(te){return nc(function(ue,Re){var At=-1,$n=Re.length,Tr=$n>1?Re[$n-1]:void 0,Wr=$n>2?Re[2]:void 0;for(Tr=te.length>3&&typeof Tr=="function"?($n--,Tr):void 0,Wr&&mn(Re[0],Re[1],Wr)&&(Tr=$n<3?void 0:Tr,$n=1),ue=Object(ue);++At<$n;){var Un=Re[At];Un&&te(ue,Un,At,Tr)}return ue})}function Oe(te){return function(ue,Re,At){for(var $n=-1,Tr=Object(ue),Wr=At(ue),Un=Wr.length;Un--;){var Gr=Wr[++$n];if(Re(Tr[Gr],Gr,Tr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Pt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Ui(Re)?Re:void 0}function Ge(te){var ue=ge.call(te,gn),Re=te[gn];try{te[gn]=void 0;var At=!0}catch{}var $n=vt.call(te);return At&&(ue?te[gn]=Re:delete te[gn]),$n}function st(te){return typeof te.constructor=="function"&&!Rr(te)?Bi(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function mn(te,ue,Re){if(!gp(Re))return!1;var At=typeof ue;return(At=="number"?h_(Re)&&Et(ue,Re.length):At=="string"&&ue in Re)?rc(Re[ue],te):!1}function Pt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!ht&&ht in te}function Rr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Nr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function qo(te){return vt.call(te)}function wd(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var At=arguments,$n=-1,Tr=rr(At.length-ue,0),Wr=Array(Tr);++$n<Tr;)Wr[$n]=At[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=At[$n];return Un[ue]=Re(Wr),Xe(te,this,Un)}}function hp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var aT=a1(_d);function a1(te){var ue=0,Re=0;return function(){var At=Vo(),$n=s-(At-Re);if(Re=At,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function HR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function rc(te,ue){return te===ue||te!==te&&ue!==ue}var hu=yo(function(){return arguments}())?yo:function(te){return pu(te)&&ge.call(te,"callee")&&!Fn.call(te,"callee")},pp=Array.isArray;function h_(te){return te!=null&&WR(te.length)&&!uT(te)}function qR(te){return pu(te)&&h_(te)}var mp=nr||KR;function uT(te){if(!gp(te))return!1;var ue=Zr(te);return ue==h||ue==p||ue==l||ue==_}function WR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function gp(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function pu(te){return te!=null&&typeof te=="object"}function V5(te){if(!pu(te)||Zr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=ge.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var GR=be?yt(be):zi;function u1(te){return ye(te,l1(te))}function l1(te){return h_(te)?Vt(te):Ho(te)}var YR=le(function(te,ue,Re){Ra(te,ue,Re)});function c1(te){return function(){return te}}function gg(te){return te}function KR(){return!1}e.exports=YR})(r3,r3.exports);var jot=r3.exports;const KY=Xl(jot);function E0(e){return structuredClone(e)}function XY(){const e=Zm(),n=`${Ly()}_${e}`;return co(i=>i.answers[n])}const Exe=k.createContext(null);function Bot(){const e=k.useContext(Exe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function V0(){return co(e=>e.config)}function Eue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function xxe(){const e=Zm(),t=YY(),r=`${Ly()}_${e}`,i=co(S=>S.trialValidation),s=co(S=>S.sequence),o=co(S=>S.answers),a=Kh(),{saveTrialAnswer:u,setIframeAnswers:l}=Yh(),{storageEngine:c}=gs(),f=My(),[d,h]=k.useState(!0);k.useEffect(()=>{(async()=>{if(c){const x=await c.getModes(f);h(x.dataCollectionEnabled)}})()},[c,f]);const p=Lot(r),m=typeof e!="number"||!p,g=XY(),y=Wh(),v=V0(),_=k.useMemo(()=>Date.now(),[]),E=Bot(),w=k.useCallback(()=>{if(typeof e!="number")return;const S=E0(i[r]),x=Object.values(S).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:C}=S,A=Date.now(),I=E&&"current"in E&&E.current?E.current.splice(0,E.current.length):[];d&&g.endTime===-1&&(a(u({identifier:r,answer:x,startTime:_,endTime:A,provenanceGraph:C,windowEvents:I})),c&&c.saveAnswers({...o,[r]:{answer:x,startTime:_,endTime:A,provenanceGraph:C,windowEvents:I}}),a(l({})));let R=e+1;const O=vxe(s,e),D=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:x,startTime:_,endTime:A,provenanceGraph:C,windowEvents:I}};D&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const z=Object.fromEntries(Object.entries($).filter(([P])=>{const U=parseInt(P.slice(P.lastIndexOf("_")+1),10);return U>=M.firstIndex&&U<=e})),H=M.check!=="block"?Object.entries(z).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===M.name):Object.entries(z);if(H.length===0)return!1;if(H.some(([P,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[P,U]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===U.answer[M.responseId]:M.value!==U.answer[M.responseId]:B=!Eue(U.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const P=H.map(([j,q])=>Eue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),U=P.filter(j=>j).length,W=P.length-U;B=M.condition==="numCorrect"&&U===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const P=t.indexOf(M.to),U=P===-1?$ot(s,M.to):-1;return R=P===-1?U:P,!0}return!1}),y(`/${f}/${R}${window.location.search}`)},[e,i,r,E,d,g==null?void 0:g.endTime,s,o,_,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:w}}function Uot({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=xxe(),s=k.useCallback(()=>{n&&n(),i()},[i,n]);return b.jsx(en,{type:"submit",disabled:t||r,onClick:s,children:e})}function zot(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Vot=typeof window<"u"?k.useLayoutEffect:k.useEffect;function bo(e,t){Vot(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Hot(e,t){e&&zot(e),bo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),bo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),bo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),bo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),bo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),bo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),bo(`mantine-form:${e}:clear-errors`,t.clearErrors),bo(`mantine-form:${e}:reset`,t.reset),bo(`mantine-form:${e}:validate`,t.validate),bo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),bo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),bo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),bo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),bo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),bo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),bo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),bo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function qot(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function S7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Wot(e){const[t,n]=k.useState(S7(e)),r=k.useRef(t),i=k.useCallback(u=>{n(l=>{const c=S7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=k.useCallback(()=>i({}),[]),o=k.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=k.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Sxe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function xue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Sue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Sxe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=xue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=xue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Got(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Tue(e,t,n){typeof n.value=="object"&&(n.value=_w(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function _w(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(_w(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(_w(a),_w(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(_w(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Tue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Tue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Txe(e){return typeof e!="string"?[]:e.split(".")}function $u(e,t){const n=Txe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function p6(e,t,n){const r=Txe(e);if(r.length===0)return n;const i=_w(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Yot(e,{from:t,to:n},r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),p6(e,s,r)}function Kot(e,t,n,r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),p6(e,s,r)}function Xot(e,t,n){const r=$u(e,n);return Array.isArray(r)?p6(e,r.filter((i,s)=>s!==t),n):n}function Qot({$values:e,$errors:t,$status:n}){const r=k.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Got(o,a,u)),e.setValues({values:Yot(o,a,e.refValues.current),updateState:!0})},[]),i=k.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Sue(o,a,u,-1)),e.setValues({values:Xot(o,a,e.refValues.current),updateState:!0})},[]),s=k.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Sue(o,u,l,1)),e.setValues({values:Kot(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var QY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const dD=Xl(QY);function NN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Jot({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=k.useState(t),[o,a]=k.useState(e),u=k.useRef(t),l=k.useRef(e),c=k.useCallback(w=>{const S=typeof w=="function"?w(u.current):w;u.current=S,n==="controlled"&&s(S)},[]),f=k.useCallback(w=>{const S=typeof w=="function"?w(l.current):w;l.current=S,n==="controlled"&&a(S)},[]),d=k.useCallback(()=>c({}),[]),h=w=>{const S=w?{...w,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=k.useCallback((w,S)=>{c(x=>NN(x,w)===S?x:{...x,[w]:S})},[]),m=k.useCallback((w,S)=>{f(x=>NN(x,w)===S?x:{...x,[w]:S})},[]),g=k.useCallback(w=>NN(u.current,w),[]),y=k.useCallback(w=>f(S=>{if(typeof w!="string")return S;const x=Sxe(w,S);return delete x[w],dD(x,S)?S:x}),[]),v=k.useCallback(w=>{if(w){const x=$u(w,l.current);if(typeof x=="boolean")return x;const C=$u(w,r.refValues.current),A=$u(w,r.valuesSnapshot.current);return!dD(C,A)}return Object.keys(l.current).length>0?NN(l.current):!dD(r.refValues.current,r.valuesSnapshot.current)},[]),_=k.useCallback(()=>l.current,[]),E=k.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:_,getTouched:E}}function Zot({initialValues:e,onValuesChange:t,mode:n}){const r=k.useRef(!1),[i,s]=k.useState(e||{}),o=k.useRef(i),a=k.useRef(i),u=k.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,_=p instanceof Function?p(o.current):p,E=y?{...v,..._}:_;o.current=E,g&&s(E),t==null||t(E,v),m==null||m.filter(Boolean).forEach(w=>w({updatedValues:E,previousValues:v}))},[t]),l=k.useCallback(p=>{var y;const m=$u(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,_=p6(p.path,g,o.current);u({values:_,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(E=>E({path:p.path,updatedValues:_,previousValues:v}))}},[]),c=k.useCallback(p=>{a.current=p},[]),f=k.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=k.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=k.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function eat({$status:e}){const t=k.useRef({}),n=k.useCallback((i,s)=>{k.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=k.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:$u(i,o.previousValues),value:$u(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Cue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Aue(e){const t=S7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function T7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=$u(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>T7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||T7(o,t,a,i)),i},r)}function C7(e,t){return Aue(typeof e=="function"?e(t):T7(e,t))}function PN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=C7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const tat="__MANTINE_FORM_INDEX__";function Iue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${tat}`)):!1:!1}function Cxe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Wot(r),p=Zot({initialValues:n,onValuesChange:l,mode:t}),m=Jot({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Qot({$values:p,$errors:h,$status:m}),y=eat({$status:m}),[v,_]=k.useState(0),[E,w]=k.useState({}),S=k.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(P=>P+1)},[]),x=k.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&_(U=>U+1))},[]),C=k.useCallback((P,U,W)=>{const j=Iue(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?q=>{const G=PN(P,d,q.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>w(q=>({...q,[P]:(q[P]||0)+1})):null]})},[l,d]),A=k.useCallback(P=>{const U=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&_(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=$u(W,p.refValues.current),q=$u(W,U);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),I=k.useCallback(()=>{const P=C7(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),R=k.useCallback(P=>{const U=PN(P,d,p.refValues.current);return U.hasError?h.setFieldError(P,U.error):h.clearFieldError(P),U},[d]),O=(P,{type:U="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:qot(ce=>C(P,ce,{forceUpdate:!1})),"data-path":Cue(e,P)};return W&&(ne.error=h.errorsState[P]),U==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=$u(P,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=$u(P,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(P,!0),ne.onBlur=()=>{if(Iue(P,u)){const ce=PN(P,d,p.refValues.current);ce.hasError?h.setFieldError(P,ce.error):h.clearFieldError(P)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:P,options:{type:U,withError:W,withFocus:j,...q},form:H}))},D=(P,U)=>W=>{W==null||W.preventDefault();const j=I();j.hasErrors?U==null||U(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),F=k.useCallback(P=>{P.preventDefault(),S()},[]),M=k.useCallback(P=>P?!PN(P,d,p.refValues.current).hasError:!C7(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${E[P]||0}`,z=k.useCallback(P=>document.querySelector(`[data-path="${Cue(e,P)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:x,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:O,onSubmit:D,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:z};return Hot(e,H),H}function nat(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function rat(e){return nat(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Axe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const iat=new URLSearchParams(window.location.search),sat=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?iat.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},oat=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Axe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function aat(e,t,n){const[r,i]=k.useState(null),s=Cxe({initialValues:sat(e,n),validate:oat(e)});return k.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function zb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Axe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function uat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return b.jsx(Tl.Group,{label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:s,required:o})})]}),description:u,...n,error:zb(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(si,{mt:"xs",children:l.map(c=>b.jsx(Tl,{disabled:t,value:c.value,label:c.label},c.value))})})}function lat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return b.jsx(uk,{disabled:t,label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:zb(e,n,c)})}function cat({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return b.jsx(gi.Wrapper,{label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${n}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&b.jsx(Uf,{children:Array.isArray(t.value)?t.value.map(a=>b.jsx(Uf.Item,{children:a},a)):b.jsx(Uf.Item,{children:t.value})})})}function Ixe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return b.jsx(Uv.Group,{name:`radioInput${e.id}`,label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:s,required:o})})]}),description:c,...n,error:zb(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsxs(si,{mt:"xs",children:[u?b.jsx(Ke,{style:{textAlign:"center"},children:u}):null,f.map(d=>b.jsx(Uv,{disabled:t,value:d.value,label:d.label},d.label)),b.jsx(Ke,{children:l})]})},e.id)}function fat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return b.jsx(Ixe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function dat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return b.jsx(XG,{disabled:t,placeholder:l,label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:zb(e,n)})}function hat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=zb(e,n);return b.jsx(gi.Wrapper,{label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(JL,{disabled:t,marks:a,...n,h:40})})}function pat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return b.jsx(Wp,{disabled:t,placeholder:s,label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zb(e,n)})}function mat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return b.jsx(LG,{disabled:t,placeholder:s,label:b.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Za,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:zb(e,n)})}function gat({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=vY(),u=V0().uiConfig.enumerateQuestions??!1,l=k.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return b.jsxs(me,{mb:"md",children:[e.type==="numerical"&&b.jsx(dat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&b.jsx(pat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&b.jsx(mat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&b.jsx(fat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&b.jsx(lat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&b.jsx(hat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&b.jsx(Ixe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&b.jsx(uat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&b.jsx(cat,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function i3({config:e,location:t,status:n,style:r}){var M;const{storageEngine:i}=gs(),s=Kh(),{updateResponseBlockValidation:o,toggleShowHelpText:a}=Yh(),u=Zm(),l=Ly(),c=n==null?void 0:n.answer,f=My(),d=Wh(),h=e,p=k.useMemo(()=>{var B;return((B=h==null?void 0:h.response)==null?void 0:B.filter(z=>z.location?z.location===t:t==="belowStimulus"))||[]},[h==null?void 0:h.response,t]),m=aat(p,u,c||{}),[g,y]=k.useState(void 0),v=co(B=>B.iframeAnswers),_=co(B=>B.iframeProvenance),E=(h==null?void 0:h.provideFeedback)&&(((M=h==null?void 0:h.correctAnswer)==null?void 0:M.length)||0)>0,w=(h==null?void 0:h.allowFailedTraining)===void 0?!0:h.allowFailedTraining,[S,x]=k.useState(0),C=(h==null?void 0:h.trainingAttempts)||2,[A,I]=k.useState(!1),R=t===((h==null?void 0:h.nextButtonLocation)||"belowStimulus");k.useEffect(()=>{const B=p.find(z=>z.type==="iframe");if(v&&B){const z=B.id;m.setValues({...m.values,[z]:v[z]})}},[v]),k.useEffect(()=>{_&&y(_)},[_]),k.useEffect(()=>{s(o({location:t,identifier:`${l}_${u}`,status:m.isValid(),values:E0(m.values),provenanceGraph:g}))},[m.values,l,u,t,s,o,g]);const[O,D]=k.useState(Object.fromEntries(p.map(B=>[B.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),$=(B,z,H,P,U)=>{D(W=>({...W,[B]:{visible:z,title:H,message:P,color:U}}))},F=()=>{const B=S+1;x(B);const z=Object.fromEntries(p.map(H=>{var W,j;const P=(j=(W=h.correctAnswer)==null?void 0:W.find(q=>q.id===H.id))==null?void 0:j.answer,U=m.values[H.id];return[H.id,Array.isArray(U)?typeof P=="string"?U.length===1&&P===U[0]:U.length===P.length&&U.every(q=>P.includes(q)):P===U]}));E&&(p.forEach(H=>{var P;if(z[H.id]&&!((P=O[H.id])!=null&&P.message.includes("You've failed to answer this question correctly")))$(H.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let U="";B>=C?(U=`You didn't answer this question correctly after ${C} attempts. ${w?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!w&&i&&i.rejectCurrentParticipant(f,"Failed training").then(()=>{setTimeout(()=>{d("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{d("./__trainingFailed")},5e3)})):C-B===1?U="Please try again. You have 1 attempt left.":U=`Please try again. You have ${C-B} attempts left.`,$(H.id,!0,"Incorrect Answer",U,"red")}}),I(w&&B>=C||Object.values(z).every(H=>H)&&B<=C))};return b.jsxs("div",{style:r,children:[p.map((B,z)=>{var P,U;const H=(U=(P=h.correctAnswer)==null?void 0:P.find(W=>W.id===B.id))==null?void 0:U.answer;return b.jsx(wr.Fragment,{children:B.hidden?"":b.jsxs(b.Fragment,{children:[b.jsx(gat,{storedAnswer:c?c[B.id]:void 0,answer:{...m.getInputProps(B.id,{type:B.type==="checkbox"?"checkbox":"input"})},response:B,index:z+1}),O[B.id].visible&&b.jsxs(Qx,{mb:"md",title:O[B.id].title,color:O[B.id].color,children:[O[B.id].message," ",O[B.id].message.includes("Please try again")&&b.jsxs(b.Fragment,{children:["Please"," ",b.jsx(Ob,{style:{fontSize:14},onClick:()=>s(a()),children:"click here"})," ","and read the help text carefully."]}),b.jsx("br",{}),b.jsx("br",{}),S>=C&&H&&` The correct answer was: ${H}.`]})]})},`${B.id}-${u}`)}),b.jsxs(si,{justify:"right",gap:"xs",children:[E&&R&&b.jsx(en,{onClick:()=>F(),disabled:!m.isValid()||S>=C,children:"Check Answer"}),R&&b.jsx(Uot,{disabled:E&&!A||!m.isValid(),label:h.nextButtonText||"Next"})]})]})}const TT="@REVISIT_COMMS",yat={minHeight:"500px",width:"100%",border:0};function vat({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Yh(),r=Kh(),i=exe(),s=k.useRef(null),o=k.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ly(),u=Wh(),l=k.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${TT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return k.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${TT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${TT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${TT}/ANSWERS`:r(t(d.message));break;case`${TT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),b.jsx("iframe",{ref:s,src:`${Hu}${e.path}?trialid=${a}&id=${o}`,style:yat})}async function JY(e){const n=await(await fetch(`${Hu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Vv({email:e,path:t}){const n=Dy();return b.jsxs($c,{fluid:!0,my:50,maw:800,mx:"auto",children:[b.jsx(Ai,{order:2,children:b.jsx(Ke,{span:!0,c:"orange",children:"404"})}),b.jsxs(Ke,{children:[b.jsx(Ke,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),b.jsx(Nl,{h:"lg"}),b.jsxs(Uf,{children:[b.jsx(Uf.Item,{children:b.jsx(Ke,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),b.jsx(Uf.Item,{children:b.jsxs(Ke,{children:["If you're a participant, please contact the study administrator"," ",e&&b.jsxs(b.Fragment,{children:["at"," ",b.jsxs(Ob,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const bat={maxWidth:"100%"};function _at({currentConfig:e}){const t={...bat,...e.style},[n,r]=k.useState(!0),[i,s]=k.useState(!1);return k.useEffect(()=>{async function o(){const a=await JY(e.path);s(!!a),r(!1)}o()},[e]),n||i?b.jsx(Py,{mx:"auto",src:`${Hu}${e.path}`,style:t}):b.jsx(Vv,{path:e.path})}function im(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function wat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fS(e){let t,n,r;e.length!==2?(t=im,n=(a,u)=>im(e(a),u),r=(a,u)=>e(a)-u):(t=e===im||e===wat?e:Eat,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Eat(){return 0}function kxe(e){return e===null?NaN:+e}function*xat(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Rxe=fS(im),H0=Rxe.right,Sat=Rxe.left;fS(kxe).center;function Tat(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Cat(e,t){const n=Tat(e,t);return n&&Math.sqrt(n)}function s3(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Xa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class kue extends Map{constructor(t,n=Dxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(A7(this,t))}has(t){return super.has(A7(this,t))}set(t,n){return super.set(Nxe(this,t),n)}delete(t){return super.delete(Pxe(this,t))}}class o3 extends Set{constructor(t,n=Dxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(A7(this,t))}add(t){return super.add(Nxe(this,t))}delete(t){return super.delete(Pxe(this,t))}}function A7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Nxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Pxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Dxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Aat(e,t){return Array.from(t,n=>e[n])}function Iat(e=im){if(e===im)return Oxe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Oxe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kat=Math.sqrt(50),Rat=Math.sqrt(10),Nat=Math.sqrt(2);function a3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=kat?10:s>=Rat?5:s>=Nat?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?a3(e,t,n*2):[a,u,l]}function I7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?a3(t,e,n):a3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function k7(e,t,n){return t=+t,e=+e,n=+n,a3(e,t,n)[2]}function q0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?k7(t,e,n):k7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function sm(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function R7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function $xe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Oxe:Iat(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));$xe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(CT(e,n,t),i(e[r],s)>0&&CT(e,n,r);o<a;){for(CT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?CT(e,n,a):(++a,CT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function CT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function N7(e,t,n){if(e=Float64Array.from(xat(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return R7(e);if(t>=1)return sm(e);var r,i=(r-1)*t,s=Math.floor(i),o=sm($xe(e,s).subarray(0,s+1)),a=R7(e.subarray(s+1));return o+(a-o)*(i-s)}}function Mxe(e,t,n=kxe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Pat(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Lxe(e,t){return N7(e,.5,t)}function*Dat(e){for(const t of e)yield*t}function Fxe(e){return Array.from(Dat(e))}function Mu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function jxe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Oat(e,...t){e=new o3(e),t=t.map($at);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function $at(e){return e instanceof o3?e:new o3(e)}function Mat(...e){const t=new o3;for(const n of e)for(const r of n)t.add(r);return t}var Lat={value:()=>{}};function m6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hD(n)}function hD(e){this._=e}function Fat(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hD.prototype=m6.prototype={constructor:hD,on:function(e,t){var n=this._,r=Fat(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=jat(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Rue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Rue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function jat(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Rue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Lat,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var P7="http://www.w3.org/1999/xhtml";const Nue={svg:"http://www.w3.org/2000/svg",xhtml:P7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function g6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Nue.hasOwnProperty(t)?{space:Nue[t],local:e}:e}function Bat(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===P7&&t.documentElement.namespaceURI===P7?t.createElement(e):t.createElementNS(n,e)}}function Uat(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bxe(e){var t=g6(e);return(t.local?Uat:Bat)(t)}function zat(){}function ZY(e){return e==null?zat:function(){return this.querySelector(e)}}function Vat(e){typeof e!="function"&&(e=ZY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new eu(r,this._parents)}function Uxe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hat(){return[]}function zxe(e){return e==null?Hat:function(){return this.querySelectorAll(e)}}function qat(e){return function(){return Uxe(e.apply(this,arguments))}}function Wat(e){typeof e=="function"?e=qat(e):e=zxe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new eu(r,i)}function Vxe(e){return function(){return this.matches(e)}}function Hxe(e){return function(t){return t.matches(e)}}var Gat=Array.prototype.find;function Yat(e){return function(){return Gat.call(this.children,e)}}function Kat(){return this.firstElementChild}function Xat(e){return this.select(e==null?Kat:Yat(typeof e=="function"?e:Hxe(e)))}var Qat=Array.prototype.filter;function Jat(){return Array.from(this.children)}function Zat(e){return function(){return Qat.call(this.children,e)}}function eut(e){return this.selectAll(e==null?Jat:Zat(typeof e=="function"?e:Hxe(e)))}function tut(e){typeof e!="function"&&(e=Vxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new eu(r,this._parents)}function qxe(e){return new Array(e.length)}function nut(){return new eu(this._enter||this._groups.map(qxe),this._parents)}function u3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}u3.prototype={constructor:u3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rut(e){return function(){return e}}function iut(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new u3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function sut(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new u3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function out(e){return e.__data__}function aut(e,t){if(!arguments.length)return Array.from(this,out);var n=t?sut:iut,r=this._parents,i=this._groups;typeof e!="function"&&(e=rut(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=uut(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,E,w;v<p;++v)if(E=m[v]){for(v>=_&&(_=v+1);!(w=g[_])&&++_<p;);E._next=w||null}}return o=new eu(o,r),o._enter=a,o._exit=u,o}function uut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lut(){return new eu(this._exit||this._groups.map(qxe),this._parents)}function cut(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function fut(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new eu(a,this._parents)}function dut(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function hut(e){e||(e=put);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new eu(i,this._parents).order()}function put(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mut(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gut(){return Array.from(this)}function yut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function vut(){let e=0;for(const t of this)++e;return e}function but(){return!this.node()}function _ut(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function wut(e){return function(){this.removeAttribute(e)}}function Eut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xut(e,t){return function(){this.setAttribute(e,t)}}function Sut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Aut(e,t){var n=g6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Eut:wut:typeof t=="function"?n.local?Cut:Tut:n.local?Sut:xut)(n,t))}function Wxe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Iut(e){return function(){this.style.removeProperty(e)}}function kut(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Rut(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Nut(e,t,n){return arguments.length>1?this.each((t==null?Iut:typeof t=="function"?Rut:kut)(e,t,n??"")):FE(this.node(),e)}function FE(e,t){return e.style.getPropertyValue(t)||Wxe(e).getComputedStyle(e,null).getPropertyValue(t)}function Put(e){return function(){delete this[e]}}function Dut(e,t){return function(){this[e]=t}}function Out(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $ut(e,t){return arguments.length>1?this.each((t==null?Put:typeof t=="function"?Out:Dut)(e,t)):this.node()[e]}function Gxe(e){return e.trim().split(/^|\s+/)}function eK(e){return e.classList||new Yxe(e)}function Yxe(e){this._node=e,this._names=Gxe(e.getAttribute("class")||"")}Yxe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Kxe(e,t){for(var n=eK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Xxe(e,t){for(var n=eK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Mut(e){return function(){Kxe(this,e)}}function Lut(e){return function(){Xxe(this,e)}}function Fut(e,t){return function(){(t.apply(this,arguments)?Kxe:Xxe)(this,e)}}function jut(e,t){var n=Gxe(e+"");if(arguments.length<2){for(var r=eK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Fut:t?Mut:Lut)(n,t))}function But(){this.textContent=""}function Uut(e){return function(){this.textContent=e}}function zut(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Vut(e){return arguments.length?this.each(e==null?But:(typeof e=="function"?zut:Uut)(e)):this.node().textContent}function Hut(){this.innerHTML=""}function qut(e){return function(){this.innerHTML=e}}function Wut(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Gut(e){return arguments.length?this.each(e==null?Hut:(typeof e=="function"?Wut:qut)(e)):this.node().innerHTML}function Yut(){this.nextSibling&&this.parentNode.appendChild(this)}function Kut(){return this.each(Yut)}function Xut(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qut(){return this.each(Xut)}function Jut(e){var t=typeof e=="function"?e:Bxe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Zut(){return null}function elt(e,t){var n=typeof e=="function"?e:Bxe(e),r=t==null?Zut:typeof t=="function"?t:ZY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function tlt(){var e=this.parentNode;e&&e.removeChild(this)}function nlt(){return this.each(tlt)}function rlt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ilt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function slt(e){return this.select(e?ilt:rlt)}function olt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function alt(e){return function(t){e.call(this,t,this.__data__)}}function ult(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function llt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function clt(e,t,n){return function(){var r=this.__on,i,s=alt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function flt(e,t,n){var r=ult(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?clt:llt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Qxe(e,t,n){var r=Wxe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function dlt(e,t){return function(){return Qxe(this,e,t)}}function hlt(e,t){return function(){return Qxe(this,e,t.apply(this,arguments))}}function plt(e,t){return this.each((typeof t=="function"?hlt:dlt)(e,t))}function*mlt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var tK=[null];function eu(e,t){this._groups=e,this._parents=t}function yk(){return new eu([[document.documentElement]],tK)}function glt(){return this}eu.prototype=yk.prototype={constructor:eu,select:Vat,selectAll:Wat,selectChild:Xat,selectChildren:eut,filter:tut,data:aut,enter:nut,exit:lut,join:cut,merge:fut,selection:glt,order:dut,sort:hut,call:mut,nodes:gut,node:yut,size:vut,empty:but,each:_ut,attr:Aut,style:Nut,property:$ut,classed:jut,text:Vut,html:Gut,raise:Kut,lower:Qut,append:Jut,insert:elt,remove:nlt,clone:slt,datum:olt,on:flt,dispatch:plt,[Symbol.iterator]:mlt};function dr(e){return typeof e=="string"?new eu([[document.querySelector(e)]],[document.documentElement]):new eu([[e]],tK)}function ylt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function l3(e,t){if(e=ylt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Jxe(e){return typeof e=="string"?new eu([document.querySelectorAll(e)],[document.documentElement]):new eu([Uxe(e)],tK)}const D7={capture:!0,passive:!1};function O7(e){e.preventDefault(),e.stopImmediatePropagation()}function vlt(e){var t=e.document.documentElement,n=dr(e).on("dragstart.drag",O7,D7);"onselectstart"in t?n.on("selectstart.drag",O7,D7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function blt(e,t){var n=e.document.documentElement,r=dr(e).on("dragstart.drag",null);t&&(r.on("click.drag",O7,D7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function dS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function vk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fy(){}var Hv=.7,jE=1/Hv,Ww="\\s*([+-]?\\d+)\\s*",MA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_lt=/^#([0-9a-f]{3,8})$/,wlt=new RegExp(`^rgb\\(${Ww},${Ww},${Ww}\\)$`),Elt=new RegExp(`^rgb\\(${lh},${lh},${lh}\\)$`),xlt=new RegExp(`^rgba\\(${Ww},${Ww},${Ww},${MA}\\)$`),Slt=new RegExp(`^rgba\\(${lh},${lh},${lh},${MA}\\)$`),Tlt=new RegExp(`^hsl\\(${MA},${lh},${lh}\\)$`),Clt=new RegExp(`^hsla\\(${MA},${lh},${lh},${MA}\\)$`),Pue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dS(Fy,qv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Due,formatHex:Due,formatHex8:Alt,formatHsl:Ilt,formatRgb:Oue,toString:Oue});function Due(){return this.rgb().formatHex()}function Alt(){return this.rgb().formatHex8()}function Ilt(){return Zxe(this).formatHsl()}function Oue(){return this.rgb().formatRgb()}function qv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_lt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$ue(t):n===3?new ro(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?DN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?DN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wlt.exec(e))?new ro(t[1],t[2],t[3],1):(t=Elt.exec(e))?new ro(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xlt.exec(e))?DN(t[1],t[2],t[3],t[4]):(t=Slt.exec(e))?DN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tlt.exec(e))?Fue(t[1],t[2]/100,t[3]/100,1):(t=Clt.exec(e))?Fue(t[1],t[2]/100,t[3]/100,t[4]):Pue.hasOwnProperty(e)?$ue(Pue[e]):e==="transparent"?new ro(NaN,NaN,NaN,0):null}function $ue(e){return new ro(e>>16&255,e>>8&255,e&255,1)}function DN(e,t,n,r){return r<=0&&(e=t=n=NaN),new ro(e,t,n,r)}function nK(e){return e instanceof Fy||(e=qv(e)),e?(e=e.rgb(),new ro(e.r,e.g,e.b,e.opacity)):new ro}function W0(e,t,n,r){return arguments.length===1?nK(e):new ro(e,t,n,r??1)}function ro(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}dS(ro,W0,vk(Fy,{brighter(e){return e=e==null?jE:Math.pow(jE,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ro(Sv(this.r),Sv(this.g),Sv(this.b),c3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mue,formatHex:Mue,formatHex8:klt,formatRgb:Lue,toString:Lue}));function Mue(){return`#${av(this.r)}${av(this.g)}${av(this.b)}`}function klt(){return`#${av(this.r)}${av(this.g)}${av(this.b)}${av((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lue(){const e=c3(this.opacity);return`${e===1?"rgb(":"rgba("}${Sv(this.r)}, ${Sv(this.g)}, ${Sv(this.b)}${e===1?")":`, ${e})`}`}function c3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function av(e){return e=Sv(e),(e<16?"0":"")+e.toString(16)}function Fue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Tf(e,t,n,r)}function Zxe(e){if(e instanceof Tf)return new Tf(e.h,e.s,e.l,e.opacity);if(e instanceof Fy||(e=qv(e)),!e)return new Tf;if(e instanceof Tf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Tf(o,a,u,e.opacity)}function f3(e,t,n,r){return arguments.length===1?Zxe(e):new Tf(e,t,n,r??1)}function Tf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}dS(Tf,f3,vk(Fy,{brighter(e){return e=e==null?jE:Math.pow(jE,e),new Tf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new Tf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ro(s8(e>=240?e-240:e+120,i,r),s8(e,i,r),s8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Tf(jue(this.h),ON(this.s),ON(this.l),c3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=c3(this.opacity);return`${e===1?"hsl(":"hsla("}${jue(this.h)}, ${ON(this.s)*100}%, ${ON(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jue(e){return e=(e||0)%360,e<0?e+360:e}function ON(e){return Math.max(0,Math.min(1,e||0))}function s8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const eSe=Math.PI/180,tSe=180/Math.PI,d3=18,nSe=.96422,rSe=1,iSe=.82521,sSe=4/29,Gw=6/29,oSe=3*Gw*Gw,Rlt=Gw*Gw*Gw;function aSe(e){if(e instanceof ch)return new ch(e.l,e.a,e.b,e.opacity);if(e instanceof Gp)return uSe(e);e instanceof ro||(e=nK(e));var t=l8(e.r),n=l8(e.g),r=l8(e.b),i=o8((.2225045*t+.7168786*n+.0606169*r)/rSe),s,o;return t===n&&n===r?s=o=i:(s=o8((.4360747*t+.3850649*n+.1430804*r)/nSe),o=o8((.0139322*t+.0971045*n+.7141733*r)/iSe)),new ch(116*i-16,500*(s-i),200*(i-o),e.opacity)}function h3(e,t,n,r){return arguments.length===1?aSe(e):new ch(e,t,n,r??1)}function ch(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}dS(ch,h3,vk(Fy,{brighter(e){return new ch(this.l+d3*(e??1),this.a,this.b,this.opacity)},darker(e){return new ch(this.l-d3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=nSe*a8(t),e=rSe*a8(e),n=iSe*a8(n),new ro(u8(3.1338561*t-1.6168667*e-.4906146*n),u8(-.9787684*t+1.9161415*e+.033454*n),u8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function o8(e){return e>Rlt?Math.pow(e,1/3):e/oSe+sSe}function a8(e){return e>Gw?e*e*e:oSe*(e-sSe)}function u8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function l8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nlt(e){if(e instanceof Gp)return new Gp(e.h,e.c,e.l,e.opacity);if(e instanceof ch||(e=aSe(e)),e.a===0&&e.b===0)return new Gp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*tSe;return new Gp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function p3(e,t,n,r){return arguments.length===1?Nlt(e):new Gp(e,t,n,r??1)}function Gp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function uSe(e){if(isNaN(e.h))return new ch(e.l,0,0,e.opacity);var t=e.h*eSe;return new ch(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}dS(Gp,p3,vk(Fy,{brighter(e){return new Gp(this.h,this.c,this.l+d3*(e??1),this.opacity)},darker(e){return new Gp(this.h,this.c,this.l-d3*(e??1),this.opacity)},rgb(){return uSe(this).rgb()}}));var lSe=-.14861,rK=1.78277,iK=-.29227,y6=-.90649,LA=1.97294,Bue=LA*y6,Uue=LA*rK,zue=rK*iK-y6*lSe;function Plt(e){if(e instanceof Tv)return new Tv(e.h,e.s,e.l,e.opacity);e instanceof ro||(e=nK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(zue*r+Bue*t-Uue*n)/(zue+Bue-Uue),s=r-i,o=(LA*(n-i)-iK*s)/y6,a=Math.sqrt(o*o+s*s)/(LA*i*(1-i)),u=a?Math.atan2(o,s)*tSe-120:NaN;return new Tv(u<0?u+360:u,a,i,e.opacity)}function $7(e,t,n,r){return arguments.length===1?Plt(e):new Tv(e,t,n,r??1)}function Tv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}dS(Tv,$7,vk(Fy,{brighter(e){return e=e==null?jE:Math.pow(jE,e),new Tv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new Tv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*eSe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ro(255*(t+n*(lSe*r+rK*i)),255*(t+n*(iK*r+y6*i)),255*(t+n*(LA*r)),this.opacity)}}));function cSe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function fSe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return cSe((n-r/t)*t,o,i,s,a)}}function dSe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return cSe((n-r/t)*t,i,s,o,a)}}const v6=e=>()=>e;function hSe(e,t){return function(n){return e+n*t}}function Dlt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function b6(e,t){var n=t-e;return n?hSe(e,n>180||n<-180?n-360*Math.round(n/360):n):v6(isNaN(e)?t:e)}function Olt(e){return(e=+e)==1?io:function(t,n){return n-t?Dlt(t,n,e):v6(isNaN(t)?n:t)}}function io(e,t){var n=t-e;return n?hSe(e,n):v6(isNaN(e)?t:e)}const FA=function e(t){var n=Olt(t);function r(i,s){var o=n((i=W0(i)).r,(s=W0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=io(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function pSe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=W0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var $lt=pSe(fSe),Mlt=pSe(dSe);function sK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function mSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Llt(e,t){return(mSe(t)?sK:gSe)(e,t)}function gSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=eg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function ySe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function vc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vSe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=eg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var M7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c8=new RegExp(M7.source,"g");function Flt(e){return function(){return e}}function jlt(e){return function(t){return e(t)+""}}function oK(e,t){var n=M7.lastIndex=c8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=M7.exec(e))&&(i=c8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:vc(r,i)})),n=c8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?jlt(u[0].x):Flt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function eg(e,t){var n=typeof t,r;return t==null||n==="boolean"?v6(t):(n==="number"?vc:n==="string"?(r=qv(t))?(t=r,FA):oK:t instanceof qv?FA:t instanceof Date?ySe:mSe(t)?sK:Array.isArray(t)?gSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vSe:vc)(e,t)}function Blt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ult(e,t){var n=b6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function bk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Vue=180/Math.PI,L7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bSe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Vue,skewX:Math.atan(u)*Vue,scaleX:o,scaleY:a}}var $N;function zlt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?L7:bSe(t.a,t.b,t.c,t.d,t.e,t.f)}function Vlt(e){return e==null||($N||($N=document.createElementNS("http://www.w3.org/2000/svg","g")),$N.setAttribute("transform",e),!(e=$N.transform.baseVal.consolidate()))?L7:(e=e.matrix,bSe(e.a,e.b,e.c,e.d,e.e,e.f))}function _Se(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:vc(l,f)},{i:m-2,x:vc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:vc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:vc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:vc(l,f)},{i:m-2,x:vc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var wSe=_Se(zlt,"px, ","px)","deg)"),ESe=_Se(Vlt,", ",")",")"),Hlt=1e-12;function Hue(e){return((e=Math.exp(e))+1/e)/2}function qlt(e){return((e=Math.exp(e))-1/e)/2}function Wlt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Glt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Hlt)y=Math.log(d/l)/t,g=function(x){return[a+x*h,u+x*p,l*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),E=(d*d-l*l-r*m)/(2*d*n*v),w=Math.log(Math.sqrt(_*_+1)-_),S=Math.log(Math.sqrt(E*E+1)-E);y=(S-w)/t,g=function(x){var C=x*y,A=Hue(w),I=l/(n*v)*(A*Wlt(t*C+w)-qlt(w));return[a+I*h,u+I*p,l*A/Hue(t*C+w)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function xSe(e){return function(t,n){var r=e((t=f3(t)).h,(n=f3(n)).h),i=io(t.s,n.s),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Ylt=xSe(b6);var Klt=xSe(io);function Xlt(e,t){var n=io((e=h3(e)).l,(t=h3(t)).l),r=io(e.a,t.a),i=io(e.b,t.b),s=io(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function SSe(e){return function(t,n){var r=e((t=p3(t)).h,(n=p3(n)).h),i=io(t.c,n.c),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Qlt=SSe(b6);var Jlt=SSe(io);function TSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=$7(i)).h,(s=$7(s)).h),a=io(i.s,s.s),u=io(i.l,s.l),l=io(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Zlt=TSe(b6);var ect=TSe(io);function aK(e,t){t===void 0&&(t=e,e=eg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function tct(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const nct=Object.freeze(Object.defineProperty({__proto__:null,interpolate:eg,interpolateArray:Llt,interpolateBasis:fSe,interpolateBasisClosed:dSe,interpolateCubehelix:Zlt,interpolateCubehelixLong:ect,interpolateDate:ySe,interpolateDiscrete:Blt,interpolateHcl:Qlt,interpolateHclLong:Jlt,interpolateHsl:Ylt,interpolateHslLong:Klt,interpolateHue:Ult,interpolateLab:Xlt,interpolateNumber:vc,interpolateNumberArray:sK,interpolateObject:vSe,interpolateRgb:FA,interpolateRgbBasis:$lt,interpolateRgbBasisClosed:Mlt,interpolateRound:bk,interpolateString:oK,interpolateTransformCss:wSe,interpolateTransformSvg:ESe,interpolateZoom:Glt,piecewise:aK,quantize:tct},Symbol.toStringTag,{value:"Module"}));var BE=0,b2=0,AT=0,CSe=1e3,m3,_2,g3=0,Wv=0,_6=0,jA=typeof performance=="object"&&performance.now?performance:Date,ASe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function w6(){return Wv||(ASe(rct),Wv=jA.now()+_6)}function rct(){Wv=0}function BA(){this._call=this._time=this._next=null}BA.prototype=uK.prototype={constructor:BA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?w6():+n)+(t==null?0:+t),!this._next&&_2!==this&&(_2?_2._next=this:m3=this,_2=this),this._call=e,this._time=n,F7()},stop:function(){this._call&&(this._call=null,this._time=1/0,F7())}};function uK(e,t,n){var r=new BA;return r.restart(e,t,n),r}function ict(){w6(),++BE;for(var e=m3,t;e;)(t=Wv-e._time)>=0&&e._call.call(void 0,t),e=e._next;--BE}function que(){Wv=(g3=jA.now())+_6,BE=b2=0;try{ict()}finally{BE=0,oct(),Wv=0}}function sct(){var e=jA.now(),t=e-g3;t>CSe&&(_6-=t,g3=e)}function oct(){for(var e,t=m3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:m3=n);_2=e,F7(r)}function F7(e){if(!BE){b2&&(b2=clearTimeout(b2));var t=e-Wv;t>24?(e<1/0&&(b2=setTimeout(que,e-jA.now()-_6)),AT&&(AT=clearInterval(AT))):(AT||(g3=jA.now(),AT=setInterval(sct,CSe)),BE=1,ASe(que))}}function Wue(e,t,n){var r=new BA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function act(e,t,n){var r=new BA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?w6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var uct=m6("start","end","cancel","interrupt"),lct=[],ISe=0,Gue=1,j7=2,pD=3,Yue=4,B7=5,mD=6;function E6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;cct(e,n,{name:t,index:r,group:i,on:uct,tween:lct,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ISe})}function lK(e,t){var n=ad(e,t);if(n.state>ISe)throw new Error("too late; already scheduled");return n}function Xh(e,t){var n=ad(e,t);if(n.state>pD)throw new Error("too late; already running");return n}function ad(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function cct(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=uK(s,0,n.time);function s(l){n.state=Gue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Gue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===pD)return Wue(o);h.state===Yue?(h.state=mD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=mD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Wue(function(){n.state===pD&&(n.state=Yue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=j7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===j7){for(n.state=pD,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=B7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===B7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=mD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function U7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>j7&&r.state<B7,r.state=mD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function fct(e){return this.each(function(){U7(this,e)})}function dct(e,t){var n,r;return function(){var i=Xh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function hct(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Xh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function pct(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ad(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?dct:hct)(n,e,t))}function cK(e,t,n){var r=e._id;return e.each(function(){var i=Xh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ad(i,r).value[t]}}function kSe(e,t){var n;return(typeof t=="number"?vc:t instanceof qv?FA:(n=qv(t))?(t=n,FA):oK)(e,t)}function mct(e){return function(){this.removeAttribute(e)}}function gct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function vct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function bct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function _ct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function wct(e,t){var n=g6(e),r=n==="transform"?ESe:kSe;return this.attrTween(e,typeof t=="function"?(n.local?_ct:bct)(n,r,cK(this,"attr."+e,t)):t==null?(n.local?gct:mct)(n):(n.local?vct:yct)(n,r,t))}function Ect(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xct(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Sct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&xct(e,s)),n}return i._value=t,i}function Tct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ect(e,s)),n}return i._value=t,i}function Cct(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=g6(e);return this.tween(n,(r.local?Sct:Tct)(r,t))}function Act(e,t){return function(){lK(this,e).delay=+t.apply(this,arguments)}}function Ict(e,t){return t=+t,function(){lK(this,e).delay=t}}function kct(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Act:Ict)(t,e)):ad(this.node(),t).delay}function Rct(e,t){return function(){Xh(this,e).duration=+t.apply(this,arguments)}}function Nct(e,t){return t=+t,function(){Xh(this,e).duration=t}}function Pct(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rct:Nct)(t,e)):ad(this.node(),t).duration}function Dct(e,t){if(typeof t!="function")throw new Error;return function(){Xh(this,e).ease=t}}function Oct(e){var t=this._id;return arguments.length?this.each(Dct(t,e)):ad(this.node(),t).ease}function $ct(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Xh(this,e).ease=n}}function Mct(e){if(typeof e!="function")throw new Error;return this.each($ct(this._id,e))}function Lct(e){typeof e!="function"&&(e=Vxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Cm(r,this._parents,this._name,this._id)}function Fct(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Cm(o,this._parents,this._name,this._id)}function jct(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Bct(e,t,n){var r,i,s=jct(t)?lK:Xh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Uct(e,t){var n=this._id;return arguments.length<2?ad(this.node(),n).on.on(e):this.each(Bct(n,e,t))}function zct(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Vct(){return this.on("end.remove",zct(this._id))}function Hct(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ZY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,E6(l[d],t,n,d,l,ad(c,n)));return new Cm(s,this._parents,t,n)}function qct(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zxe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=ad(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&E6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Cm(s,o,t,n)}var Wct=yk.prototype.constructor;function Gct(){return new Wct(this._groups,this._parents)}function Yct(e,t){var n,r,i;return function(){var s=FE(this,e),o=(this.style.removeProperty(e),FE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function RSe(e){return function(){this.style.removeProperty(e)}}function Kct(e,t,n){var r,i=n+"",s;return function(){var o=FE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Xct(e,t,n){var r,i,s;return function(){var o=FE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),FE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Qct(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Xh(this,e),l=u.on,c=u.value[s]==null?a||(a=RSe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Jct(e,t,n){var r=(e+="")=="transform"?wSe:kSe;return t==null?this.styleTween(e,Yct(e,r)).on("end.style."+e,RSe(e)):typeof t=="function"?this.styleTween(e,Xct(e,r,cK(this,"style."+e,t))).each(Qct(this._id,e)):this.styleTween(e,Kct(e,r,t),n).on("end.style."+e,null)}function Zct(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function eft(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Zct(e,o,n)),r}return s._value=t,s}function tft(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,eft(e,t,n??""))}function nft(e){return function(){this.textContent=e}}function rft(e){return function(){var t=e(this);this.textContent=t??""}}function ift(e){return this.tween("text",typeof e=="function"?rft(cK(this,"text",e)):nft(e==null?"":e+""))}function sft(e){return function(t){this.textContent=e.call(this,t)}}function oft(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&sft(i)),t}return r._value=e,r}function aft(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,oft(e))}function uft(){for(var e=this._name,t=this._id,n=NSe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=ad(u,t);E6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Cm(r,this._parents,e,n)}function lft(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Xh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var cft=0;function Cm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function NSe(){return++cft}var vp=yk.prototype;Cm.prototype={constructor:Cm,select:Hct,selectAll:qct,selectChild:vp.selectChild,selectChildren:vp.selectChildren,filter:Lct,merge:Fct,selection:Gct,transition:uft,call:vp.call,nodes:vp.nodes,node:vp.node,size:vp.size,empty:vp.empty,each:vp.each,on:Uct,attr:wct,attrTween:Cct,style:Jct,styleTween:tft,text:ift,textTween:aft,remove:Vct,tween:pct,delay:kct,duration:Pct,ease:Oct,easeVarying:Mct,end:lft,[Symbol.iterator]:vp[Symbol.iterator]};const fft=e=>+e;function dft(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hft={time:null,delay:0,duration:250,ease:dft};function pft(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mft(e){var t,n;e instanceof Cm?(t=e._id,e=e._name):(t=NSe(),(n=hft).time=w6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&E6(u,e,t,l,o,n||pft(u,t));return new Cm(r,this._parents,e,t)}yk.prototype.interrupt=fct;yk.prototype.transition=mft;const f8=e=>()=>e;function gft(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function yft(e){e.stopImmediatePropagation()}function d8(e){e.preventDefault(),e.stopImmediatePropagation()}var Kue={name:"drag"},h8={name:"space"},C_={name:"handle"},A_={name:"center"};const{abs:Xue,max:Qo,min:Jo}=Math;function Que(e){return[+e[0],+e[1]]}function z7(e){return[Que(e[0]),Que(e[1])]}var gD={name:"x",handles:["w","e"].map(UA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},yD={name:"y",handles:["n","s"].map(UA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},vft={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(UA),input:function(e){return e==null?null:z7(e)},output:function(e){return e}},bp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Jue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Zue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},bft={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},_ft={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function UA(e){return{type:e}}function wft(e){return!e.ctrlKey&&!e.button}function Eft(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function xft(){return navigator.maxTouchPoints||"ontouchstart"in this}function p8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Sft(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function PSe(){return fK(gD)}function DSe(){return fK(yD)}function OSe(){return fK(vft)}function fK(e){var t=Eft,n=wft,r=xft,i=!0,s=m6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([UA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bp.overlay).merge(y).each(function(){var _=p8(this).extent;dr(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([UA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return bp[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,E=_.__brush,w=c(_,arguments),S=E.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,E.extent),C=eg(S,x);function A(I){E.selection=I===1&&x===null?null:C(I),l.call(_),w.brush()}return S!==null&&x!==null?A:A(1)}):g.each(function(){var _=this,E=arguments,w=_.__brush,S=e.input(typeof y=="function"?y.apply(_,E):y,w.extent),x=c(_,E).beforestart();U7(_),w.selection=S===null?null:S,l.call(_),x.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=dr(this),y=p8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=dr(this.that).datum();s.call(g,this.that,new gft(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?Kue:i&&g.altKey?A_:C_,E=e===yD?null:bft[v],w=e===gD?null:_ft[v],S=p8(y),x=S.extent,C=S.selection,A=x[0][0],I,R,O=x[0][1],D,$,F=x[1][0],M,B,z=x[1][1],H,P,U=0,W=0,j,q=E&&w&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=l3(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});U7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){C&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];S.selection=C=[[I=e===yD?A:Jo(_e[0][0],_e[1][0]),D=e===gD?O:Jo(_e[0][1],_e[1][1])],[M=e===yD?F:Qo(_e[0][0],_e[1][0]),H=e===gD?z:Qo(_e[0][1],_e[1][1])]],ce.length>1&&Xe(g)}else I=C[0][0],D=C[0][1],M=C[1][0],H=C[1][1];R=I,$=D,B=M,P=H;var he=dr(y).attr("pointer-events","none"),ve=he.selectAll(".overlay").attr("cursor",bp[v]);if(g.touches)de.moved=be,de.ended=Ue;else{var Ie=dr(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),vlt(g.view)}l.call(y),de.start(g,_.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=l3(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];Xue(ke.cur[0]-ke[0])>Xue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,d8(_e),Xe(_e)}function Xe(_e){const ke=ce[0],ze=ke.point0;var ct;switch(U=ke[0]-ze[0],W=ke[1]-ze[1],_){case h8:case Kue:{E&&(U=Qo(A-I,Jo(F-M,U)),R=I+U,B=M+U),w&&(W=Qo(O-D,Jo(z-H,W)),$=D+W,P=H+W);break}case C_:{ce[1]?(E&&(R=Qo(A,Jo(F,ce[0][0])),B=Qo(A,Jo(F,ce[1][0])),E=1),w&&($=Qo(O,Jo(z,ce[0][1])),P=Qo(O,Jo(z,ce[1][1])),w=1)):(E<0?(U=Qo(A-I,Jo(F-I,U)),R=I+U,B=M):E>0&&(U=Qo(A-M,Jo(F-M,U)),R=I,B=M+U),w<0?(W=Qo(O-D,Jo(z-D,W)),$=D+W,P=H):w>0&&(W=Qo(O-H,Jo(z-H,W)),$=D,P=H+W));break}case A_:{E&&(R=Qo(A,Jo(F,I-U*E)),B=Qo(A,Jo(F,M+U*E))),w&&($=Qo(O,Jo(z,D-W*w)),P=Qo(O,Jo(z,H+W*w)));break}}B<R&&(E*=-1,ct=I,I=M,M=ct,ct=R,R=B,B=ct,v in Jue&&ve.attr("cursor",bp[v=Jue[v]])),P<$&&(w*=-1,ct=D,D=H,H=ct,ct=$,$=P,P=ct,v in Zue&&ve.attr("cursor",bp[v=Zue[v]])),S.selection&&(C=S.selection),G&&(R=C[0][0],B=C[1][0]),ne&&($=C[0][1],P=C[1][1]),(C[0][0]!==R||C[0][1]!==$||C[1][0]!==B||C[1][1]!==P)&&(S.selection=[[R,$],[B,P]],l.call(y),de.brush(_e,_.name))}function Ue(_e){if(yft(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else blt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ve.attr("cursor",bp.overlay),S.selection&&(C=S.selection),Sft(C)&&(S.selection=null,l.call(y)),de.end(_e,_.name)}function yt(_e){switch(_e.keyCode){case 16:{q=E&&w;break}case 18:{_===C_&&(E&&(M=B-U*E,I=R+U*E),w&&(H=P-W*w,D=$+W*w),_=A_,Xe(_e));break}case 32:{(_===C_||_===A_)&&(E<0?M=B-U:E>0&&(I=R-U),w<0?H=P-W:w>0&&(D=$-W),_=h8,ve.attr("cursor",bp.selection),Xe(_e));break}default:return}d8(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=ne=q=!1,Xe(_e));break}case 18:{_===A_&&(E<0?M=B:E>0&&(I=R),w<0?H=P:w>0&&(D=$),_=C_,Xe(_e));break}case 32:{_===h8&&(_e.altKey?(E&&(M=B-U*E,I=R+U*E),w&&(H=P-W*w,D=$+W*w),_=A_):(E<0?M=B:E>0&&(I=R),w<0?H=P:w>0&&(D=$),_=C_),ve.attr("cursor",bp[v]),Xe(_e));break}default:return}d8(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=z7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:f8(z7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:f8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:f8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const V7=Math.PI,H7=2*V7,R1=1e-6,Tft=H7-R1;function $Se(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Cft(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $Se;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let dK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?$Se:Cft(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>R1)if(!(Math.abs(f*u-l*c)>R1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((V7-Math.acos((m+d-g)/(2*y*v)))/2),E=_/v,w=_/y;Math.abs(E-1)>R1&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+w*u},${this._y1=n+w*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>R1||Math.abs(this._y1-c)>R1)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%H7+H7),d>Tft?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>R1&&this._append`A${r},${r},0,${+(d>=V7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function x6(){return new dK}x6.prototype=dK.prototype;const om=11102230246251565e-32,Zo=134217729,Aft=(3+8*om)*om;function m8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Ift(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function _k(e){return new Float64Array(e)}const kft=(3+16*om)*om,Rft=(2+12*om)*om,Nft=(9+64*om)*om*om,I_=_k(4),ele=_k(8),tle=_k(12),nle=_k(16),Pa=_k(4);function Pft(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,E,w,S,x,C;const A=e-i,I=n-i,R=t-s,O=r-s;E=A*O,d=Zo*A,h=d-(d-A),p=A-h,d=Zo*O,m=d-(d-O),g=O-m,w=p*g-(E-h*m-p*m-h*g),S=R*I,d=Zo*R,h=d-(d-R),p=R-h,d=Zo*I,m=d-(d-I),g=I-m,x=p*g-(S-h*m-p*m-h*g),y=w-x,f=w-y,I_[0]=w-(y+f)+(f-x),v=E+y,f=v-E,_=E-(v-f)+(y-f),y=_-S,f=_-y,I_[1]=_-(y+f)+(f-S),C=v+y,f=C-v,I_[2]=v-(C-f)+(y-f),I_[3]=C;let D=Ift(4,I_),$=Rft*o;if(D>=$||-D>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=Nft*o+Aft*Math.abs(D),D+=A*c+O*a-(R*l+I*u),D>=$||-D>=$))return D;E=a*O,d=Zo*a,h=d-(d-a),p=a-h,d=Zo*O,m=d-(d-O),g=O-m,w=p*g-(E-h*m-p*m-h*g),S=u*I,d=Zo*u,h=d-(d-u),p=u-h,d=Zo*I,m=d-(d-I),g=I-m,x=p*g-(S-h*m-p*m-h*g),y=w-x,f=w-y,Pa[0]=w-(y+f)+(f-x),v=E+y,f=v-E,_=E-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const F=m8(4,I_,4,Pa,ele);E=A*c,d=Zo*A,h=d-(d-A),p=A-h,d=Zo*c,m=d-(d-c),g=c-m,w=p*g-(E-h*m-p*m-h*g),S=R*l,d=Zo*R,h=d-(d-R),p=R-h,d=Zo*l,m=d-(d-l),g=l-m,x=p*g-(S-h*m-p*m-h*g),y=w-x,f=w-y,Pa[0]=w-(y+f)+(f-x),v=E+y,f=v-E,_=E-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const M=m8(F,ele,4,Pa,tle);E=a*c,d=Zo*a,h=d-(d-a),p=a-h,d=Zo*c,m=d-(d-c),g=c-m,w=p*g-(E-h*m-p*m-h*g),S=u*l,d=Zo*u,h=d-(d-u),p=u-h,d=Zo*l,m=d-(d-l),g=l-m,x=p*g-(S-h*m-p*m-h*g),y=w-x,f=w-y,Pa[0]=w-(y+f)+(f-x),v=E+y,f=v-E,_=E-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const B=m8(M,tle,4,Pa,nle);return nle[B-1]}function MN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=kft*l?u:-Pft(e,t,n,r,i,s,l)}const rle=Math.pow(2,-52),LN=new Uint32Array(512);class y3{static from(t,n=Lft,r=Fft){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new y3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const I=t[2*A],R=t[2*A+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,I=1/0;A<o;A++){const R=g8(f,d,t[2*A],t[2*A+1]);R<I&&(h=A,I=R)}const g=t[2*h],y=t[2*h+1];for(let A=0,I=1/0;A<o;A++){if(A===h)continue;const R=g8(g,y,t[2*A],t[2*A+1]);R<I&&R>0&&(p=A,I=R)}let v=t[2*p],_=t[2*p+1],E=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const I=$ft(g,y,v,_,t[2*A],t[2*A+1]);I<E&&(m=A,E=I)}let w=t[2*m],S=t[2*m+1];if(E===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];ww(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let I=0;for(let R=0,O=-1/0;R<o;R++){const D=this._ids[R],$=this._dists[D];$>O&&(A[I++]=D,O=$)}this.hull=A.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(MN(g,y,v,_,w,S)<0){const A=p,I=v,R=_;p=m,v=w,_=S,m=A,w=I,S=R}const x=Mft(g,y,v,_,w,S);this._cx=x.x,this._cy=x.y;for(let A=0;A<o;A++)this._dists[A]=g8(t[2*A],t[2*A+1],x.x,x.y);ww(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(w,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,I,R;A<this._ids.length;A++){const O=this._ids[A],D=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(D-I)<=rle&&Math.abs($-R)<=rle||(I=D,R=$,O===h||O===p||O===m))continue;let F=0;for(let P=0,U=this._hashKey(D,$);P<this._hashSize&&(F=s[(U+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let M=F,B;for(;B=r[M],MN(D,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let z=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(z+2),i[M]=z,C++;let H=r[M];for(;B=r[H],MN(D,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)z=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(z+2),r[H]=H,C--,H=B;if(M===F)for(;B=n[M],MN(D,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)z=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(z+2),i[B]=z,r[M]=M,C--,M=B;this._hullStart=n[O]=M,r[M]=n[H]=O,r[O]=H,s[this._hashKey(D,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let A=0,I=this._hullStart;A<C;A++)this.hull[A]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Dft(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=LN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Oft(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<LN.length&&(LN[s++]=v)}else{if(s===0)break;t=LN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Dft(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function g8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Oft(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function $ft(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Mft(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function ww(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;IT(e,i,s),t[e[n]]>t[e[r]]&&IT(e,n,r),t[e[s]]>t[e[r]]&&IT(e,s,r),t[e[n]]>t[e[s]]&&IT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;IT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(ww(e,t,s,r),ww(e,t,n,o-1)):(ww(e,t,n,o-1),ww(e,t,s,r))}}function IT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Lft(e){return e[0]}function Fft(e){return e[1]}const ile=1e-6;class uv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>ile||Math.abs(this._y1-s)>ile)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class q7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let jft=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const E=r[m]*2,w=r[m+1]*2,S=r[m+2]*2,x=t[E],C=t[E+1],A=t[w],I=t[w+1],R=t[S],O=t[S+1],D=A-x,$=I-C,F=R-x,M=O-C,B=(D*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-x)*M-(o-C)*F);v=(x+R)/2-z*M,_=(C+O)/2+z*F}else{const z=1/B,H=D*D+$*$,P=F*F+M*M;v=x+(M*H-$*P)*z,_=C+(D*P-F*H)*z}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new uv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new uv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new uv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new q7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Bft=2*Math.PI,k_=Math.pow;function Uft(e){return e[0]}function zft(e){return e[1]}function Vft(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Hft(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class hK{static from(t,n=Uft,r=zft,i){return new hK("length"in t?qft(t,n,r,i):Float64Array.from(Wft(t,n,r,i)))}constructor(t){this._delaunator=new y3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Vft(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Hft(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new y3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new jft(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=k_(n-l[t*2],2)+k_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=k_(n-l[p*2],2)+k_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&k_(n-l[h*2],2)+k_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new uv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new uv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Bft)}return r&&r.value()}renderHull(t){const n=t==null?t=new uv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new q7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new uv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new q7;return this.renderTriangle(t,n),n.value()}}function qft(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Wft(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var sle={},y8={},v8=34,kT=10,b8=13;function MSe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Gft(e,t){var n=MSe(e);return function(r,i){return t(n(r),i,e)}}function ole(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function bu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Yft(e){return e<0?"-"+bu(-e,6):e>9999?"+"+bu(e,6):bu(e,4)}function Kft(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Yft(e.getUTCFullYear())+"-"+bu(e.getUTCMonth()+1,2)+"-"+bu(e.getUTCDate(),2)+(i?"T"+bu(t,2)+":"+bu(n,2)+":"+bu(r,2)+"."+bu(i,3)+"Z":r?"T"+bu(t,2)+":"+bu(n,2)+":"+bu(r,2)+"Z":n||t?"T"+bu(t,2)+":"+bu(n,2)+"Z":"")}function LSe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Gft(g,d):MSe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===kT&&--p,f.charCodeAt(p-1)===b8&&--p;function E(){if(v)return y8;if(_)return _=!1,sle;var S,x=m,C;if(f.charCodeAt(x)===v8){for(;m++<p&&f.charCodeAt(m)!==v8||f.charCodeAt(++m)===v8;);return(S=m)>=p?v=!0:(C=f.charCodeAt(m++))===kT?_=!0:C===b8&&(_=!0,f.charCodeAt(m)===kT&&++m),f.slice(x+1,S-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(S=m++))===kT)_=!0;else if(C===b8)_=!0,f.charCodeAt(m)===kT&&++m;else if(C!==n)continue;return f.slice(x,S)}return v=!0,f.slice(x,p)}for(;(y=E())!==y8;){for(var w=[];y!==sle&&y!==y8;)w.push(y),y=E();d&&(w=d(w,g++))==null||h.push(w)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=ole(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=ole(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Kft(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Xft=LSe(","),Qft=Xft.parse;function Jft(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Zft(e,t){return fetch(e,t).then(Jft)}function edt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Zft(t,n).then(function(i){return e(i,r)})}}var FSe=edt(Qft);function tdt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function ndt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return jSe(this.cover(t,n),t,n,e)}function jSe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function rdt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)jSe(this,o[n],a[n],e[n]);return this}function idt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function sdt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function odt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Va(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function adt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Va(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Va(h[3],g,y,u,l),new Va(h[2],o,y,g,l),new Va(h[1],g,a,u,y),new Va(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),E=v*v+_*_;if(E<n){var w=Math.sqrt(n=E);i=e-w,s=t-w,c=e+w,f=t+w,r=h.data}}return r}function udt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function ldt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function cdt(){return this._root}function fdt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ddt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Va(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Va(i,l,c,a,u)),(i=r[2])&&t.push(new Va(i,s,c,l,u)),(i=r[1])&&t.push(new Va(i,l,o,a,c)),(i=r[0])&&t.push(new Va(i,s,o,l,c))}return this}function hdt(e){var t=[],n=[],r;for(this._root&&t.push(new Va(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Va(s,o,a,c,f)),(s=i[1])&&t.push(new Va(s,c,a,u,f)),(s=i[2])&&t.push(new Va(s,o,f,c,l)),(s=i[3])&&t.push(new Va(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function pdt(e){return e[0]}function mdt(e){return arguments.length?(this._x=e,this):this._x}function gdt(e){return e[1]}function ydt(e){return arguments.length?(this._y=e,this):this._y}function pK(e,t,n){var r=new mK(t??pdt,n??gdt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function mK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ale(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var uu=pK.prototype=mK.prototype;uu.copy=function(){var e=new mK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=ale(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=ale(r));return e};uu.add=ndt;uu.addAll=rdt;uu.cover=idt;uu.data=sdt;uu.extent=odt;uu.find=adt;uu.remove=udt;uu.removeAll=ldt;uu.root=cdt;uu.size=fdt;uu.visit=ddt;uu.visitAfter=hdt;uu.x=mdt;uu.y=ydt;function Ga(e){return function(){return e}}function Zg(e){return(e()-.5)*1e-6}function vdt(e){return e.x+e.vx}function bdt(e){return e.y+e.vy}function _dt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ga(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=pK(t,vdt,bdt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,E,w,S,x){var C=_.data,A=_.r,I=m+A;if(C){if(C.index>d.index){var R=h-C.x-C.vx,O=p-C.y-C.vy,D=R*R+O*O;D<I*I&&(R===0&&(R=Zg(r),D+=R*R),O===0&&(O=Zg(r),D+=O*O),D=(I-(D=Math.sqrt(D)))/D*i,d.vx+=(R*=D)*(I=(A*=A)/(g+A)),d.vy+=(O*=D)*I,C.vx-=R*(I=1-I),C.vy-=O*I)}return}return E>h+I||S<h-I||w>p+I||x<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ga(+l),u(),o):e},o}function wdt(e){return e.index}function ule(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Edt(e){var t=wdt,n=f,r,i=Ga(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,E,w,S,x,C,A,I;_<v;++_)E=e[_],w=E.source,S=E.target,x=S.x+S.vx-w.x-w.vx||Zg(l),C=S.y+S.vy-w.y-w.vy||Zg(l),A=Math.sqrt(x*x+C*C),A=(A-s[_])/A*g*r[_],x*=A,C*=A,S.vx-=x*(I=u[_]),S.vy-=C*I,w.vx+=x*(I=1-I),w.vy+=C*I}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((w,S)=>[t(w,S,o),w])),E;for(g=0,a=new Array(y);g<v;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=ule(_,E.source)),typeof E.target!="object"&&(E.target=ule(_,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ga(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ga(+g),m(),d):i},d}const xdt=1664525,Sdt=1013904223,lle=4294967296;function Tdt(){let e=1;return()=>(e=(xdt*e+Sdt)%lle)/lle}function Cdt(e){return e.x}function Adt(e){return e.y}var Idt=10,kdt=Math.PI*(3-Math.sqrt(5));function Rdt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=uK(f),l=m6("tick","end"),c=Tdt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Idt*Math.sqrt(.5+m),_=m*kdt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,E,w,S,x,C;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],E=m-x.x,w=g-x.y,S=E*E+w*w,S<y&&(C=x,y=S);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Ndt(){var e,t,n,r,i=Ga(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=pK(e,Cdt,Adt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,E;if(h.length){for(v=_=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,E=y*y+v*v;if(_*_/u<E)return E<a&&(y===0&&(y=Zg(n),E+=y*y),v===0&&(v=Zg(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)),t.vx+=y*h.value*r/E,t.vy+=v*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Zg(n),E+=y*y),v===0&&(v=Zg(n),E+=v*v),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(_=s[h.data.index]*r/E,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ga(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Pdt(e){var t=Ga(.1),n,r,i;typeof e!="function"&&(e=Ga(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ga(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ga(+a),o(),s):e},s}function Ddt(e){var t=Ga(.1),n,r,i;typeof e!="function"&&(e=Ga(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ga(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ga(+a),o(),s):e},s}function Odt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function v3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function UE(e){return e=v3(Math.abs(e)),e?e[1]:NaN}function $dt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Mdt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ldt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gv(e){if(!(t=Ldt.exec(e)))throw new Error("invalid format: "+e);var t;return new gK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Gv.prototype=gK.prototype;function gK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fdt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var BSe;function jdt(e,t){var n=v3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(BSe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+v3(e,Math.max(0,t+s-1))[0]}function cle(e,t){var n=v3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const fle={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Odt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>cle(e*100,t),r:cle,s:jdt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dle(e){return e}var hle=Array.prototype.map,ple=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function USe(e){var t=e.grouping===void 0||e.thousands===void 0?dle:$dt(hle.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?dle:Mdt(hle.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Gv(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,E=f.trim,w=f.type;w==="n"?(v=!0,w="g"):fle[w]||(_===void 0&&(_=12),E=!0,w="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",x=m==="$"?r:/[%p]/.test(w)?o:"",C=fle[w],A=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(R){var O=S,D=x,$,F,M;if(w==="c")D=C(R)+D,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:C(Math.abs(R),_),E&&(R=Fdt(R)),B&&+R==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(w==="s"?ple[8+BSe/3]:"")+D+(B&&p==="("?")":""),A){for($=-1,F=R.length;++$<F;)if(M=R.charCodeAt($),48>M||M>57){D=(M===46?i+R.slice($+1):R.slice($))+D,R=R.slice(0,$);break}}}v&&!g&&(R=t(R,1/0));var z=O.length+R.length+D.length,H=z<y?new Array(y-z+1).join(d):"";switch(v&&g&&(R=t(H+R,H.length?y-D.length:1/0),H=""),h){case"<":R=O+R+D+H;break;case"=":R=O+H+R+D;break;case"^":R=H.slice(0,z=H.length>>1)+O+R+D+H.slice(z);break;default:R=H+O+R+D;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=Gv(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(UE(d)/3)))*3,m=Math.pow(10,-p),g=ple[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var FN,jy,yK;Bdt({thousands:",",grouping:[3],currency:["$",""]});function Bdt(e){return FN=USe(e),jy=FN.format,yK=FN.formatPrefix,FN}function zSe(e){return Math.max(0,-UE(Math.abs(e)))}function VSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(UE(t)/3)))*3-UE(Math.abs(e)))}function HSe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,UE(t)-UE(e))+1}var Bt=1e-6,b3=1e-12,Pn=Math.PI,Qi=Pn/2,_3=Pn/4,tu=Pn*2,os=180/Pn,Rn=Pn/180,Xn=Math.abs,hS=Math.atan,Mc=Math.atan2,zt=Math.cos,jN=Math.ceil,qSe=Math.exp,W7=Math.hypot,w3=Math.log,_8=Math.pow,Ft=Math.sin,Tc=Math.sign||function(e){return e>0?1:e<0?-1:0},nu=Math.sqrt,vK=Math.tan;function WSe(e){return e>1?0:e<-1?Pn:Math.acos(e)}function Ju(e){return e>1?Qi:e<-1?-Qi:Math.asin(e)}function Ro(){}function E3(e,t){e&&gle.hasOwnProperty(e.type)&&gle[e.type](e,t)}var mle={Feature:function(e,t){E3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)E3(n[r].geometry,t)}},gle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){G7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)G7(n[r],t,0)},Polygon:function(e,t){yle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)yle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)E3(n[r],t)}};function G7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function yle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)G7(e[n],t,1);t.polygonEnd()}function Lp(e,t){e&&mle.hasOwnProperty(e.type)?mle[e.type](e,t):E3(e,t)}var x3=new Xa,S3=new Xa,GSe,YSe,Y7,K7,X7,Sh={point:Ro,lineStart:Ro,lineEnd:Ro,polygonStart:function(){x3=new Xa,Sh.lineStart=Udt,Sh.lineEnd=zdt},polygonEnd:function(){var e=+x3;S3.add(e<0?tu+e:e),this.lineStart=this.lineEnd=this.point=Ro},sphere:function(){S3.add(tu)}};function Udt(){Sh.point=Vdt}function zdt(){KSe(GSe,YSe)}function Vdt(e,t){Sh.point=KSe,GSe=e,YSe=t,e*=Rn,t*=Rn,Y7=e,K7=zt(t=t/2+_3),X7=Ft(t)}function KSe(e,t){e*=Rn,t*=Rn,t=t/2+_3;var n=e-Y7,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=X7*o,u=K7*s+a*zt(i),l=a*r*Ft(i);x3.add(Mc(l,u)),Y7=e,K7=s,X7=o}function Hdt(e){return S3=new Xa,Lp(e,Sh),S3*2}function T3(e){return[Mc(e[1],e[0]),Ju(e[2])]}function Yv(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function BN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function w8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function UN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function C3(e){var t=nu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Di,Iu,Hi,bl,N1,XSe,QSe,Yw,EC,Dg,Am,Pp={point:Q7,lineStart:vle,lineEnd:ble,polygonStart:function(){Pp.point=ZSe,Pp.lineStart=qdt,Pp.lineEnd=Wdt,EC=new Xa,Sh.polygonStart()},polygonEnd:function(){Sh.polygonEnd(),Pp.point=Q7,Pp.lineStart=vle,Pp.lineEnd=ble,x3<0?(Di=-(Hi=180),Iu=-(bl=90)):EC>Bt?bl=90:EC<-Bt&&(Iu=-90),Am[0]=Di,Am[1]=Hi},sphere:function(){Di=-(Hi=180),Iu=-(bl=90)}};function Q7(e,t){Dg.push(Am=[Di=e,Hi=e]),t<Iu&&(Iu=t),t>bl&&(bl=t)}function JSe(e,t){var n=Yv([e*Rn,t*Rn]);if(Yw){var r=zE(Yw,n),i=[r[1],-r[0],0],s=zE(i,r);C3(s),s=T3(s);var o=e-N1,a=o>0?1:-1,u=s[0]*os*a,l,c=Xn(o)>180;c^(a*N1<u&&u<a*e)?(l=s[1]*os,l>bl&&(bl=l)):(u=(u+360)%360-180,c^(a*N1<u&&u<a*e)?(l=-s[1]*os,l<Iu&&(Iu=l)):(t<Iu&&(Iu=t),t>bl&&(bl=t))),c?e<N1?yl(Di,e)>yl(Di,Hi)&&(Hi=e):yl(e,Hi)>yl(Di,Hi)&&(Di=e):Hi>=Di?(e<Di&&(Di=e),e>Hi&&(Hi=e)):e>N1?yl(Di,e)>yl(Di,Hi)&&(Hi=e):yl(e,Hi)>yl(Di,Hi)&&(Di=e)}else Dg.push(Am=[Di=e,Hi=e]);t<Iu&&(Iu=t),t>bl&&(bl=t),Yw=n,N1=e}function vle(){Pp.point=JSe}function ble(){Am[0]=Di,Am[1]=Hi,Pp.point=Q7,Yw=null}function ZSe(e,t){if(Yw){var n=e-N1;EC.add(Xn(n)>180?n+(n>0?360:-360):n)}else XSe=e,QSe=t;Sh.point(e,t),JSe(e,t)}function qdt(){Sh.lineStart()}function Wdt(){ZSe(XSe,QSe),Sh.lineEnd(),Xn(EC)>Bt&&(Di=-(Hi=180)),Am[0]=Di,Am[1]=Hi,Yw=null}function yl(e,t){return(t-=e)<0?t+360:t}function Gdt(e,t){return e[0]-t[0]}function _le(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ydt(e){var t,n,r,i,s,o,a;if(bl=Hi=-(Di=Iu=1/0),Dg=[],Lp(e,Pp),n=Dg.length){for(Dg.sort(Gdt),t=1,r=Dg[0],s=[r];t<n;++t)i=Dg[t],_le(r,i[0])||_le(r,i[1])?(yl(r[0],i[1])>yl(r[0],r[1])&&(r[1]=i[1]),yl(i[0],r[1])>yl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=yl(r[1],i[0]))>o&&(o=a,Di=i[0],Hi=r[1])}return Dg=Am=null,Di===1/0||Iu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Di,Iu],[Hi,bl]]}var w2,A3,I3,k3,R3,N3,P3,D3,J7,Z7,ez,eTe,tTe,Ba,Ua,za,Pf={sphere:Ro,point:bK,lineStart:wle,lineEnd:Ele,polygonStart:function(){Pf.lineStart=Qdt,Pf.lineEnd=Jdt},polygonEnd:function(){Pf.lineStart=wle,Pf.lineEnd=Ele}};function bK(e,t){e*=Rn,t*=Rn;var n=zt(t);wk(n*zt(e),n*Ft(e),Ft(t))}function wk(e,t,n){++w2,I3+=(e-I3)/w2,k3+=(t-k3)/w2,R3+=(n-R3)/w2}function wle(){Pf.point=Kdt}function Kdt(e,t){e*=Rn,t*=Rn;var n=zt(t);Ba=n*zt(e),Ua=n*Ft(e),za=Ft(t),Pf.point=Xdt,wk(Ba,Ua,za)}function Xdt(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Mc(nu((o=Ua*s-za*i)*o+(o=za*r-Ba*s)*o+(o=Ba*i-Ua*r)*o),Ba*r+Ua*i+za*s);A3+=o,N3+=o*(Ba+(Ba=r)),P3+=o*(Ua+(Ua=i)),D3+=o*(za+(za=s)),wk(Ba,Ua,za)}function Ele(){Pf.point=bK}function Qdt(){Pf.point=Zdt}function Jdt(){nTe(eTe,tTe),Pf.point=bK}function Zdt(e,t){eTe=e,tTe=t,e*=Rn,t*=Rn,Pf.point=nTe;var n=zt(t);Ba=n*zt(e),Ua=n*Ft(e),za=Ft(t),wk(Ba,Ua,za)}function nTe(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Ua*s-za*i,a=za*r-Ba*s,u=Ba*i-Ua*r,l=W7(o,a,u),c=Ju(l),f=l&&-c/l;J7.add(f*o),Z7.add(f*a),ez.add(f*u),A3+=c,N3+=c*(Ba+(Ba=r)),P3+=c*(Ua+(Ua=i)),D3+=c*(za+(za=s)),wk(Ba,Ua,za)}function eht(e){w2=A3=I3=k3=R3=N3=P3=D3=0,J7=new Xa,Z7=new Xa,ez=new Xa,Lp(e,Pf);var t=+J7,n=+Z7,r=+ez,i=W7(t,n,r);return i<b3&&(t=N3,n=P3,r=D3,A3<Bt&&(t=I3,n=k3,r=R3),i=W7(t,n,r),i<b3)?[NaN,NaN]:[Mc(n,t)*os,Ju(r/i)*os]}function tz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function nz(e,t){return Xn(e)>Pn&&(e-=Math.round(e/tu)*tu),[e,t]}nz.invert=nz;function rTe(e,t,n){return(e%=tu)?t||n?tz(Sle(e),Tle(t,n)):Sle(e):t||n?Tle(t,n):nz}function xle(e){return function(t,n){return t+=e,Xn(t)>Pn&&(t-=Math.round(t/tu)*tu),[t,n]}}function Sle(e){var t=xle(e);return t.invert=xle(-e),t}function Tle(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[Mc(f*i-h*s,c*n-d*r),Ju(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[Mc(f*i+d*s,c*n+h*r),Ju(h*n-c*r)]},o}function tht(e){e=rTe(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=os,n[1]*=os,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=os,n[1]*=os,n},t}function nht(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*tu,s=t-u/2):(i=Cle(o,i),s=Cle(o,s),(r>0?i<s:i>s)&&(i+=r*tu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=T3([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function Cle(e,t){t=Yv(t),t[0]-=e,C3(t);var n=WSe(-t[1]);return((-t[2]<0?-n:n)+tu-Bt)%tu}function iTe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ro,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function vD(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function zN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function sTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(vD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new zN(g,p,null,!0)),o.push(v.o=new zN(g,null,v,!1)),s.push(v=new zN(y,p,null,!1)),o.push(v.o=new zN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Ale(s),Ale(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Ale(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function E8(e){return Xn(e[0])<=Pn?e[0]:Tc(e[0])*((Xn(e[0])+Pn)%tu-Pn)}function rht(e,t){var n=E8(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Xa;i===1?r=Qi+Bt:i===-1&&(r=-Qi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=E8(h),m=h[1]/2+_3,g=Ft(m),y=zt(m),v=0;v<d;++v,p=E,g=S,y=x,h=_){var _=f[v],E=E8(_),w=_[1]/2+_3,S=Ft(w),x=zt(w),C=E-p,A=C>=0?1:-1,I=A*C,R=I>Pn,O=g*S;if(u.add(Mc(O*A*Ft(I),y*x+O*zt(I))),o+=R?C+A*tu:C,R^p>=n^E>=n){var D=zE(Yv(h),Yv(_));C3(D);var $=zE(s,D);C3($);var F=(R^C>=0?-1:1)*Ju($[2]);(r>F||r===F&&(D[0]||D[1]))&&(a+=R^C>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-b3)^a&1}function oTe(e,t,n,r){return function(i){var s=t(i),o=iTe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Fxe(c);var E=rht(l,r);c.length?(u||(i.polygonStart(),u=!0),sTe(c,sht,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,w){e(E,w)&&i.point(E,w)}function p(E,w){s.point(E,w)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(E,w){f.push([E,w]),a.point(E,w)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),w=o.result(),S,x=w.length,C,A,I;if(f.pop(),l.push(f),f=null,!!x){if(E&1){if(A=w[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<C;++S)i.point((I=A[S])[0],I[1]);i.lineEnd()}return}x>1&&E&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(iht))}}return d}}function iht(e){return e.length>1}function sht(e,t){return((e=e.x)[0]<0?e[1]-Qi-Bt:Qi-e[1])-((t=t.x)[0]<0?t[1]-Qi-Bt:Qi-t[1])}const Ile=oTe(function(){return!0},oht,uht,[-Pn,-Qi]);function oht(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Pn:-Pn,u=Xn(s-t);Xn(u-Pn)<Bt?(e.point(t,n=(n+o)/2>0?Qi:-Qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Pn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=aht(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aht(e,t,n,r){var i,s,o=Ft(e-n);return Xn(o)>Bt?hS((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function uht(e,t,n,r){var i;if(e==null)i=n*Qi,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Pn:-Pn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function lht(e){var t=zt(e),n=2*Rn,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){nht(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,E=o(g,y),w=r?E?0:l(g,y):E?l(g+(g<0?Pn:-Pn),y):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(_=u(f,v),(!_||vD(f,_)||vD(v,_))&&(v[2]=1)),E!==h)m=0,E?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^E){var S;!(w&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}E&&(!f||!vD(f,v))&&c.point(v[0],v[1]),f=v,h=E,d=w},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Yv(c),p=Yv(f),m=[1,0,0],g=zE(h,p),y=BN(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var E=t*y/_,w=-t*v/_,S=zE(m,g),x=UN(m,E),C=UN(g,w);w8(x,C);var A=S,I=BN(x,A),R=BN(A,A),O=I*I-R*(BN(x,x)-1);if(!(O<0)){var D=nu(O),$=UN(A,(-I-D)/R);if(w8($,x),$=T3($),!d)return $;var F=c[0],M=f[0],B=c[1],z=f[1],H;M<F&&(H=F,F=M,M=H);var P=M-F,U=Xn(P-Pn)<Bt,W=U||P<Bt;if(!U&&z<B&&(H=B,B=z,z=H),W?U?B+z>0^$[1]<(Xn($[0]-F)<Bt?B:z):B<=$[1]&&$[1]<=z:P>Pn^(F<=$[0]&&$[0]<=M)){var j=UN(A,(-I+D)/R);return w8(j,x),[$,T3(j)]}}}function l(c,f){var d=r?e:Pn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return oTe(o,a,s,r?[0,-e]:[-Pn,e-Pn])}function cht(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var E2=1e9,VN=-E2;function aTe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=iTe(),d,h,p,m,g,y,v,_,E,w,S,x={point:C,lineStart:O,lineEnd:D,polygonStart:I,polygonEnd:R};function C(F,M){i(F,M)&&c.point(F,M)}function A(){for(var F=0,M=0,B=h.length;M<B;++M)for(var z=h[M],H=1,P=z.length,U=z[0],W,j,q=U[0],G=U[1];H<P;++H)W=q,j=G,U=z[H],q=U[0],G=U[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function I(){c=f,d=[],h=[],S=!0}function R(){var F=A(),M=S&&F,B=(d=Fxe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&sTe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){x.point=$,h&&h.push(p=[]),w=!0,E=!1,v=_=NaN}function D(){d&&($(m,g),y&&E&&f.rejoin(),d.push(f.result())),x.point=C,E&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),w)m=F,g=M,y=B,w=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&E)c.point(F,M);else{var z=[v=Math.max(VN,Math.min(E2,v)),_=Math.max(VN,Math.min(E2,_))],H=[F=Math.max(VN,Math.min(E2,F)),M=Math.max(VN,Math.min(E2,M))];cht(z,H,e,t,n,r)?(E||(c.lineStart(),c.point(z[0],z[1])),c.point(H[0],H[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,M),S=!1)}v=F,_=M,E=B}return x}}function kle(e,t,n){var r=Mu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Rle(e,t,n){var r=Mu(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function fht(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Mu(jN(r/c)*c,n,c).map(p).concat(Mu(jN(a/f)*f,o,f).map(m)).concat(Mu(jN(t/u)*u,e,u).filter(function(_){return Xn(_%c)>Bt}).map(d)).concat(Mu(jN(s/l)*l,i,l).filter(function(_){return Xn(_%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=kle(s,i,90),h=Rle(t,e,g),p=kle(a,o,90),m=Rle(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const zA=e=>e;var x8=new Xa,rz=new Xa,uTe,lTe,iz,sz,Fp={point:Ro,lineStart:Ro,lineEnd:Ro,polygonStart:function(){Fp.lineStart=dht,Fp.lineEnd=pht},polygonEnd:function(){Fp.lineStart=Fp.lineEnd=Fp.point=Ro,x8.add(Xn(rz)),rz=new Xa},result:function(){var e=x8/2;return x8=new Xa,e}};function dht(){Fp.point=hht}function hht(e,t){Fp.point=cTe,uTe=iz=e,lTe=sz=t}function cTe(e,t){rz.add(sz*e-iz*t),iz=e,sz=t}function pht(){cTe(uTe,lTe)}var VE=1/0,O3=VE,VA=-VE,$3=VA,M3={point:mht,lineStart:Ro,lineEnd:Ro,polygonStart:Ro,polygonEnd:Ro,result:function(){var e=[[VE,O3],[VA,$3]];return VA=$3=-(O3=VE=1/0),e}};function mht(e,t){e<VE&&(VE=e),e>VA&&(VA=e),t<O3&&(O3=t),t>$3&&($3=t)}var oz=0,az=0,x2=0,L3=0,F3=0,Ew=0,uz=0,lz=0,S2=0,fTe,dTe,zd,Vd,Ec={point:Kv,lineStart:Nle,lineEnd:Ple,polygonStart:function(){Ec.lineStart=vht,Ec.lineEnd=bht},polygonEnd:function(){Ec.point=Kv,Ec.lineStart=Nle,Ec.lineEnd=Ple},result:function(){var e=S2?[uz/S2,lz/S2]:Ew?[L3/Ew,F3/Ew]:x2?[oz/x2,az/x2]:[NaN,NaN];return oz=az=x2=L3=F3=Ew=uz=lz=S2=0,e}};function Kv(e,t){oz+=e,az+=t,++x2}function Nle(){Ec.point=ght}function ght(e,t){Ec.point=yht,Kv(zd=e,Vd=t)}function yht(e,t){var n=e-zd,r=t-Vd,i=nu(n*n+r*r);L3+=i*(zd+e)/2,F3+=i*(Vd+t)/2,Ew+=i,Kv(zd=e,Vd=t)}function Ple(){Ec.point=Kv}function vht(){Ec.point=_ht}function bht(){hTe(fTe,dTe)}function _ht(e,t){Ec.point=hTe,Kv(fTe=zd=e,dTe=Vd=t)}function hTe(e,t){var n=e-zd,r=t-Vd,i=nu(n*n+r*r);L3+=i*(zd+e)/2,F3+=i*(Vd+t)/2,Ew+=i,i=Vd*e-zd*t,uz+=i*(zd+e),lz+=i*(Vd+t),S2+=i*3,Kv(zd=e,Vd=t)}function pTe(e){this._context=e}pTe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,tu);break}}},result:Ro};var cz=new Xa,S8,mTe,gTe,T2,C2,HA={point:Ro,lineStart:function(){HA.point=wht},lineEnd:function(){S8&&yTe(mTe,gTe),HA.point=Ro},polygonStart:function(){S8=!0},polygonEnd:function(){S8=null},result:function(){var e=+cz;return cz=new Xa,e}};function wht(e,t){HA.point=yTe,mTe=T2=e,gTe=C2=t}function yTe(e,t){T2-=e,C2-=t,cz.add(nu(T2*T2+C2*C2)),T2=e,C2=t}let Dle,j3,Ole,$le;class Mle{constructor(t){this._append=t==null?vTe:Eht(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Ole||this._append!==j3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ole=r,j3=this._append,$le=this._,this._=i}this._+=$le;break}}}result(){const t=this._;return this._="",t.length?t:null}}function vTe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Eht(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return vTe;if(t!==Dle){const n=10**t;Dle=t,j3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return j3}function bTe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Lp(a,i(s))),s.result()}return o.area=function(a){return Lp(a,i(Fp)),Fp.result()},o.measure=function(a){return Lp(a,i(HA)),HA.result()},o.bounds=function(a){return Lp(a,i(M3)),M3.result()},o.centroid=function(a){return Lp(a,i(Ec)),Ec.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,zA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Mle(n)):new pTe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Mle(n)),o},o.projection(e).digits(n).context(t)}function S6(e){return function(t){var n=new fz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function fz(){}fz.prototype={constructor:fz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _K(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Lp(n,e.stream(M3)),t(M3.result()),r!=null&&e.clipExtent(r),e}function T6(e,t,n){return _K(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function wK(e,t,n){return T6(e,[[0,0],t],n)}function EK(e,t,n){return _K(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function xK(e,t,n){return _K(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Lle=16,xht=zt(30*Rn);function Fle(e,t){return+t?Tht(e,t):Sht(e)}function Sht(e){return S6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Tht(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var E=o+d,w=a+h,S=u+p,x=nu(E*E+w*w+S*S),C=Ju(S/=x),A=Xn(Xn(S)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:Mc(w,E),I=e(A,C),R=I[0],O=I[1],D=R-r,$=O-i,F=v*D-y*$;(F*F/_>t||Xn((y*D+v*$)/_-.5)>.3||o*d+a*h+u*p<xht)&&(n(r,i,s,o,a,u,R,O,A,E/=x,w/=x,S,m,g),g.point(R,O),n(R,O,A,E,w,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=w},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(C,A){var I=Yv([C,A]),R=e(C,A);n(f,d,c,h,p,m,f=R[0],d=R[1],c=C,h=I[0],p=I[1],m=I[2],Lle,r),r.point(f,d)}function E(){g.point=y,r.lineEnd()}function w(){v(),g.point=S,g.lineEnd=x}function S(C,A){_(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=_}function x(){n(f,d,c,h,p,m,s,o,i,a,u,l,Lle,r),g.lineEnd=E,E()}return g}}var Cht=S6({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function Aht(e){return S6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Iht(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function jle(e,t,n,r,i,s){if(!s)return Iht(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Qh(e){return _Te(function(){return e})()}function _Te(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Ile,g=null,y,v,_,E=zA,w=.5,S,x,C,A,I;function R(F){return C(F[0]*Rn,F[1]*Rn)}function O(F){return F=C.invert(F[0],F[1]),F&&[F[0]*os,F[1]*os]}R.stream=function(F){return A&&I===F?A:A=Cht(Aht(c)(m(S(E(I=F)))))},R.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},R.postclip=function(F){return arguments.length?(E=F,g=y=v=_=null,$()):E},R.clipAngle=function(F){return arguments.length?(m=+F?lht(p=F*Rn):(p=null,Ile),$()):p*os},R.clipExtent=function(F){return arguments.length?(E=F==null?(g=y=v=_=null,zA):aTe(g=+F[0][0],y=+F[0][1],v=+F[1][0],_=+F[1][1]),$()):g==null?null:[[g,y],[v,_]]},R.scale=function(F){return arguments.length?(n=+F,D()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*Rn,o=F[1]%360*Rn,D()):[s*os,o*os]},R.rotate=function(F){return arguments.length?(a=F[0]%360*Rn,u=F[1]%360*Rn,l=F.length>2?F[2]%360*Rn:0,D()):[a*os,u*os,l*os]},R.angle=function(F){return arguments.length?(f=F%360*Rn,D()):f*os},R.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},R.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},R.precision=function(F){return arguments.length?(S=Fle(x,w=F*F),$()):nu(w)},R.fitExtent=function(F,M){return T6(R,F,M)},R.fitSize=function(F,M){return wK(R,F,M)},R.fitWidth=function(F,M){return EK(R,F,M)},R.fitHeight=function(F,M){return xK(R,F,M)};function D(){var F=jle(n,0,0,d,h,f).apply(null,t(s,o)),M=jle(n,r-F[0],i-F[1],d,h,f);return c=rTe(a,u,l),x=tz(t,M),C=tz(c,x),S=Fle(x,w),$()}function $(){return A=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&O,D()}}function SK(e){var t=0,n=Pn/3,r=_Te(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Rn,n=s[1]*Rn):[t*os,n*os]},i}function kht(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,Ju(i*t)]},n}function Rht(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Xn(r)<Bt)return kht(e);var i=1+n*(2*r-n),s=nu(i)/r;function o(a,u){var l=nu(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=Mc(a,Xn(l))*Tc(l);return l*r<0&&(c-=Pn*Tc(a)*Tc(l)),[c/r,Ju((i-(a*a+l*l)*r*r)/(2*r))]},o}function B3(){return SK(Rht).scale(155.424).center([0,33.6442])}function wTe(){return B3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nht(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Pht(){var e,t,n=wTe(),r,i=B3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=B3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Nht([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return T6(c,d,h)},c.fitSize=function(d,h){return wK(c,d,h)},c.fitWidth=function(d,h){return EK(c,d,h)},c.fitHeight=function(d,h){return xK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function ETe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function Ek(e){return function(t,n){var r=nu(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[Mc(t*s,r*o),Ju(r&&n*s/r)]}}var xTe=ETe(function(e){return nu(2/(1+e))});xTe.invert=Ek(function(e){return 2*Ju(e/2)});function Dht(){return Qh(xTe).scale(124.75).clipAngle(180-.001)}var STe=ETe(function(e){return(e=WSe(e))&&e/Ft(e)});STe.invert=Ek(function(e){return e});function Oht(){return Qh(STe).scale(79.4188).clipAngle(180-.001)}function C6(e,t){return[e,w3(vK((Qi+t)/2))]}C6.invert=function(e,t){return[e,2*hS(qSe(t))-Qi]};function $ht(){return TTe(C6).scale(961/tu)}function TTe(e){var t=Qh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Pn*r(),d=t(tht(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===C6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function HN(e){return vK((Qi+e)/2)}function Mht(e,t){var n=zt(e),r=e===t?Ft(e):w3(n/zt(t))/w3(HN(t)/HN(e)),i=n*_8(HN(e),r)/r;if(!r)return C6;function s(o,a){i>0?a<-Qi+Bt&&(a=-Qi+Bt):a>Qi-Bt&&(a=Qi-Bt);var u=i/_8(HN(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Tc(r)*nu(o*o+u*u),c=Mc(o,Xn(u))*Tc(u);return u*r<0&&(c-=Pn*Tc(o)*Tc(u)),[c/r,2*hS(_8(i/l,1/r))-Qi]},s}function Lht(){return SK(Mht).scale(109.5).parallels([30,30])}function U3(e,t){return[e,t]}U3.invert=U3;function Fht(){return Qh(U3).scale(152.63)}function jht(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return U3;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=Mc(o,Xn(u))*Tc(u);return u*r<0&&(l-=Pn*Tc(o)*Tc(u)),[l/r,i-Tc(r)*nu(o*o+u*u)]},s}function Bht(){return SK(jht).scale(131.154).center([0,13.9389])}var xC=1.340264,SC=-.081106,TC=893e-6,CC=.003796,z3=nu(3)/2,Uht=12;function CTe(e,t){var n=Ju(z3*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(z3*(xC+3*SC*r+i*(7*TC+9*CC*r))),n*(xC+SC*r+i*(TC+CC*r))]}CTe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Uht&&(a=n*(xC+SC*r+i*(TC+CC*r))-t,u=xC+3*SC*r+i*(7*TC+9*CC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<b3));++s);return[z3*e*(xC+3*SC*r+i*(7*TC+9*CC*r))/zt(n),Ju(Ft(n)/z3)]};function zht(){return Qh(CTe).scale(177.158)}function ATe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}ATe.invert=Ek(hS);function Vht(){return Qh(ATe).scale(144.049).clipAngle(60)}function Hht(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=S6({point:function(E,w){var S=_([E,w]);this.stream.point(S[0],S[1])}}),m=zA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(E){var w=E[0]*d,S=E[1]*h;if(s){var x=S*o-w*a;w=w*o+S*a,S=x}return[w+t,S+n]}return _.invert=function(E){var w=E[0]-t,S=E[1]-n;if(s){var x=S*o+w*a;w=w*o-S*a,S=x}return[w/d,S/h]},_.stream=function(E){return g&&y===E?g:g=p(m(y=E))},_.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,v()):m},_.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,zA):aTe(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(E){return arguments.length?(e=+E,v()):e},_.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],v()):[t,n]},_.angle=function(E){return arguments.length?(s=E%360*Rn,a=Ft(s),o=zt(s),v()):s*os},_.reflectX=function(E){return arguments.length?(r=E?-1:1,v()):r<0},_.reflectY=function(E){return arguments.length?(i=E?-1:1,v()):i<0},_.fitExtent=function(E,w){return T6(_,E,w)},_.fitSize=function(E,w){return wK(_,E,w)},_.fitWidth=function(E,w){return EK(_,E,w)},_.fitHeight=function(E,w){return xK(_,E,w)},_}function ITe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}ITe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function qht(){return Qh(ITe).scale(175.295)}function kTe(e,t){return[zt(t)*Ft(e),Ft(t)]}kTe.invert=Ek(Ju);function Wht(){return Qh(kTe).scale(249.5).clipAngle(90+Bt)}function RTe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}RTe.invert=Ek(function(e){return 2*hS(e)});function Ght(){return Qh(RTe).scale(250).clipAngle(142)}function NTe(e,t){return[w3(vK((Qi+t)/2)),-e]}NTe.invert=function(e,t){return[-t,2*hS(qSe(e))-Qi]};function Yht(){var e=TTe(NTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Kht(e,t){return e.parent===t.parent?1:2}function Xht(e){return e.reduce(Qht,0)/e.length}function Qht(e,t){return e+t.x}function Jht(e){return 1+e.reduce(Zht,0)}function Zht(e,t){return Math.max(e,t.y)}function ept(e){for(var t;t=e.children;)e=t[0];return e}function tpt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function npt(){var e=Kht,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Xht(h),d.y=Jht(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=ept(s),l=tpt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function rpt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function ipt(){return this.eachAfter(rpt)}function spt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function opt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function apt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function upt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function lpt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function cpt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function fpt(e){for(var t=this,n=dpt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function dpt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function hpt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ppt(){return Array.from(this)}function mpt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function gpt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*ypt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function A6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=_pt)):t===void 0&&(t=bpt);for(var n=new HE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new HE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(PTe)}function vpt(){return A6(this).eachBefore(wpt)}function bpt(e){return e.children}function _pt(e){return Array.isArray(e)?e[1]:null}function wpt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function PTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function HE(e){this.data=e,this.depth=this.height=0,this.parent=null}HE.prototype=A6.prototype={constructor:HE,count:ipt,each:spt,eachAfter:apt,eachBefore:opt,find:upt,sum:lpt,sort:cpt,path:fpt,ancestors:hpt,descendants:ppt,leaves:mpt,links:gpt,copy:vpt,[Symbol.iterator]:ypt};function bD(e){return e==null?null:DTe(e)}function DTe(e){if(typeof e!="function")throw new Error;return e}function H1(){return 0}function X_(e){return function(){return e}}const Ept=1664525,xpt=1013904223,Ble=4294967296;function Spt(){let e=1;return()=>(e=(Ept*e+xpt)%Ble)/Ble}function Tpt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cpt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Apt(e,t){for(var n=0,r=(e=Cpt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&OTe(o,s)?++n:(o=kpt(i=Ipt(i,s)),n=0);return o}function Ipt(e,t){var n,r;if(T8(t,e))return[t];for(n=0;n<e.length;++n)if(qN(t,e[n])&&T8(A2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(qN(A2(e[n],e[r]),t)&&qN(A2(e[n],t),e[r])&&qN(A2(e[r],t),e[n])&&T8($Te(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function qN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function OTe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function T8(e,t){for(var n=0;n<t.length;++n)if(!OTe(e,t[n]))return!1;return!0}function kpt(e){switch(e.length){case 1:return Rpt(e[0]);case 2:return A2(e[0],e[1]);case 3:return $Te(e[0],e[1],e[2])}}function Rpt(e){return{x:e.x,y:e.y,r:e.r}}function A2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function $Te(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,E=v-l*l-c*c+f*f,w=h*p-d*m,S=(p*E-m*_)/(w*2)-r,x=(m*g-p*y)/w,C=(h*_-d*E)/(w*2)-i,A=(d*y-h*g)/w,I=x*x+A*A-1,R=2*(s+S*x+C*A),O=S*S+C*C-s*s,D=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*O))/(2*I):O/R);return{x:r+S+x*D,y:i+C+A*D,r:D}}function Ule(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function zle(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Vle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function WN(e){this._=e,this.next=null,this.previous=null}function Npt(e,t){if(!(s=(e=Tpt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Ule(r,n,i=e[2]),n=new WN(n),r=new WN(r),i=new WN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Ule(n._,r._,i=e[u]),i=new WN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(zle(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(zle(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Vle(n);(i=i.next)!==r;)(a=Vle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Apt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Ppt(e){return Math.sqrt(e.value)}function MTe(){var e=null,t=1,n=1,r=H1;function i(s){const o=Spt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Hle(e)).eachAfter(C8(r,.5,o)).eachBefore(qle(1)):s.eachBefore(Hle(Ppt)).eachAfter(C8(H1,1,o)).eachAfter(C8(r,s.r/Math.min(t,n),o)).eachBefore(qle(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=bD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:X_(+s),i):r},i}function Hle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function C8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Npt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function qle(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function LTe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function xk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Dpt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(LTe),o}function s(o,a){return function(u){u.children&&xk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Opt={depth:-1},Wle={},A8={};function $pt(e){return e.id}function Mpt(e){return e.parentId}function Gle(){var e=$pt,t=Mpt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((E,w)=>Lpt(n(E,w,i))),v=y.map(Yle),_=new Set(y).add("");for(const E of v)_.has(E)||(_.add(E),y.push(E),v.push(Yle(E)),s.push(A8));o=(E,w)=>y[w],a=(E,w)=>v[w]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new HE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?Wle:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===Wle)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===A8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===A8);--y)h.data=null}if(f.parent=Opt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(PTe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=bD(i),r):e},r.parentId=function(i){return arguments.length?(t=bD(i),r):t},r.path=function(i){return arguments.length?(n=bD(i),r):n},r}function Lpt(e){e=`${e}`;let t=e.length;return dz(e,t-1)&&!dz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Yle(e){let t=e.length;if(t<2)return"";for(;--t>1&&!dz(e,t););return e.slice(0,t)}function dz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Fpt(e,t){return e.parent===t.parent?1:2}function I8(e){var t=e.children;return t?t[0]:e.t}function k8(e){var t=e.children;return t?t[t.length-1]:e.t}function jpt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Bpt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Upt(e,t,n){return e.a.parent===t.parent?e.a:n}function _D(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}_D.prototype=Object.create(HE.prototype);function zpt(e){for(var t=new _D(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new _D(s[o],o)),i.parent=n;return(t.parent=new _D(null,0)).children=[t],t}function Vpt(){var e=Fpt,t=1,n=1,r=null;function i(l){var c=zpt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Bpt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,E;p=k8(p),d=I8(d),p&&d;)m=I8(m),h=k8(h),h.a=l,E=p.z+v-d.z-g+e(p._,d._),E>0&&(jpt(Upt(p,l,f),l,E),g+=E,y+=E),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!k8(h)&&(h.t=p,h.m+=v-y),d&&!I8(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function I6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var FTe=(1+Math.sqrt(5))/2;function jTe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,E,w,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,w=Math.max(p/h,h/p)/(m*e),S=g*g*w,E=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*w,_=Math.max(v/S,S/y),_>E){g-=l;break}E=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?xk(u,n,r,i,m?r+=p*g/m:s):I6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const BTe=function e(t){function n(r,i,s,o,a){jTe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(FTe);function Hpt(){var e=BTe,t=!1,n=1,r=1,i=[0],s=H1,o=H1,a=H1,u=H1,l=H1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(LTe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=DTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:X_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:X_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:X_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:X_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:X_(+d),c):l},c}function qpt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],E=h/2+_,w=f+1,S=d-1;w<S;){var x=w+S>>>1;l[x]<E?w=x+1:S=x}E-l[w-1]<l[w]-E&&f+1<w&&--w;var C=l[w]-_,A=h-C;if(g-p>y-m){var I=h?(p*A+g*C)/h:g;c(f,w,C,p,m,I,y),c(w,d,A,I,m,g,y)}else{var R=h?(m*A+y*C)/h:y;c(f,w,C,p,m,g,R),c(w,d,A,p,R,g,y)}}}function Wpt(e,t,n,r,i){(e.depth&1?I6:xk)(e,t,n,r,i)}const Gpt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?xk(l,i,s,o,m?s+=(a-s)*l.value/m:a):I6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=jTe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(FTe);function ud(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function By(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hz=Symbol("implicit");function Uy(){var e=new kue,t=[],n=[],r=hz;function i(s){let o=e.get(s);if(o===void 0){if(r!==hz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new kue;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Uy(t,n).unknown(r)},ud.apply(i,arguments),i}function pS(){var e=Uy().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Mu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return pS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},ud.apply(f(),arguments)}function Ypt(e){return function(){return e}}function pz(e){return+e}var Kle=[0,1];function Lu(e){return e}function mz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ypt(isNaN(t)?NaN:.5)}function Kpt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Xpt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=mz(i,r),s=n(o,s)):(r=mz(r,i),s=n(s,o)),function(a){return s(r(a))}}function Qpt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=mz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=H0(e,a,1,r)-1;return s[u](i[u](a))}}function Sk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function k6(){var e=Kle,t=Kle,n=eg,r,i,s,o=Lu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Lu&&(o=Kpt(e[0],e[d-1])),a=d>2?Qpt:Xpt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),vc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,pz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=bk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Lu,c()):o!==Lu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function UTe(){return k6()(Lu,Lu)}function zTe(e,t,n,r){var i=q0(e,t,n),s;switch(r=Gv(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=VSe(i,o))&&(r.precision=s),yK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=HSe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=zSe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jy(r)}function Vb(e){var t=e.domain;return e.ticks=function(n){var r=t();return I7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return zTe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=k7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Lc(){var e=UTe();return e.copy=function(){return Sk(e,Lc())},ud.apply(e,arguments),Vb(e)}function VTe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,pz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return VTe(e).unknown(t)},e=arguments.length?Array.from(e,pz):[0,1],Vb(n)}function HTe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Xle(e){return Math.log(e)}function Qle(e){return Math.exp(e)}function Jpt(e){return-Math.log(-e)}function Zpt(e){return-Math.exp(-e)}function emt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tmt(e){return e===10?emt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Jle(e){return(t,n)=>-e(-t,n)}function TK(e){const t=e(Xle,Qle),n=t.domain;let r=10,i,s;function o(){return i=nmt(r),s=tmt(r),n()[0]<0?(i=Jle(i),s=Jle(s),e(Jpt,Zpt)):e(Xle,Qle),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=I7(l,c,g))}else y=I7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Gv(u)).precision==null&&(u.trim=!0),u=jy(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(HTe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function qTe(){const e=TK(k6()).domain([1,10]);return e.copy=()=>Sk(e,qTe()).base(e.base()),ud.apply(e,arguments),e}function Zle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ece(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function CK(e){var t=1,n=e(Zle(t),ece(t));return n.constant=function(r){return arguments.length?e(Zle(t=+r),ece(t)):t},Vb(n)}function WTe(){var e=CK(k6());return e.copy=function(){return Sk(e,WTe()).constant(e.constant())},ud.apply(e,arguments)}function tce(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function imt(e){return e<0?-e*e:e*e}function AK(e){var t=e(Lu,Lu),n=1;function r(){return n===1?e(Lu,Lu):n===.5?e(rmt,imt):e(tce(n),tce(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Vb(t)}function IK(){var e=AK(k6());return e.copy=function(){return Sk(e,IK()).exponent(e.exponent())},ud.apply(e,arguments),e}function smt(){return IK.apply(null,arguments).exponent(.5)}function GTe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Mxe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[H0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(im),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return GTe().domain(e).range(t).unknown(r)},ud.apply(s,arguments)}function YTe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[H0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return YTe().domain([e,t]).range(i).unknown(s)},ud.apply(Vb(o),arguments)}function KTe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[H0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return KTe().domain(e).range(t).unknown(n)},ud.apply(i,arguments)}const R8=new Date,N8=new Date;function Vs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Vs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(R8.setTime(+s),N8.setTime(+o),e(R8),e(N8),Math.floor(n(R8,N8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const qE=Vs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);qE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):qE);qE.range;const Yp=1e3,Cc=Yp*60,Kp=Cc*60,Im=Kp*24,kK=Im*7,nce=Im*30,P8=Im*365,Xp=Vs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yp)},(e,t)=>(t-e)/Yp,e=>e.getUTCSeconds());Xp.range;const R6=Vs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yp)},(e,t)=>{e.setTime(+e+t*Cc)},(e,t)=>(t-e)/Cc,e=>e.getMinutes());R6.range;const N6=Vs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Cc)},(e,t)=>(t-e)/Cc,e=>e.getUTCMinutes());N6.range;const P6=Vs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yp-e.getMinutes()*Cc)},(e,t)=>{e.setTime(+e+t*Kp)},(e,t)=>(t-e)/Kp,e=>e.getHours());P6.range;const D6=Vs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kp)},(e,t)=>(t-e)/Kp,e=>e.getUTCHours());D6.range;const am=Vs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Cc)/Im,e=>e.getDate()-1);am.range;const x0=Vs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Im,e=>e.getUTCDate()-1);x0.range;const XTe=Vs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Im,e=>Math.floor(e/Im));XTe.range;function Hb(e){return Vs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Cc)/kK)}const mS=Hb(0),V3=Hb(1),omt=Hb(2),amt=Hb(3),WE=Hb(4),umt=Hb(5),lmt=Hb(6);mS.range;V3.range;omt.range;amt.range;WE.range;umt.range;lmt.range;function qb(e){return Vs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/kK)}const gS=qb(0),H3=qb(1),cmt=qb(2),fmt=qb(3),GE=qb(4),dmt=qb(5),hmt=qb(6);gS.range;H3.range;cmt.range;fmt.range;GE.range;dmt.range;hmt.range;const qA=Vs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());qA.range;const WA=Vs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());WA.range;const Th=Vs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Th.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Th.range;const Ch=Vs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ch.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ch.range;function QTe(e,t,n,r,i,s){const o=[[Xp,1,Yp],[Xp,5,5*Yp],[Xp,15,15*Yp],[Xp,30,30*Yp],[s,1,Cc],[s,5,5*Cc],[s,15,15*Cc],[s,30,30*Cc],[i,1,Kp],[i,3,3*Kp],[i,6,6*Kp],[i,12,12*Kp],[r,1,Im],[r,2,2*Im],[n,1,kK],[t,1,nce],[t,3,3*nce],[e,1,P8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=fS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(q0(l/P8,c/P8,f));if(h===0)return qE.every(Math.max(q0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[pmt,mmt]=QTe(Ch,WA,gS,XTe,D6,N6),[gmt,ymt]=QTe(Th,qA,mS,am,P6,R6);function D8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function O8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function RT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function JTe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=NT(i),c=PT(i),f=NT(s),d=PT(s),h=NT(o),p=PT(o),m=NT(a),g=PT(a),y=NT(u),v=PT(u),_={a:B,A:z,b:H,B:P,c:null,d:uce,e:uce,f:Bmt,g:Xmt,G:Jmt,H:Lmt,I:Fmt,j:jmt,L:ZTe,m:Umt,M:zmt,p:U,q:W,Q:fce,s:dce,S:Vmt,u:Hmt,U:qmt,V:Wmt,w:Gmt,W:Ymt,x:null,X:null,y:Kmt,Y:Qmt,Z:Zmt,"%":cce},E={a:j,A:q,b:G,B:ne,c:null,d:lce,e:lce,f:rgt,g:hgt,G:mgt,H:egt,I:tgt,j:ngt,L:t2e,m:igt,M:sgt,p:ce,q:de,Q:fce,s:dce,S:ogt,u:agt,U:ugt,V:lgt,w:cgt,W:fgt,x:null,X:null,y:dgt,Y:pgt,Z:ggt,"%":cce},w={a:I,A:R,b:O,B:D,c:$,d:oce,e:oce,f:Dmt,g:sce,G:ice,H:ace,I:ace,j:kmt,L:Pmt,m:Imt,M:Rmt,p:A,q:Amt,Q:$mt,s:Mmt,S:Nmt,u:Emt,U:xmt,V:Smt,w:wmt,W:Tmt,x:F,X:M,y:sce,Y:ice,Z:Cmt,"%":Omt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),E.x=S(n,E),E.X=S(r,E),E.c=S(t,E);function S(he,ve){return function(Ie){var be=[],Xe=-1,Ue=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Xe<yt;)he.charCodeAt(Xe)===37&&(be.push(he.slice(Ue,Xe)),(_e=rce[it=he.charAt(++Xe)])!=null?it=he.charAt(++Xe):_e=it==="e"?" ":"0",(ke=ve[it])&&(it=ke(Ie,_e)),be.push(it),Ue=Xe+1);return be.push(he.slice(Ue,Xe)),be.join("")}}function x(he,ve){return function(Ie){var be=RT(1900,void 0,1),Xe=C(be,he,Ie+="",0),Ue,yt;if(Xe!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ve&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=O8(RT(be.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?H3.ceil(Ue):H3(Ue),Ue=x0.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=D8(RT(be.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?V3.ceil(Ue):V3(Ue),Ue=am.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?O8(RT(be.y,0,1)).getUTCDay():D8(RT(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,O8(be)):D8(be)}}function C(he,ve,Ie,be){for(var Xe=0,Ue=ve.length,yt=Ie.length,it,_e;Xe<Ue;){if(be>=yt)return-1;if(it=ve.charCodeAt(Xe++),it===37){if(it=ve.charAt(Xe++),_e=w[it in rce?ve.charAt(Xe++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function A(he,ve,Ie){var be=l.exec(ve.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function I(he,ve,Ie){var be=h.exec(ve.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function R(he,ve,Ie){var be=f.exec(ve.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ve,Ie){var be=y.exec(ve.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function D(he,ve,Ie){var be=m.exec(ve.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ve,Ie){return C(he,t,ve,Ie)}function F(he,ve,Ie){return C(he,n,ve,Ie)}function M(he,ve,Ie){return C(he,r,ve,Ie)}function B(he){return o[he.getDay()]}function z(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function P(he){return a[he.getMonth()]}function U(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ve=S(he+="",_);return ve.toString=function(){return he},ve},parse:function(he){var ve=x(he+="",!1);return ve.toString=function(){return he},ve},utcFormat:function(he){var ve=S(he+="",E);return ve.toString=function(){return he},ve},utcParse:function(he){var ve=x(he+="",!0);return ve.toString=function(){return he},ve}}}var rce={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,vmt=/^%/,bmt=/[\\^$*+?|[\]().{}]/g;function gr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function _mt(e){return e.replace(bmt,"\\$&")}function NT(e){return new RegExp("^(?:"+e.map(_mt).join("|")+")","i")}function PT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function wmt(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Emt(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function xmt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Smt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Tmt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function ice(e,t,n){var r=mo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function sce(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Cmt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Amt(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Imt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function oce(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kmt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ace(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rmt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Nmt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pmt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Dmt(e,t,n){var r=mo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Omt(e,t,n){var r=vmt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $mt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mmt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uce(e,t){return gr(e.getDate(),t,2)}function Lmt(e,t){return gr(e.getHours(),t,2)}function Fmt(e,t){return gr(e.getHours()%12||12,t,2)}function jmt(e,t){return gr(1+am.count(Th(e),e),t,3)}function ZTe(e,t){return gr(e.getMilliseconds(),t,3)}function Bmt(e,t){return ZTe(e,t)+"000"}function Umt(e,t){return gr(e.getMonth()+1,t,2)}function zmt(e,t){return gr(e.getMinutes(),t,2)}function Vmt(e,t){return gr(e.getSeconds(),t,2)}function Hmt(e){var t=e.getDay();return t===0?7:t}function qmt(e,t){return gr(mS.count(Th(e)-1,e),t,2)}function e2e(e){var t=e.getDay();return t>=4||t===0?WE(e):WE.ceil(e)}function Wmt(e,t){return e=e2e(e),gr(WE.count(Th(e),e)+(Th(e).getDay()===4),t,2)}function Gmt(e){return e.getDay()}function Ymt(e,t){return gr(V3.count(Th(e)-1,e),t,2)}function Kmt(e,t){return gr(e.getFullYear()%100,t,2)}function Xmt(e,t){return e=e2e(e),gr(e.getFullYear()%100,t,2)}function Qmt(e,t){return gr(e.getFullYear()%1e4,t,4)}function Jmt(e,t){var n=e.getDay();return e=n>=4||n===0?WE(e):WE.ceil(e),gr(e.getFullYear()%1e4,t,4)}function Zmt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gr(t/60|0,"0",2)+gr(t%60,"0",2)}function lce(e,t){return gr(e.getUTCDate(),t,2)}function egt(e,t){return gr(e.getUTCHours(),t,2)}function tgt(e,t){return gr(e.getUTCHours()%12||12,t,2)}function ngt(e,t){return gr(1+x0.count(Ch(e),e),t,3)}function t2e(e,t){return gr(e.getUTCMilliseconds(),t,3)}function rgt(e,t){return t2e(e,t)+"000"}function igt(e,t){return gr(e.getUTCMonth()+1,t,2)}function sgt(e,t){return gr(e.getUTCMinutes(),t,2)}function ogt(e,t){return gr(e.getUTCSeconds(),t,2)}function agt(e){var t=e.getUTCDay();return t===0?7:t}function ugt(e,t){return gr(gS.count(Ch(e)-1,e),t,2)}function n2e(e){var t=e.getUTCDay();return t>=4||t===0?GE(e):GE.ceil(e)}function lgt(e,t){return e=n2e(e),gr(GE.count(Ch(e),e)+(Ch(e).getUTCDay()===4),t,2)}function cgt(e){return e.getUTCDay()}function fgt(e,t){return gr(H3.count(Ch(e)-1,e),t,2)}function dgt(e,t){return gr(e.getUTCFullYear()%100,t,2)}function hgt(e,t){return e=n2e(e),gr(e.getUTCFullYear()%100,t,2)}function pgt(e,t){return gr(e.getUTCFullYear()%1e4,t,4)}function mgt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?GE(e):GE.ceil(e),gr(e.getUTCFullYear()%1e4,t,4)}function ggt(){return"+0000"}function cce(){return"%"}function fce(e){return+e}function dce(e){return Math.floor(+e/1e3)}var R_,RK,r2e,Tk,i2e;ygt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ygt(e){return R_=JTe(e),RK=R_.format,r2e=R_.parse,Tk=R_.utcFormat,i2e=R_.utcParse,R_}function vgt(e){return new Date(e)}function bgt(e){return e instanceof Date?+e:+new Date(+e)}function NK(e,t,n,r,i,s,o,a,u,l){var c=UTe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),E=l("%Y");function w(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?_:E)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,bgt)):d().map(vgt)},c.ticks=function(S){var x=d();return e(x[0],x[x.length-1],S??10)},c.tickFormat=function(S,x){return x==null?w:l(x)},c.nice=function(S){var x=d();return(!S||typeof S.range!="function")&&(S=t(x[0],x[x.length-1],S??10)),S?d(HTe(x,S)):c},c.copy=function(){return Sk(c,NK(e,t,n,r,i,s,o,a,u,l))},c}function PK(){return ud.apply(NK(gmt,ymt,Th,qA,mS,am,P6,R6,Xp,RK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _gt(){return ud.apply(NK(pmt,mmt,Ch,WA,gS,x0,D6,N6,Xp,Tk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function O6(){var e=0,t=1,n,r,i,s,o=Lu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(eg),l.rangeRound=c(bk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function zy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DK(){var e=Vb(O6()(Lu));return e.copy=function(){return zy(e,DK())},By.apply(e,arguments)}function s2e(){var e=TK(O6()).domain([1,10]);return e.copy=function(){return zy(e,s2e()).base(e.base())},By.apply(e,arguments)}function o2e(){var e=CK(O6());return e.copy=function(){return zy(e,o2e()).constant(e.constant())},By.apply(e,arguments)}function OK(){var e=AK(O6());return e.copy=function(){return zy(e,OK()).exponent(e.exponent())},By.apply(e,arguments)}function wgt(){return OK.apply(null,arguments).exponent(.5)}function $6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Lu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=aK(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(eg),h.rangeRound=p(bk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function a2e(){var e=Vb($6()(Lu));return e.copy=function(){return zy(e,a2e())},By.apply(e,arguments)}function u2e(){var e=TK($6()).domain([.1,1,10]);return e.copy=function(){return zy(e,u2e()).base(e.base())},By.apply(e,arguments)}function l2e(){var e=CK($6());return e.copy=function(){return zy(e,l2e()).constant(e.constant())},By.apply(e,arguments)}function $K(){var e=AK($6());return e.copy=function(){return zy(e,$K()).exponent(e.exponent())},By.apply(e,arguments)}function Egt(){return $K.apply(null,arguments).exponent(.5)}function ld(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const xgt=ld("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Sgt=ld("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Tgt=ld("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Cgt=ld("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Agt=ld("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Igt=ld("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),kgt=ld("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Rgt=ld("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ngt=ld("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Pgt=ld("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),M6=ld("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e){return function(){return e}}const hce=Math.abs,ea=Math.atan2,h1=Math.cos,Dgt=Math.max,$8=Math.min,xd=Math.sin,lv=Math.sqrt,ra=1e-12,YE=Math.PI,q3=YE/2,AC=2*YE;function Ogt(e){return e>1?0:e<-1?YE:Math.acos(e)}function pce(e){return e>=1?q3:e<=-1?-q3:Math.asin(e)}function L6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new dK(t)}function $gt(e){return e.innerRadius}function Mgt(e){return e.outerRadius}function Lgt(e){return e.startAngle}function Fgt(e){return e.endAngle}function jgt(e){return e&&e.padAngle}function Bgt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ra))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function GN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/lv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,E=v*v+_*_,w=i-s,S=d*m-p*h,x=(_<0?-1:1)*lv(Dgt(0,w*w*E-S*S)),C=(S*_-v*x)/E,A=(-S*v-_*x)/E,I=(S*_+v*x)/E,R=(-S*v+_*x)/E,O=C-g,D=A-y,$=I-g,F=R-y;return O*O+D*D>$*$+F*F&&(C=I,A=R),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/w-1),y11:A*(i/w-1)}}function gz(){var e=$gt,t=Mgt,n=En(0),r=null,i=Lgt,s=Fgt,o=jgt,a=null,u=L6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-q3,m=s.apply(this,arguments)-q3,g=hce(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ra))a.moveTo(0,0);else if(g>AC-ra)a.moveTo(h*h1(p),h*xd(p)),a.arc(0,0,h,p,m,!y),d>ra&&(a.moveTo(d*h1(m),d*xd(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,E=p,w=m,S=g,x=g,C=o.apply(this,arguments)/2,A=C>ra&&(r?+r.apply(this,arguments):lv(d*d+h*h)),I=$8(hce(h-d)/2,+n.apply(this,arguments)),R=I,O=I,D,$;if(A>ra){var F=pce(A/d*xd(C)),M=pce(A/h*xd(C));(S-=F*2)>ra?(F*=y?1:-1,E+=F,w-=F):(S=0,E=w=(p+m)/2),(x-=M*2)>ra?(M*=y?1:-1,v+=M,_-=M):(x=0,v=_=(p+m)/2)}var B=h*h1(v),z=h*xd(v),H=d*h1(w),P=d*xd(w);if(I>ra){var U=h*h1(_),W=h*xd(_),j=d*h1(E),q=d*xd(E),G;if(g<YE)if(G=Bgt(B,z,j,q,U,W,H,P)){var ne=B-G[0],ce=z-G[1],de=U-G[0],he=W-G[1],ve=1/xd(Ogt((ne*de+ce*he)/(lv(ne*ne+ce*ce)*lv(de*de+he*he)))/2),Ie=lv(G[0]*G[0]+G[1]*G[1]);R=$8(I,(d-Ie)/(ve-1)),O=$8(I,(h-Ie)/(ve+1))}else R=O=0}x>ra?O>ra?(D=GN(j,q,B,z,h,O,y),$=GN(U,W,H,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<I?a.arc(D.cx,D.cy,O,ea(D.y01,D.x01),ea($.y01,$.x01),!y):(a.arc(D.cx,D.cy,O,ea(D.y01,D.x01),ea(D.y11,D.x11),!y),a.arc(0,0,h,ea(D.cy+D.y11,D.cx+D.x11),ea($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,ea($.y11,$.x11),ea($.y01,$.x01),!y))):(a.moveTo(B,z),a.arc(0,0,h,v,_,!y)):a.moveTo(B,z),!(d>ra)||!(S>ra)?a.lineTo(H,P):R>ra?(D=GN(H,P,U,W,d,-R,y),$=GN(B,z,j,q,d,-R,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),R<I?a.arc(D.cx,D.cy,R,ea(D.y01,D.x01),ea($.y01,$.x01),!y):(a.arc(D.cx,D.cy,R,ea(D.y01,D.x01),ea(D.y11,D.x11),!y),a.arc(0,0,d,ea(D.cy+D.y11,D.cx+D.x11),ea($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,R,ea($.y11,$.x11),ea($.y01,$.x01),!y))):a.arc(0,0,d,w,E,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-YE/2;return[h1(f)*c,xd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:En(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:En(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:En(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:En(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:En(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function F6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function c2e(e){this._context=e}c2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function MK(e){return new c2e(e)}function f2e(e){return e[0]}function d2e(e){return e[1]}function h2e(e,t){var n=En(!0),r=null,i=MK,s=null,o=L6(a);e=typeof e=="function"?e:e===void 0?f2e:En(e),t=typeof t=="function"?t:t===void 0?d2e:En(t);function a(u){var l,c=(u=F6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:En(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:En(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:En(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function p2e(e,t,n){var r=null,i=En(!0),s=null,o=MK,a=null,u=L6(l);e=typeof e=="function"?e:e===void 0?f2e:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?d2e:En(+n);function l(f){var d,h,p,m=(f=F6(f)).length,g,y=!1,v,_=new Array(m),E=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],E[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):E[d]))}if(v)return a=null,v+""||null}function c(){return h2e().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Ugt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function zgt(e){return e}function Vgt(){var e=zgt,t=Ugt,n=null,r=En(0),i=En(AC),s=En(0);function o(a){var u,l=(a=F6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(AC,Math.max(-AC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),E;for(u=0;u<l;++u)(E=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=E);for(t!=null?h.sort(function(w,S){return t(p[w],p[S])}):n!=null&&h.sort(function(w,S){return n(a[w],a[S])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],E=p[c],y=m+(E>0?E*f:0)+_,p[c]={data:a[c],index:u,value:E,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:En(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:En(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:En(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:En(+a),o):s},o}const Hgt={draw(e,t){const n=lv(t/YE);e.moveTo(n,0),e.arc(0,0,n,0,AC)}};function qgt(e,t){let n=null,r=L6(i);e=typeof e=="function"?e:En(e||Hgt),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:En(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:En(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function G0(){}function W3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function j6(e){this._context=e}j6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:W3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:W3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wgt(e){return new j6(e)}function m2e(e){this._context=e}m2e.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:W3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ggt(e){return new m2e(e)}function g2e(e){this._context=e}g2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:W3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ygt(e){return new g2e(e)}function y2e(e,t){this._basis=new j6(e),this._beta=t}y2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Kgt=function e(t){function n(r){return t===1?new j6(r):new y2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function G3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function LK(e,t){this._context=e,this._k=(1-t)/6}LK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:G3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:G3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xgt=function e(t){function n(r){return new LK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FK(e,t){this._context=e,this._k=(1-t)/6}FK.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:G3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qgt=function e(t){function n(r){return new FK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jK(e,t){this._context=e,this._k=(1-t)/6}jK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:G3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jgt=function e(t){function n(r){return new jK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function BK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ra){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ra){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function v2e(e,t){this._context=e,this._alpha=t}v2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:BK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zgt=function e(t){function n(r){return t?new v2e(r,t):new LK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function b2e(e,t){this._context=e,this._alpha=t}b2e.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:BK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const e0t=function e(t){function n(r){return t?new b2e(r,t):new FK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function _2e(e,t){this._context=e,this._alpha=t}_2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:BK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const t0t=function e(t){function n(r){return t?new _2e(r,t):new jK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function w2e(e){this._context=e}w2e.prototype={areaStart:G0,areaEnd:G0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function n0t(e){return new w2e(e)}function mce(e){return e<0?-1:1}function gce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(mce(s)+mce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function yce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function M8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function Y3(e){this._context=e}Y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:M8(this,this._t0,yce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,M8(this,yce(this,n=gce(this,e,t)),n);break;default:M8(this,this._t0,n=gce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function E2e(e){this._context=new x2e(e)}(E2e.prototype=Object.create(Y3.prototype)).point=function(e,t){Y3.prototype.point.call(this,t,e)};function x2e(e){this._context=e}x2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function r0t(e){return new Y3(e)}function i0t(e){return new E2e(e)}function S2e(e){this._context=e}S2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=vce(e),i=vce(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function vce(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function s0t(e){return new S2e(e)}function B6(e,t){this._context=e,this._t=t}B6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function o0t(e){return new B6(e,.5)}function a0t(e){return new B6(e,0)}function u0t(e){return new B6(e,1)}function bce(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _ce(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function l0t(e,t){return e[t]}function c0t(e){const t=[];return t.key=e,t}function f0t(){var e=En([]),t=_ce,n=bce,r=l0t;function i(s){var o=Array.from(e.apply(this,arguments),c0t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=F6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:En(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:En(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?_ce:typeof s=="function"?s:En(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??bce,i):n},i}function I2(e,t,n){this.k=e,this.x=t,this.y=n}I2.prototype={constructor:I2,scale:function(e){return e===1?this:new I2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new I2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};I2.prototype;function UK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=k.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=k.useCallback(c=>(s?Tk("%B"):jy(".2s"))(c),[s]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:b.jsx(Ll,{children:b.jsx(si,{gap:3,children:b.jsx(Ke,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>b.jsxs("g",{transform:`translate(${f}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o?b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,b.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:b.jsx(Ll,{children:b.jsx(li,{withinPortal:!0,label:c,children:b.jsx(Ke,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const d0t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:UK},Symbol.toStringTag,{value:"Module"}));function T2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=k.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Ll,{children:b.jsx(si,{gap:3,children:b.jsx(Ke,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${n}, ${l})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),s?b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,b.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:b.jsx("foreignObject",{width:a,height:20,children:b.jsx(si,{style:{width:"100%",height:"100%"},justify:"right",children:b.jsx(Ke,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const h0t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:T2e},Symbol.toStringTag,{value:"Module"})),ic={top:15,left:100,right:50,bottom:50};function yz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Bf(),o=k.useMemo(()=>s-ic.left-ic.right,[s]),a=k.useMemo(()=>i-ic.top-ic.bottom,[i]),u=k.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Uy(M6).domain(d)},[n,t.category]),l=k.useMemo(()=>e?Lc([ic.left,o+ic.left]).domain([0,sm(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=k.useMemo(()=>e?pS([ic.top,a+ic.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=k.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:b.jsxs("g",{children:[b.jsx("rect",{x:ic.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-ic.left},h),b.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?b.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(UK,{xScale:l,yRange:c.range(),vertPosition:a+ic.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?b.jsx(T2e,{yScale:c,horizontalPosition:ic.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):b.jsx(Wc,{})}const p0t=Object.freeze(Object.defineProperty({__proto__:null,Bar:yz,default:yz},Symbol.toStringTag,{value:"Module"})),hr=Array.isArray;function Zu(e){return e!=null?hr(e)?e:[e]:[]}function m0t(e=0,t=1/0){return`${wce(e)} < row_number() && row_number() <= ${wce(t)}`}function wce(e){return e<0?`count() + ${e}`:e}class C2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(m0t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Zu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function xn(e){throw Error(e)}function ru(e){return typeof e=="number"}function yi(e){return typeof e=="function"}function U6(e,t){const n=Array(e);if(yi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let g0t=class extends C2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){xn("Not implemented")}getter(t){xn("Not implemented")}objects(t){xn("Not implemented")}object(t){xn("Not implemented")}[Symbol.iterator](){xn("Not implemented")}print(t={}){ru(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=U6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},y0t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},v0t=function(e){return e&&yi(e.get)?e:new y0t(e)};function km(e){return e instanceof Date}function wa(e){return e===Object(e)}function K3(e){return e instanceof RegExp}function Uo(e){return typeof e=="string"}function b0t(e,t){const n=r=>xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Ece(e.entries(),t):km(e)?n("Date"):K3(e)?n("RegExp"):Uo(e)?n():hr(e)?_0t(e,t):yi(e[Symbol.iterator])?w0t(e,t):wa(e)?Ece(Object.entries(e),t):n()}function Ece(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function _0t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function w0t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:E0t}=Object.prototype;function Xf(e,t){return E0t.call(e,t)}function ec(e){return e?new xce({...e.data()},e.columnNames()):new xce}class xce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Xf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,x0t=Object.getPrototypeOf(Int8Array);function Ck(e){return e instanceof x0t}function cv(e){return hr(e)||Ck(e)}function Df(e){return e!=null&&e===e}const DT=e=>cv(e)||Uo(e),S0t={compact:e=>cv(e)?e.filter(t=>Df(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>DT(e)?e.includes(t,n):!1,indexof:(e,t)=>DT(e)?e.indexOf(t):-1,join:(e,t)=>cv(e)?e.join(t):ar,lastindexof:(e,t)=>DT(e)?e.lastIndexOf(t):-1,length:e=>DT(e)?e.length:0,pluck:(e,t)=>cv(e)?e.map(n=>Df(n)?n[t]:ar):ar,reverse:e=>cv(e)?e.slice().reverse():Uo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>DT(e)?e.slice(t,n):ar};function T0t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function wD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Sd=e=>(e<10?"0":"")+e,C0t=e=>e<0?"-"+wD(-e,6):e>9999?"+"+wD(e,6):wD(e,4);function A2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return C0t(e)+"-"+Sd(t+1)+"-"+Sd(n)+(!u||o?"T"+Sd(r)+":"+Sd(i)+":"+Sd(s)+"."+wD(o,3)+l:s?"T"+Sd(r)+":"+Sd(i)+":"+Sd(s)+l:i||r||!a?"T"+Sd(r)+":"+Sd(i)+l:"")}function I2e(e,t){return isNaN(e)?"Invalid Date":A2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function z6(e,t){return isNaN(e)?"Invalid Date":A2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const A0t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function I0t(e){return e.match(A0t)&&!isNaN(Date.parse(e))}function k0t(e,t=Date.parse){return I0t(e)?t(e):e}const k2e=6e4,R2e=864e5,N2e=6048e5,Gi=new Date,Yi=new Date,rs=e=>(Gi.setTime(typeof e=="string"?k0t(e):e),Gi);function R0t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function N0t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function P0t(e){Yi.setTime(+e),Yi.setHours(0,0,0,0),Gi.setTime(+Yi),Gi.setMonth(0),Gi.setDate(1);const t=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*k2e;return Math.floor(1+(Yi-Gi-t)/R2e)}function D0t(e){Yi.setTime(+e),Yi.setUTCHours(0,0,0,0);const t=Date.UTC(Yi.getUTCFullYear(),0,1);return Math.floor(1+(Yi-t)/R2e)}function O0t(e,t){const n=t||0;Yi.setTime(+e),Yi.setDate(Yi.getDate()-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0),Gi.setTime(+e),Gi.setMonth(0),Gi.setDate(1),Gi.setDate(1-(Gi.getDay()+7-n)%7),Gi.setHours(0,0,0,0);const r=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*k2e;return Math.floor((1+(Yi-Gi)-r)/N2e)}function $0t(e,t){const n=t||0;return Yi.setTime(+e),Yi.setUTCDate(Yi.getUTCDate()-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Gi.setTime(+e),Gi.setUTCMonth(0),Gi.setUTCDate(1),Gi.setUTCDate(1-(Gi.getUTCDay()+7-n)%7),Gi.setUTCHours(0,0,0,0),Math.floor((1+(Yi-Gi))/N2e)}const M0t={format_date:(e,t)=>I2e(rs(e),!t),format_utcdate:(e,t)=>z6(rs(e),!t),timestamp:e=>+rs(e),year:e=>rs(e).getFullYear(),quarter:e=>Math.floor(rs(e).getMonth()/3),month:e=>rs(e).getMonth(),date:e=>rs(e).getDate(),dayofweek:e=>rs(e).getDay(),hours:e=>rs(e).getHours(),minutes:e=>rs(e).getMinutes(),seconds:e=>rs(e).getSeconds(),milliseconds:e=>rs(e).getMilliseconds(),utcyear:e=>rs(e).getUTCFullYear(),utcquarter:e=>Math.floor(rs(e).getUTCMonth()/3),utcmonth:e=>rs(e).getUTCMonth(),utcdate:e=>rs(e).getUTCDate(),utcdayofweek:e=>rs(e).getUTCDay(),utchours:e=>rs(e).getUTCHours(),utcminutes:e=>rs(e).getUTCMinutes(),utcseconds:e=>rs(e).getUTCSeconds(),utcmilliseconds:e=>rs(e).getUTCMilliseconds(),datetime:R0t,dayofyear:P0t,week:O0t,utcdatetime:N0t,utcdayofyear:D0t,utcweek:$0t,now:Date.now};function zK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:km(e)||km(t)?+e==+t:K3(e)&&K3(t)?e+""==t+"":wa(e)&&wa(t)?L0t(e,t):!1}function L0t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Sce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Sce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!zK(e[o],t[o]))return!1}return!0}function Sce(e,t,n=zK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const F0t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let j0t=Math.random;function yS(){return j0t()}const B0t={random:yS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function VK(e){return e instanceof Map}function U0t(e){return e instanceof Set}function ED(e){return VK(e)||U0t(e)}function L8(e){return Array.from(e)}const z0t={has:(e,t)=>ED(e)?e.has(t):e!=null?Xf(e,t):!1,keys:e=>VK(e)?L8(e.keys()):e!=null?Object.keys(e):[],values:e=>ED(e)?L8(e.values()):e!=null?Object.values(e):[],entries:e=>ED(e)?L8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function V0t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Xf(t,e))return t[e];return n!==void 0?n:e}function H0t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const q0t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},xw={bin:T0t,equal:zK,recode:V0t,sequence:H0t,...S0t,...M0t,...F0t,...B0t,...z0t,...q0t};function GA(e){return typeof e=="bigint"}function Ah(e){return e===void 0?e+"":GA(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new W0t(e,Zu(t),Zu(n))}let W0t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Ah(n)}]`),...this.params.map(Ah)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const P2e=e=>vn("any",e),D2e=()=>vn("count"),O2e=e=>vn("array_agg",e),$2e=e=>vn("array_agg_distinct",e),M2e=(e,t)=>vn("map_agg",[e,t]),L2e=(e,t)=>vn("object_agg",[e,t]),F2e=(e,t)=>vn("entries_agg",[e,t]);({...xw});function G0t(e,t){e=ED(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Y0t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function K0t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function X0t(e,t,n,r){const i=r==="map"||r===!0?M2e:r==="entries"?F2e:r==="object"?L2e:xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=G0t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:O2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const Q0t="ArrayPattern",J0t="ArrowFunctionExpression",Z0t="FunctionExpression",S0="Identifier",vS="Literal",j2e="MemberExpression",eyt="ObjectExpression",B2e="ObjectPattern",U2e="Property",Ak="Column",tyt="Constant",nyt="Dictionary",ryt="Function",iyt="Parameter",z2e="Op",ei=(e,t)=>{const n=syt[e.type];return n?n(e,t):xn(`Unsupported expression construct: ${e.type}`)},F8=(e,t)=>"("+ei(e.left,t)+" "+e.operator+" "+ei(e.right,t)+")",j8=(e,t)=>"("+Pd(e.params,t)+")=>"+ei(e.body,t),Tce=(e,t)=>ei(e.callee,t)+"("+Pd(e.arguments,t)+")",Pd=(e,t,n=",")=>e.map(r=>ei(r,t)).join(n),V2e=e=>e.computed?`[${Ah(e.name)}]`:`.${e.name}`,Cce=(e,t,n)=>{const r=e.table||"";return`data${r}${V2e(e)}.${n}(${t.index}${r})`},syt={Constant:e=>e.raw,Column:(e,t)=>Cce(e,t,"get"),Dictionary:(e,t)=>Cce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${V2e(e)}`,Op:(e,t)=>`op(${Ah(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ei(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ei(e.object,t),i=ei(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Tce,NewExpression:(e,t)=>"new "+Tce(e,t),ArrayExpression:(e,t)=>"["+Pd(e.elements,t)+"]",AssignmentExpression:F8,BinaryExpression:F8,LogicalExpression:F8,UnaryExpression:(e,t)=>"("+e.operator+ei(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ei(e.test,t)+"?"+ei(e.consequent,t)+":"+ei(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Pd(e.properties,t)+"})",Property:(e,t)=>{const n=ei(e.key,t);return(e.computed?`[${n}]`:n)+":"+ei(e.value,t)},ArrowFunctionExpression:j8,FunctionExpression:j8,FunctionDeclaration:j8,ArrayPattern:(e,t)=>"["+Pd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Pd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Pd(e.declarations,t,","),VariableDeclarator:(e,t)=>ei(e.id,t)+"="+ei(e.init,t),SpreadElement:(e,t)=>"..."+ei(e.argument,t),BlockStatement:(e,t)=>"{"+Pd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ei(e.expression,t),IfStatement:(e,t)=>"if ("+ei(e.test,t)+")"+ei(e.consequent,t)+(e.alternate?" else "+ei(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ei(e.discriminant,t)+") {"+Pd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ei(e.test,t):"default")+": "+Pd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ei(e.argument,t),Program:(e,t)=>ei(e.body[0],t)};function X3(e,t={index:"row"}){return ei(e,t)}function oyt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function KE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:km(e)?+e:hr(e)||Ck(e)?`[${e.map(KE)}]`:K3(e)?e+"":ayt(e)}function ayt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${KE(e[r])}`;return t+="}",t}function Q3(e,t){const n=e.length;return n===1?(r,i)=>KE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=KE(a)}return s}}function uyt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=KE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=KE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Dp(){}function lyt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Is(e){return e.init=e.init||Dp,e.add=e.add||Dp,e.rem=e.rem||Dp,e}function Ace(e,t){return e.product_v=!1,e.product=t}const H2e={count:{create:()=>Is({value:e=>e.count}),param:[]},array_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Is({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Is({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>Is({value:e=>e.valid}),param:[1]},invalid:{create:()=>Is({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=uyt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Is({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Is({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>GA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Ace(e,1),value:e=>e.valid?e.product_v?Ace(e,lyt(e.list.values())):e.product:void 0,add:(e,t)=>GA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Is({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Is({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>Is({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>Is({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Is({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Is({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Is({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>Is({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Is({value:i=>oyt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ice={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},kce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},q2e={row_number:{create(){return{init:Dp,value:e=>e.index+1}},param:[]},rank:Ice,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ice.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:kce,ntile:{create(e){e=+e,e>0||xn("ntile num must be greater than zero.");const{init:t,value:n}=kce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:Dp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:Dp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Dp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Dp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||xn("nth_value nth must be greater than zero."),{init:Dp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Df(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=cyt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function cyt(e,t,n){for(const r=e.size;n<r;++n)if(Df(e.value(n,t)))return n;return-1}function HK(e){return Xf(H2e,e)}function qK(e){return Xf(q2e,e)}function W2e(e){return Xf(xw,e)||e==="row_object"}function G2e(e){return HK(e)&&H2e[e]}function Y2e(e){return qK(e)&&q2e[e]}function OT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const WK={escape:(e,t,n)=>OT(e,t,n),expr:(e,t)=>OT(`(row,data,op)=>${e}`,xw,t),expr2:(e,t)=>OT(`(row0,data0,row,data)=>${e}`,xw,t),join:(e,t)=>OT(`(row1,data1,row2,data2)=>${e}`,xw,t),param:(e,t)=>OT(e,xw,t)},fyt={"==":1,"!=":1,"===":1,"!==":1};function K2e(e,t,n=0,r,i){if(e.type=Ak,e.name=t,e.table=n,i&&r&&yi(r.keyFor)){const s=fyt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===vS&&dyt(i,e,s,r.keyFor(s.value))}return e}function dyt(e,t,n,r){return r<0?(e.type=vS,e.value=!1,e.raw="false"):(t.type=nyt,n.value=r,n.raw=r+""),!0}function V6(e){return hr(e)?e:VK(e)?e.entries():e?Object.entries(e):[]}const X2e="row_object";function Q2e(e,t){e.type=eyt;const n=e.properties=[];for(const r of V6(t)){const[i,s]=hr(r)?r:[r,r];n.push({type:U2e,key:{type:vS,raw:Ah(s)},value:K2e({computed:!0},i)})}return e}function J2e(e){return X3(Q2e({},e))}function Z2e(e){return WK.expr(J2e(e))}const hyt=new TextDecoder("utf-8"),vz=e=>hyt.decode(e),pyt=new TextEncoder,GK=e=>pyt.encode(e),myt=e=>typeof e=="boolean",xu=e=>typeof e=="function",Vy=e=>e!=null&&Object(e)===e,H6=e=>Vy(e)&&xu(e.then),YK=e=>Vy(e)&&xu(e[Symbol.iterator]),q6=e=>Vy(e)&&xu(e[Symbol.asyncIterator]),gyt=e=>Vy(e)&&"done"in e&&"value"in e,eCe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,yyt=e=>Vy(e)&&xu(e.abort)&&xu(e.getWriter)&&!eCe(e),vyt=e=>Vy(e)&&xu(e.end)&&xu(e.write)&&myt(e.writable)&&!eCe(e),byt=e=>Vy(e)&&xu(e.clear)&&xu(e.bytes)&&xu(e.position)&&xu(e.setPosition)&&xu(e.capacity)&&xu(e.getBufferIdentifier)&&xu(e.createLong),KK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function _yt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function J3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ih(e,t){const n=_yt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?J3(o,s,a):o=s;break}J3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ks(e,t){let n=gyt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=GK(n)),n instanceof ArrayBuffer?new e(n):n instanceof KK?new e(n):byt(n)?Ks(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const $T=e=>Ks(Int32Array,e),Dr=e=>Ks(Uint8Array,e),bz=e=>(e.next(),e);function*wyt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof KK?n(t):YK(t)?t:n(t);return yield*bz(function*(i){let s=null;do s=i.next(yield Ks(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Eyt=e=>wyt(Uint8Array,e);function tCe(e,t){return rv(this,arguments,function*(){if(H6(t))return yield Yn(yield Yn(yield*bj(dC(tCe(e,yield Yn(t))))));const r=function(o){return rv(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return rv(this,arguments,function*(){yield Yn(yield*bj(dC(bz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof KK?r(t):YK(t)?i(t):q6(t)?t:r(t);return yield Yn(yield*bj(dC(bz(function(o){return rv(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ks(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const xyt=e=>tCe(Uint8Array,e);function nCe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Syt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Rce={fromIterable(e){return YN(Tyt(e))},fromAsyncIterable(e){return YN(Cyt(e))},fromDOMStream(e){return YN(Ayt(e))},fromNodeStream(e){return YN(kyt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},YN=e=>(e.next(),e);function*Tyt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Ih(r,o)[0]:([i,r,a]=Ih(r,o),i)}({cmd:s,size:o}=yield null);const l=Eyt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Cyt(e){return rv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ih(i,a)[0]:([s,i,u]=Ih(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=xyt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function Ayt(e){return rv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ih(i,a)[0]:([s,i,u]=Ih(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new Iyt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Dr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class Iyt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Mp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Mp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Dr(n)),n})}}const B8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function kyt(e){return rv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Ih(l,a)[0]:([c,l,u]=Ih(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=B8(e,"end"),n[1]=B8(e,"error");do{if(n[2]=B8(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Dr(e.read(a-u)),c.byteLength<a-u&&(c=Dr(e.read()))):c=Dr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ha;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ha||(Ha={}));var el;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(el||(el={}));var Oo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Oo||(Oo={}));var kh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(kh||(kh={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Rh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Rh||(Rh={}));var Js;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Js||(Js={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Ap;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Ap||(Ap={}));const Ryt=void 0;function Xv(e){if(e===null)return"null";if(e===Ryt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Xv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Nyt=Symbol.for("isArrowBigNum");function cd(e,...t){return t.length===0?Object.setPrototypeOf(Ks(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}cd.prototype[Nyt]=!0;cd.prototype.toJSON=function(){return`"${KA(this)}"`};cd.prototype.valueOf=function(){return rCe(this)};cd.prototype.toString=function(){return KA(this)};cd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return rCe(this);case"string":return KA(this);case"default":return Pyt(this)}return KA(this)};function Kw(...e){return cd.apply(this,e)}function Xw(...e){return cd.apply(this,e)}function YA(...e){return cd.apply(this,e)}Object.setPrototypeOf(Kw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Xw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(YA.prototype,Object.create(Uint32Array.prototype));Object.assign(Kw.prototype,cd.prototype,{constructor:Kw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Xw.prototype,cd.prototype,{constructor:Xw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(YA.prototype,cd.prototype,{constructor:YA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function rCe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const KA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return U8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return U8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${U8(t)}`},Pyt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:KA(e);function U8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class XK{static new(t,n){switch(n){case!0:return new Kw(t);case!1:return new Xw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Kw(t)}return t.byteLength===16?new YA(t):new Xw(t)}static signed(t){return new Kw(t)}static unsigned(t){return new Xw(t)}static decimal(t){return new YA(t)}constructor(t,n){return XK.new(t,n)}}function Qf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var iCe,sCe,oCe,aCe,uCe,lCe,cCe,fCe,dCe,hCe,pCe,mCe,gCe,yCe,vCe,bCe,_Ce,wCe,ECe,xCe;let Sn=class _z{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return _z.isUnion(t)&&t.mode===el.Dense}static isSparseUnion(t){return _z.isUnion(t)&&t.mode===el.Sparse}get typeId(){return re.NONE}};iCe=Symbol.toStringTag;Sn[iCe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);let Rm=class extends Sn{toString(){return"Null"}get typeId(){return re.Null}};sCe=Symbol.toStringTag;Rm[sCe]=(e=>e[Symbol.toStringTag]="Null")(Rm.prototype);class iu extends Sn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}oCe=Symbol.toStringTag;iu[oCe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(iu.prototype);class QK extends iu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class JK extends iu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Y0 extends iu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class ZK extends iu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class eX extends iu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class tX extends iu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class nX extends iu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class rX extends iu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(QK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(JK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Y0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(ZK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(eX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(tX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(nX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(rX.prototype,"ArrayType",{value:BigUint64Array});class K0 extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Oo.HALF:return Uint16Array;case Oo.SINGLE:return Float32Array;case Oo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}aCe=Symbol.toStringTag;K0[aCe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(K0.prototype);class SCe extends K0{constructor(){super(Oo.HALF)}}class iX extends K0{constructor(){super(Oo.SINGLE)}}class sX extends K0{constructor(){super(Oo.DOUBLE)}}Object.defineProperty(SCe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(iX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(sX.prototype,"ArrayType",{value:Float64Array});let XA=class extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};uCe=Symbol.toStringTag;XA[uCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(XA.prototype);let XE=class extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};lCe=Symbol.toStringTag;XE[lCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(XE.prototype);let QA=class extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};cCe=Symbol.toStringTag;QA[cCe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(QA.prototype);let Z3=class extends Sn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};fCe=Symbol.toStringTag;Z3[fCe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Z3.prototype);class QE extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${kh[this.unit]}>`}}dCe=Symbol.toStringTag;QE[dCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(QE.prototype);class Dyt extends QE{constructor(){super(kh.DAY)}}class Oyt extends QE{constructor(){super(kh.MILLISECOND)}}class Nm extends Sn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}hCe=Symbol.toStringTag;Nm[hCe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Nm.prototype);class $yt extends Nm{constructor(){super(Wt.SECOND,32)}}class Myt extends Nm{constructor(){super(Wt.MILLISECOND,32)}}class Lyt extends Nm{constructor(){super(Wt.MICROSECOND,64)}}class Fyt extends Nm{constructor(){super(Wt.NANOSECOND,64)}}class e$ extends Sn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}pCe=Symbol.toStringTag;e$[pCe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(e$.prototype);class JE extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Rh[this.unit]}>`}}mCe=Symbol.toStringTag;JE[mCe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(JE.prototype);class jyt extends JE{constructor(){super(Rh.DAY_TIME)}}class Byt extends JE{constructor(){super(Rh.YEAR_MONTH)}}let t$=class extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};gCe=Symbol.toStringTag;t$[gCe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(t$.prototype);let ZE=class extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};yCe=Symbol.toStringTag;ZE[yCe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ZE.prototype);class fa extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}vCe=Symbol.toStringTag;fa[vCe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(fa.prototype);class JA extends Sn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}bCe=Symbol.toStringTag;JA[bCe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(JA.prototype);let n$=class extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};_Ce=Symbol.toStringTag;n$[_Ce]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(n$.prototype);let ex=class extends Sn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};wCe=Symbol.toStringTag;ex[wCe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ex.prototype);class ZA extends Sn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}ECe=Symbol.toStringTag;ZA[ECe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(ZA.prototype);const Uyt=(e=>()=>++e)(-1);class X0 extends Sn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Uyt():Qf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}xCe=Symbol.toStringTag;X0[xCe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(X0.prototype);function $d(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return zyt(this,t,n)}getVisitFnByTypeId(t,n=!0){return Q_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function zyt(e,t,n=!0){return typeof t=="number"?Q_(e,t,n):typeof t=="string"&&t in re?Q_(e,re[t],n):t&&t instanceof Sn?Q_(e,Nce(t),n):t!=null&&t.type&&t.type instanceof Sn?Q_(e,Nce(t.type),n):Q_(e,re.NONE,n)}function Q_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Nce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Oo.HALF:return re.Float16;case Oo.SINGLE:return re.Float32;case Oo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case kh.DAY:return re.DateDay;case kh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Rh.DAY_TIME:return re.IntervalDayTime;case Rh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case el.Dense:return re.DenseUnion;case el.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const TCe=new Float64Array(1),N_=new Uint32Array(TCe.buffer);function CCe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function ACe(e){if(e!==e)return 32256;TCe[0]=e;const t=(N_[1]&2147483648)>>16&65535;let n=N_[1]&2146435072,r=0;return n>=1089470464?N_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(N_[1]&1048575)>>10):n<=1056964608?(r=1048576+(N_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(N_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends Cn{}function sn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const Vyt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},oX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Hyt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},qyt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},ICe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Wyt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},tg=({values:e},t,n)=>{e[t]=n},aX=({values:e},t,n)=>{e[t]=n},kCe=({values:e},t,n)=>{e[t]=ACe(n)},Gyt=(e,t,n)=>{switch(e.type.precision){case Oo.HALF:return kCe(e,t,n);case Oo.SINGLE:case Oo.DOUBLE:return aX(e,t,n)}},uX=({values:e},t,n)=>{Vyt(e,t,n.valueOf())},lX=({values:e},t,n)=>{oX(e,t*2,n.valueOf())},RCe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},Yyt=({values:e,valueOffsets:t},n,r)=>ICe(e,t,n,r),Kyt=({values:e,valueOffsets:t},n,r)=>{ICe(e,t,n,GK(r))},NCe=(e,t,n)=>{e.type.unit===kh.DAY?uX(e,t,n):lX(e,t,n)},cX=({values:e},t,n)=>oX(e,t*2,n/1e3),fX=({values:e},t,n)=>oX(e,t*2,n),dX=({values:e},t,n)=>Hyt(e,t*2,n),hX=({values:e},t,n)=>qyt(e,t*2,n),PCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return cX(e,t,n);case Wt.MILLISECOND:return fX(e,t,n);case Wt.MICROSECOND:return dX(e,t,n);case Wt.NANOSECOND:return hX(e,t,n)}},pX=({values:e},t,n)=>{e[t]=n},mX=({values:e},t,n)=>{e[t]=n},gX=({values:e},t,n)=>{e[t]=n},yX=({values:e},t,n)=>{e[t]=n},DCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return pX(e,t,n);case Wt.MILLISECOND:return mX(e,t,n);case Wt.MICROSECOND:return gX(e,t,n);case Wt.NANOSECOND:return yX(e,t,n)}},OCe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Xyt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Fc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},Qyt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Fc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Jyt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Zyt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),e1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),t1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),n1t=(e,t,n)=>{const r=e.type.children.map(s=>Fc.getVisitFn(s.type)),i=n instanceof Map?e1t(t,n):n instanceof pr?Zyt(t,n):Array.isArray(n)?Jyt(t,n):t1t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},r1t=(e,t,n)=>{e.type.mode===el.Dense?$Ce(e,t,n):MCe(e,t,n)},$Ce=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Fc.visit(i,e.valueOffsets[t],n)},MCe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Fc.visit(i,t,n)},i1t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},LCe=(e,t,n)=>{e.type.unit===Rh.DAY_TIME?vX(e,t,n):bX(e,t,n)},vX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},bX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},_X=({values:e},t,n)=>{e[t]=n},wX=({values:e},t,n)=>{e[t]=n},EX=({values:e},t,n)=>{e[t]=n},xX=({values:e},t,n)=>{e[t]=n},FCe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return _X(e,t,n);case Wt.MILLISECOND:return wX(e,t,n);case Wt.MICROSECOND:return EX(e,t,n);case Wt.NANOSECOND:return xX(e,t,n)}},s1t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Fc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=sn(Wyt);Qt.prototype.visitInt=sn(tg);Qt.prototype.visitInt8=sn(tg);Qt.prototype.visitInt16=sn(tg);Qt.prototype.visitInt32=sn(tg);Qt.prototype.visitInt64=sn(tg);Qt.prototype.visitUint8=sn(tg);Qt.prototype.visitUint16=sn(tg);Qt.prototype.visitUint32=sn(tg);Qt.prototype.visitUint64=sn(tg);Qt.prototype.visitFloat=sn(Gyt);Qt.prototype.visitFloat16=sn(kCe);Qt.prototype.visitFloat32=sn(aX);Qt.prototype.visitFloat64=sn(aX);Qt.prototype.visitUtf8=sn(Kyt);Qt.prototype.visitBinary=sn(Yyt);Qt.prototype.visitFixedSizeBinary=sn(RCe);Qt.prototype.visitDate=sn(NCe);Qt.prototype.visitDateDay=sn(uX);Qt.prototype.visitDateMillisecond=sn(lX);Qt.prototype.visitTimestamp=sn(PCe);Qt.prototype.visitTimestampSecond=sn(cX);Qt.prototype.visitTimestampMillisecond=sn(fX);Qt.prototype.visitTimestampMicrosecond=sn(dX);Qt.prototype.visitTimestampNanosecond=sn(hX);Qt.prototype.visitTime=sn(DCe);Qt.prototype.visitTimeSecond=sn(pX);Qt.prototype.visitTimeMillisecond=sn(mX);Qt.prototype.visitTimeMicrosecond=sn(gX);Qt.prototype.visitTimeNanosecond=sn(yX);Qt.prototype.visitDecimal=sn(OCe);Qt.prototype.visitList=sn(Xyt);Qt.prototype.visitStruct=sn(n1t);Qt.prototype.visitUnion=sn(r1t);Qt.prototype.visitDenseUnion=sn($Ce);Qt.prototype.visitSparseUnion=sn(MCe);Qt.prototype.visitDictionary=sn(i1t);Qt.prototype.visitInterval=sn(LCe);Qt.prototype.visitIntervalDayTime=sn(vX);Qt.prototype.visitIntervalYearMonth=sn(bX);Qt.prototype.visitDuration=sn(FCe);Qt.prototype.visitDurationSecond=sn(_X);Qt.prototype.visitDurationMillisecond=sn(wX);Qt.prototype.visitDurationMicrosecond=sn(EX);Qt.prototype.visitDurationNanosecond=sn(xX);Qt.prototype.visitFixedSizeList=sn(s1t);Qt.prototype.visitMap=sn(Qyt);const Fc=new Qt,vf=Symbol.for("parent"),Qw=Symbol.for("rowIndex");class SX{constructor(t,n){return this[vf]=t,this[Qw]=n,new Proxy(this,new a1t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Qw],n=this[vf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=tl.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Xv(t)}: ${Xv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new o1t(this[vf],this[Qw])}}class o1t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,tl.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(SX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Qw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class a1t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[vf].type.children.map(n=>n.name)}has(t,n){return t[vf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[vf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[vf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=tl.visit(t[vf].children[r],t[Qw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[vf].type.children.findIndex(s=>s.name===n);return i!==-1?(Fc.visit(t[vf].children[i],t[Qw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Cn{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const u1t=(e,t)=>864e5*e[t],TX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),l1t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,c1t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,jCe=e=>new Date(e),f1t=(e,t)=>jCe(u1t(e,t)),d1t=(e,t)=>jCe(TX(e,t)),h1t=(e,t)=>null,BCe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},p1t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},UCe=({values:e},t)=>f1t(e,t),zCe=({values:e},t)=>d1t(e,t*2),Hy=({stride:e,values:t},n)=>t[e*n],m1t=({stride:e,values:t},n)=>CCe(t[e*n]),VCe=({values:e},t)=>e[t],g1t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),y1t=({values:e,valueOffsets:t},n)=>BCe(e,t,n),v1t=({values:e,valueOffsets:t},n)=>{const r=BCe(e,t,n);return r!==null?vz(r):null},b1t=({values:e},t)=>e[t],_1t=({type:e,values:t},n)=>e.precision!==Oo.HALF?t[n]:CCe(t[n]),w1t=(e,t)=>e.type.unit===kh.DAY?UCe(e,t):zCe(e,t),HCe=({values:e},t)=>1e3*TX(e,t*2),qCe=({values:e},t)=>TX(e,t*2),WCe=({values:e},t)=>l1t(e,t*2),GCe=({values:e},t)=>c1t(e,t*2),E1t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return HCe(e,t);case Wt.MILLISECOND:return qCe(e,t);case Wt.MICROSECOND:return WCe(e,t);case Wt.NANOSECOND:return GCe(e,t)}},YCe=({values:e},t)=>e[t],KCe=({values:e},t)=>e[t],XCe=({values:e},t)=>e[t],QCe=({values:e},t)=>e[t],x1t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return YCe(e,t);case Wt.MILLISECOND:return KCe(e,t);case Wt.MICROSECOND:return XCe(e,t);case Wt.NANOSECOND:return QCe(e,t)}},S1t=({values:e,stride:t},n)=>XK.decimal(e.subarray(t*n,t*(n+1))),T1t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new pr([u])},C1t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new W6(o.slice(i,s-i))},A1t=(e,t)=>new SX(e,t),I1t=(e,t)=>e.type.mode===el.Dense?JCe(e,t):ZCe(e,t),JCe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return tl.visit(r,e.valueOffsets[t])},ZCe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return tl.visit(r,t)},k1t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},R1t=(e,t)=>e.type.unit===Rh.DAY_TIME?eAe(e,t):tAe(e,t),eAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),tAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},nAe=({values:e},t)=>e[t],rAe=({values:e},t)=>e[t],iAe=({values:e},t)=>e[t],sAe=({values:e},t)=>e[t],N1t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return nAe(e,t);case Wt.MILLISECOND:return rAe(e,t);case Wt.MICROSECOND:return iAe(e,t);case Wt.NANOSECOND:return sAe(e,t)}},P1t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new pr([s])};Gt.prototype.visitNull=Jt(h1t);Gt.prototype.visitBool=Jt(p1t);Gt.prototype.visitInt=Jt(b1t);Gt.prototype.visitInt8=Jt(Hy);Gt.prototype.visitInt16=Jt(Hy);Gt.prototype.visitInt32=Jt(Hy);Gt.prototype.visitInt64=Jt(VCe);Gt.prototype.visitUint8=Jt(Hy);Gt.prototype.visitUint16=Jt(Hy);Gt.prototype.visitUint32=Jt(Hy);Gt.prototype.visitUint64=Jt(VCe);Gt.prototype.visitFloat=Jt(_1t);Gt.prototype.visitFloat16=Jt(m1t);Gt.prototype.visitFloat32=Jt(Hy);Gt.prototype.visitFloat64=Jt(Hy);Gt.prototype.visitUtf8=Jt(v1t);Gt.prototype.visitBinary=Jt(y1t);Gt.prototype.visitFixedSizeBinary=Jt(g1t);Gt.prototype.visitDate=Jt(w1t);Gt.prototype.visitDateDay=Jt(UCe);Gt.prototype.visitDateMillisecond=Jt(zCe);Gt.prototype.visitTimestamp=Jt(E1t);Gt.prototype.visitTimestampSecond=Jt(HCe);Gt.prototype.visitTimestampMillisecond=Jt(qCe);Gt.prototype.visitTimestampMicrosecond=Jt(WCe);Gt.prototype.visitTimestampNanosecond=Jt(GCe);Gt.prototype.visitTime=Jt(x1t);Gt.prototype.visitTimeSecond=Jt(YCe);Gt.prototype.visitTimeMillisecond=Jt(KCe);Gt.prototype.visitTimeMicrosecond=Jt(XCe);Gt.prototype.visitTimeNanosecond=Jt(QCe);Gt.prototype.visitDecimal=Jt(S1t);Gt.prototype.visitList=Jt(T1t);Gt.prototype.visitStruct=Jt(A1t);Gt.prototype.visitUnion=Jt(I1t);Gt.prototype.visitDenseUnion=Jt(JCe);Gt.prototype.visitSparseUnion=Jt(ZCe);Gt.prototype.visitDictionary=Jt(k1t);Gt.prototype.visitInterval=Jt(R1t);Gt.prototype.visitIntervalDayTime=Jt(eAe);Gt.prototype.visitIntervalYearMonth=Jt(tAe);Gt.prototype.visitDuration=Jt(N1t);Gt.prototype.visitDurationSecond=Jt(nAe);Gt.prototype.visitDurationMillisecond=Jt(rAe);Gt.prototype.visitDurationMicrosecond=Jt(iAe);Gt.prototype.visitDurationNanosecond=Jt(sAe);Gt.prototype.visitFixedSizeList=Jt(P1t);Gt.prototype.visitMap=Jt(C1t);const tl=new Gt,Cf=Symbol.for("keys"),Jw=Symbol.for("vals");class W6{constructor(t){return this[Cf]=new pr([t.children[0]]).memoize(),this[Jw]=t.children[1],new Proxy(this,new O1t)}[Symbol.iterator](){return new D1t(this[Cf],this[Jw])}get size(){return this[Cf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Cf],n=this[Jw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=tl.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Xv(t)}: ${Xv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class D1t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),tl.visit(this.vals,t)]})}}class O1t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Cf].toArray().map(String)}has(t,n){return t[Cf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Cf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Cf].indexOf(n);if(r!==-1){const i=tl.visit(Reflect.get(t,Jw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Cf].indexOf(n);return i!==-1?(Fc.visit(Reflect.get(t,Jw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(W6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Cf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Jw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Pce;function oAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Pce=s,s=o,o=Pce),o>i&&(o=i),r?r(e,s,o):[s,o]}const Dce=e=>e!==e;function bS(e){if(typeof e!=="object"||e===null)return Dce(e)?Dce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Syt(e,n):!1:e instanceof Map?M1t(e):Array.isArray(e)?$1t(e):e instanceof pr?L1t(e):F1t(e,!0)}function $1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=bS(e[n]);return G6(t)}function M1t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=bS(r);return G6(n)}function L1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=bS(e.get(n));return G6(t)}function F1t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=bS(e[n[i]]);return G6(r,n)}function G6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return j1t(e,n);case Map:return Oce(e,n,n.keys());case W6:case SX:case Object:case void 0:return Oce(e,n,t||Object.keys(n))}return n instanceof pr?B1t(e,n):!1}}function j1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function B1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Oce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function aAe(e,t,n,r){return(n&1<<r)!==0}function U1t(e,t,n,r){return(n&1<<r)>>r}function r$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):uAe(new CX(n,e,t,null,aAe)).subarray(0,r)),i}return n}function uAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class CX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function wz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new CX(e,t,n-t,e,U1t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return wz(e,t,i)+wz(e,r,n)+z1t(e,i>>3,r-i>>3)}function z1t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=z8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=z8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=z8(s.getUint8(i)),i+=1;return r}function z8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const V1t=-1;class Pr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=V1t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-wz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Pr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=$d(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===el.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===el.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(r$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Pr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(r$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Ap.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Ap.TYPE])&&(o[Ap.TYPE]=s.subarray(t,t+n)),(s=o[Ap.OFFSET])&&(o[Ap.OFFSET]=s.subarray(t,t+n+1))||(s=o[Ap.DATA])&&(o[Ap.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Pr.prototype.children=Object.freeze([]);class IC extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Pr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.data),s=Dr(t.nullBitmap),o=$T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.data),s=Dr(t.nullBitmap),o=$T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Dr(t.nullBitmap),o=$T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Dr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ks(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new Pr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=$T(t.valueOffsets);return new Pr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.indices.ArrayType,t.data),{["dictionary"]:o=new pr([new IC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Ks(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new IC().visit({type:n.valueType})}=t,s=Dr(t.nullBitmap),{["length"]:o=i.length/$d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new IC().visit({type:n.childType})}=t,s=Dr(t.nullBitmap),o=$T(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,void 0,s],[i])}}const H1t=new IC;function aa(e){return H1t.visit(e)}class $ce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function lAe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function cAe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function fAe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function AX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function IX(e,t){return e.getValid(t)}function Zw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return AX(r,this._offsets,n,t)}}function dAe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=AX(s,this._offsets,r,n);return t=void 0,o}}function hAe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):AX(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Cn{}function q1t(e,t){return t===null&&e.length>0?0:-1}function W1t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new CX(n,e.offset+(t||0),e.length,n,aAe)){if(!i)return r;++r}return-1}function fn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return W1t(e,n)}const r=tl.getVisitFn(e),i=bS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function pAe(e,t,n){const r=tl.getVisitFn(e),i=bS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=q1t;Yt.prototype.visitBool=fn;Yt.prototype.visitInt=fn;Yt.prototype.visitInt8=fn;Yt.prototype.visitInt16=fn;Yt.prototype.visitInt32=fn;Yt.prototype.visitInt64=fn;Yt.prototype.visitUint8=fn;Yt.prototype.visitUint16=fn;Yt.prototype.visitUint32=fn;Yt.prototype.visitUint64=fn;Yt.prototype.visitFloat=fn;Yt.prototype.visitFloat16=fn;Yt.prototype.visitFloat32=fn;Yt.prototype.visitFloat64=fn;Yt.prototype.visitUtf8=fn;Yt.prototype.visitBinary=fn;Yt.prototype.visitFixedSizeBinary=fn;Yt.prototype.visitDate=fn;Yt.prototype.visitDateDay=fn;Yt.prototype.visitDateMillisecond=fn;Yt.prototype.visitTimestamp=fn;Yt.prototype.visitTimestampSecond=fn;Yt.prototype.visitTimestampMillisecond=fn;Yt.prototype.visitTimestampMicrosecond=fn;Yt.prototype.visitTimestampNanosecond=fn;Yt.prototype.visitTime=fn;Yt.prototype.visitTimeSecond=fn;Yt.prototype.visitTimeMillisecond=fn;Yt.prototype.visitTimeMicrosecond=fn;Yt.prototype.visitTimeNanosecond=fn;Yt.prototype.visitDecimal=fn;Yt.prototype.visitList=fn;Yt.prototype.visitStruct=fn;Yt.prototype.visitUnion=fn;Yt.prototype.visitDenseUnion=pAe;Yt.prototype.visitSparseUnion=pAe;Yt.prototype.visitDictionary=fn;Yt.prototype.visitInterval=fn;Yt.prototype.visitIntervalDayTime=fn;Yt.prototype.visitIntervalYearMonth=fn;Yt.prototype.visitDuration=fn;Yt.prototype.visitDurationSecond=fn;Yt.prototype.visitDurationMillisecond=fn;Yt.prototype.visitDurationMicrosecond=fn;Yt.prototype.visitDurationNanosecond=fn;Yt.prototype.visitFixedSizeList=fn;Yt.prototype.visitMap=fn;const i$=new Yt;class Kt extends Cn{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof iu&&t.bitWidth!==64||t instanceof Nm&&t.bitWidth!==64||t instanceof K0&&t.precision!==Oo.HALF))return new $ce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new $ce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new G1t(o)})}class G1t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=Zt;Kt.prototype.visitBool=Zt;Kt.prototype.visitInt=Zt;Kt.prototype.visitInt8=Zt;Kt.prototype.visitInt16=Zt;Kt.prototype.visitInt32=Zt;Kt.prototype.visitInt64=Zt;Kt.prototype.visitUint8=Zt;Kt.prototype.visitUint16=Zt;Kt.prototype.visitUint32=Zt;Kt.prototype.visitUint64=Zt;Kt.prototype.visitFloat=Zt;Kt.prototype.visitFloat16=Zt;Kt.prototype.visitFloat32=Zt;Kt.prototype.visitFloat64=Zt;Kt.prototype.visitUtf8=Zt;Kt.prototype.visitBinary=Zt;Kt.prototype.visitFixedSizeBinary=Zt;Kt.prototype.visitDate=Zt;Kt.prototype.visitDateDay=Zt;Kt.prototype.visitDateMillisecond=Zt;Kt.prototype.visitTimestamp=Zt;Kt.prototype.visitTimestampSecond=Zt;Kt.prototype.visitTimestampMillisecond=Zt;Kt.prototype.visitTimestampMicrosecond=Zt;Kt.prototype.visitTimestampNanosecond=Zt;Kt.prototype.visitTime=Zt;Kt.prototype.visitTimeSecond=Zt;Kt.prototype.visitTimeMillisecond=Zt;Kt.prototype.visitTimeMicrosecond=Zt;Kt.prototype.visitTimeNanosecond=Zt;Kt.prototype.visitDecimal=Zt;Kt.prototype.visitList=Zt;Kt.prototype.visitStruct=Zt;Kt.prototype.visitUnion=Zt;Kt.prototype.visitDenseUnion=Zt;Kt.prototype.visitSparseUnion=Zt;Kt.prototype.visitDictionary=Zt;Kt.prototype.visitInterval=Zt;Kt.prototype.visitIntervalDayTime=Zt;Kt.prototype.visitIntervalYearMonth=Zt;Kt.prototype.visitDuration=Zt;Kt.prototype.visitDurationSecond=Zt;Kt.prototype.visitDurationMillisecond=Zt;Kt.prototype.visitDurationMicrosecond=Zt;Kt.prototype.visitDurationNanosecond=Zt;Kt.prototype.visitFixedSizeList=Zt;Kt.prototype.visitMap=Zt;const kX=new Kt,Y1t=(e,t)=>e+t;class qy extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Nh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Nh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const K1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),X1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Q1t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Nh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},J1t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Nh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},Z1t=(e,t)=>e.type.mode===el.Dense?mAe(e,t):gAe(e,t),mAe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Nh.visit(t[s],r[i])},gAe=({children:e},t)=>4+Nh.visitMany(e,e.map(()=>t)).reduce(Y1t,0);qy.prototype.visitUtf8=K1t;qy.prototype.visitBinary=X1t;qy.prototype.visitList=Q1t;qy.prototype.visitFixedSizeList=J1t;qy.prototype.visitUnion=Z1t;qy.prototype.visitDenseUnion=mAe;qy.prototype.visitSparseUnion=gAe;const Nh=new qy;var yAe;const vAe={},bAe={};class pr{constructor(t){var n,r,i;const s=t[0]instanceof pr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Pr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=vAe[o.typeId],f=s[0];this.isValid=d=>IX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,bAe[o.typeId]),this._offsets=cAe(s);break}this.data=s,this.type=o,this.stride=$d(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return lAe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return kX.visit(this)}concat(...t){return new pr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new pr(oAe(this,t,n,({data:r,_offsets:i},s,o)=>fAe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new pr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new s$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new pr(n)}return new s$(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new pr(n)}return this}}yAe=Symbol.toStringTag;pr[yAe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=tl.getVisitFnByTypeId(n),i=Fc.getVisitFnByTypeId(n),s=i$.getVisitFnByTypeId(n),o=Nh.getVisitFnByTypeId(n);vAe[n]={get:r,set:i,indexOf:s,byteLength:o},bAe[n]=Object.create(e,{isValid:{value:Zw(IX)},get:{value:Zw(tl.getVisitFnByTypeId(n))},set:{value:dAe(Fc.getVisitFnByTypeId(n))},indexOf:{value:hAe(i$.getVisitFnByTypeId(n))},getByteLength:{value:Zw(Nh.getVisitFnByTypeId(n))}})}return"Vector"})(pr.prototype);class s$ extends pr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new s$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new pr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function evt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${tvt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function tvt(e){return typeof e!="bigint"?Xv(e):`${Xv(e)}n`}const V8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,nvt=(e,t=0)=>e.length>=t?e.subarray(0,t):J3(new e.constructor(t),e,0);class Y6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?V8(r*1,this.BYTES_PER_ELEMENT):V8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=V8(t*this.stride,this.BYTES_PER_ELEMENT);const n=nvt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=J3(new this.ArrayType(t),this.buffer)}}Y6.prototype.offset=0;class Ik extends Y6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class _Ae extends Ik{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class wAe extends Ik{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let ul=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=$d(t),this._nulls=new _Ae,n&&n.length>0&&(this._isValid=evt(n))}toVector(){return new pr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),aa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};ul.prototype.length=1;ul.prototype.stride=1;ul.prototype.children=null;ul.prototype.finished=!1;ul.prototype.nullValues=null;ul.prototype._isValid=()=>!0;class ng extends ul{constructor(t){super(t),this._values=new Ik(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class K6 extends ul{constructor(t){super(t),this._pendingLength=0,this._offsets=new wAe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof W6?n[Cf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Ez{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const H8=2,Hd=4,jp=4,Vr=4,Og=new Int32Array(2),Mce=new Float32Array(Og.buffer),Lce=new Float64Array(Og.buffer),KN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var xz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(xz||(xz={}));let o$=class EAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new EAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Og[0]=this.readInt32(t),Mce[0]}readFloat64(t){return Og[KN?0:1]=this.readInt32(t),Og[KN?1:0]=this.readInt32(t+4),Lce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Mce[0]=n,this.writeInt32(t,Og[0])}writeFloat64(t,n){Lce[0]=n,this.writeInt32(t,Og[KN?0:1]),this.writeInt32(t+4,Og[KN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Hd+jp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<jp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Hd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Hd;const i=this.bytes_.subarray(t,t+r);return n===xz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Hd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=jp)throw new Error("FlatBuffers: file identifier must be length "+jp);for(let n=0;n<jp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Hd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},xAe=class SAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=o$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=SAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=o$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Hd,0),this.writeInt32(this.offset()-t+Hd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*H8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=H8;l<s;l+=H8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Vr:0;if(n){const s=n;if(this.prep(this.minalign,Hd+jp+i),s.length!=jp)throw new TypeError("FlatBuffers: file identifier must be length "+jp);for(let o=jp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Hd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Hd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Vr),(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ns.startKeyValue(t),Ns.addKey(t,n),Ns.addValue(t,r),Ns.endKeyValue(t)}}var tx;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(tx||(tx={}));var nx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(nx||(nx={}));var a$;(function(e){e[e.DenseArray=0]="DenseArray"})(a$||(a$={}));class _l{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new _l).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Vr),(n||new _l).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return _l.startInt(t),_l.addBitWidth(t,n),_l.addIsSigned(t,r),_l.endInt(t)}}class Bp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Bp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Vr),(n||new Bp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new _l).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):a$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,a$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class fv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new fv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Vr),(n||new fv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return fv.startBinary(t),fv.endBinary(t)}}class dv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Vr),(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return dv.startBool(t),dv.endBool(t)}}var u$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(u$||(u$={}));let xD=class J_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Vr),(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):u$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,u$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return J_.startDate(t),J_.addUnit(t,n),J_.endDate(t)}};class Su{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Su).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Vr),(n||new Su).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Su.startDecimal(t),Su.addPrecision(t,n),Su.addScale(t,r),Su.addBitWidth(t,i),Su.endDecimal(t)}}var Q0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Q0||(Q0={}));class qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Vr),(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Q0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return qd.startDuration(t),qd.addUnit(t,n),qd.endDuration(t)}}class Wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Vr),(n||new Wd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Wd.startFixedSizeBinary(t),Wd.addByteWidth(t,n),Wd.endFixedSizeBinary(t)}}class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Vr),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Gd.startFixedSizeList(t),Gd.addListSize(t,n),Gd.endFixedSizeList(t)}}var l$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(l$||(l$={}));class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Vr),(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):l$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,l$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Yd.startFloatingPoint(t),Yd.addPrecision(t,n),Yd.endFloatingPoint(t)}}var c$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(c$||(c$={}));class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Vr),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):c$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,c$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Kd.startInterval(t),Kd.addUnit(t,n),Kd.endInterval(t)}}class hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Vr),(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return hv.startList(t),hv.endList(t)}}let SD=class Z_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Z_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Vr),(n||new Z_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Z_.startMap(t),Z_.addKeysSorted(t,n),Z_.endMap(t)}};class pv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new pv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Vr),(n||new pv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return pv.startNull(t),pv.endNull(t)}}class mv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Vr),(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return mv.startStruct_(t),mv.endStruct_(t)}}let k2=class P1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new P1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Vr),(n||new P1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return P1.startTime(t),P1.addUnit(t,n),P1.addBitWidth(t,r),P1.endTime(t)}},R2=class D1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new D1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Vr),(n||new D1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return D1.startTimestamp(t),D1.addUnit(t,n),D1.addTimezone(t,r),D1.endTimestamp(t)}};var f$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(f$||(f$={}));let O1=class $1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new $1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Vr),(n||new $1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):f$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,f$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return $1.startUnion(t),$1.addMode(t,n),$1.addTypeIds(t,r),$1.endUnion(t)}};class gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Vr),(n||new gv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return gv.startUtf8(t),gv.endUtf8(t)}}var wi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(wi||(wi={}));let fc=class TD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new TD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Vr),(n||new TD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Bp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new TD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,wi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Dd=class Tp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Tp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Vr),(n||new Tp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new fc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,nx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Tp.startSchema(t),Tp.addEndianness(t,n),Tp.addFields(t,r),Tp.addCustomMetadata(t,i),Tp.addFeatures(t,s),Tp.endSchema(t)}};class ml{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ml).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Vr),(n||new ml).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tx.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Dd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ez).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Ez).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,tx.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Cr{constructor(t=[],n,r,i=Ha.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Tz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Cr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Cr(n,this.metadata)}assign(...t){const n=t[0]instanceof Cr?t[0]:Array.isArray(t[0])?new Cr(t[0]):new Cr(t),r=[...this.fields],i=XN(XN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:XN(XN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Tz(s,new Map);return new Cr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Cr.prototype.fields=null;Cr.prototype.metadata=null;Cr.prototype.dictionaries=null;let jr=class Sz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Sz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Sz.new(n,r,i,s)}};jr.prototype.type=null;jr.prototype.name=null;jr.prototype.nullable=null;jr.prototype.metadata=null;function XN(e,t){return new Map([...e||new Map,...t||new Map])}function Tz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Tz(s.children,t)}return t}var rvt=xAe,ivt=o$;class Cz{static decode(t){t=new ivt(Dr(t));const n=ml.getRootAsFooter(t),r=Cr.decode(n.schema(),new Map,n.version());return new svt(r,n)}static encode(t){const n=new rvt,r=Cr.encode(n,t.schema);ml.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())J0.encode(n,o);const i=n.endVector();ml.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())J0.encode(n,o);const s=n.endVector();return ml.startFooter(n),ml.addSchema(n,r),ml.addVersion(n,Ha.V5),ml.addRecordBatches(n,i),ml.addDictionaries(n,s),ml.finishFooterBuffer(n,ml.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ha.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class svt extends Cz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return J0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return J0.decode(n)}return null}}class J0{static decode(t){return new J0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Ez.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Qf(r),this.bodyLength=Qf(n)}}const QN=Object.freeze({done:!0,value:void 0});class TAe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class ovt extends TAe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Mp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(QN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Rce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Rce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Mp(this,void 0,void 0,function*(){return yield this.abort(t),QN})}return(t){return Mp(this,void 0,void 0,function*(){return yield this.close(),QN})}read(t){return Mp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Mp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(QN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class q8 extends ovt{write(t){if((t=Dr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?vz(this.toUint8Array(!0)):this.toUint8Array(!1).then(vz)}toUint8Array(t=!1){return t?Ih(this._values)[0]:Mp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=dC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Ih(o,a)[0]})}}class CAe extends K6{constructor(t){super(t),this._values=new Y6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Dr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class avt extends ul{constructor(t){super(t),this._values=new _Ae}setValue(t,n){this._values.set(t,+n)}}class X6 extends ng{}X6.prototype._setValue=NCe;class AAe extends X6{}AAe.prototype._setValue=uX;class IAe extends X6{}IAe.prototype._setValue=lX;class kAe extends ng{}kAe.prototype._setValue=OCe;class uvt extends ul{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new X0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=d$({type:this.type.indices,nullValues:n}),this.dictionary=d$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class RAe extends ng{}RAe.prototype._setValue=RCe;class lvt extends ul{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new ex(this.type.listSize,new jr(n,t.type,!0)),r}}class Q6 extends ng{setValue(t,n){this._values.set(t,n)}}class cvt extends Q6{setValue(t,n){super.setValue(t,ACe(n))}}class fvt extends Q6{}class dvt extends Q6{}class J6 extends ng{}J6.prototype._setValue=LCe;class NAe extends J6{}NAe.prototype._setValue=vX;class PAe extends J6{}PAe.prototype._setValue=bX;class _S extends ng{}_S.prototype._setValue=FCe;class DAe extends _S{}DAe.prototype._setValue=_X;class OAe extends _S{}OAe.prototype._setValue=wX;class $Ae extends _S{}$Ae.prototype._setValue=EX;class MAe extends _S{}MAe.prototype._setValue=xX;class rg extends ng{setValue(t,n){this._values.set(t,n)}}class hvt extends rg{}class pvt extends rg{}class mvt extends rg{}class gvt extends rg{}class yvt extends rg{}class vvt extends rg{}class bvt extends rg{}class _vt extends rg{}class wvt extends K6{constructor(t){super(t),this._offsets=new wAe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ZE(new jr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Evt extends K6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ZA(new jr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class xvt extends ul{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Svt extends ul{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new fa([...this.type.children,new jr(n,t.type,!0)]),r}}class wS extends ng{}wS.prototype._setValue=PCe;class LAe extends wS{}LAe.prototype._setValue=cX;class FAe extends wS{}FAe.prototype._setValue=fX;class jAe extends wS{}jAe.prototype._setValue=dX;class BAe extends wS{}BAe.prototype._setValue=hX;class ES extends ng{}ES.prototype._setValue=DCe;class UAe extends ES{}UAe.prototype._setValue=pX;class zAe extends ES{}zAe.prototype._setValue=mX;class VAe extends ES{}VAe.prototype._setValue=gX;class HAe extends ES{}HAe.prototype._setValue=yX;class RX extends ul{constructor(t){super(t),this._typeIds=new Ik(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new jr(n,t.type)];return this.type=new JA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Tvt extends RX{}class Cvt extends RX{constructor(t){super(t),this._offsets=new Ik(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class qAe extends K6{constructor(t){super(t),this._values=new Y6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,GK(n))}_flushPending(t,n){}}qAe.prototype._flushPending=CAe.prototype._flushPending;class Avt extends Cn{visitNull(){return xvt}visitBool(){return avt}visitInt(){return rg}visitInt8(){return hvt}visitInt16(){return pvt}visitInt32(){return mvt}visitInt64(){return gvt}visitUint8(){return yvt}visitUint16(){return vvt}visitUint32(){return bvt}visitUint64(){return _vt}visitFloat(){return Q6}visitFloat16(){return cvt}visitFloat32(){return fvt}visitFloat64(){return dvt}visitUtf8(){return qAe}visitBinary(){return CAe}visitFixedSizeBinary(){return RAe}visitDate(){return X6}visitDateDay(){return AAe}visitDateMillisecond(){return IAe}visitTimestamp(){return wS}visitTimestampSecond(){return LAe}visitTimestampMillisecond(){return FAe}visitTimestampMicrosecond(){return jAe}visitTimestampNanosecond(){return BAe}visitTime(){return ES}visitTimeSecond(){return UAe}visitTimeMillisecond(){return zAe}visitTimeMicrosecond(){return VAe}visitTimeNanosecond(){return HAe}visitDecimal(){return kAe}visitList(){return wvt}visitStruct(){return Svt}visitUnion(){return RX}visitDenseUnion(){return Cvt}visitSparseUnion(){return Tvt}visitDictionary(){return uvt}visitInterval(){return J6}visitIntervalDayTime(){return NAe}visitIntervalYearMonth(){return PAe}visitDuration(){return _S}visitDurationSecond(){return DAe}visitDurationMillisecond(){return OAe}visitDurationMicrosecond(){return $Ae}visistDurationNanosecond(){return MAe}visitFixedSizeList(){return lvt}visitMap(){return Evt}}const Ivt=new Avt;class Xt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function lu(e,t){return t instanceof e.constructor}function kk(e,t){return e===t||lu(e,t)}function ig(e,t){return e===t||lu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Z6(e,t){return e===t||lu(e,t)&&e.precision===t.precision}function kvt(e,t){return e===t||lu(e,t)&&e.byteWidth===t.byteWidth}function NX(e,t){return e===t||lu(e,t)&&e.unit===t.unit}function Rk(e,t){return e===t||lu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Nk(e,t){return e===t||lu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Rvt(e,t){return e===t||lu(e,t)&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}function Nvt(e,t){return e===t||lu(e,t)&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}function PX(e,t){return e===t||lu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Z0.compareManyFields(e.children,t.children)}function Pvt(e,t){return e===t||lu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Z0.visit(e.indices,t.indices)&&Z0.visit(e.dictionary,t.dictionary)}function DX(e,t){return e===t||lu(e,t)&&e.unit===t.unit}function Pk(e,t){return e===t||lu(e,t)&&e.unit===t.unit}function Dvt(e,t){return e===t||lu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}function Ovt(e,t){return e===t||lu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Z0.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=kk;Xt.prototype.visitBool=kk;Xt.prototype.visitInt=ig;Xt.prototype.visitInt8=ig;Xt.prototype.visitInt16=ig;Xt.prototype.visitInt32=ig;Xt.prototype.visitInt64=ig;Xt.prototype.visitUint8=ig;Xt.prototype.visitUint16=ig;Xt.prototype.visitUint32=ig;Xt.prototype.visitUint64=ig;Xt.prototype.visitFloat=Z6;Xt.prototype.visitFloat16=Z6;Xt.prototype.visitFloat32=Z6;Xt.prototype.visitFloat64=Z6;Xt.prototype.visitUtf8=kk;Xt.prototype.visitBinary=kk;Xt.prototype.visitFixedSizeBinary=kvt;Xt.prototype.visitDate=NX;Xt.prototype.visitDateDay=NX;Xt.prototype.visitDateMillisecond=NX;Xt.prototype.visitTimestamp=Rk;Xt.prototype.visitTimestampSecond=Rk;Xt.prototype.visitTimestampMillisecond=Rk;Xt.prototype.visitTimestampMicrosecond=Rk;Xt.prototype.visitTimestampNanosecond=Rk;Xt.prototype.visitTime=Nk;Xt.prototype.visitTimeSecond=Nk;Xt.prototype.visitTimeMillisecond=Nk;Xt.prototype.visitTimeMicrosecond=Nk;Xt.prototype.visitTimeNanosecond=Nk;Xt.prototype.visitDecimal=kk;Xt.prototype.visitList=Rvt;Xt.prototype.visitStruct=Nvt;Xt.prototype.visitUnion=PX;Xt.prototype.visitDenseUnion=PX;Xt.prototype.visitSparseUnion=PX;Xt.prototype.visitDictionary=Pvt;Xt.prototype.visitInterval=DX;Xt.prototype.visitIntervalDayTime=DX;Xt.prototype.visitIntervalYearMonth=DX;Xt.prototype.visitDuration=Pk;Xt.prototype.visitDurationSecond=Pk;Xt.prototype.visitDurationMillisecond=Pk;Xt.prototype.visitDurationMicrosecond=Pk;Xt.prototype.visitDurationNanosecond=Pk;Xt.prototype.visitFixedSizeList=Dvt;Xt.prototype.visitMap=Ovt;const Z0=new Xt;function Az(e,t){return Z0.compareSchemas(e,t)}function d$(e){const t=e.type,n=new(Ivt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(d$(Object.assign(Object.assign({},l),{type:u})))}}return n}function W8(e,t){return $vt(e,t.map(n=>n.data.concat()))}function $vt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Mvt(n,o,c,t,i),o>0&&(r[s++]=aa({type:new fa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new wl(e,f))]}function Mvt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:aa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var WAe;class ku{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Cr([]),this._offsets=[0],this;let i,s;t[0]instanceof Cr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof wl)return[u];if(u instanceof ku)return u.batches;if(u instanceof Pr){if(u.type instanceof fa)return[new wl(new Cr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new pr([u[h]])),f=new Cr(l.map((h,p)=>new jr(String(h),c[p].type))),[,d]=W8(f,c);return d.length===0?[new wl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Cr([]),!(i instanceof Cr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof wl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Az(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??cAe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=lAe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?kX.visit(new pr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new ku(n,r.map(i=>new wl(n,i)))}slice(t,n){const r=this.schema;[t,n]=oAe({length:this.numRows},t,n);const i=fAe(this.data,this._offsets,t,n);return new ku(r,i.map(s=>new wl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=aa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new pr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new pr([aa({type:new Rm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=W8(r,a)}return new ku(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new ku(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new ku(...W8(s,o))}}WAe=Symbol.toStringTag;ku[WAe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Zw(IX),e.get=Zw(tl.getVisitFn(re.Struct)),e.set=dAe(Fc.getVisitFn(re.Struct)),e.indexOf=hAe(i$.getVisitFn(re.Struct)),e.getByteLength=Zw(Nh.getVisitFn(re.Struct)),"Table"))(ku.prototype);var GAe;let wl=class N2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Cr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aa({nullCount:0,type:new fa(this.schema.fields),children:this.schema.fields.map(n=>aa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Pr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Fce(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=jr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Cr(r),a=aa({type:new fa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Fce(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=YAe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return tl.visit(this.data,t)}set(t,n){return Fc.visit(this.data,t,n)}indexOf(t,n){return i$.visit(this.data,t,n)}getByteLength(t){return Nh.visit(this.data,t)}[Symbol.iterator](){return kX.visit(new pr([this.data]))}toArray(){return[...this]}concat(...t){return new ku(this.schema,[this,...t])}slice(t,n){const[r]=new pr([this.data]).slice(t,n).data;return new N2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new pr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new pr([aa({type:new Rm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Cr(s,new Map(this.schema.metadata)),i=aa({type:new fa(s),children:o})}return new N2(r,i)}select(t){const n=this.schema.select(t),r=new fa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new N2(n,aa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=aa({type:new fa(n.fields),length:this.numRows,children:r});return new N2(n,i)}};GAe=Symbol.toStringTag;wl[GAe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(wl.prototype);function Fce(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:aa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),aa({type:new fa(i),length:n,children:s})]}function YAe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])YAe(a.children,l==null?void 0:l.children,n);if(Sn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Lvt extends wl{constructor(t){const n=t.fields.map(i=>aa({type:i.type})),r=aa({type:new fa(t.fields),nullCount:0,children:n});super(t,r)}}var h$;(function(e){e[e.BUFFER=0]="BUFFER"})(h$||(h$={}));var p$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(p$||(p$={}));class $g{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new $g).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Vr),(n||new $g).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):p$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):h$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,p$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,h$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return $g.startBodyCompression(t),$g.addCodec(t,n),$g.addMethod(t,r),$g.endBodyCompression(t)}}let KAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},XAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Ip=class Iz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Iz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Vr),(n||new Iz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new XAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new KAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new $g).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},ew=class kz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new kz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Vr),(n||new kz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ip).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var m$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(m$||(m$={}));let bg=class Cd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Cd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Vr),(n||new Cd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tx.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):m$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,tx.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,m$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Cd.startMessage(t),Cd.addVersion(t,n),Cd.addHeaderType(t,r),Cd.addHeader(t,i),Cd.addBodyLength(t,s),Cd.addCustomMetadata(t,o),Cd.endMessage(t)}};class Fvt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return pv.startNull(n),pv.endNull(n)}visitInt(t,n){return _l.startInt(n),_l.addBitWidth(n,t.bitWidth),_l.addIsSigned(n,t.isSigned),_l.endInt(n)}visitFloat(t,n){return Yd.startFloatingPoint(n),Yd.addPrecision(n,t.precision),Yd.endFloatingPoint(n)}visitBinary(t,n){return fv.startBinary(n),fv.endBinary(n)}visitBool(t,n){return dv.startBool(n),dv.endBool(n)}visitUtf8(t,n){return gv.startUtf8(n),gv.endUtf8(n)}visitDecimal(t,n){return Su.startDecimal(n),Su.addScale(n,t.scale),Su.addPrecision(n,t.precision),Su.addBitWidth(n,t.bitWidth),Su.endDecimal(n)}visitDate(t,n){return xD.startDate(n),xD.addUnit(n,t.unit),xD.endDate(n)}visitTime(t,n){return k2.startTime(n),k2.addUnit(n,t.unit),k2.addBitWidth(n,t.bitWidth),k2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return R2.startTimestamp(n),R2.addUnit(n,t.unit),r!==void 0&&R2.addTimezone(n,r),R2.endTimestamp(n)}visitInterval(t,n){return Kd.startInterval(n),Kd.addUnit(n,t.unit),Kd.endInterval(n)}visitDuration(t,n){return qd.startDuration(n),qd.addUnit(n,t.unit),qd.endDuration(n)}visitList(t,n){return hv.startList(n),hv.endList(n)}visitStruct(t,n){return mv.startStruct_(n),mv.endStruct_(n)}visitUnion(t,n){O1.startTypeIdsVector(n,t.typeIds.length);const r=O1.createTypeIdsVector(n,t.typeIds);return O1.startUnion(n),O1.addMode(n,t.mode),O1.addTypeIds(n,r),O1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Bp.startDictionaryEncoding(n),Bp.addId(n,BigInt(t.id)),Bp.addIsOrdered(n,t.isOrdered),r!==void 0&&Bp.addIndexType(n,r),Bp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Wd.startFixedSizeBinary(n),Wd.addByteWidth(n,t.byteWidth),Wd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Gd.startFixedSizeList(n),Gd.addListSize(n,t.listSize),Gd.endFixedSizeList(n)}visitMap(t,n){return SD.startMap(n),SD.addKeysSorted(n,t.keysSorted),SD.endMap(n)}}const G8=new Fvt;function jvt(e,t=new Map){return new Cr(Uvt(e,t),CD(e.metadata),t)}function QAe(e){return new Ul(e.count,JAe(e.columns),ZAe(e.columns))}function Bvt(e){return new Ph(QAe(e.data),e.id,e.isDelta)}function Uvt(e,t){return(e.fields||[]).filter(Boolean).map(n=>jr.fromJSON(n,t))}function jce(e,t){return(e.children||[]).filter(Boolean).map(n=>jr.fromJSON(n,t))}function JAe(e){return(e||[]).reduce((t,n)=>[...t,new ey(n.count,zvt(n.VALIDITY)),...JAe(n.children)],[])}function ZAe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new th(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new th(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new th(t.length,i.OFFSET.length)),i.DATA&&t.push(new th(t.length,i.DATA.length)),t=ZAe(i.children,t)}return t}function zvt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Vvt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Uce(e,jce(e,t)),i=new jr(e.name,o,e.nullable,CD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Bce(r):new Y0,a=new X0(t.get(n),r,n,s.isOrdered),i=new jr(e.name,a,e.nullable,CD(e.metadata))):(r=(r=s.indexType)?Bce(r):new Y0,t.set(n,o=Uce(e,jce(e,t))),a=new X0(o,r,n,s.isOrdered),i=new jr(e.name,a,e.nullable,CD(e.metadata))),i||null}function CD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Bce(e){return new iu(e.isSigned,e.bitWidth)}function Uce(e,t){const n=e.type.name;switch(n){case"NONE":return new Rm;case"null":return new Rm;case"binary":return new XA;case"utf8":return new XE;case"bool":return new QA;case"list":return new ZE((t||[])[0]);case"struct":return new fa(t||[]);case"struct_":return new fa(t||[])}switch(n){case"int":{const r=e.type;return new iu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new K0(Oo[r.precision])}case"decimal":{const r=e.type;return new Z3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new QE(kh[r.unit])}case"time":{const r=e.type;return new Nm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new e$(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new JE(Rh[r.unit])}case"duration":{const r=e.type;return new t$(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new JA(el[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new n$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ex(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new ZA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Hvt=xAe,qvt=o$;class Xd{static fromJSON(t,n){const r=new Xd(0,Ha.V5,n);return r._createHeader=Wvt(t,n),r}static decode(t){t=new qvt(Dr(t));const n=bg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Xd(r,i,s);return o._createHeader=Gvt(n,s),o}static encode(t){const n=new Hvt;let r=-1;return t.isSchema()?r=Cr.encode(n,t.header()):t.isRecordBatch()?r=Ul.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ph.encode(n,t.header())),bg.startMessage(n),bg.addVersion(n,Ha.V5),bg.addHeader(n,r),bg.addHeaderType(n,t.headerType),bg.addBodyLength(n,BigInt(t.bodyLength)),bg.finishMessageBuffer(n,bg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Cr)return new Xd(0,Ha.V5,Js.Schema,t);if(t instanceof Ul)return new Xd(n,Ha.V5,Js.RecordBatch,t);if(t instanceof Ph)return new Xd(n,Ha.V5,Js.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Js.Schema}isRecordBatch(){return this.headerType===Js.RecordBatch}isDictionaryBatch(){return this.headerType===Js.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Qf(t)}}class Ul{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Qf(t)}}class Ph{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Qf(n)}}class th{constructor(t,n){this.offset=Qf(t),this.length=Qf(n)}}class ey{constructor(t,n){this.length=Qf(t),this.nullCount=Qf(n)}}function Wvt(e,t){return()=>{switch(t){case Js.Schema:return Cr.fromJSON(e);case Js.RecordBatch:return Ul.fromJSON(e);case Js.DictionaryBatch:return Ph.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Js[t]}, type: ${t} }`)}}function Gvt(e,t){return()=>{switch(t){case Js.Schema:return Cr.decode(e.header(new Dd),new Map,e.version());case Js.RecordBatch:return Ul.decode(e.header(new Ip),e.version());case Js.DictionaryBatch:return Ph.decode(e.header(new ew),e.version())}throw new Error(`Unrecognized Message type: { name: ${Js[t]}, type: ${t} }`)}}jr.encode=ibt;jr.decode=nbt;jr.fromJSON=Vvt;Cr.encode=rbt;Cr.decode=Yvt;Cr.fromJSON=jvt;Ul.encode=sbt;Ul.decode=Kvt;Ul.fromJSON=QAe;Ph.encode=obt;Ph.decode=Xvt;Ph.fromJSON=Bvt;ey.encode=abt;ey.decode=Jvt;th.encode=ubt;th.decode=Qvt;function Yvt(e,t=new Map,n=Ha.V5){const r=tbt(e,t);return new Cr(r,AD(e),t,n)}function Kvt(e,t=Ha.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ul(e.length(),Zvt(e),ebt(e,t))}function Xvt(e,t=Ha.V5){return new Ph(Ul.decode(e.data(),t),e.id(),e.isDelta())}function Qvt(e){return new th(e.offset(),e.length())}function Jvt(e){return new ey(e.length(),e.nullCount())}function Zvt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ey.decode(n));return t}function ebt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ha.V4&&(r.bb_pos+=8*(i+1)),n[++s]=th.decode(r));return n}function tbt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=jr.decode(r,t));return n}function zce(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=jr.decode(r,t));return n}function nbt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Hce(e,zce(e,t)),r=new jr(e.name(),i,e.nullable(),AD(e))):t.has(n=Qf(a.id()))?(s=(s=a.indexType())?Vce(s):new Y0,o=new X0(t.get(n),s,n,a.isOrdered()),r=new jr(e.name(),o,e.nullable(),AD(e))):(s=(s=a.indexType())?Vce(s):new Y0,t.set(n,i=Hce(e,zce(e,t))),o=new X0(i,s,n,a.isOrdered()),r=new jr(e.name(),o,e.nullable(),AD(e))),r||null}function AD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Vce(e){return new iu(e.isSigned(),e.bitWidth())}function Hce(e,t){const n=e.typeType();switch(n){case wi.NONE:return new Rm;case wi.Null:return new Rm;case wi.Binary:return new XA;case wi.Utf8:return new XE;case wi.Bool:return new QA;case wi.List:return new ZE((t||[])[0]);case wi.Struct_:return new fa(t||[])}switch(n){case wi.Int:{const r=e.type(new _l);return new iu(r.isSigned(),r.bitWidth())}case wi.FloatingPoint:{const r=e.type(new Yd);return new K0(r.precision())}case wi.Decimal:{const r=e.type(new Su);return new Z3(r.scale(),r.precision(),r.bitWidth())}case wi.Date:{const r=e.type(new xD);return new QE(r.unit())}case wi.Time:{const r=e.type(new k2);return new Nm(r.unit(),r.bitWidth())}case wi.Timestamp:{const r=e.type(new R2);return new e$(r.unit(),r.timezone())}case wi.Interval:{const r=e.type(new Kd);return new JE(r.unit())}case wi.Duration:{const r=e.type(new qd);return new t$(r.unit())}case wi.Union:{const r=e.type(new O1);return new JA(r.mode(),r.typeIdsArray()||[],t||[])}case wi.FixedSizeBinary:{const r=e.type(new Wd);return new n$(r.byteWidth())}case wi.FixedSizeList:{const r=e.type(new Gd);return new ex(r.listSize(),(t||[])[0])}case wi.Map:{const r=e.type(new SD);return new ZA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${wi[n]}" (${n})`)}function rbt(e,t){const n=t.fields.map(s=>jr.encode(e,s));Dd.startFieldsVector(e,n.length);const r=Dd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Dd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ns.startKeyValue(e),Ns.addKey(e,a),Ns.addValue(e,u),Ns.endKeyValue(e)})):-1;return Dd.startSchema(e),Dd.addFields(e,r),Dd.addEndianness(e,lbt?nx.Little:nx.Big),i!==-1&&Dd.addCustomMetadata(e,i),Dd.endSchema(e)}function ibt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=G8.visit(s,e),r=G8.visit(s.dictionary,e)):r=G8.visit(s,e);const a=(s.children||[]).map(c=>jr.encode(e,c)),u=fc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?fc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ns.startKeyValue(e),Ns.addKey(e,d),Ns.addValue(e,h),Ns.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),fc.startField(e),fc.addType(e,r),fc.addTypeType(e,o),fc.addChildren(e,u),fc.addNullable(e,!!t.nullable),n!==-1&&fc.addName(e,n),i!==-1&&fc.addDictionary(e,i),l!==-1&&fc.addCustomMetadata(e,l),fc.endField(e)}function sbt(e,t){const n=t.nodes||[],r=t.buffers||[];Ip.startNodesVector(e,n.length);for(const o of n.slice().reverse())ey.encode(e,o);const i=e.endVector();Ip.startBuffersVector(e,r.length);for(const o of r.slice().reverse())th.encode(e,o);const s=e.endVector();return Ip.startRecordBatch(e),Ip.addLength(e,BigInt(t.length)),Ip.addNodes(e,i),Ip.addBuffers(e,s),Ip.endRecordBatch(e)}function obt(e,t){const n=Ul.encode(e,t.data);return ew.startDictionaryBatch(e),ew.addId(e,BigInt(t.id)),ew.addIsDelta(e,t.isDelta),ew.addData(e,n),ew.endDictionaryBatch(e)}function abt(e,t){return XAe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function ubt(e,t){return KAe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const lbt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Rz="ARROW1",OX=new Uint8Array(Rz.length);for(let e=0;e<Rz.length;e+=1)OX[e]=Rz.codePointAt(e);OX.length;class fs extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof wl?s.data.children:s.data),r=new fs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof pr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new ey(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||zf.call(this,i<=0?new Uint8Array(0):r$(t.offset,r,t.nullBitmap)),this.nodes.push(new ey(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function zf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new th(this._byteLength,t)),this._byteLength+=t,this}function cbt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(zf.call(this,i),n.mode===el.Sparse)return Nz.call(this,e);if(n.mode===el.Dense){if(e.offset<=0)return zf.call(this,s),Nz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);zf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function fbt(e){let t;return e.nullCount>=e.length?zf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?zf.call(this,r$(e.offset,e.length,t)):zf.call(this,uAe(e.values))}function sg(e){return zf.call(this,e.values.subarray(0,e.length*e.stride))}function eIe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return zf.call(this,nCe(-i,t+1,r)),zf.call(this,n.subarray(i,i+o)),this}function $X(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return zf.call(this,nCe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Nz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}fs.prototype.visitBool=fbt;fs.prototype.visitInt=sg;fs.prototype.visitFloat=sg;fs.prototype.visitUtf8=eIe;fs.prototype.visitBinary=eIe;fs.prototype.visitFixedSizeBinary=sg;fs.prototype.visitDate=sg;fs.prototype.visitTimestamp=sg;fs.prototype.visitTime=sg;fs.prototype.visitDecimal=sg;fs.prototype.visitList=$X;fs.prototype.visitStruct=Nz;fs.prototype.visitUnion=cbt;fs.prototype.visitInterval=sg;fs.prototype.visitDuration=sg;fs.prototype.visitFixedSizeList=$X;fs.prototype.visitMap=$X;class tIe extends TAe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new q8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Vy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return H6(t)?t.then(n=>this.writeAll(n)):q6(t)?jX(this,t):FX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof q8?this._sink=t:(this._sink=new q8,t&&yyt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&vyt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Az(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof ku&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof wl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Az(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof wl?t instanceof Lvt||this._writeRecordBatch(t):t instanceof ku?this.writeAll(t.batches):YK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Xd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Js.RecordBatch?this._recordBatchBlocks.push(new J0(a,t.bodyLength,this._position)):t.headerType===Js.DictionaryBatch&&this._dictionaryBlocks.push(new J0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Dr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Xd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(OX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=fs.assemble(t),o=new Ul(t.numRows,r,i),a=Xd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=fs.assemble(new pr([t])),u=new Ul(t.length,s,o),l=new Ph(u,n,r),c=Xd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class MX extends tIe{static writeAll(t,n){const r=new MX(n);return H6(t)?t.then(i=>r.writeAll(i)):q6(t)?jX(r,t):FX(r,t)}}class LX extends tIe{static writeAll(t){const n=new LX;return H6(t)?t.then(r=>n.writeAll(r)):q6(t)?jX(n,t):FX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Cz.encode(new Cz(t,Ha.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function FX(e,t){let n=t;t instanceof ku&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function jX(e,t){var n,r,i,s,o,a,u;return Mp(this,void 0,void 0,function*(){try{for(n=!0,r=dC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function dbt(e,t="stream"){return(t==="stream"?MX:LX).writeAll(e).toUint8Array(!0)}function BX(e,t=1){return(e*t+63&-64||64)/t}function ty(e,t,n=e.BYTES_PER_ELEMENT){return new e(BX(t,n))}function UX(e){return e instanceof Pr?e:new Pr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function hbt(e){return new pr([UX(e)])}const zX=new TextEncoder;function pbt(e,t,n){const r=zX.encode(n);return e.set(r,t),r.length}function mbt(e,t,n){return zX.encodeInto(n,e.subarray(t)).written}const gbt=zX.encodeInto?mbt:pbt;function qce(e,t){const n=ty(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function ybt(e,t){const n=ty(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function vbt(e,t){const n=ty(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function bbt(e,t){const n=ty(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function _bt(e){const t=d$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function wbt(e,t,n){const r=ty(Int32Array,t+1),i=ty(Uint8Array,3*n);let s=0;return{set(o,a){s+=gbt(i,s,o),r[a+1]=s},data:()=>{const o=BX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Ebt(e,t){const n=[],r=ty(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:xbt(e.dictionary,n,o)})}}function xbt(e,t,n){const r=wbt(e,t.length,n);return t.forEach(r.set),hbt(r.data())}function Sbt(e,t){const n=ty(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Tbt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?qce:null;break;case re.Float:r=e.precision>0?qce:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?Ebt:null;break;case re.Bool:r=ybt;break;case re.Date:r=e.unit?bbt:vbt;break}return r==null?_bt(e):n?Sbt(r(e,t),t):r(e,t)}function Cbt(e,t){const n=e.length,r=BX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),UX({type:t,length:n,buffers:[null,i]})}function nIe(e,t,n,r,i=!0){const s=Tbt(r,e,i);return t(n,s.set),UX(s.data())}function VX(e){if(e instanceof Sn||e==null)return e;switch(e){case re.Binary:return new XA;case re.Bool:return new QA;case re.DateDay:return new Dyt;case re.DateMillisecond:case re.Date:return new Oyt;case re.Dictionary:return new X0(new XE,new Y0);case re.Float16:return new SCe;case re.Float32:return new iX;case re.Float64:case re.Float:return new sX;case re.Int8:return new QK;case re.Int16:return new JK;case re.Int32:case re.Int:return new Y0;case re.Int64:return new ZK;case re.IntervalDayTime:return new jyt;case re.Interval:case re.IntervalYearMonth:return new Byt;case re.Null:return new Rm;case re.TimeMicrosecond:return new Lyt;case re.TimeMillisecond:case re.Time:return new Myt;case re.TimeNanosecond:return new Fyt;case re.TimeSecond:return new $yt;case re.Uint8:return new eX;case re.Uint16:return new tX;case re.Uint32:return new nX;case re.Uint64:return new rX;case re.Utf8:return new XE;default:xn(`Unsupported type code: ${Ah(e)}. Use a data type constructor instead?`)}}function Abt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function rIe(e,t){const n=Pz();return e(t,n.add),n}function Pz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(km(t))++e.dates,Abt(t)&&++e.utcdays;else if(cv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Pz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Pz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return VX(Ibt(e))}};return e}function Ibt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=jr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new ex(e.minlen,n):new ZE(n)}else if(e.structs===t){const n=e.struct_prof;return new fa(Object.keys(n).map(r=>jr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;xn("Type inference failure")}}}}function kbt(e,t,n,r,i,s=!0){if(i=VX(i),!i){const o=rIe(r,t);s=o.nulls>0,i=o.type()}return nIe(n,r,t,i,s)}function Rbt(e,t,n,r,i,s=!0){i=VX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=Nbt(o);if(u&&a&&Wce(u.type,i))return u;const l=o.data;if(Ck(l)){const c=Pbt(l);if(a&&c&&Wce(c,i))return Cbt(l,c);i=i||c,s=!1}if(!i){const c=rIe(r,o);s=c.nulls>0,i=c.type()}return nIe(n,r,o,i,s)}function Nbt(e){return e instanceof pr?e:e.vector instanceof pr?e.vector:null}function Pbt(e){const n={Float32Array:iX,Float64Array:sX,Int8Array:QK,Int16Array:JK,Int32Array:Y0,Uint8Array:eX,Uint16Array:tX,Uint32Array:nX,BigInt64Array:ZK,BigUint64Array:rX}[e.constructor.name];return n?new n:null}function Wce(e,t){return!e||!t?!0:e.compareTo(t)}function Dbt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function Obt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&cv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const $bt=()=>xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Mbt(){try{return ku}catch{$bt()}}function iIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=Lbt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&xn("Column length mismatch"),a[l]=c});const u=Mbt();return new u(a)}function Lbt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=yi(n)?n(e):hr(n)?n:null;if(hr(e))return{dataFrom:kbt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:Dbt(e,r,i)};if(Fbt(e))return{dataFrom:Rbt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:Obt(e,r,i)};xn("Unsupported input data type")}function Fbt(e){return e&&yi(e.reify)}function jbt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return dbt(iIe(e,r),n)}function Bbt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Ubt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&km(u))++i,Bbt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function e4(e,t){return yi(t)?t(e):t||e.columnNames()}function sIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=Ubt(zbt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function zbt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function HX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function Vbt(e,t={}){const n=e4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":km(l)?z6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return HX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function oIe(e,t={}){if(yi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(km(e))return t.utc?z6(e):I2e(e);{const r=JSON.stringify(e,(s,o)=>Ck(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function t4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function Hbt(e,t={}){const n=e4(e,t.columns),{align:r,format:i}=sIe(e,n,t),s=qbt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(oIe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",E=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${E?` style="${E}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return HX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function qbt(e){return t4(e.style,t=>yi(t)?t:()=>t)}function Wbt(e,t=!0,n=!1){return e===void 0||e?t:n}const Gbt=e=>km(e)?z6(e,!0):e;function Ybt(e,t={}){const n=Wbt(t.schema),r=t.format||{},i=e4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||Gbt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Kbt(e,t={}){const n=e4(e,t.columns),{align:r,format:i}=sIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return HX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(oIe(u,i[l]))+"|"}}),a+`
`}function aIe(e,t){for(const[n,r]of V6(t))e.set(n,r);return e}function Xbt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Pm(e,t,n=new Map){return t=ru(t)?e.columnName(t):t,Uo(t)?n.set(t,t):hr(t)?t.forEach(r=>Pm(e,r,n)):yi(t)?Pm(e,t(e),n):wa(t)?aIe(n,t):xn(`Invalid column selection: ${Ah(t)}`),n}function n4(e,t){return e.toObject=t,e}function uIe(e){return hr(e)?e.map(uIe):e&&e.toObject?e.toObject():e}function rx(){return n4(e=>e.columnNames(),()=>({all:[]}))}function lIe(...e){return e=e.flat(),n4(t=>{const n=Pm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:uIe(e)}))}function Qbt(e,t){return n4(n=>{let r=ru(e)?e:n.columnIndex(e),i=ru(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function Jbt(e){return Uo(e)&&(e=RegExp(Xbt(e))),n4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Zbt(e){return Ck(e.data)?e.data.constructor:Array}class Up extends g0t{static from(t,n){return new Up(b0t(t,n),n)}static new(t,n){if(t instanceof Up)return t;const r={},i=[];for(const[s,o]of V6(t))r[s]=o,i.push(s);return new Up(r,n||i)}constructor(t,n,r,i,s,o){t4(t,v0t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Up(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Y0t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=ec(r).groupby(r.groups());return t.forEach(s=>{s=Up.new(s),s.numRows()!==n&&xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):xn(`Unrecognized column: ${t}`)}object(t=0){return Gce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Pm(this,t.columns||rx()),o=Z2e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),X0t(this,u,a,n)}return a}*[Symbol.iterator](){const t=Gce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(Zbt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=K0t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return iIe(this,t)}toArrowBuffer(t){return jbt(this,t)}toCSV(t){return Vbt(this,t)}toHTML(t){return Hbt(this,t)}toJSON(t){return Ybt(this,t)}toMarkdown(t){return Kbt(this,t)}}function Gce(e){let t=e._builder;if(!t){const n=Z2e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class e_t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=t_t[e.type];s&&s(e,t,n)}const JN=(e,t,n)=>{er(e.argument,t,n,e)},Y8=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},Yce=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},K8=(e,t,n)=>{Od(e.params,t,n,e),er(e.body,t,n,e)},Kce=(e,t,n)=>{er(e.callee,t,n,e),Od(e.arguments,t,n,e)},Od=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},t_t={TemplateLiteral:(e,t,n)=>{Od(e.expressions,t,n,e),Od(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:Kce,NewExpression:Kce,ArrayExpression:(e,t,n)=>{Od(e.elements,t,n,e)},AssignmentExpression:Y8,AwaitExpression:JN,BinaryExpression:Y8,LogicalExpression:Y8,UnaryExpression:JN,UpdateExpression:JN,ConditionalExpression:Yce,ObjectExpression:(e,t,n)=>{Od(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:K8,FunctionExpression:K8,FunctionDeclaration:K8,VariableDeclaration:(e,t,n)=>{Od(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Od(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:Yce,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),Od(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),Od(e.consequent,t,n,e)},ReturnStatement:JN,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function cIe(e){delete e.start,delete e.end,delete e.optional}function Xce(e){cIe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function n_t(e){return er(e,null,{Column:Xce,Constant:Xce,Default:cIe}),e}function Ds(e,t){return t&&t.type===e}function r_t(e){return Ds(Z0t,e)||Ds(J0t,e)}function i_t(e){return yi(e)?e:()=>e}const s_t="Escaped functions are not valid as rollup or pivot values.";function o_t(e,t,n){e.aggronly&&xn(s_t);const r="(row,data)=>fn("+J2e(e.table.columnNames())+",$)";return{escape:WK.escape(r,i_t(t.expr),n)}}var a_t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],fIe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],u_t="-----------------------------------------------------------------------------------------------------------------------------------------------------",dIe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",X8={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Q8="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",l_t={5:Q8,"5module":Q8+" export import",6:Q8+" const class extends export import super"},c_t=/^in(stanceof)?$/,f_t=new RegExp("["+dIe+"]"),d_t=new RegExp("["+dIe+u_t+"]");function Dz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Dm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&f_t.test(String.fromCharCode(e)):t===!1?!1:Dz(e,fIe)}function ix(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&d_t.test(String.fromCharCode(e)):t===!1?!1:Dz(e,fIe)||Dz(e,a_t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function sc(e,t){return new or(e,{beforeExpr:!0,binop:t})}var oc={beforeExpr:!0},yu={startsExpr:!0},qX={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,qX[e]=new or(e,t)}var K={num:new or("num",yu),regexp:new or("regexp",yu),string:new or("string",yu),name:new or("name",yu),privateId:new or("privateId",yu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",oc),semi:new or(";",oc),colon:new or(":",oc),dot:new or("."),question:new or("?",oc),questionDot:new or("?."),arrow:new or("=>",oc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",oc),backQuote:new or("`",yu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:sc("||",1),logicalAND:sc("&&",2),bitwiseOR:sc("|",3),bitwiseXOR:sc("^",4),bitwiseAND:sc("&",5),equality:sc("==/!=/===/!==",6),relational:sc("</>/<=/>=",7),bitShift:sc("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:sc("%",10),star:sc("*",10),slash:sc("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:sc("??",1),_break:Wn("break"),_case:Wn("case",oc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",oc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",oc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",yu),_if:Wn("if"),_return:Wn("return",oc),_switch:Wn("switch"),_throw:Wn("throw",oc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",yu),_super:Wn("super",yu),_class:Wn("class",yu),_extends:Wn("extends",oc),_export:Wn("export"),_import:Wn("import",yu),_null:Wn("null",yu),_true:Wn("true",yu),_false:Wn("false",yu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Qc=/\r\n?|\n|\u2028|\u2029/,h_t=new RegExp(Qc.source,"g");function xS(e){return e===10||e===13||e===8232||e===8233}function hIe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(xS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var pIe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,bc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,mIe=Object.prototype,p_t=mIe.hasOwnProperty,m_t=mIe.toString,Dk=Object.hasOwn||function(e,t){return p_t.call(e,t)},Qce=Array.isArray||function(e){return m_t.call(e)==="[object Array]"},Jce=Object.create(null);function e0(e){return Jce[e]||(Jce[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function ny(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var g_t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,eI=function(t,n){this.line=t,this.column=n};eI.prototype.offset=function(t){return new eI(this.line,this.column+t)};var r4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function gIe(e,t){for(var n=1,r=0;;){var i=hIe(e,r,t);if(i<0)return new eI(n,t-r);++n,r=i}}var Oz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Zce=!1;function y_t(e){var t={};for(var n in Oz)t[n]=e&&Dk(e,n)?e[n]:Oz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Zce&&typeof console=="object"&&console.warn&&(Zce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Qce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Qce(t.onComment)&&(t.onComment=v_t(t,t.onComment)),t}function v_t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new r4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var tI=1,SS=2,WX=4,yIe=8,vIe=16,bIe=32,GX=64,_Ie=128,Ok=256,YX=tI|SS|Ok;function KX(e,t){return SS|(e?WX:0)|(t?yIe:0)}var g$=0,XX=1,og=2,wIe=3,EIe=4,xIe=5,Us=function(t,n,r){this.options=t=y_t(t),this.sourceFile=t.sourceFile,this.keywords=e0(l_t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=X8[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=e0(i);var s=(i?i+" ":"")+X8.strict;this.reservedWordsStrict=e0(s),this.reservedWordsStrictBind=e0(s+" "+X8.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Qc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(tI),this.regexpState=null,this.privateNameStack=[]},Jh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Us.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Jh.inFunction.get=function(){return(this.currentVarScope().flags&SS)>0};Jh.inGenerator.get=function(){return(this.currentVarScope().flags&yIe)>0&&!this.currentVarScope().inClassFieldInit};Jh.inAsync.get=function(){return(this.currentVarScope().flags&WX)>0&&!this.currentVarScope().inClassFieldInit};Jh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Ok)return!1;if(t.flags&SS)return(t.flags&WX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Jh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&GX)>0||n||this.options.allowSuperOutsideMethod};Jh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&_Ie)>0};Jh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Jh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(SS|Ok))>0||n};Jh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ok)>0};Us.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Us.parse=function(t,n){return new this(n,t).parse()};Us.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Us.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Us.prototype,Jh);var cu=Us.prototype,b_t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;cu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){bc.lastIndex=e,e+=bc.exec(this.input)[0].length;var t=b_t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){bc.lastIndex=e+t[0].length;var n=bc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Qc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,bc.lastIndex=e,e+=bc.exec(this.input)[0].length,this.input[e]===";"&&e++}};cu.eat=function(e){return this.type===e?(this.next(),!0):!1};cu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};cu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};cu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};cu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Qc.test(this.input.slice(this.lastTokEnd,this.start))};cu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};cu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};cu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};cu.expect=function(e){this.eat(e)||this.unexpected()};cu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var i4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};cu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};cu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};cu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};cu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Us.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var QX={kind:"loop"},__t={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;bc.lastIndex=this.pos;var t=bc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Dm(r,!0)){for(var i=n+1;ix(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!c_t.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;bc.lastIndex=this.pos;var e=bc.exec(this.input),t=this.pos+e[0].length,n;return!Qc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(ix(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){bc.lastIndex=this.pos;var o=bc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(QX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(QX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new i4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,kC|(n?0:$z),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(__t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),Qc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var w_t=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?bIe:0),this.checkLValPattern(e,t?EIe:og),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(QX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?XX:og,!1)};var kC=1,$z=2,SIe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&$z&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&kC&&(e.id=t&SIe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&$z)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?XX:og:wIe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(KX(e.async,e.generator)),t&kC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&kC?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&E_t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&y$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&y$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(y$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&y$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Ok|GX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,og,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];Dk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function E_t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function y$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,kC|SIe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Dk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=w_t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,og),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return g_t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Jc=Us.prototype;Jc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Jc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Jc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Jc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Jc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Jc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Jc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Jc.parseBindingListItem=function(e){return e};Jc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Jc.checkLValSimple=function(e,t,n){t===void 0&&(t=g$);var r=t!==g$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===og&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Dk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==xIe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Jc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=g$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Jc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=g$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var uf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ii={b_stat:new uf("{",!1),b_expr:new uf("{",!0),b_tmpl:new uf("${",!1),p_stat:new uf("(",!1),p_expr:new uf("(",!0),q_tmpl:new uf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new uf("function",!1),f_expr:new uf("function",!0),f_expr_gen:new uf("function",!0,!1,null,!0),f_gen:new uf("function",!1,!1,null,!0)},TS=Us.prototype;TS.initialContext=function(){return[Ii.b_stat]};TS.curContext=function(){return this.context[this.context.length-1]};TS.braceIsBlock=function(e){var t=this.curContext();return t===Ii.f_expr||t===Ii.f_stat?!0:e===K.colon&&(t===Ii.b_stat||t===Ii.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Qc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ii.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};TS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};TS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};TS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ii.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ii.b_stat:Ii.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ii.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ii.p_stat:Ii.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ii.p_stat)&&!(e===K._return&&Qc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ii.b_stat)?this.context.push(Ii.f_expr):this.context.push(Ii.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ii.q_tmpl?this.context.pop():this.context.push(Ii.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ii.f_expr?this.context[t]=Ii.f_expr_gen:this.context[t]=Ii.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=Us.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new i4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&TIe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function TIe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&TIe(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new i4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ii.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ii.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new i4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var x_t=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=x_t,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Qc.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(KX(t,r.generator)|GX|(n?_Ie:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(KX(n,!1)|vIe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,xIe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,XX,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var v$=Us.prototype;v$.raise=function(e,t){var n=gIe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};v$.raiseRecoverable=v$.raise;v$.curPosition=function(){if(this.options.locations)return new eI(this.curLine,this.pos-this.lineStart)};var Wy=Us.prototype,S_t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Wy.enterScope=function(e){this.scopeStack.push(new S_t(e))};Wy.exitScope=function(){this.scopeStack.pop()};Wy.treatFunctionsAsVarInScope=function(e){return e.flags&SS||!this.inModule&&e.flags&tI};Wy.declareName=function(e,t,n){var r=!1;if(t===og){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&tI&&delete this.undefinedExports[e]}else if(t===EIe){var s=this.currentScope();s.lexical.push(e)}else if(t===wIe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&bIe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&tI&&delete this.undefinedExports[e],u.flags&YX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Wy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Wy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Wy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&YX)return t}};Wy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&YX&&!(t.flags&vIe))return t}};var s4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new r4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},$k=Us.prototype;$k.startNode=function(){return new s4(this,this.start,this.startLoc)};$k.startNodeAt=function(e,t){return new s4(this,e,t)};function CIe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}$k.finishNode=function(e,t){return CIe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};$k.finishNodeAt=function(e,t,n,r){return CIe.call(this,e,t,n,r)};$k.copyNode=function(e){var t=new s4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var AIe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",IIe=AIe+" Extended_Pictographic",kIe=IIe,RIe=kIe+" EBase EComp EMod EPres ExtPict",NIe=RIe,T_t=NIe,C_t={9:AIe,10:IIe,11:kIe,12:RIe,13:NIe,14:T_t},A_t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",I_t={9:"",10:"",11:"",12:"",13:"",14:A_t},efe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",PIe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",DIe=PIe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",OIe=DIe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",$Ie=OIe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",MIe=$Ie+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",k_t=MIe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",R_t={9:PIe,10:DIe,11:OIe,12:$Ie,13:MIe,14:k_t},LIe={};function N_t(e){var t=LIe[e]={binary:e0(C_t[e]+" "+efe),binaryOfStrings:e0(I_t[e]),nonBinary:{General_Category:e0(efe),Script:e0(R_t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var J8=0,tfe=[9,10,11,12,13,14];J8<tfe.length;J8+=1){var P_t=tfe[J8];N_t(P_t)}var Ct=Us.prototype,Zh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=LIe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Zh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Zh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Zh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Zh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Zh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Zh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Zh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Zh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Zh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return FIe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function FIe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!FIe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ny(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ny(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),D_t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function D_t(e){return Dm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),O_t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function O_t(e){return ix(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!o4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return jIe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function jIe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&$_t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function $_t(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var BIe=0,Om=1,xc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(M_t(t))return e.lastIntValue=-1,e.advance(),Om;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===xc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return BIe};function M_t(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Om}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return BIe};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Dk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Om;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return xc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";UIe(t=e.current());)e.lastStringValue+=ny(t),e.advance();return e.lastStringValue!==""};function UIe(e){return jIe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";L_t(t=e.current());)e.lastStringValue+=ny(t),e.advance();return e.lastStringValue!==""};function L_t(e){return UIe(e)||o4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===xc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Om:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Om)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||HIe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Om,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===xc&&(t=xc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==xc&&(t=Om);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===xc&&(t=xc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Om:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===xc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===xc&&(t=xc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Om:xc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&F_t(n)||j_t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function F_t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function j_t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return B_t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function B_t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return o4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;o4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function o4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;zIe(n=e.current());)e.lastIntValue=16*e.lastIntValue+VIe(n),e.advance();return e.pos!==t};function zIe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function VIe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return HIe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function HIe(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!zIe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+VIe(i),e.advance()}return!0};var JX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new r4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Us.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new JX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new JX(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Dm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=hIe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!xS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&pIe.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Qc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Dm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ny(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ny(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Qc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Zh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function U_t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function qIe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=qIe(this.input.slice(t,this.pos)),++this.pos):Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=qIe(this.input.slice(t,this.pos));return++this.pos,Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Dm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=U_t(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(xS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var WIe={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===WIe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw WIe;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(xS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ny(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return xS(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(ix(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Dm:ix)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ny(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=qX[e]),this.finishToken(t,e)};var z_t="8.11.3";Us.acorn={Parser:Us,version:z_t,defaultOptions:Oz,Position:eI,SourceLocation:r4,getLineInfo:gIe,Node:s4,TokenType:or,tokTypes:K,keywordTypes:qX,TokContext:uf,tokContexts:Ii,isIdentifierChar:ix,isIdentifierStart:Dm,Token:JX,isNewLine:xS,lineBreak:Qc,lineBreakG:h_t,nonASCIIwhitespace:pIe};function V_t(e,t){return Us.parse(e,t)}const ZX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},H_t={ecmaVersion:11},nfe="$",q_t="d",W_t="d1",G_t="d2",To=e=>(t,n)=>n.error(t,e+" not allowed"),Y_t=To("Aggregate function"),K_t=To("Window function"),X_t="Invalid argument",eQ="Invalid column reference",Q_t=eQ+" (must be input to an aggregate function)",GIe="Invalid function call",J_t="Invalid member expression",Z_t="Invalid operator parameter",ewt="Invalid param reference",twt="Invalid variable reference",nwt="Variable not accessible in operator call",rwt="Unsupported variable declaration",iwt="Unsupported destructuring pattern",YIe="Table expressions do not support closures",KIe="Use aq.escape(fn) to use a function as-is (including closures)",swt="use table.params({ name: value }) to define dynamic parameters",owt="use aq.addFunction(name, fn) to add new op functions",awt=`
Note: ${YIe}. ${KIe}, or ${swt}.`,XIe=`
Note: ${YIe}. ${KIe}, or ${owt}.`,uwt=`The ${X2e} method is not valid in multi-table expressions.`;function lwt(e,t){const n=cwt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,r_t(r)?(dwt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=W_t),e.scope.add(e.tuple2=G_t),e.scope.add(e.$param=nfe)):(e.scope.add(e.tuple=q_t),e.scope.add(e.$param=nfe)),er(r,e,tQ),e.root}function cwt(e){try{const t=e.field?fwt(e):hr(e)?Ah(e):e;return V_t(`expr=(${t})`,H_t).body[0].expression.right}catch{xn(`Expression parse error: ${e+""}`)}}function fwt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const tQ={FunctionDeclaration:To("Function definitions"),ForStatement:To("For loops"),ForOfStatement:To("For-of loops"),ForInStatement:To("For-in loops"),WhileStatement:To("While loops"),DoWhileStatement:To("Do-while loops"),AwaitExpression:To("Await expressions"),ArrowFunctionExpression:To("Function definitions"),AssignmentExpression:To("Assignments"),FunctionExpression:To("Function definitions"),NewExpression:To('Use of "new"'),UpdateExpression:To("Update expressions"),VariableDeclarator(e,t){Fz(e.id,t)},Identifier(e,t,n){ZIe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,twt,awt)},CallExpression(e,t){const n=QIe(e.callee),r=G2e(n)||Y2e(n);if(r){if((t.join||t.aggregate===!1)&&HK(n)&&Y_t(e,t),(t.join||t.window===!1)&&qK(n)&&K_t(e,t),t.$op=1,t.ast)Lz(e,n,t),e.arguments.forEach(i=>er(i,t,Mz));else{const i=t.op(hwt(t,r,n,e.arguments));Object.assign(e,{type:z2e,name:i.id})}return t.$op=0,!1}else W2e(n)?Lz(e,n,t):t.error(e,GIe,XIe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ds(S0,r))return;const{name:s}=r;if(JIe(e)&&Ds(S0,i)&&Xf(ZX,i.name)){nke(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return rfe(e,o,t,eke,n);if(s===t.$param)return rfe(e,o,t,mwt);t.paramsRef.has(s)?nI(e,t.paramsRef.get(s)):t.columnRef.has(s)?tke(r,s,t,e):Xf(t.params,s)&&nI(r,s)}};function rfe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ds(vS,s))a=s.value;else try{er(s,n,tQ,e),a=n.param(s)}catch{n.error(e,J_t)}return r(e,a,t,n,i),!1}const Mz={...tQ,VariableDeclarator:To("Variable declaration in operator call"),Identifier(e,t,n){ZIe(e,t,n)&&t.error(e,nwt)},CallExpression(e,t){const n=QIe(e.callee);W2e(n)?Lz(e,n,t):t.error(e,GIe,XIe)}};function dwt(e,t){e.generator&&To("Generator functions")(e,t),e.async&&To("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(MT(t,n[0],"tuple1",i(1)),r>1&&MT(t,n[1],"tuple2",i(2)),r>2&&MT(t,n[2],"$param",s)):(MT(t,n[0],"tuple",i(0)),r>1&&MT(t,n[1],"$param",s))),t.root=e.body}function MT(e,t,n,r){Ds(S0,t)?(e.scope.add(t.name),e[n]=t.name):Ds(B2e,t)&&t.properties.forEach(i=>{const s=Ds(S0,i.key)?i.key.name:Ds(vS,i.key)?i.key.value:e.error(i,X_t);Ds(S0,i.value)||e.error(i.value,iwt),r(i.value.name,s)})}function hwt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,Mz),i.push(e.field(u))):l<a?(er(u,e,Mz),s.push(e.param(u))):e.error(u,Z_t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function QIe(e){return Ds(S0,e)?e.name:Ds(j2e,e)?JIe(e)?pwt(e.property.name):e.property.name:null}function JIe(e){return Ds(S0,e.object)&&e.object.name==="Math"}function pwt(e){return e==="max"?"greatest":e==="min"?"least":e}function ZIe(e,t,n){const{name:r}=e;if(!(Ds(j2e,n)&&n.property===e)){if(!(Ds(U2e,n)&&n.key===e))if(t.paramsRef.has(r))nI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))tke(e,r,t,n);else if(Xf(t.params,r))nI(e,r);else if(Xf(ZX,r))nke(e,r);else return!0}}function eke(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,eQ),r.aggronly&&!r.$op&&r.error(e,Q_t),K2e(e,t,n,o,i)}function tke(e,t,n,r){const[i,s]=n.columnRef.get(t);eke(e,i,s,n,r)}function mwt(e,t,n,r){r.params&&!Xf(r.params,t)&&r.error(e,ewt),nI(e,t)}function nI(e,t){e.type=iyt,e.name=t}function nke(e,t){e.type=tyt,e.name=t,e.raw=ZX[t]}function Lz(e,t,n){if(t===X2e){const r=n.table;r||n.error(e,uwt),Q2e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=ru(s)?r.columnName(s):s;return r.column(o)||n.error(i,eQ),o}):r.columnNames())}else e.callee={type:ryt,name:t}}function Fz(e,t){Ds(S0,e)?t.scope.add(e.name):Ds(Q0t,e)?e.elements.forEach(n=>Fz(n,t)):Ds(B2e,e)?e.properties.forEach(n=>Fz(n.value,t)):t.error(e.id,rwt)}const gwt={[Ak]:1,[z2e]:1};function nl(e,t={}){const n=t.generate||X3,r=t.compiler||WK,i=vwt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=ywt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ds(vS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?n_t(g):f(n(g),i));u.push(y),gwt[g.type]&&y!==g&&wa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,E=String(d.spec).slice(v,_);xn(`${g}: "${E}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of V6(e))d.value(m+"",g.escape?o_t(d,g,i):lwt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function ywt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function vwt(e){return(e.table?Z8(e.table):e.join?{...Z8(e.join[1]),...Z8(e.join[0])}:{})||{}}function Z8(e){return e&&yi(e.params)?e.params():{}}const rke="Expr",lf="ExprList",ike="ExprNumber",P2="ExprObject",Sw="JoinKeys",b$="JoinValues",dc="Options",nQ="OrderKeys",Cg="SelectionList",q1="TableRef",Tw="TableRefList",bwt="Descending",_wt="Query",wwt="Selection",Ewt="Verb",xwt="Window";function a4(e,t){return e&&e.expr?new ife({...e,...t}):new ife(t,e)}class ife{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...yi(this.expr)?{func:!0}:{}}}}function Swt(e){return a4(e,{desc:!0})}function Qv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return a4(e,t?{expr:t,...r}:r)}function Twt(e,t,n){return a4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function Cwt(e){const t=n=>n;return t.toString=()=>e,t}function sfe(e,t){return t=t&&yi(t.query)?t.query():t,t&&yi(t.evaluate)?t.evaluate(null,e):e(t)}function ske(e){return wa(e)&&(hr(e.all)||hr(e.matches)||hr(e.not)||hr(e.range))}function rI(e){return e&&yi(e.toObject)?e.toObject():yi(e)?{expr:String(e),func:!0}:hr(e)?e.map(rI):wa(e)?t4(e,t=>rI(t)):e}function rQ(e){return hr(e)?e.map(rQ):wa(e)?hr(e.verbs)?sQ.from(e):hr(e.all)?rx():hr(e.range)?Qbt(...e.range):hr(e.match)?Jbt(RegExp(...e.match)):hr(e.not)?lIe(e.not.map(rI)):Awt(e):e}function Awt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Qv(n):e.func===!0&&(t=n=Cwt(n)),wa(e.window)){const{frame:r,peers:i}=e.window;t=n=Twt(n,r,i)}e.desc===!0&&(t=Swt(n))}return e===t?t4(e,r=>rQ(r)):t}function Iwt(e){return hr(e)?e.map(kwt):e}function kwt(e){const t=[];return Zu(e).forEach(n=>{ru(n)?t.push(n):Uo(n)?t.push(Qv(n,null)):wa(n)&&n.expr||yi(n)?t.push(n):xn(`Invalid key value: ${n+""}`)}),t}function Rwt(e){return hr(e)?e.map(Nwt):e}function Nwt(e,t){return t<2?Zu(e):e}function Pwt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(wa(r)&&!yi(r))for(const i in r)t.push(r[i]);else n=ru(r)?r:Uo(r)?Qv(n):yi(r)?n:xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Dwt={[rke]:lke,[lf]:sx,[ike]:jwt,[P2]:ry,[Sw]:Bwt,[b$]:Uwt,[nQ]:sx,[Cg]:Lwt};function Owt(e,t,n){return t===q1?ofe(e):t===Tw?e.map(ofe):oke(rI(e),t,n)}function oke(e,t,n){return t===dc?e&&$wt(e,n):Dwt[t](e)}function $wt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?oke(i,t[r]):i}return n}function Mwt(e,t){return nl({expr:e},{...t,ast:!0}).exprs[0]}function iQ(e){return{type:Ak,name:e}}function ake(e){return{type:Ak,index:e}}function ry(e,t){if(Uo(e))return Mwt(e,t);if(e.expr){let n;if(e.field===!0?n=iQ(e.expr):e.func===!0&&(n=ry(e.expr,t)),n)return e.desc&&(n={type:bwt,expr:n}),e.window&&(n={type:xwt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...ry(e[n],t),as:n}))}function uke(e){const t=wwt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:sx(e.not)}:e.range?{type:t,operator:"range",arguments:sx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:xn("Invalid input")}function Lwt(e){return Zu(e).map(Fwt).flat()}function Fwt(e){return ske(e)?uke(e):ru(e)?ake(e):Uo(e)?iQ(e):wa(e)?Object.keys(e).map(t=>({type:Ak,name:t,as:e[t]})):xn("Invalid input")}function lke(e){return ske(e)?uke(e):ru(e)?ake(e):Uo(e)?iQ(e):wa(e)?ry(e):xn("Invalid input")}function sx(e){return Zu(e).map(lke).flat()}function jwt(e){return ru(e)?e:ry(e)}function Bwt(e){return hr(e)?e.map(sx):ry(e,{join:!0})}function Uwt(e){return hr(e)?e.map((t,n)=>n<2?sx(t):ry(t,{join:!0})):ry(e,{join:!0})}function ofe(e){return e&&yi(e.toAST)?e.toAST():e}class cke{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Sw?Iwt(a):o===b$?Rwt(a):o===nQ?Pwt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=jz[t.verb],r=(n.schema||[]).map(({name:i})=>rQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===q1?sfe(n,o):s===Tw?o.map(a=>sfe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=rI(this[n])}),t}toAST(){const t={type:Ewt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Owt(this[n],r,i)}),t}}function Fr(e,t){return Object.assign((...n)=>new cke(e,t,n),{schema:t})}const jz={count:Fr("count",[{name:"options",type:dc}]),derive:Fr("derive",[{name:"values",type:P2},{name:"options",type:dc,props:{before:Cg,after:Cg}}]),filter:Fr("filter",[{name:"criteria",type:P2}]),groupby:Fr("groupby",[{name:"keys",type:lf}]),orderby:Fr("orderby",[{name:"keys",type:nQ}]),relocate:Fr("relocate",[{name:"columns",type:Cg},{name:"options",type:dc,props:{before:Cg,after:Cg}}]),rename:Fr("rename",[{name:"columns",type:Cg}]),rollup:Fr("rollup",[{name:"values",type:P2}]),sample:Fr("sample",[{name:"size",type:ike},{name:"options",type:dc,props:{weight:rke}}]),select:Fr("select",[{name:"columns",type:Cg}]),ungroup:Fr("ungroup"),unorder:Fr("unorder"),reify:Fr("reify"),dedupe:Fr("dedupe",[{name:"keys",type:lf,default:[]}]),impute:Fr("impute",[{name:"values",type:P2},{name:"options",type:dc,props:{expand:lf}}]),fold:Fr("fold",[{name:"values",type:lf},{name:"options",type:dc}]),pivot:Fr("pivot",[{name:"keys",type:lf},{name:"values",type:lf},{name:"options",type:dc}]),spread:Fr("spread",[{name:"values",type:lf},{name:"options",type:dc}]),unroll:Fr("unroll",[{name:"values",type:lf},{name:"options",type:dc,props:{drop:lf}}]),lookup:Fr("lookup",[{name:"table",type:q1},{name:"on",type:Sw},{name:"values",type:lf}]),join:Fr("join",[{name:"table",type:q1},{name:"on",type:Sw},{name:"values",type:b$},{name:"options",type:dc}]),cross:Fr("cross",[{name:"table",type:q1},{name:"values",type:b$},{name:"options",type:dc}]),semijoin:Fr("semijoin",[{name:"table",type:q1},{name:"on",type:Sw}]),antijoin:Fr("antijoin",[{name:"table",type:q1},{name:"on",type:Sw}]),concat:Fr("concat",[{name:"tables",type:Tw}]),union:Fr("union",[{name:"tables",type:Tw}]),intersect:Fr("intersect",[{name:"tables",type:Tw}]),except:Fr("except",[{name:"tables",type:Tw}])};let sQ=class fke extends C2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new fke(t.map(cke.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return afe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return afe(this,"toAST",{type:_wt})}};function afe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function zwt(e,t){return new sQ(e._verbs.concat(t),e._params,e._table)}for(const e in jz){const t=jz[e];sQ.prototype["__"+e]=function(n,...r){return zwt(n,t(...r))}}function CS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Vwt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function oQ(e,t){const n=ec();return t.forEach((r,i)=>{const s=Uo(r)?r:i;if(s){const o=e.column(i)||xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function dke(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||xn("relocate requires a before or after option."),i&&s&&xn("relocate accepts only one of the before or after options."),t=Pm(e,t);const o=[...Pm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),oQ(e,u)}function Mk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function aQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hwt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function qwt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function ZN(e){return GA(e)?e:+e}function Wwt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return ZN(e[0]);if(t>=1)return ZN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=ZN(e[i]);return GA(s)?s:s+(ZN(e[i+1])-s)*(r-i)}class Gwt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Hwt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:qwt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(aQ)),Wwt(this._sorted,t)}}const _$=(e,t,n)=>CS(t,"{"+Mk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function Ywt(e,t){const{ops:n,output:r}=Kwt(e,t),i=e[0].fields,s=i.length,o=s===0?uQ:s===1?Xwt:s===2?Qwt:xn("Unsupported field count: "+s);return new o(i,n,r,t)}function Kwt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=G2e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class uQ extends e_t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Gwt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Xwt extends uQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=_$(n,s,"add"),this._rem=_$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Df(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Df(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Qwt extends uQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=_$(n,s,"add"),this._rem=_$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Df(i)&&Df(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Df(i)&&Df(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Wb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=AS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function AS(e,t,n){if(!t.length)return n;const r=hke(t),i=e.groups(),s=i?i.size:1;return n=n||U6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=mke(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=pke(e,o);o.write(a,n,0)}),n}function hke(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(Ywt(r[i],t));return n}function pke(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function mke(e,t,n){const{keys:r,size:i}=n,s=U6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function gke(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function yke(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const ufe=yke(aQ);function Jwt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?CS(["w","r","k"],"{"+Mk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,E=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=ufe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=ufe.right(o,o[p.i1-1])));for(let w=0;w<d;++w){const S=i[w],x=a[w];for(let C=_;C<p.i0;++C)S.rem(x,s[C],e);for(let C=E;C<p.i1;++C)S.add(x,s[C],e);S.write(x,u,l)}return h(p,u,l),u}};return p}const Zwt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),eEt=e=>!!e.peers;function tEt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=Y2e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function nEt(e,t,n,r={},i){const s=e.data(),o=rEt(i,s),a=o.length,u=CS(["r","d","op"],"{"+Mk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=iEt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function rEt(e,t){const n={};return e.forEach(r=>{const i=Zwt(r),s=eEt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});HK(r.name)?a.push(r):u.push(tEt(r))}),Object.values(n).map(r=>Jwt(t,r.frame,r.peers,r.winOps,hke(r.aggOps,r.frame[0]!=null?-1:1)))}function iEt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function sEt(e){return qK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function lQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=ec(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=oEt(r),c=e.isGrouped()?e.groups().size:1,f=AS(e,u,U6(r.length,()=>Array(c)));return l.length?nEt(e,a,n,f,l):aEt(e,a,n,f),e.create(o)}function oEt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(sEt(s)?n:t).push(s)}return[t,n]}function aEt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function uEt(e,t,n={}){const r=lQ(e,nl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:dke(r,Object.keys(t).filter(i=>!e.column(i)),n)}function lEt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const eP=2147483648,cEt=4294967295;class vke{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&eP>>>t}set(t){this._bits[t>>5]|=eP>>>t}clear(t){this._bits[t>>5]&=~(eP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&cEt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=eP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function fEt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new vke(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function dEt(e,t){const n=nl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=lQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return fEt(e,r)}function bke(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Wb(e,r,n),l=ec(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(E=>{if(!a.has(E)){const w=l.add(E,[]);c.has(E)||(f.push(e.column(E)),d.push(w))}}),t.forEach(E=>{a.has(E)||(l.has(E)||l.add(E,[]),h.push(l.data[E]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(E,w)=>{for(let S=0;S<g;++S)d[S].length=m+w,d[S].fill(f[S].get(E),m,m+w)},_=p?(E,w)=>{for(let S=0;S<w;++S)p[E+S]=S}:()=>{};if(y===1){const E=u[0],w=h[0];e.scan((S,x)=>{const C=Zu(E(S,x)),A=Math.min(C.length,s);v(S,A);for(let I=0;I<A;++I)w[m+I]=C[I];_(m,A),m+=A})}else e.scan((E,w)=>{let S=0;const x=u.map(C=>{const A=Zu(C(E,w));return S=Math.min(Math.max(S,A.length),s),A});v(E,S);for(let C=0;C<y;++C){const A=h[C],I=x[C];for(let R=0;R<S;++R)A[m+R]=I[R]}_(m,S),m+=S});return e.create(l.new())}function hEt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Wb(e,r,n);return bke(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Jf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=ru(o)?t.columnName(o):o,Uo(o)?i.set(o,Qv(o)):yi(o)?Pm(t,o).forEach(s):wa(o)?aIe(i,o):xn(`Invalid ${e} value: ${o+""}`)};return Zu(n).forEach(s),r.preparse&&r.preparse(i),nl(i,{table:t,...r})}function pEt(e,t,n){return hEt(e,Jf("fold",e,t),n)}function lfe(e,t,n,r){const i=n&&n.length;return mEt(i?gEt(e,n,r):e,t,i)}function mEt(e,{names:t,exprs:n,ops:r},i){const s=Wb(e,r,n),o=i?null:ec(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Df(p)?p:d(h)})}),i?e:e.create(o)}function gEt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=Q3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=ec(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=Q3(o.map((p,m)=>g=>g[m])),h=CS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),cfe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else cfe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function cfe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function cQ(e,{names:t,exprs:n,ops:r}){const i=ec(),s=e.groups();return s&&gke(i,s),yEt(t,n,s,AS(e,r),i),e.create(i.new())}function yEt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function vEt(e,t,n={}){if(t=nl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:xn(`Invalid impute column ${Ah(r)}`)),n.expand){const r={preparse:bEt,aggronly:!0},i=Jf("impute",e,n.expand,r),s=cQ(e.ungroup(),i);return lfe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return lfe(e,t)}function bEt(e){e.forEach((t,n)=>t.field?e.set(n,$2e(t+"")):0)}function _Et(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function _ke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function wEt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function EEt(e,t){const n=["i","a","j","b"];return CS(n,"{"+Mk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function xEt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=ec(),g=Array(p),y=Array(p);for(let E=0;E<r.length;++E)g[E]=m.add(r[E],[]),y[E]=i[E];const v=EEt(g,y);if((hr(n)?TEt:SEt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let E=0;E<u;++E)l[E]||v(a[E],o,-1,c);if(s.right)for(let E=0;E<d;++E)h[E]||v(-1,o,f[E],c);return e.create(m.new())}function SEt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function TEt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(S,x,C,A)=>e(C,A,S,x));const E=wEt(v,m,g),w=p.length;for(let S=0;S<w;++S){const x=p[S],C=E.get(d(x,f));if(C){const A=C.length;for(let I=0;I<A;++I){const R=C[I];_(x,f,v[R],m),y[R]=1}h[S]=1}}}function w$(e,t,n){const r=new Map;Zu(n).forEach((s,o)=>{s=ru(s)?t.columnName(s):s,Uo(s)?r.set(o,Qv(s)):yi(s)||wa(s)&&s.expr?r.set(o,s):xn(`Invalid ${e} key value: ${s+""}`)});const i=nl(r,{table:t,aggregate:!1,window:!1});return Q3(i.exprs,!0)}function CEt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function fQ(e,t,n){if(n)Uo(n)?n=[n,n]:hr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=CEt(e.columnNames(),t.columnNames());r.length||xn("Natural join requires shared column names."),n=[r,r]}return n}function wke(e,t,n,r){return n.length!==r.length&&xn("Mismatched number of join keys"),[w$("join",e,n),w$("join",t,r)]}const AEt={aggregate:!1,window:!1},IEt={...AEt,index:1};function ffe(e,t,n,r,i={}){n=fQ(e,t,n);const s={join:[e,t]};let o;if(hr(n)){const[a,u]=n.map(Zu);o=wke(e,t,a,u),r||(r=kEt(e,a,u,i))}else o=nl({on:n},s).exprs[0],r||(r=[rx(),rx()]);return xEt(e,t,o,REt(e,t,r,s,i&&i.suffix),i)}function kEt(e,t,n,r){const i=[];t.forEach((o,a)=>Uo(o)&&o===n[a]?i.push(o):0);const s=lIe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Ah(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,rx()]:[rx(),s]}function REt(e,t,n,r,i=[]){if(hr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Jf("join",e,n[0],r)),u--&&(o=Jf("join",t,n[1],IEt)),u--&&(a=nl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&dfe(s.names,l,i[0]||"_1"),i[1]!==""&&dfe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return nl(n,r)}function dfe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function NEt(e,t,n,r={}){const i=new vke(e.totalRows());return(hr(n)?PEt:DEt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function PEt(e,t,n,[r,i]){const s=_ke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function DEt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function hfe(e,t,n,r){n=fQ(e,t,n);const i=hr(n)?wke(e,t,...n.map(Zu)):nl({on:n},{join:[e,t]}).exprs[0];return NEt(e,t,i,r)}function OEt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=ec(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=_ke(t,r),c=CS(["lr","rr","data"],"{"+Mk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Wb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function $Et(e,t,n,r){return n=fQ(e,t,n),OEt(e,t,[w$("lookup",e,n[0]),w$("lookup",t,n[1])],Jf("lookup",t,r))}const Bz=(e,t)=>e??t;function MEt(e,t,n,r={}){const{keys:i,keyColumn:s}=LEt(e,t,r),o=Bz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>AS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(FEt(n,a,e.groups(),u))}function LEt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=Bz(n.sort,!0),s=Bz(n.keySeparator,"_"),o=Wb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=AS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function FEt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=ec(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&gke(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function jEt(e,t,n,r){return MEt(e,Jf("fold",e,t),Jf("fold",e,n,{preparse:BEt,aggronly:!0}),r)}function BEt(e){e.forEach((t,n)=>t.field?e.set(n,P2e(t+"")):0)}function UEt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),oQ(e,Pm(e,t,n))}function pfe(e,t){return cQ(e,nl(t,{table:e,aggronly:!0,window:!1}))}function zEt(e,t,n,r){return(t?r?HEt:VEt:r?WEt:qEt)(e.length,e,n,r)}function VEt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*yS()|0];return t}function HEt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=yke(aQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*yS())];return t}function qEt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*yS();s<e&&(t[s|0]=n[i])}return t}function WEt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(yS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function GEt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=yS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function YEt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):zEt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&GEt(u),e.reify(u)}function KEt(e,t,n={}){return YEt(e,XEt(e,t),QEt(e,n.weight),n)}const Eke=e=>t=>e.get(t)||0;function XEt(e,t){return ru(t)?()=>t:Eke(cQ(e,nl({size:t},{table:e,window:!1})).column("size"))}function QEt(e,t){return t==null?null:(t=ru(t)?e.columnName(t):t,Eke(Uo(t)?e.column(t):lQ(e,nl({w:t},{table:e}),{drop:!0}).column("w")))}function JEt(e,t){return oQ(e,Pm(e,t))}function ZEt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Wb(e,r,n),l=ec(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=ext(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function ext(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Zu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function txt(e,t,n){return ZEt(e,Jf("spread",e,t),n)}function nxt(e,t){return e.concat(t).dedupe()}function rxt(e,t,n){return bke(e,Jf("unroll",e,t),n&&n.drop?{...n,drop:Jf("unroll",e,n.drop).names}:n)}function ixt(e,t){return e.create({groups:sxt(e,t)})}function sxt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Wb(e,r,n);const o=Q3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function oxt(e,t){return ixt(e,Jf("groupby",e,t))}function axt(e,t){return e.create({order:t})}const uxt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function lxt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=nl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([X3(p,{index:"a",op:o}),X3(p,{index:"b",op:a})])},window:!1}),l=AS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=uxt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function cxt(e,t){return axt(e,fxt(e,t))}function fxt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(wa(o)&&!yi(o))for(const a in o)i(o[a]);else i(ru(o)?Qv(s,e.columnName(o)):Uo(o)?Qv(s):yi(o)?s:xn(`Invalid orderby field: ${s+""}`))}),lxt(e,r)}function dxt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=ec();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function hxt(e,t){const n=ec(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?mke(e,t,r):[pke(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function pxt(e){return e.isGrouped()?e.create({groups:null}):e}function mxt(e){return e.isOrdered()?e.create({order:null}):e}const gxt={__antijoin:(e,t,n)=>hfe(e,t,n,{anti:!0}),__count:(e,t={})=>pfe(e,{[t.as||"count"]:D2e()}),__cross:(e,t,n,r)=>ffe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:dxt,__dedupe:Vwt,__derive:uEt,__except:lEt,__filter:dEt,__fold:pEt,__impute:vEt,__intersect:_Et,__join:ffe,__lookup:$Et,__pivot:jEt,__relocate:dke,__rename:UEt,__rollup:pfe,__sample:KEt,__select:JEt,__semijoin:hfe,__spread:txt,__union:nxt,__unroll:rxt,__groupby:oxt,__orderby:cxt,__ungroup:pxt,__unorder:mxt,__reduce:hxt};Object.assign(Up.prototype,gxt);function xke(e,t){return Up.from(e,t)}function eE(e){return a4(e,{escape:!0,toString(){xn("Escaped values can not be serialized.")}})}Up.prototype;function Af(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function iy(e){return!!e&&!!e[xi]}function $m(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Txt}(e)||Array.isArray(e)||!!e[wfe]||!!(!((t=e.constructor)===null||t===void 0)&&t[wfe])||dQ(e)||hQ(e))}function Jv(e,t,n){n===void 0&&(n=!1),IS(e)===0?(n?Object.keys:nE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function IS(e){var t=e[xi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:dQ(e)?2:hQ(e)?3:0}function tE(e,t){return IS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function yxt(e,t){return IS(e)===2?e.get(t):e[t]}function Ske(e,t,n){var r=IS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Tke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function dQ(e){return xxt&&e instanceof Map}function hQ(e){return Sxt&&e instanceof Set}function M1(e){return e.o||e.t}function pQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ake(e);delete t[xi];for(var n=nE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function mQ(e,t){return t===void 0&&(t=!1),gQ(e)||iy(e)||!$m(e)||(IS(e)>1&&(e.set=e.add=e.clear=e.delete=vxt),Object.freeze(e),t&&Jv(e,function(n,r){return mQ(r,!0)},!0)),e}function vxt(){Af(2)}function gQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function fh(e){var t=Hz[e];return t||Af(18,e),t}function bxt(e,t){Hz[e]||(Hz[e]=t)}function Uz(){return iI}function e9(e,t){t&&(fh("Patches"),e.u=[],e.s=[],e.v=t)}function E$(e){zz(e),e.p.forEach(_xt),e.p=null}function zz(e){e===iI&&(iI=e.l)}function mfe(e){return iI={p:[],l:iI,h:e,m:!0,_:0}}function _xt(e){var t=e[xi];t.i===0||t.i===1?t.j():t.g=!0}function t9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||fh("ES5").S(t,e,r),r?(n[xi].P&&(E$(t),Af(4)),$m(e)&&(e=x$(t,e),t.l||S$(t,e)),t.u&&fh("Patches").M(n[xi].t,e,t.u,t.s)):e=x$(t,n,[]),E$(t),t.u&&t.v(t.u,t.s),e!==Cke?e:void 0}function x$(e,t,n){if(gQ(t))return t;var r=t[xi];if(!r)return Jv(t,function(a,u){return gfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return S$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=pQ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Jv(s,function(a,u){return gfe(e,r,i,a,u,n,o)}),S$(e,i,!1),n&&e.u&&fh("Patches").N(r,n,e.u,e.s)}return r.o}function gfe(e,t,n,r,i,s,o){if(iy(i)){var a=x$(e,i,s&&t&&t.i!==3&&!tE(t.R,r)?s.concat(r):void 0);if(Ske(n,r,a),!iy(a))return;e.m=!1}else o&&n.add(i);if($m(i)&&!gQ(i)){if(!e.h.D&&e._<1)return;x$(e,i),t&&t.A.l||S$(e,i)}}function S$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&mQ(t,n)}function n9(e,t){var n=e[xi];return(n?M1(n):e)[t]}function yfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Hg(e){e.P||(e.P=!0,e.l&&Hg(e.l))}function r9(e){e.o||(e.o=pQ(e.t))}function Vz(e,t,n){var r=dQ(t)?fh("MapSet").F(t,n):hQ(t)?fh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Uz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=sI;o&&(u=[a],l=D2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):fh("ES5").J(t,n);return(n?n.A:Uz()).p.push(r),r}function wxt(e){return iy(e)||Af(22,e),function t(n){if(!$m(n))return n;var r,i=n[xi],s=IS(n);if(i){if(!i.P&&(i.i<4||!fh("ES5").K(i)))return i.t;i.I=!0,r=vfe(n,s),i.I=!1}else r=vfe(n,s);return Jv(r,function(o,a){i&&yxt(i.t,o)===a||Ske(r,o,t(a))}),s===3?new Set(r):r}(e)}function vfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return pQ(e)}function Ext(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[xi];return sI.get(u,s)},set:function(u){var l=this[xi];sI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][xi];if(!a.P)switch(a.i){case 5:r(a)&&Hg(a);break;case 4:n(a)&&Hg(a)}}}function n(s){for(var o=s.t,a=s.k,u=nE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==xi){var f=o[c];if(f===void 0&&!tE(o,c))return!0;var d=a[c],h=d&&d[xi];if(h?h.t!==f:!Tke(d,f))return!0}}var p=!!o[xi];return u.length!==nE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};bxt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Ake(f);delete p[xi];for(var m=nE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Uz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,xi,{value:l,writable:!0}),u},S:function(s,o,a){a?iy(o)&&o[xi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[xi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Jv(d,function(_){_!==xi&&(f[_]!==void 0||tE(f,_)?h[_]||u(d[_]):(h[_]=!0,Hg(c)))}),Jv(f,function(_){d[_]!==void 0||tE(d,_)||(h[_]=!1,Hg(c))});else if(p===5){if(r(c)&&(Hg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var bfe,iI,yQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xxt=typeof Map<"u",Sxt=typeof Set<"u",_fe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Cke=yQ?Symbol.for("immer-nothing"):((bfe={})["immer-nothing"]=!0,bfe),wfe=yQ?Symbol.for("immer-draftable"):"__$immer_draftable",xi=yQ?Symbol.for("immer-state"):"__$immer_state",Txt=""+Object.prototype.constructor,nE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ake=Object.getOwnPropertyDescriptors||function(e){var t={};return nE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Hz={},sI={get:function(e,t){if(t===xi)return e;var n=M1(e);if(!tE(n,t))return function(i,s,o){var a,u=yfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$m(r)?r:r===n9(e.t,t)?(r9(e),e.o[t]=Vz(e.A.h,r,e)):r},has:function(e,t){return t in M1(e)},ownKeys:function(e){return Reflect.ownKeys(M1(e))},set:function(e,t,n){var r=yfe(M1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=n9(M1(e),t),s=i==null?void 0:i[xi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Tke(n,i)&&(n!==void 0||tE(e.t,t)))return!0;r9(e),Hg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return n9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,r9(e),Hg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=M1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Af(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Af(12)}},D2={};Jv(sI,function(e,t){D2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),D2.deleteProperty=function(e,t){return D2.set.call(this,e,t,void 0)},D2.set=function(e,t,n){return sI.set.call(this,e[0],t,n,e[0])};var Cxt=function(){function e(n){var r=this;this.O=_fe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(E){var w;return(w=s).call.apply(w,[g,E].concat(v))})}}var l;if(typeof s!="function"&&Af(6),o!==void 0&&typeof o!="function"&&Af(7),$m(i)){var c=mfe(r),f=Vz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?E$(c):zz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return e9(c,o),t9(m,c)},function(m){throw E$(c),m}):(e9(c,o),t9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Cke&&(l=void 0),r.D&&mQ(l,!0),o){var h=[],p=[];fh("Patches").M(i,l,h,p),o(h,p)}return l}Af(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$m(n)||Af(8),iy(n)&&(n=wxt(n));var r=mfe(this),i=Vz(this,n,void 0);return i[xi].C=!0,zz(r),i},t.finishDraft=function(n,r){var i=n&&n[xi],s=i.A;return e9(s,r),t9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!_fe&&Af(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=fh("Patches").$;return iy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),zl=new Cxt,Ike=zl.produce;zl.produceWithPatches.bind(zl);zl.setAutoFreeze.bind(zl);zl.setUseProxies.bind(zl);zl.applyPatches.bind(zl);zl.createDraft.bind(zl);zl.finishDraft.bind(zl);function oI(e){"@babel/helpers - typeof";return oI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oI(e)}function Axt(e,t){if(oI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(oI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ixt(e){var t=Axt(e,"string");return oI(t)=="symbol"?t:t+""}function kxt(e,t,n){return(t=Ixt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Efe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Efe(Object(n),!0).forEach(function(r){kxt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Efe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),i9=function(){return Math.random().toString(36).substring(7).split("").join(".")},T$={INIT:"@@redux/INIT"+i9(),REPLACE:"@@redux/REPLACE"+i9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i9()}};function Rxt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function kke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sa(1));return n(kke)(e,t)}if(typeof e!="function")throw new Error(sa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(sa(3));return s}function f(m){if(typeof m!="function")throw new Error(sa(4));if(u)throw new Error(sa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(sa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Rxt(m))throw new Error(sa(7));if(typeof m.type>"u")throw new Error(sa(8));if(u)throw new Error(sa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(sa(10));i=m,d({type:T$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(sa(11));function _(){v.next&&v.next(c())}_();var E=g(_);return{unsubscribe:E}}},m[Sfe]=function(){return this},m}return d({type:T$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Sfe]=p,r}function Nxt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:T$.INIT});if(typeof r>"u")throw new Error(sa(12));if(typeof n(void 0,{type:T$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function Pxt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Nxt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(sa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function C$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Dxt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(sa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=C$.apply(void 0,a)(i.dispatch),xfe(xfe({},i),{},{dispatch:s})}}}function Rke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var qz=Rke();qz.withExtraArgument=Rke;var Nke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Zv=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Oxt=Object.defineProperty,$xt=Object.defineProperties,Mxt=Object.getOwnPropertyDescriptors,Tfe=Object.getOwnPropertySymbols,Lxt=Object.prototype.hasOwnProperty,Fxt=Object.prototype.propertyIsEnumerable,Cfe=function(e,t,n){return t in e?Oxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},T0=function(e,t){for(var n in t||(t={}))Lxt.call(t,n)&&Cfe(e,n,t[n]);if(Tfe)for(var r=0,i=Tfe(t);r<i.length;r++){var n=i[r];Fxt.call(t,n)&&Cfe(e,n,t[n])}return e},s9=function(e,t){return $xt(e,Mxt(t))},Fk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},jxt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?C$:C$.apply(null,arguments)};function Pke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Bxt=function(e){return e&&typeof e.match=="function"};function dh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return T0(T0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Uxt(e){return Pke(e)&&"type"in e}var zxt=function(e){Nke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Zv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Zv([void 0],n.concat(this))))},t}(Array),Vxt=function(e){Nke(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Zv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Zv([void 0],n.concat(this))))},t}(Array);function Wz(e){return $m(e)?Ike(e,function(){}):e}function Hxt(e){return typeof e=="boolean"}function qxt(){return function(t){return Wxt(t)}}function Wxt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new zxt;return n&&(Hxt(n)?r.push(qz):r.push(qz.withExtraArgument(n.extraArgument))),r}var Gxt=!0;function Yxt(e){var t=qxt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Pke(i))h=Pxt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Dxt.apply(void 0,p),g=C$;u&&(g=jxt(T0({trace:!Gxt},typeof u=="object"&&u)));var y=new Vxt(m),v=y;Array.isArray(d)?v=Zv([m],d):typeof d=="function"&&(v=d(y));var _=g.apply(void 0,v);return kke(h,c,_)}function Dke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Kxt(e){return typeof e=="function"}function Xxt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Dke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Kxt(e))u=function(){return Wz(e())};else{var l=Wz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Zv([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(iy(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if($m(p))return Ike(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Qxt(e,t){return e+"/"+t}function Jxt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:Wz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Qxt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?dh(d,p):dh(d)});function u(){var c=typeof e.extraReducers=="function"?Dke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=T0(T0({},d),o);return Xxt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var E=0,w=p;E<w.length;E++){var S=w[E];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Zxt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Oke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Zxt[Math.random()*64|0];return t},eSt=["name","message","stack","code"],o9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Afe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),tSt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=eSt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=dh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:s9(T0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=dh(t+"/pending",function(l,c,f){return{payload:void 0,meta:s9(T0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=dh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||tSt)(l||"Rejected"),meta:s9(T0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Oke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return Fk(this,null,function(){var v,_,E,w,S,x,C;return Lk(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),w=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),rSt(w)?[4,w]:[3,2];case 1:w=A.sent(),A.label=2;case 2:if(w===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new o9(I,R)},fulfillWithValue:function(I,R){return new Afe(I,R)}})).then(function(I){if(I instanceof o9)throw I;return I instanceof Afe?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return E=A.sent(),[3,5];case 4:return x=A.sent(),E=x instanceof o9?o(null,h,l,x.payload,x.meta):o(x,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,C||c(E),[2,E]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(nSt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function nSt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function rSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var iSt=function(e,t){return Bxt(e)?e.match(t):e(t)};function Ife(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return iSt(r,n)})}}var vQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Gz=function(){},$ke=function(e,t){return t===void 0&&(t=Gz),e.catch(t),e},Mke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},rE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},sSt="task",Lke="listener",Fke="completed",bQ="cancelled",oSt="task-"+bQ,aSt="task-"+Fke,jke=Lke+"-"+bQ,uSt=Lke+"-"+Fke,u4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=sSt+" "+bQ+" (reason: "+t+")"}return e}(),iE=function(e){if(e.aborted)throw new u4(e.reason)};function Bke(e,t){var n=Gz;return new Promise(function(r,i){var s=function(){return i(new u4(e.reason))};if(e.aborted){s();return}n=Mke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Gz})}var lSt=function(e,t){return Fk(void 0,null,function(){var n,r;return Lk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof u4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},A$=function(e){return function(t){return $ke(Bke(e,t).then(function(n){return iE(e),n}))}},Uke=function(e){var t=A$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},cSt=Object.assign,kfe={},jk="listenerMiddleware",fSt=function(e,t){var n=function(r){return Mke(e,function(){return rE(r,e.reason)})};return function(r,i){vQ(r,"taskExecutor");var s=new AbortController;n(s);var o=lSt(function(){return Fk(void 0,null,function(){var a;return Lk(this,function(u){switch(u.label){case 0:return iE(e),iE(s.signal),[4,r({pause:A$(s.signal),delay:Uke(s.signal),signal:s.signal})];case 1:return a=u.sent(),iE(s.signal),[2,a]}})})},function(){return rE(s,aSt)});return i!=null&&i.autoJoin&&t.push(o),{result:A$(e)(o),cancel:function(){rE(s,oSt)}}}},dSt=function(e,t){var n=function(r,i){return Fk(void 0,null,function(){var s,o,a,u;return Lk(this,function(l){switch(l.label){case 0:iE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Bke(t,Promise.race(a))];case 2:return u=l.sent(),iE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return $ke(n(r,i))}},zke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=dh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return vQ(s,"options.listener"),{predicate:i,type:t,effect:s}},hSt=function(e){var t=zke(e),n=t.type,r=t.predicate,i=t.effect,s=Oke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Yz=function(e){e.pending.forEach(function(t){rE(t,jke)})},pSt=function(e){return function(){e.forEach(Yz),e.clear()}},Rfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},mSt=dh(jk+"/add"),gSt=dh(jk+"/removeAll"),ySt=dh(jk+"/remove"),vSt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Zv([jk+"/error"],e))};function bSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?vSt:i;vQ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Yz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=hSt(h)),o(p)},l=function(h){var p=zke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var E=typeof m=="string"?_.type===m:_.predicate===y;return E&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&Yz(v)),!!v},c=function(h,p,m,g){return Fk(t,null,function(){var y,v,_,E;return Lk(this,function(w){switch(w.label){case 0:y=new AbortController,v=dSt(u,y.signal),_=[],w.label=1;case 1:return w.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,cSt({},m,{getOriginalState:g,condition:function(S,x){return v(S,x).then(Boolean)},take:v,delay:Uke(y.signal),pause:A$(y.signal),extra:r,signal:y.signal,fork:fSt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,x,C){S!==y&&(rE(S,jke),C.delete(S))})}})))];case 2:return w.sent(),[3,6];case 3:return E=w.sent(),E instanceof u4||Rfe(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return w.sent(),rE(y,uSt),h.pending.delete(y),[7];case 6:return[2]}})})},f=pSt(n),d=function(h){return function(p){return function(m){if(!Uxt(m))return p(m);if(mSt.match(m))return u(m.payload);if(gSt.match(m)){f();return}if(ySt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===kfe)throw new Error(jk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),E=Array.from(n.values()),w=0,S=E;w<S.length;w++){var x=S[w],C=!1;try{C=x.predicate(m,_,g)}catch(A){C=!1,Rfe(s,A,{raisedBy:"predicate"})}C&&c(x,m,h,y)}}finally{g=kfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Nfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Ext();function _St(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let tP;const wSt=new Uint8Array(16);function ESt(){if(!tP&&(tP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tP(wSt)}const _o=[];for(let e=0;e<256;++e)_o.push((e+256).toString(16).slice(1));function xSt(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}const SSt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pfe={randomUUID:SSt};function Dfe(e,t,n){if(Pfe.randomUUID&&!t&&!e)return Pfe.randomUUID();e=e||{};const r=e.random||(e.rng||ESt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,xSt(r)}class hh{static get(){let t=Dfe();for(;this.ids.has(t);)t=Dfe();return this.ids.set(t,!0),t}}hh.ids=new Map;function ph(e){return"parent"in e}function TSt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:hh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:hh.get(),createdOn:Date.now(),val:r}]:[];return{id:hh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function CSt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:hh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:hh.get(),createdOn:Date.now(),val:s}]:[];return{id:hh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=$St[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function eb(e){return!!e&&!!e[Vl]}function sy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===MSt}(e)||Array.isArray(e)||!!e[RC]||!!(!((t=e.constructor)===null||t===void 0)&&t[RC])||l4(e)||c4(e))}function ox(e,t,n){n===void 0&&(n=!1),oy(e)===0?(n?Object.keys:TQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function oy(e){var t=e[Vl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:l4(e)?2:c4(e)?3:0}function aI(e,t){return oy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ID(e,t){return oy(e)===2?e.get(t):e[t]}function Vke(e,t,n){var r=oy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function ASt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function l4(e){return DSt&&e instanceof Map}function c4(e){return OSt&&e instanceof Set}function L1(e){return e.o||e.t}function _Q(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=LSt(e);delete t[Vl];for(var n=TQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function wQ(e,t){return t===void 0&&(t=!1),EQ(e)||eb(e)||!sy(e)||(oy(e)>1&&(e.set=e.add=e.clear=e.delete=ISt),Object.freeze(e),t&&ox(e,function(n,r){return wQ(r,!0)},!0)),e}function ISt(){Ki(2)}function EQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function mh(e){var t=Jz[e];return t||Ki(18,e),t}function kSt(e,t){Jz[e]||(Jz[e]=t)}function Ofe(){return{}.NODE_ENV==="production"||ax||Ki(0),ax}function a9(e,t){t&&(mh("Patches"),e.u=[],e.s=[],e.v=t)}function I$(e){Kz(e),e.p.forEach(RSt),e.p=null}function Kz(e){e===ax&&(ax=e.l)}function $fe(e){return ax={p:[],l:ax,h:e,m:!0,_:0}}function RSt(e){var t=e[Vl];t.i===0||t.i===1?t.j():t.O=!0}function u9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||mh("ES5").S(t,e,r),r?(n[Vl].P&&(I$(t),Ki(4)),sy(e)&&(e=k$(t,e),t.l||R$(t,e)),t.u&&mh("Patches").M(n[Vl].t,e,t.u,t.s)):e=k$(t,n,[]),I$(t),t.u&&t.v(t.u,t.s),e!==SQ?e:void 0}function k$(e,t,n){if(EQ(t))return t;var r=t[Vl];if(!r)return ox(t,function(s,o){return Mfe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return R$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=_Q(r.k):r.o;ox(r.i===3?new Set(i):i,function(s,o){return Mfe(e,r,i,s,o,n)}),R$(e,i,!1),n&&e.u&&mh("Patches").R(r,n,e.u,e.s)}return r.o}function Mfe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ki(5),eb(i)){var o=k$(e,i,s&&t&&t.i!==3&&!aI(t.D,r)?s.concat(r):void 0);if(Vke(n,r,o),!eb(o))return;e.m=!1}if(sy(i)&&!EQ(i)){if(!e.h.F&&e._<1)return;k$(e,i),t&&t.A.l||R$(e,i)}}function R$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&wQ(t,n)}function l9(e,t){var n=e[Vl];return(n?L1(n):e)[t]}function Lfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Xz(e){e.P||(e.P=!0,e.l&&Xz(e.l))}function c9(e){e.o||(e.o=_Q(e.t))}function Qz(e,t,n){var r=l4(t)?mh("MapSet").N(t,n):c4(t)?mh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Ofe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Zz;o&&(u=[a],l=O2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):mh("ES5").J(t,n);return(n?n.A:Ofe()).p.push(r),r}function NSt(e){return eb(e)||Ki(22,e),function t(n){if(!sy(n))return n;var r,i=n[Vl],s=oy(n);if(i){if(!i.P&&(i.i<4||!mh("ES5").K(i)))return i.t;i.I=!0,r=Ffe(n,s),i.I=!1}else r=Ffe(n,s);return ox(r,function(o,a){i&&ID(i.t,o)===a||Vke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ffe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _Q(e)}function PSt(){function e(r){if(!sy(r))return r;if(Array.isArray(r))return r.map(e);if(l4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(c4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return aI(r,RC)&&(i[RC]=r[RC]),i}function t(r){return eb(r)?e(r):r}var n="add";kSt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=oy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ki(24),typeof u=="function"&&f==="prototype"&&Ki(24),typeof(u=ID(u,f))!="object"&&Ki(15,o.join("/"))}var d=oy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;ox(a.D,function(h,p){var m=ID(f,h),g=ID(d,h),y=p?aI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===SQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var jfe,ax,xQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",DSt=typeof Map<"u",OSt=typeof Set<"u",Bfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",SQ=xQ?Symbol.for("immer-nothing"):((jfe={})["immer-nothing"]=!0,jfe),RC=xQ?Symbol.for("immer-draftable"):"__$immer_draftable",Vl=xQ?Symbol.for("immer-state"):"__$immer_state",$St={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},MSt=""+Object.prototype.constructor,TQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,LSt=Object.getOwnPropertyDescriptors||function(e){var t={};return TQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Jz={},Zz={get:function(e,t){if(t===Vl)return e;var n=L1(e);if(!aI(n,t))return function(i,s,o){var a,u=Lfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!sy(r)?r:r===l9(e.t,t)?(c9(e),e.o[t]=Qz(e.A.h,r,e)):r},has:function(e,t){return t in L1(e)},ownKeys:function(e){return Reflect.ownKeys(L1(e))},set:function(e,t,n){var r=Lfe(L1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=l9(L1(e),t),s=i==null?void 0:i[Vl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(ASt(n,i)&&(n!==void 0||aI(e.t,t)))return!0;c9(e),Xz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return l9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,c9(e),Xz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=L1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ki(12)}},O2={};ox(Zz,function(e,t){O2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),O2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ki(13),O2.set.call(this,e,t,void 0)},O2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ki(14),Zz.set.call(this,e[0],t,n,e[0])};var FSt=function(){function e(n){var r=this;this.g=Bfe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(E){var w;return(w=s).call.apply(w,[g,E].concat(v))})}}var l;if(typeof s!="function"&&Ki(6),o!==void 0&&typeof o!="function"&&Ki(7),sy(i)){var c=$fe(r),f=Qz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?I$(c):Kz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return a9(c,o),u9(m,c)},function(m){throw I$(c),m}):(a9(c,o),u9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===SQ&&(l=void 0),r.F&&wQ(l,!0),o){var h=[],p=[];mh("Patches").M(i,l,h,p),o(h,p)}return l}Ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){sy(n)||Ki(8),eb(n)&&(n=NSt(n));var r=$fe(this),i=Qz(this,n,void 0);return i[Vl].C=!0,Kz(r),i},t.finishDraft=function(n,r){var i=n&&n[Vl];({}).NODE_ENV!=="production"&&(i&&i.C||Ki(9),i.I&&Ki(10));var s=i.A;return a9(s,r),u9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Bfe&&Ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=mh("Patches").$;return eb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Hl=new FSt,jSt=Hl.produce;Hl.produceWithPatches.bind(Hl);Hl.setAutoFreeze.bind(Hl);Hl.setUseProxies.bind(Hl);Hl.applyPatches.bind(Hl);Hl.createDraft.bind(Hl);Hl.finishDraft.bind(Hl);function BSt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=TSt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Jxt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:hh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:hh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function USt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=BSt(e),s=bSt();s.startListening({matcher:Ife(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Ife(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Yxt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:hh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var zSt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VSt=Object.prototype.hasOwnProperty;function eV(e,t){return VSt.call(e,t)}function tV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)eV(e,i)&&r.push(i);return r}function Fu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function nV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function F1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Hke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function rV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(rV(e[t]))return!0}else if(typeof e=="object"){for(var r=tV(e),i=r.length,s=0;s<i;s++)if(rV(e[r[s]]))return!0}}return!1}function Ufe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var qke=function(e){zSt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Ufe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Ufe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=qke,HSt=Fu,Cw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=N$(n,this.path);r&&(r=Fu(r));var i=Cv(n,{op:"remove",path:this.from}).removed;return Cv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=N$(n,this.from);return Cv(n,{op:"add",path:this.path,value:Fu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:uI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},qSt={add:function(e,t,n){return nV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Cw.move,copy:Cw.copy,test:Cw.test,_get:Cw._get};function N$(e,t){if(t=="")return e;var n={op:"_get",path:t};return Cv(e,n),n.value}function Cv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):P$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=N$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=uI(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Fu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=P$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=Hke(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!nV(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);nV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=qSt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Cw[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function f4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Fu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Cv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function WSt(e,t,n){var r=Cv(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function P$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Cw[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&rV(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=Wke([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Wke(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)f4(Fu(t),Fu(e),n||!0);else{n=n||P$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function uI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!uI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!uI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const GSt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:uI,applyOperation:Cv,applyPatch:f4,applyReducer:WSt,deepClone:HSt,getValueByPointer:N$,validate:Wke,validator:P$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var CQ=new WeakMap,YSt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),KSt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function XSt(e){return CQ.get(e)}function QSt(e,t){return e.observers.get(t)}function JSt(e,t){e.observers.delete(t.callback)}function ZSt(e,t){t.unobserve()}function eTt(e,t){var n=[],r,i=XSt(e);if(!i)i=new YSt(e),CQ.set(e,i);else{var s=QSt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Fu(e),t){r.callback=t,r.next=null;var o=function(){iV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){iV(r),clearTimeout(r.next),JSt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new KSt(t,r)),r}function iV(e,t){t===void 0&&(t=!1);var n=CQ.get(e.object);AQ(n.value,e.object,e.patches,"",t),e.patches.length&&f4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function AQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=tV(t),o=tV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(eV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?AQ(c,f,n,r+"/"+F1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+F1(l),value:Fu(c)}),n.push({op:"replace",path:r+"/"+F1(l),value:Fu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+F1(l),value:Fu(c)}),n.push({op:"remove",path:r+"/"+F1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!eV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+F1(l),value:Fu(t[l])})}}}function Gke(e,t,n){n===void 0&&(n=!1);var r=[];return AQ(e,t,r,"",n),r}const tTt=Object.freeze(Object.defineProperty({__proto__:null,compare:Gke,generate:iV,observe:eTt,unobserve:ZSt},Symbol.toStringTag,{value:"Module"}));Object.assign({},GSt,tTt,{JsonPatchError:qke,deepClone:Fu,escapePathComponent:F1,unescapePathComponent:Hke});var $2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))($2||{});function kD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=Yke(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=kD(i,t);return f4(a,Fu(o),!0,!1).newDocument}function nTt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function IQ({registry:e,initialState:t}){let n=!1;const r=_St(),i=USt(t);function s(c){return i.backend.nodes[c]}r.listen($2.TRAVERSAL_START,()=>{n=!0}),r.listen($2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return kD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=kD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=Gke(y,f);if(nTt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=CSt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=kD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire($2.TRAVERSAL_START);const f=Yke(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);iTt(p,m)?ph(p)&&d.push(...p.sideEffects.undo):ph(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire($2.TRAVERSAL_END)},undo(){const{current:c}=i;return ph(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return Kke(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function rTt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;ph(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)ph(r)&&(r=n[r.parent]),ph(i)&&(i=n[i.parent]);return r.id}function Yke(e,t,n){const r=rTt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),ph(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),ph(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function iTt(e,t){if(ph(e)&&e.parent===t.id)return!0;if(ph(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function Kke(e,t){return{...e,children:e.children.map(n=>Kke(t[n],t)),name:`${e.label}`}}PSt();function sTt(e){return e.length===2?jSt(e):e}class Bk{static create(){return new Bk}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:sTt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),dh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var oTt="Expected a function",zfe=NaN,aTt="[object Symbol]",uTt=/^\s+|\s+$/g,lTt=/^[-+]0x[0-9a-f]+$/i,cTt=/^0b[01]+$/i,fTt=/^0o[0-7]+$/i,dTt=parseInt,hTt=typeof no=="object"&&no&&no.Object===Object&&no,pTt=typeof self=="object"&&self&&self.Object===Object&&self,mTt=hTt||pTt||Function("return this")(),gTt=Object.prototype,yTt=gTt.toString,vTt=Math.max,bTt=Math.min,f9=function(){return mTt.Date.now()};function _Tt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(oTt);t=Vfe(t)||0,sV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?vTt(Vfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var x=r,C=i;return r=i=void 0,l=S,o=e.apply(C,x),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var x=S-u,C=S-l,A=t-x;return f?bTt(A,s-C):A}function g(S){var x=S-u,C=S-l;return u===void 0||x>=t||x<0||f&&C>=s}function y(){var S=f9();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function E(){return a===void 0?o:v(f9())}function w(){var S=f9(),x=g(S);if(r=arguments,i=this,u=S,x){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return w.cancel=_,w.flush=E,w}function sV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function wTt(e){return!!e&&typeof e=="object"}function ETt(e){return typeof e=="symbol"||wTt(e)&&yTt.call(e)==aTt}function Vfe(e){if(typeof e=="number")return e;if(ETt(e))return zfe;if(sV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=sV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(uTt,"");var n=cTt.test(e);return n||fTt.test(e)?dTt(e.slice(2),n?2:8):lTt.test(e)?zfe:+e}var xTt=_Tt;const hf=Xl(xTt);function Xke({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=k.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=k.useMemo(()=>jy(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Ll,{children:b.jsx(si,{gap:3,children:b.jsx(Ke,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const STt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:Xke},Symbol.toStringTag,{value:"Module"})),d9=15;function Qke({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=k.useState([0,0]),[l,c]=k.useState(!1);return k.useEffect(()=>{const f=dr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<d9&&Math.abs(t(g[r.y])-p[1])<d9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),b.jsx("circle",{style:{cursor:l?"pointer":"default"},r:d9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const TTt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:Qke},Symbol.toStringTag,{value:"Module"})),vi={top:15,left:100,right:15,bottom:70};function oV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Bf(),[c]=Bf(),[f]=Bf(),[d,h]=k.useState(!0),p=k.useMemo(()=>l-vi.left-vi.right,[l]),m=k.useMemo(()=>u-vi.top-vi.bottom,[u]),g=k.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Uy(M6).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:E}=k.useMemo(()=>{const I=s.map(M=>+M[i.x]).filter(M=>M!==null),[R,O]=s3(I),D=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=s3(D);return{xMin:R,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),w=k.useMemo(()=>{const I=_-y;return p<=0?null:i.dataType==="date"?PK([vi.left,p+vi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Lc([vi.left,p+vi.left]).domain([y-I/10,_+I/10]).nice()},[i.dataType,p,_,y]),S=k.useMemo(()=>{const I=E-v;return m<=0?null:Lc([m+vi.top,vi.top]).domain([v-I/10,E+I/10]).nice()},[m,E,v]),x=k.useMemo(()=>{if(!w||!S)return()=>null;if(r==="Axis Selection"){const I=PSe().extent([[vi.left,vi.top+m-5],[vi.left+p,vi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],w,S,O.mode)}),R=DSe().extent([[vi.left-5,vi.top],[vi.left+5,vi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],w,S,O.mode)});return c.current&&f.current&&(dr(f.current).call(R),dr(c.current).call(I),t.hasBrush||(dr(f.current).call(R.move,[S(E),S(v)]),dr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(E)],[w(new Date("2015-12-31")),S(v)]],w,S,"drag"))),()=>{dr(f.current).call(R.move,[S(E),S(v)]),dr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(E)],[w(new Date("2015-12-31")),S(v)]],w,S,"clear")}}if(r==="Rectangular Selection"){const I=OSe().extent([[vi.left,vi.top],[vi.left+p,vi.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],w,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(dr(a.current).call(I.move,null),e(null))});return dr(a.current).call(I),()=>{dr(a.current).call(I.move,null),n([[null,null],[null,null]],w,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[w(y),S(E)],[w(_),S(v)]],w,S,null),()=>n([[w(y),S(E)],[w(_),S(v)]],w,S,"clear")):r==="Paintbrush Selection"?()=>n([[w(y),S(E)],[w(_),S(v)]],w,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,w,E,v,S]),C=k.useMemo(()=>o.length===0?null:new Set(o),[o]),A=k.useMemo(()=>!w||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const O=i.dataType==="date"?w(new Date(I[i.x])):w(I[i.x]);return b.jsx("circle",{opacity:C&&!C.has(I[i.ids])?.3:1,r:3,fill:C&&!C.has(I[i.ids])?"lightgray":g(I[i.category]),cx:O,cy:S(I[i.y])},R)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,w,S]);return k.useEffect(()=>{r==="Axis Selection"&&Jxe(".handle").style("fill","darkgrey")},[t,r]),b.jsxs(Wa,{children:[b.jsxs(si,{children:[b.jsx(en,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?b.jsx(KL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),b.jsxs(si,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w&&S?b.jsxs("g",{children:[b.jsx(Xke,{yScale:S,label:i.y,horizontalPosition:vi.left,xRange:w.range()}),b.jsx(UK,{xScale:w,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+vi.top,label:i.x,ticks:w.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:w(I)}))})]}):null,A,b.jsx("g",{id:"brushXRef",ref:c}),b.jsx("g",{id:"brushYRef",ref:f}),w&&S&&r==="Paintbrush Selection"?b.jsx(Qke,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:w,yScale:S}):null]}),r==="Slider Selection"&&w&&S?b.jsxs(Wa,{style:{flexGrow:1},gap:50,children:[b.jsxs(Wa,{gap:0,children:[b.jsx(Ke,{children:i.x}),b.jsx(DE,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[w(I[0]),t.y1],[w(I[1]),t.y2]],w,S,"drag")},style:{width:"300px"},marks:w.ticks(5).map(I=>({value:I,label:I})),value:[w.invert(t.x1),w.invert(t.x2)]})]}),b.jsxs(Wa,{gap:0,children:[b.jsx(Ke,{children:i.y}),b.jsx(DE,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],w,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const CTt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:oV,default:oV},Symbol.toStringTag,{value:"Module"}));function Hfe({parameters:e,setAnswer:t}){const[n,r]=k.useState(null),[i,s]=k.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=k.useState(null);k.useEffect(()=>{FSe(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=k.useMemo(()=>o?xke(o):null,[o]),{actions:l,trrack:c}=k.useMemo(()=>{const g=Bk.create(),y=g.register("brush",(S,x)=>(S.all={brush:x},S)),v=g.register("brushMove",(S,x)=>(S.all={brush:x},S)),_=g.register("brushResize",(S,x)=>(S.all={brush:x},S)),E=g.register("brushClear",(S,x)=>(S.all={brush:x},S)),w=IQ({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:E},trrack:w}},[]),f=k.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=k.useMemo(()=>hf(f,100,{maxWait:100}),[f]),h=k.useCallback((g,y,v,_,E)=>{if(!y||!v)return;const w=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let A=null;if(_==="clear")A=u;else if(E){const R=new Set(E);A=u.filter(eE(O=>R.has(O[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(eE(R=>new Date(R[e.x])>=new Date(w)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=x&&R[e.y]<=C)):A=u.filter(eE(R=>R[e.x]>=w&&R[e.x]<=S&&R[e.y]>=x&&R[e.y]<=C));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?A==null?void 0:A.array("id"):[]};s(I),_==="drag"||_==="handle"?d(_,I):_==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=k.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=k.useCallback(g=>{r(g)},[]);return o?b.jsxs(Wa,{gap:"xs",children:[b.jsx(oV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),b.jsx(yz,{data:o,parameters:e,barsTable:p})]}):b.jsx(Wc,{})}const ATt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Hfe,default:Hfe},Symbol.toStringTag,{value:"Module"})),ITt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),qfe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},kS=e=>{const t=k.useRef(null),n=qfe(e),[r,i]=k.useState(0),[s,o]=k.useState(0);k.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=qfe({...n,width:n.width||r,height:n.height||s});return[t,a]},kTt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:kS},Symbol.toStringTag,{value:"Module"}));function Jke({data:e,xScale:t,yScale:n,height:r}){return b.jsx("g",{children:e.map((i,s)=>b.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const RTt=Object.freeze(Object.defineProperty({__proto__:null,Bars:Jke},Symbol.toStringTag,{value:"Module"}));function kQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=k.useMemo(()=>{const o=Lc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsxs("g",{transform:`translate(0,${a})`,children:[b.jsx("line",{x2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const NTt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:kQ},Symbol.toStringTag,{value:"Module"}));function Zke({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=k.useMemo(()=>{const o=pS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsx("g",{transform:`translate(${a}, 10)`,children:b.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const PTt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:Zke},Symbol.toStringTag,{value:"Module"})),DTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function OTt({parameters:e}){const[n,r]=kS(DTt),i=pS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Lc().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(Zke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(kQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),b.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:b.jsx(Jke,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const $Tt=Object.freeze(Object.defineProperty({__proto__:null,default:OTt},Symbol.toStringTag,{value:"Module"}));function eRe({data:e}){return b.jsx("g",{children:e.map(({bubble:t},n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const MTt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:eRe},Symbol.toStringTag,{value:"Module"}));function RQ({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const LTt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:RQ},Symbol.toStringTag,{value:"Module"})),FTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},jTt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=MTe().size([t-10,n-10]).padding(1.5),o=A6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},BTt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function UTt({parameters:e}){const[t,n]=kS(FTt),r=jTt(e,n.width,n.height),i=BTt(r,e.selectedIndices);return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[b.jsx(eRe,{data:r}),b.jsx(RQ,{positions:i})]})})})}const zTt=Object.freeze(Object.defineProperty({__proto__:null,default:UTt},Symbol.toStringTag,{value:"Module"}));function tRe({arcs:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const VTt=Object.freeze(Object.defineProperty({__proto__:null,Slices:tRe},Symbol.toStringTag,{value:"Module"}));function nRe({positions:e}){return b.jsx("g",{children:e.map((t,n)=>b.jsx("g",{transform:`translate(${t.centroid()})`,children:b.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const HTt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:nRe},Symbol.toStringTag,{value:"Module"})),qTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},WTt=Vgt().value(e=>e.value),LT=150;function GTt({parameters:e}){const[t,n]=kS(qTt),r=WTt(e.data),i=r.map(o=>gz().innerRadius(0).outerRadius(LT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>gz().outerRadius(LT+10).innerRadius(LT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return b.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:b.jsx("svg",{width:n.width,height:n.height,children:b.jsxs("g",{transform:`translate(${[n.marginLeft+LT,n.marginTop+LT].join(",")})`,children:[b.jsx(tRe,{arcs:i}),b.jsx(nRe,{positions:s})]})})})}const YTt=Object.freeze(Object.defineProperty({__proto__:null,default:GTt},Symbol.toStringTag,{value:"Module"}));function rRe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=k.useMemo(()=>{const o=Lc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return b.jsxs("g",{children:[b.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>b.jsxs("g",{transform:`translate(${a}, 0)`,children:[b.jsx("line",{y2:`${r}`,stroke:"currentColor"}),b.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const KTt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:rRe},Symbol.toStringTag,{value:"Module"}));function iRe({data:e,barWidth:t,yScale:n}){return b.jsx("g",{children:e.map((r,i)=>b.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const XTt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:iRe},Symbol.toStringTag,{value:"Module"})),QTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function JTt({parameters:e}){const[n,r]=kS(QTt),i=pS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Lc().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,E)=>Number(_)+Number(E))/100,y={};p.forEach((_,E)=>{y[String.fromCharCode(E+65)]=_/g});const v=[y];return f0t().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return b.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:b.jsx("svg",{width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[b.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:b.jsx(rRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),b.jsx("g",{transform:"translate(0, 0)",children:b.jsx(kQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),b.jsxs("g",{transform:"translate(0, 0)",children:[b.jsx(iRe,{data:c,barWidth:f,yScale:s}),b.jsx(RQ,{positions:d})]})]})})})}const ZTt=Object.freeze(Object.defineProperty({__proto__:null,default:JTt},Symbol.toStringTag,{value:"Module"})),e2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function t2t({parameters:e,setAnswer:t}){const[n,r]=kS(e2t),[i,s]=k.useState(100),[o,a]=k.useState(100),[u,l]=k.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=k.useMemo(()=>{const p=Bk.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=IQ({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=k.useCallback(p=>{const m=dr("#movingCircle"),g=dr("#clickAccuracySvg"),y=l3(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return k.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;dr(n.current).select("circle").transition().duration(y).ease(fft).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:b.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:b.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[b.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),b.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),b.jsxs(me,{children:["Adjust speed (px/s):",b.jsx(JL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const n2t=Object.freeze(Object.defineProperty({__proto__:null,default:t2t},Symbol.toStringTag,{value:"Module"}));function Wfe({rankings:e}){return b.jsx("div",{style:{fontFamily:"sans-serif"},children:b.jsx("div",{children:e.map((t,n)=>b.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function r2t({parameters:e,setAnswer:t}){const n=Ly(),[r,i]=k.useState(""),{goToNextStep:s,isNextDisabled:o}=xxe(),a=k.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=k.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=k.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=k.useCallback(()=>{o||s()},[o,s]);k.useEffect(()=>{const h=IUe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),b.jsxs("div",{children:[b.jsxs(qa,{children:[b.jsxs(qa.Col,{span:2,children:[b.jsx(Wfe,{rankings:a==="r1"?e.data.r1:e.data.r2}),b.jsx(en,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?b.jsx(tae,{}):"Select this ranking"}),l&&r&&b.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),b.jsxs(qa.Col,{span:2,children:[b.jsx(Wfe,{rankings:a==="r1"?e.data.r2:e.data.r1}),b.jsx(en,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?b.jsx(tae,{}):"Select this ranking"}),l&&r&&b.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&b.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const i2t=Object.freeze(Object.defineProperty({__proto__:null,default:r2t},Symbol.toStringTag,{value:"Module"}));function s2t({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=k.useRef(null),o=k.useCallback(a=>{const u=dr("#Circle"),l=dr("#click_svg"),c=l3(a,l.node()),f=[+u.attr("cx"),+u.attr("cy")],d=`${Math.round(Math.sqrt((c[0]-f[0])**2+(c[1]-f[1])**2))}px`;t({status:!0,answers:{[n]:d}})},[t,n]);return b.jsx("div",{className:"Chart__wrapper",ref:s,onClick:o,style:{height:"650px"},children:b.jsx("svg",{id:"click_svg",width:400,height:400,children:b.jsx("circle",{id:"Circle",cx:r,cy:i,r:"10",stroke:"black",strokeWidth:"2",fill:"white"})})})}const o2t=Object.freeze(Object.defineProperty({__proto__:null,default:s2t},Symbol.toStringTag,{value:"Module"}));function NQ({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=k.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=k.useCallback(c=>(s?Tk("%B"):jy(".2s"))(c),[s]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:b.jsx(Ll,{children:b.jsx(si,{gap:3,children:b.jsx(Ke,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>b.jsxs("g",{transform:`translate(${f}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o?b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,b.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:b.jsx(Ll,{children:b.jsx(li,{withinPortal:!0,label:c,children:b.jsx(Ke,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const a2t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:NQ},Symbol.toStringTag,{value:"Module"}));function sRe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=k.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Ll,{children:b.jsx(si,{gap:3,children:b.jsx(Ke,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>b.jsxs("g",{transform:`translate(${n}, ${l})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),s?b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,b.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:b.jsx("foreignObject",{width:a,height:20,children:b.jsx(si,{style:{width:"100%",height:"100%"},justify:"right",children:b.jsx(Ke,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const u2t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:sRe},Symbol.toStringTag,{value:"Module"})),ac={top:15,left:100,right:50,bottom:50};function aV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Bf(),o=k.useMemo(()=>s-ac.left-ac.right,[s]),a=k.useMemo(()=>i-ac.top-ac.bottom,[i]),u=k.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Uy(M6).domain(d)},[n,t.category]),l=k.useMemo(()=>e?Lc([ac.left,o+ac.left]).domain([0,sm(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=k.useMemo(()=>e?pS([ac.top,a+ac.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=k.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:b.jsxs("g",{children:[b.jsx("rect",{x:ac.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-ac.left},h),b.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?b.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(NQ,{xScale:l,yRange:c.range(),vertPosition:a+ac.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?b.jsx(sRe,{yScale:c,horizontalPosition:ac.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):b.jsx(Wc,{})}const l2t=Object.freeze(Object.defineProperty({__proto__:null,Bar:aV,default:aV},Symbol.toStringTag,{value:"Module"}));function oRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=k.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=k.useMemo(()=>jy(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Ll,{children:b.jsx(si,{gap:3,children:b.jsx(Ke,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const c2t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:oRe},Symbol.toStringTag,{value:"Module"})),h9=15;function aRe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=k.useState([0,0]),[l,c]=k.useState(!1);return k.useEffect(()=>{const f=dr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<h9&&Math.abs(t(g[r.y])-p[1])<h9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),b.jsx("circle",{style:{cursor:l?"pointer":"default"},r:h9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const f2t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:aRe},Symbol.toStringTag,{value:"Module"})),bi={top:15,left:100,right:15,bottom:70};function uV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Bf(),[c]=Bf(),[f]=Bf(),[d,h]=k.useState(!0),p=k.useMemo(()=>l-bi.left-bi.right,[l]),m=k.useMemo(()=>u-bi.top-bi.bottom,[u]),g=k.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Uy(M6).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:E}=k.useMemo(()=>{const I=s.map(M=>+M[i.x]).filter(M=>M!==null),[R,O]=s3(I),D=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=s3(D);return{xMin:R,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),w=k.useMemo(()=>{const I=_-y;return p<=0?null:i.dataType==="date"?PK([bi.left,p+bi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Lc([bi.left,p+bi.left]).domain([y-I/10,_+I/10]).nice()},[i.dataType,p,_,y]),S=k.useMemo(()=>{const I=E-v;return m<=0?null:Lc([m+bi.top,bi.top]).domain([v-I/10,E+I/10]).nice()},[m,E,v]),x=k.useMemo(()=>{if(!w||!S)return()=>null;if(r==="Axis Selection"){const I=PSe().extent([[bi.left,bi.top+m-5],[bi.left+p,bi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],w,S,O.mode)}),R=DSe().extent([[bi.left-5,bi.top],[bi.left+5,bi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],w,S,O.mode)});return c.current&&f.current&&(dr(f.current).call(R),dr(c.current).call(I),t.hasBrush||(dr(f.current).call(R.move,[S(E),S(v)]),dr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(E)],[w(new Date("2015-12-31")),S(v)]],w,S,"drag"))),()=>{dr(f.current).call(R.move,[S(E),S(v)]),dr(c.current).call(I.move,[w(new Date("2015-01-02")),w(new Date("2015-12-31"))]),n([[w(new Date("2015-01-02")),S(E)],[w(new Date("2015-12-31")),S(v)]],w,S,"clear")}}if(r==="Rectangular Selection"){const I=OSe().extent([[bi.left,bi.top],[bi.left+p,bi.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],w,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(dr(a.current).call(I.move,null),e(null))});return dr(a.current).call(I),()=>{dr(a.current).call(I.move,null),n([[null,null],[null,null]],w,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[w(y),S(E)],[w(_),S(v)]],w,S,null),()=>n([[w(y),S(E)],[w(_),S(v)]],w,S,"clear")):r==="Paintbrush Selection"?()=>n([[w(y),S(E)],[w(_),S(v)]],w,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,w,E,v,S]),C=k.useMemo(()=>o.length===0?null:new Set(o),[o]),A=k.useMemo(()=>!w||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const O=i.dataType==="date"?w(new Date(I[i.x])):w(I[i.x]);return b.jsx("circle",{opacity:C&&!C.has(I[i.ids])?.3:1,r:3,fill:C&&!C.has(I[i.ids])?"lightgray":g(I[i.category]),cx:O,cy:S(I[i.y])},R)}),[C,g,s,i.category,i.dataType,i.ids,i.x,i.y,w,S]);return k.useEffect(()=>{r==="Axis Selection"&&Jxe(".handle").style("fill","darkgrey")},[t,r]),b.jsxs(Wa,{children:[b.jsxs(si,{children:[b.jsx(en,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),x==null||x()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?b.jsx(KL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),b.jsxs(si,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w&&S?b.jsxs("g",{children:[b.jsx(oRe,{yScale:S,label:i.y,horizontalPosition:bi.left,xRange:w.range()}),b.jsx(NQ,{xScale:w,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+bi.top,label:i.x,ticks:w.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:w(I)}))})]}):null,A,b.jsx("g",{id:"brushXRef",ref:c}),b.jsx("g",{id:"brushYRef",ref:f}),w&&S&&r==="Paintbrush Selection"?b.jsx(aRe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:w,yScale:S}):null]}),r==="Slider Selection"&&w&&S?b.jsxs(Wa,{style:{flexGrow:1},gap:50,children:[b.jsxs(Wa,{gap:0,children:[b.jsx(Ke,{children:i.x}),b.jsx(DE,{minRange:1,label:null,min:w.domain()[0],max:w.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[w(I[0]),t.y1],[w(I[1]),t.y2]],w,S,"drag")},style:{width:"300px"},marks:w.ticks(5).map(I=>({value:I,label:I})),value:[w.invert(t.x1),w.invert(t.x2)]})]}),b.jsxs(Wa,{gap:0,children:[b.jsx(Ke,{children:i.y}),b.jsx(DE,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],w,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const d2t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:uV,default:uV},Symbol.toStringTag,{value:"Module"}));function Gfe({parameters:e,setAnswer:t}){const[n,r]=k.useState(null),[i,s]=k.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=k.useState(null);k.useEffect(()=>{FSe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=k.useMemo(()=>o?xke(o):null,[o]),{actions:l,trrack:c}=k.useMemo(()=>{const g=Bk.create(),y=g.register("brush",(S,x)=>(S.all={brush:x},S)),v=g.register("brushMove",(S,x)=>(S.all={brush:x},S)),_=g.register("brushResize",(S,x)=>(S.all={brush:x},S)),E=g.register("brushClear",(S,x)=>(S.all={brush:x},S)),w=IQ({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:E},trrack:w}},[]),f=k.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=k.useMemo(()=>hf(f,100,{maxWait:100}),[f]),h=k.useCallback((g,y,v,_,E)=>{if(!y||!v)return;const w=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),x=v.invert(g[1][1]||i.y2),C=v.invert(g[0][1]||i.y1);let A=null;if(_==="clear")A=u;else if(E){const R=new Set(E);A=u.filter(eE(O=>R.has(O[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(eE(R=>new Date(R[e.x])>=new Date(w)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=x&&R[e.y]<=C)):A=u.filter(eE(R=>R[e.x]>=w&&R[e.x]<=S&&R[e.y]>=x&&R[e.y]<=C));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?A==null?void 0:A.array("id"):[]};s(I),_==="drag"||_==="handle"?d(_,I):_==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=k.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=k.useCallback(g=>{r(g)},[]);return o?b.jsxs(Wa,{gap:"xs",children:[b.jsx(uV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),b.jsx(aV,{data:o,parameters:e,barsTable:p})]}):b.jsx(Wc,{})}const h2t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Gfe,default:Gfe},Symbol.toStringTag,{value:"Module"})),p2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),m2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Yfe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":p0t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":ATt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":TTt,"../public/demo-brush-interactions/assets/Scatter.tsx":CTt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":d0t,"../public/demo-brush-interactions/assets/YAxis.tsx":STt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":h0t,"../public/demo-brush-interactions/assets/types.ts":ITt,"../public/demo-cleveland/assets/BarChart.tsx":$Tt,"../public/demo-cleveland/assets/BubbleChart.tsx":zTt,"../public/demo-cleveland/assets/PieChart.tsx":YTt,"../public/demo-cleveland/assets/StackedBarChart.tsx":ZTt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":RTt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":MTt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":LTt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":KTt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":NTt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":PTt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":VTt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":HTt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":XTt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":kTt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":n2t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":i2t,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":o2t,"../public/tutorial/react-and-randomization/assets/Bar.tsx":l2t,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":h2t,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":f2t,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":d2t,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":a2t,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":c2t,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":u2t,"../public/tutorial/react-and-randomization/assets/some.tsx":p2t,"../public/tutorial/react-and-randomization/assets/types.ts":m2t});function g2t({currentConfig:e}){const t=Zm(),n=Ly(),r=`../public/${e.path}`,i=r in Yfe?Yfe[r].default:null,s=Kh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Yh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return b.jsx(k.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:i?b.jsx(i,{parameters:e.parameters,setAnswer:u}):b.jsx(Vv,{path:e.path})})}function y2t({currentConfig:e}){const[t,n]=k.useState(""),[r,i]=k.useState(!0);return k.useEffect(()=>{async function s(){const o=await JY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?b.jsx(Za,{text:t}):b.jsx(Vv,{path:e.path})}const v2t={},b2t=Object.freeze(Object.defineProperty({__proto__:null,default:v2t},Symbol.toStringTag,{value:"Module"})),_2t=Hje(b2t);var w2t=_2t;function E2t(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function x2t(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function S2t(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function T2t(e){return e.__COMMENTS__}function C2t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var d4={EOL:w2t.EOL||`
`,tryParseNumber:E2t,createComment:x2t,removeComment:S2t,getComment:T2t,forceComment:C2t},A2t="3.2.1";function I2t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Kfe}else if(e.length===0)return Kfe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return R2t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),k2t.bind(null,n)}function k2t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Kfe(){}function R2t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function uRe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}uRe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function lRe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}lRe.description="parse hexadecimal numbers prefixed with 0x";function cRe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}cRe.description="support ISO dates";var PQ={loadDsf:I2t,std:{math:uRe,hex:lRe,date:cRe}},N2t=function(e,t){var n=d4,r=PQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,z=0;z<4;z++){h();var H=o.charCodeAt(0),P;o>="0"&&o<="9"?P=H-48:o>="a"&&o<="f"?P=H-97+10:o>="A"&&o<="F"?P=H-65+10:d("Bad \\u char "+o),B=B*16+P}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function z(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),z()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var z=l($);return z!==void 0?z:$}}$+=o}}function E($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var z=B.indexOf(`
`);if(z>=0){var H=[B.substr(0,z),B.substr(z+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function w($){function F(B,z){var H,P,U,W;switch(typeof B){case"string":B.indexOf(z)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,U=B.length;H<U;H++)W=F(B[H],z)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=F(B[P],z)||W)}return W}function M(B){var z=F($,B);return z?"found '"+B+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function S(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=E(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(C()),M=s,v(),o===","&&(h(),M=s,v()),F){var z=E(M);F.a.push([B||"",z[0]||""]),B=z[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||w($),H}}function x($){var F="",M={},B,z,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?z=1:(h(),z=s),v(),B&&(H=E(z,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=C(),z=s,v(),o===","&&(h(),z=s,v()),B){var P=E(z);B.c[F]=[H||"",P[0]||""],H=P[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||w(M),U}}function C(){switch(v(),o){case"{":return x();case"[":return S();case"'":case'"':return m(!0);default:return _()}}function A($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),z=E(M).join(`
`);if(z||B){var H=n.createComment($,n.getComment($));H.r=[B,z]}}return $}function I(){v();var $=u?E(1):null;switch(o){case"{":return A(x(),$);case"[":return A(S(),$);default:return A(C(),$)}}function R(){v();var $=u?E(1):null;switch(o){case"{":return A(x(),$);case"[":return A(S(),$)}try{return A(x(!0),$)}catch(F){c();try{return A(C(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?R():I()},P2t=function(e,t){var n=d4,r=PQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var E,w="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+w+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+w+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+w+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function $(W,j){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var q=I[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(x.lastIndex=0,A.lastIndex=0,c||q||x.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(S.lastIndex=0,C.lastIndex=0,S.test(W)?!C.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function z(W){return W?l||R.test(W)?(S.lastIndex=0,$(g.qkey,S.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function ne(gn){return gn&&gn[gn[0]==="\r"?1:0]===`
`}function ce(gn){return gn&&!ne(gn)}function de(gn,An,nr){if(!gn)return"";gn=n.forceComment(gn);var rr,Vo=gn.length;for(rr=0;rr<Vo&&gn[rr]<=" ";rr++);return nr&&rr>0&&(gn=gn.substr(rr)),rr<Vo?An+$(g.rem,gn):gn}var he=E(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ve;a&&(ve=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=O;O+=o;var Xe=s+be,Ue=s+O,yt=q||u?"":Xe,it=[],_e,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],We=0,ge,ht,vt,pe,Ae,He,ut,_t,Ln;if(Ie){for(ge=0,ht=W.length;ge<ht;ge++){if(_e=ge<ht-1,ve?(He=ve.a[ge]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,pe=W[ge],it.push(H(pe,ve?ut:!1,!0)+(_e?h:"")),ke){switch(typeof pe){case"string":D=0,c=!0,d=0,ke.push(H(pe,!1,!0)+(_e?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}_e&&(D+=g.com[0].length-g.com[2]),We+=D}ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Xe):it.push(Xe),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.arr,Ln))))}else{var Ar=ve?ve.o.slice():[],Fn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Ar.indexOf(vt)<0&&Fn.push(vt);m&&Fn.sort();var cr=Ar.concat(Fn);for(ge=0,ht=cr.length;ge<ht;ge++)if(_e=ge<ht-1,vt=cr[ge],ve?(He=ve.c[vt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,pe=W[vt],Ae=H(pe,ve&&ut),it.push(z(vt)+g.col[0]+(ne(Ae)?"":" ")+Ae+(_e?h:"")),ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":D=0,c=!0,d=0,Ae=H(pe,!1),c=ze,d=ct,ke.push(z(vt)+g.col[0]+" "+Ae+(_e?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}D+=g.col[0].length-g.col[2],_e&&(D+=g.com[0].length-g.com[2]),We+=D}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Xe):it.push(Xe),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.obj,Ln))))}return O=be,_t}}E=r.loadDsf(p,"stringify");var P="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(P=U[0]+`
`),P+=H(e,null,!0,!0),U&&(P+=U[1]||""),P},sE=d4;function NC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function lV(e,t){if(!(e===null||typeof e!="object")){var n=sE.getComment(e);n&&sE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Xfe(o.a,r,n.a[r],lV(e[r]))&&(s=!0);!s&&n.e&&(o.e=NC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Xfe(o.s,l,n.c[l],lV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=NC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=NC(n.r[0],n.r[1])),s?o:void 0}}function D2t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function O2t(e,t){var n=[];if(cV(e,t,n,[]),n.length>0){var r=D$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+D2t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),D$(t,r,1)}}function Xfe(e,t,n,r){var i=NC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function PC(e,t){var n=NC(t.b,t.a);return n.path=e,n}function DC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(PC(s,o)),DC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(PC(u,l)),DC(l.x,t,u))});e.e&&t.push(PC(n,e.e))}}function cV(e,t,n,r){if(e){if(t===null||typeof t!="object"){DC(e,n,r);return}var i,s=sE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],cV(u.x,t[i],n,l)):(n.push(PC(l,u)),DC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],cV(d.x,t[c],n,f))):d&&(n.push(PC(f,d)),DC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function D$(e,t,n){var r=sE.createComment(e,sE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=sE.forceComment(t)),r.r[n]||""}var $2t={extract:function(e){return lV(e,!0)},merge:O2t,header:function(e,t){return D$(e,t,0)},footer:function(e,t){return D$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Qfe=d4,M2t=A2t,Jfe=N2t,Zfe=P2t,L2t=$2t,F2t=PQ,DQ={parse:Jfe,stringify:Zfe,endOfLine:function(){return Qfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Qfe.EOL=e)},version:M2t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Jfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Zfe(e,t)}},comments:L2t,dsf:F2t.std},fV={exports:{}},fRe={},Vf={},ux={},Uk={},Dn={},lI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,E)=>`${_}${E}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,E)=>(E instanceof n&&(_[E.str]=(_[E.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let E=0;for(;E<v.length;)a(_,v[E]),_.push(y[++E]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let E=0;for(;E<v.length;)_.push(s),a(_,v[E]),_.push(s,h(y[++E]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(lI);var dV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=lI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(dV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=lI,n=dV;var r=lI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=dV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return D(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class E extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=D(super.names,this.from);return D(q,this.to)}}class w extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class S extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class x extends h{render(q){return"return "+super.render(q)}}x.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new _(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new E(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(de,(0,t._)`${he}[${ve}]`),ne(de)})}return this._for(new w("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new w("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new x;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new C;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new A(de),G(de)}return ne&&(this._currNode=ce.finally=new I,this.code(ne)),this._endBlockNode(A,I)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new S(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=R;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function D(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=U(e.operators.AND);function z(...j){return j.reduce(B)}e.and=z;const H=U(e.operators.OR);function P(...j){return j.reduce(H)}e.or=P;function U(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Dn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Kr=Dn,j2t=lI;function B2t(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=B2t;function U2t(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(dRe(e,t),!hRe(t,e.self.RULES.all))}wt.alwaysValidSchema=U2t;function dRe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||gRe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=dRe;function hRe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=hRe;function z2t(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=z2t;function V2t({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Kr._)`${n}`}return(0,Kr._)`${e}${t}${(0,Kr.getProperty)(r)}`}wt.schemaRefOrVal=V2t;function H2t(e){return pRe(decodeURIComponent(e))}wt.unescapeFragment=H2t;function q2t(e){return encodeURIComponent(OQ(e))}wt.escapeFragment=q2t;function OQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=OQ;function pRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=pRe;function W2t(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=W2t;function ede({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Kr.Name?(s instanceof Kr.Name?e(i,s,o):t(i,s,o),o):s instanceof Kr.Name?(t(i,o,s),s):n(s,o);return a===Kr.Name&&!(u instanceof Kr.Name)?r(i,u):u}}wt.mergeEvaluated={props:ede({mergeNames:(e,t,n)=>e.if((0,Kr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Kr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Kr._)`${n} || {}`).code((0,Kr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Kr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Kr._)`${n} || {}`),$Q(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:mRe}),items:ede({mergeNames:(e,t,n)=>e.if((0,Kr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Kr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Kr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Kr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function mRe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Kr._)`{}`);return t!==void 0&&$Q(e,n,t),n}wt.evaluatedPropsToName=mRe;function $Q(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Kr._)`${t}${(0,Kr.getProperty)(r)}`,!0))}wt.setEvaluated=$Q;const tde={};function G2t(e,t){return e.scopeValue("func",{ref:t,code:tde[t.code]||(tde[t.code]=new j2t._Code(t.code))})}wt.useFunc=G2t;var hV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(hV||(wt.Type=hV={}));function Y2t(e,t,n){if(e instanceof Kr.Name){const r=t===hV.Num;return n?r?(0,Kr._)`"[" + ${e} + "]"`:(0,Kr._)`"['" + ${e} + "']"`:r?(0,Kr._)`"/" + ${e}`:(0,Kr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Kr.getProperty)(e).toString():"/"+OQ(e)}wt.getErrorPath=Y2t;function gRe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=gRe;var ep={};Object.defineProperty(ep,"__esModule",{value:!0});const ta=Dn,K2t={data:new ta.Name("data"),valCxt:new ta.Name("valCxt"),instancePath:new ta.Name("instancePath"),parentData:new ta.Name("parentData"),parentDataProperty:new ta.Name("parentDataProperty"),rootData:new ta.Name("rootData"),dynamicAnchors:new ta.Name("dynamicAnchors"),vErrors:new ta.Name("vErrors"),errors:new ta.Name("errors"),this:new ta.Name("this"),self:new ta.Name("self"),scope:new ta.Name("scope"),json:new ta.Name("json"),jsonPos:new ta.Name("jsonPos"),jsonLen:new ta.Name("jsonLen"),jsonPart:new ta.Name("jsonPart")};ep.default=K2t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dn,n=wt,r=ep;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:E}=g,{gen:w,compositeRule:S,allErrors:x}=E,C=f(g,y,v);_??(S||x)?u(w,C):l(E,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:E,compositeRule:w,allErrors:S}=_,x=f(g,y,v);u(E,x),w||S||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:E,it:w}){if(E===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",E,r.default.errors,x=>{g.const(S,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,w.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${w.errSchemaPath}/${y}`),w.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:E}=g;E.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:E}=g,w=[h(E,v),p(g,v)];return m(g,y,w),_.object(...w)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let E=_?y:(0,t.str)`${y}/${g}`;return v&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:y,message:v},_){const{keyword:E,data:w,schemaValue:S,it:x}=g,{opts:C,propertyName:A,topSchemaRef:I,schemaPath:R}=x;_.push([c.keyword,E],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&_.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&_.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,w]),A&&_.push([c.propertyName,A])}})(Uk);Object.defineProperty(ux,"__esModule",{value:!0});ux.boolOrEmptySchema=ux.topBoolOrEmptySchema=void 0;const X2t=Uk,Q2t=Dn,J2t=ep,Z2t={message:"boolean schema is false"};function eCt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?yRe(e,!1):typeof n=="object"&&n.$async===!0?t.return(J2t.default.data):(t.assign((0,Q2t._)`${r}.errors`,null),t.return(!0))}ux.topBoolOrEmptySchema=eCt;function tCt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),yRe(e)):n.var(t,!0)}ux.boolOrEmptySchema=tCt;function yRe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,X2t.reportError)(i,Z2t,void 0,t)}var Rs={},tb={};Object.defineProperty(tb,"__esModule",{value:!0});tb.getRules=tb.isJSONType=void 0;const nCt=["string","number","integer","boolean","null","object","array"],rCt=new Set(nCt);function iCt(e){return typeof e=="string"&&rCt.has(e)}tb.isJSONType=iCt;function sCt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}tb.getRules=sCt;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.shouldUseRule=um.shouldUseGroup=um.schemaHasRulesForType=void 0;function oCt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&vRe(e,r)}um.schemaHasRulesForType=oCt;function vRe(e,t){return t.rules.some(n=>bRe(e,n))}um.shouldUseGroup=vRe;function bRe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}um.shouldUseRule=bRe;Object.defineProperty(Rs,"__esModule",{value:!0});Rs.reportTypeError=Rs.checkDataTypes=Rs.checkDataType=Rs.coerceAndCheckDataType=Rs.getJSONTypes=Rs.getSchemaTypes=Rs.DataType=void 0;const aCt=tb,uCt=um,lCt=Uk,wn=Dn,_Re=wt;var oE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(oE||(Rs.DataType=oE={}));function cCt(e){const t=wRe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Rs.getSchemaTypes=cCt;function wRe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(aCt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Rs.getJSONTypes=wRe;function fCt(e,t){const{gen:n,data:r,opts:i}=e,s=dCt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,uCt.schemaHasRulesForType)(e,t[0]));if(o){const a=MQ(t,r,i.strictNumbers,oE.Wrong);n.if(a,()=>{s.length?hCt(e,t,s):LQ(e)})}return o}Rs.coerceAndCheckDataType=fCt;const ERe=new Set(["string","number","integer","boolean","null"]);function dCt(e,t){return t?e.filter(n=>ERe.has(n)||t==="array"&&n==="array"):[]}function hCt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,wn._)`typeof ${i}`),a=r.let("coerced",(0,wn._)`undefined`);s.coerceTypes==="array"&&r.if((0,wn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,wn._)`${i}[0]`).assign(o,(0,wn._)`typeof ${i}`).if(MQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,wn._)`${a} !== undefined`);for(const l of n)(ERe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),LQ(e),r.endIf(),r.if((0,wn._)`${a} !== undefined`,()=>{r.assign(i,a),pCt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,wn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,wn._)`"" + ${i}`).elseIf((0,wn._)`${i} === null`).assign(a,(0,wn._)`""`);return;case"number":r.elseIf((0,wn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,wn._)`+${i}`);return;case"integer":r.elseIf((0,wn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,wn._)`+${i}`);return;case"boolean":r.elseIf((0,wn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,wn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,wn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,wn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,wn._)`[${i}]`)}}}function pCt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,wn._)`${t} !== undefined`,()=>e.assign((0,wn._)`${t}[${n}]`,r))}function pV(e,t,n,r=oE.Correct){const i=r===oE.Correct?wn.operators.EQ:wn.operators.NEQ;let s;switch(e){case"null":return(0,wn._)`${t} ${i} null`;case"array":s=(0,wn._)`Array.isArray(${t})`;break;case"object":s=(0,wn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,wn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,wn._)`typeof ${t} ${i} ${e}`}return r===oE.Correct?s:(0,wn.not)(s);function o(a=wn.nil){return(0,wn.and)((0,wn._)`typeof ${t} == "number"`,a,n?(0,wn._)`isFinite(${t})`:wn.nil)}}Rs.checkDataType=pV;function MQ(e,t,n,r){if(e.length===1)return pV(e[0],t,n,r);let i;const s=(0,_Re.toHash)(e);if(s.array&&s.object){const o=(0,wn._)`typeof ${t} != "object"`;i=s.null?o:(0,wn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=wn.nil;s.number&&delete s.integer;for(const o in s)i=(0,wn.and)(i,pV(o,t,n,r));return i}Rs.checkDataTypes=MQ;const mCt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,wn._)`{type: ${e}}`:(0,wn._)`{type: ${t}}`};function LQ(e){const t=gCt(e);(0,lCt.reportError)(t,mCt)}Rs.reportTypeError=LQ;function gCt(e){const{gen:t,data:n,schema:r}=e,i=(0,_Re.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var h4={};Object.defineProperty(h4,"__esModule",{value:!0});h4.assignDefaults=void 0;const P_=Dn,yCt=wt;function vCt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)nde(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>nde(e,s,i.default))}h4.assignDefaults=vCt;function nde(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,P_._)`${s}${(0,P_.getProperty)(t)}`;if(i){(0,yCt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,P_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,P_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,P_._)`${a} = ${(0,P_.stringify)(n)}`)}var nh={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateUnion=Nn.validateArray=Nn.usePattern=Nn.callValidateCode=Nn.schemaProperties=Nn.allSchemaProperties=Nn.noPropertyInData=Nn.propertyInData=Nn.isOwnProperty=Nn.hasPropFunc=Nn.reportMissingProp=Nn.checkMissingProp=Nn.checkReportMissingProp=void 0;const ci=Dn,FQ=wt,_g=ep,bCt=wt;function _Ct(e,t){const{gen:n,data:r,it:i}=e;n.if(BQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ci._)`${t}`},!0),e.error()})}Nn.checkReportMissingProp=_Ct;function wCt({gen:e,data:t,it:{opts:n}},r,i){return(0,ci.or)(...r.map(s=>(0,ci.and)(BQ(e,t,s,n.ownProperties),(0,ci._)`${i} = ${s}`)))}Nn.checkMissingProp=wCt;function ECt(e,t){e.setParams({missingProperty:t},!0),e.error()}Nn.reportMissingProp=ECt;function xRe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ci._)`Object.prototype.hasOwnProperty`})}Nn.hasPropFunc=xRe;function jQ(e,t,n){return(0,ci._)`${xRe(e)}.call(${t}, ${n})`}Nn.isOwnProperty=jQ;function xCt(e,t,n,r){const i=(0,ci._)`${t}${(0,ci.getProperty)(n)} !== undefined`;return r?(0,ci._)`${i} && ${jQ(e,t,n)}`:i}Nn.propertyInData=xCt;function BQ(e,t,n,r){const i=(0,ci._)`${t}${(0,ci.getProperty)(n)} === undefined`;return r?(0,ci.or)(i,(0,ci.not)(jQ(e,t,n))):i}Nn.noPropertyInData=BQ;function SRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Nn.allSchemaProperties=SRe;function SCt(e,t){return SRe(t).filter(n=>!(0,FQ.alwaysValidSchema)(e,t[n]))}Nn.schemaProperties=SCt;function TCt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ci._)`${e}, ${t}, ${r}${i}`:t,f=[[_g.default.instancePath,(0,ci.strConcat)(_g.default.instancePath,s)],[_g.default.parentData,o.parentData],[_g.default.parentDataProperty,o.parentDataProperty],[_g.default.rootData,_g.default.rootData]];o.opts.dynamicRef&&f.push([_g.default.dynamicAnchors,_g.default.dynamicAnchors]);const d=(0,ci._)`${c}, ${n.object(...f)}`;return u!==ci.nil?(0,ci._)`${a}.call(${u}, ${d})`:(0,ci._)`${a}(${d})`}Nn.callValidateCode=TCt;const CCt=(0,ci._)`new RegExp`;function ACt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ci._)`${i.code==="new RegExp"?CCt:(0,bCt.useFunc)(e,i)}(${n}, ${r})`})}Nn.usePattern=ACt;function ICt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ci._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:FQ.Type.Num},s),t.if((0,ci.not)(s),a)})}}Nn.validateArray=ICt;function kCt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,FQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ci._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ci.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Nn.validateUnion=kCt;Object.defineProperty(nh,"__esModule",{value:!0});nh.validateKeywordUsage=nh.validSchemaType=nh.funcKeywordCode=nh.macroKeywordCode=void 0;const Fa=Dn,W1=ep,RCt=Nn,NCt=Uk;function PCt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=TRe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Fa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}nh.macroKeywordCode=PCt;function DCt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;$Ct(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=TRe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&rde(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&rde(e),g(()=>OCt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Fa._)`await `),v=>r.assign(f,!1).if((0,Fa._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Fa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Fa._)`${c}.errors`;return r.assign(y,null),m(Fa.nil),y}function m(y=t.async?(0,Fa._)`await `:Fa.nil){const v=u.opts.passContext?W1.default.this:W1.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Fa._)`${y}${(0,RCt.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Fa.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}nh.funcKeywordCode=DCt;function rde(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Fa._)`${r.parentData}[${r.parentDataProperty}]`))}function OCt(e,t){const{gen:n}=e;n.if((0,Fa._)`Array.isArray(${t})`,()=>{n.assign(W1.default.vErrors,(0,Fa._)`${W1.default.vErrors} === null ? ${t} : ${W1.default.vErrors}.concat(${t})`).assign(W1.default.errors,(0,Fa._)`${W1.default.vErrors}.length`),(0,NCt.extendErrors)(e)},()=>e.error())}function $Ct({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function TRe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Fa.stringify)(n)})}function MCt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}nh.validSchemaType=MCt;function LCt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}nh.validateKeywordUsage=LCt;var C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.extendSubschemaMode=C0.extendSubschemaData=C0.getSubschema=void 0;const Qd=Dn,CRe=wt;function FCt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Qd._)`${e.schemaPath}${(0,Qd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Qd._)`${e.schemaPath}${(0,Qd.getProperty)(t)}${(0,Qd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,CRe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}C0.getSubschema=FCt;function jCt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Qd._)`${t.data}${(0,Qd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Qd.str)`${l}${(0,CRe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Qd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Qd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}C0.extendSubschemaData=jCt;function BCt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}C0.extendSubschemaMode=BCt;var Io={},ARe={exports:{}},t0=ARe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};RD(t,r,i,e,"",e)};t0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};t0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};t0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};t0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function RD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in t0.arrayKeywords)for(var d=0;d<f.length;d++)RD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in t0.propsKeywords){if(f&&typeof f=="object")for(var h in f)RD(e,t,n,f[h],i+"/"+c+"/"+UCt(h),s,i,c,r,h)}else(c in t0.keywords||e.allKeys&&!(c in t0.skipKeywords))&&RD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function UCt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var zCt=ARe.exports;Object.defineProperty(Io,"__esModule",{value:!0});Io.getSchemaRefs=Io.resolveUrl=Io.normalizeId=Io._getFullPath=Io.getFullPath=Io.inlineRef=void 0;const VCt=wt,HCt=QY,qCt=zCt,WCt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function GCt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!mV(e):t?IRe(e)<=t:!1}Io.inlineRef=GCt;const YCt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function mV(e){for(const t in e){if(YCt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(mV)||typeof n=="object"&&mV(n))return!0}return!1}function IRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!WCt.has(n)&&(typeof e[n]=="object"&&(0,VCt.eachItem)(e[n],r=>t+=IRe(r)),t===1/0))return 1/0}return t}function kRe(e,t="",n){n!==!1&&(t=aE(t));const r=e.parse(t);return RRe(e,r)}Io.getFullPath=kRe;function RRe(e,t){return e.serialize(t).split("#")[0]+"#"}Io._getFullPath=RRe;const KCt=/#\/?$/;function aE(e){return e?e.replace(KCt,""):""}Io.normalizeId=aE;function XCt(e,t,n){return n=aE(n),e.resolve(t,n)}Io.resolveUrl=XCt;const QCt=/^[a-z_][-a-z0-9._]*$/i;function JCt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=aE(e[n]||t),s={"":i},o=kRe(r,i,!1),a={},u=new Set;return qCt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const E=this.opts.uriResolver.resolve;if(_=aE(g?E(g,_):_),u.has(_))throw c(_);u.add(_);let w=this.refs[_];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?l(f,w.schema,_):_!==aE(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!QCt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!HCt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Io.getSchemaRefs=JCt;Object.defineProperty(Vf,"__esModule",{value:!0});Vf.getData=Vf.KeywordCxt=Vf.validateFunctionCode=void 0;const NRe=ux,ide=Rs,UQ=um,O$=Rs,ZCt=h4,OC=nh,p9=C0,Dt=Dn,on=ep,eAt=Io,lm=wt,FT=Uk;function tAt(e){if(ORe(e)&&($Re(e),DRe(e))){iAt(e);return}PRe(e,()=>(0,NRe.topBoolOrEmptySchema)(e))}Vf.validateFunctionCode=tAt;function PRe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${on.default.data}, ${on.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${sde(n,i)}`),rAt(e,i),e.code(s)}):e.func(t,(0,Dt._)`${on.default.data}, ${nAt(i)}`,r.$async,()=>e.code(sde(n,i)).code(s))}function nAt(e){return(0,Dt._)`{${on.default.instancePath}="", ${on.default.parentData}, ${on.default.parentDataProperty}, ${on.default.rootData}=${on.default.data}${e.dynamicRef?(0,Dt._)`, ${on.default.dynamicAnchors}={}`:Dt.nil}}={}`}function rAt(e,t){e.if(on.default.valCxt,()=>{e.var(on.default.instancePath,(0,Dt._)`${on.default.valCxt}.${on.default.instancePath}`),e.var(on.default.parentData,(0,Dt._)`${on.default.valCxt}.${on.default.parentData}`),e.var(on.default.parentDataProperty,(0,Dt._)`${on.default.valCxt}.${on.default.parentDataProperty}`),e.var(on.default.rootData,(0,Dt._)`${on.default.valCxt}.${on.default.rootData}`),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Dt._)`${on.default.valCxt}.${on.default.dynamicAnchors}`)},()=>{e.var(on.default.instancePath,(0,Dt._)`""`),e.var(on.default.parentData,(0,Dt._)`undefined`),e.var(on.default.parentDataProperty,(0,Dt._)`undefined`),e.var(on.default.rootData,on.default.data),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Dt._)`{}`)})}function iAt(e){const{schema:t,opts:n,gen:r}=e;PRe(e,()=>{n.$comment&&t.$comment&&LRe(e),lAt(e),r.let(on.default.vErrors,null),r.let(on.default.errors,0),n.unevaluated&&sAt(e),MRe(e),dAt(e)})}function sAt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function sde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function oAt(e,t){if(ORe(e)&&($Re(e),DRe(e))){aAt(e,t);return}(0,NRe.boolOrEmptySchema)(e,t)}function DRe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function ORe(e){return typeof e.schema!="boolean"}function aAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&LRe(e),cAt(e),fAt(e);const s=r.const("_errs",on.default.errors);MRe(e,s),r.var(t,(0,Dt._)`${s} === ${on.default.errors}`)}function $Re(e){(0,lm.checkUnknownRules)(e),uAt(e)}function MRe(e,t){if(e.opts.jtd)return ode(e,[],!1,t);const n=(0,ide.getSchemaTypes)(e.schema),r=(0,ide.coerceAndCheckDataType)(e,n);ode(e,n,!r,t)}function uAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,lm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function lAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,lm.checkStrictMode)(e,"default is ignored in the schema root")}function cAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,eAt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function fAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function LRe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${on.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${on.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function dAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${on.default.errors} === 0`,()=>t.return(on.default.data),()=>t.throw((0,Dt._)`new ${i}(${on.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,on.default.vErrors),s.unevaluated&&hAt(e),t.return((0,Dt._)`${on.default.errors} === 0`))}function hAt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function ode(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,lm.schemaHasRulesButRef)(s,c))){i.block(()=>BRe(e,"$ref",c.all.$ref.definition));return}u.jtd||pAt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,UQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,O$.checkDataType)(d.type,o,u.strictNumbers)),ade(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,O$.reportTypeError)(e)),i.endIf()):ade(e,d),a||i.if((0,Dt._)`${on.default.errors} === ${r||0}`))}}function ade(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,ZCt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,UQ.shouldUseRule)(r,s)&&BRe(e,s.keyword,s.definition,t.type)})}function pAt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(mAt(e,t),e.opts.allowUnionTypes||gAt(e,t),yAt(e,e.dataTypes))}function mAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{FRe(e.dataTypes,n)||zQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),bAt(e,t)}}function gAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&zQ(e,"use allowUnionTypes to allow union type keyword")}function yAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,UQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>vAt(t,o))&&zQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function vAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function FRe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function bAt(e,t){const n=[];for(const r of e.dataTypes)FRe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function zQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,lm.checkStrictMode)(e,t,e.opts.strictTypes)}class jRe{constructor(t,n,r){if((0,OC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,lm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",URe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,OC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",on.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?FT.reportExtraError:FT.reportError)(this,this.def.error,n)}$dataError(){(0,FT.reportError)(this,this.def.$dataError||FT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,FT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,O$.checkDataTypes)(u,n,s.opts.strictNumbers,O$.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,p9.getSubschema)(this.it,t);(0,p9.extendSubschemaData)(r,this.it,t),(0,p9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return oAt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=lm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=lm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}Vf.KeywordCxt=jRe;function BRe(e,t,n,r){const i=new jRe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,OC.funcKeywordCode)(i,n):"macro"in n?(0,OC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,OC.funcKeywordCode)(i,n)}const _At=/^\/(?:[^~]|~0|~1)*$/,wAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function URe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return on.default.rootData;if(e[0]==="/"){if(!_At.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=on.default.rootData}else{const l=wAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,lm.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Vf.getData=URe;var zk={};Object.defineProperty(zk,"__esModule",{value:!0});class EAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}zk.default=EAt;var RS={};Object.defineProperty(RS,"__esModule",{value:!0});const m9=Io;class xAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,m9.resolveUrl)(t,n,r),this.missingSchema=(0,m9.normalizeId)((0,m9.getFullPath)(t,this.missingRef))}}RS.default=xAt;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.resolveSchema=Nu.getCompilingSchema=Nu.resolveRef=Nu.compileSchema=Nu.SchemaEnv=void 0;const sf=Dn,SAt=zk,p1=ep,If=Io,ude=wt,TAt=Vf;class p4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,If.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Nu.SchemaEnv=p4;function VQ(e){const t=zRe.call(this,e);if(t)return t;const n=(0,If.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new sf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:SAt.default,code:(0,sf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:p1.default.data,parentData:p1.default.parentData,parentDataProperty:p1.default.parentDataProperty,dataNames:[p1.default.data],dataPathArr:[sf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,sf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:sf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,sf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,TAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(p1.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${p1.default.self}`,`${p1.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof sf.Name?void 0:p,items:m instanceof sf.Name?void 0:m,dynamicProps:p instanceof sf.Name,dynamicItems:m instanceof sf.Name},h.source&&(h.source.evaluated=(0,sf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Nu.compileSchema=VQ;function CAt(e,t,n){var r;n=(0,If.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=kAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new p4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=AAt.call(this,s)}Nu.resolveRef=CAt;function AAt(e){return(0,If.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:VQ.call(this,e)}function zRe(e){for(const t of this._compilations)if(IAt(t,e))return t}Nu.getCompilingSchema=zRe;function IAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function kAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||m4.call(this,e,t)}function m4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,If._getFullPath)(this.opts.uriResolver,n);let i=(0,If.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return g9.call(this,n,e);const s=(0,If.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=m4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:g9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||VQ.call(this,o),s===(0,If.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,If.resolveUrl)(this.opts.uriResolver,i,l)),new p4({schema:a,schemaId:u,root:e,baseId:i})}return g9.call(this,n,o)}}Nu.resolveSchema=m4;const RAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,ude.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!RAt.has(a)&&l&&(t=(0,If.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,ude.schemaHasRulesButRef)(n,this.RULES)){const a=(0,If.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=m4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new p4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const NAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",PAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",DAt="object",OAt=["$data"],$At={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},MAt=!1,LAt={$id:NAt,description:PAt,type:DAt,required:OAt,properties:$At,additionalProperties:MAt};var HQ={},gV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(no,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ce=ee.length-1,Se=1;Se<Ce;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Ce]=ee[Ce].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ce in ee)ae[Ce]=ee[Ce];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ce=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ce+"%"+Ce+Ce+"%"+Ce+Ce)+"|"+i("%[89A-Fa-f]"+Ce+"%"+Ce+Ce)+"|"+i("%"+Ce+Ce)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",qt=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(pn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),kr=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Vt=i(Ce+"{1,4}"),sr=i(i(Vt+"\\:"+Vt)+"|"+kr),qr=i(i(Vt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+sr),Pi=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+sr),qs=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+sr),Zr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+sr),yo=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+sr),Ui=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+sr),zi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),Ho=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ra=i([qr,Jn,Pi,qs,Zr,yo,Ui,zi,Ho].join("|")),Ws=i(i(pn+"|"+Se)+"+");i("[vV]"+Ce+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Se+"|"+r(pn,St))+"*");var nc=i(Se+"|"+r(pn,St,"[\\:\\@]"));return i(i(Se+"|"+r(pn,St,"[\\@]"))+"+"),i(i(nc+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,qt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+kr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ra+")"+i(i("\\%25|\\%(?!"+Ce+"{2})")+"("+Ws+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ce=[],Se=!0,ot=!1,St=void 0;try{for(var qt=ee[Symbol.iterator](),On;!(Se=(On=qt.next()).done)&&(Ce.push(On.value),!(ae&&Ce.length===ae));Se=!0);}catch(jn){ot=!0,St=jn}finally{try{!Se&&qt.return&&qt.return()}finally{if(ot)throw St}}return Ce}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,_=700,E=72,w=128,S="-",x=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,O=Math.floor,D=String.fromCharCode;function $(oe){throw new RangeError(I[oe])}function F(oe,ee){for(var ae=[],Ce=oe.length;Ce--;)ae[Ce]=ee(oe[Ce]);return ae}function M(oe,ee){var ae=oe.split("@"),Ce="";ae.length>1&&(Ce=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Ce+ot}function B(oe){for(var ee=[],ae=0,Ce=oe.length;ae<Ce;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Ce){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var z=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},U=function(ee,ae,Ce){var Se=0;for(ee=Ce?O(ee/_):ee>>1,ee+=O(ee/ae);ee>R*y>>1;Se+=m)ee=O(ee/R);return O(Se+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Ce=ee.length,Se=0,ot=w,St=E,qt=ee.lastIndexOf(S);qt<0&&(qt=0);for(var On=0;On<qt;++On)ee.charCodeAt(On)>=128&&$("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=qt>0?qt+1:0;jn<Ce;){for(var pn=Se,ir=1,kr=m;;kr+=m){jn>=Ce&&$("invalid-input");var Vt=H(ee.charCodeAt(jn++));(Vt>=m||Vt>O((p-Se)/ir))&&$("overflow"),Se+=Vt*ir;var sr=kr<=St?g:kr>=St+y?y:kr-St;if(Vt<sr)break;var qr=m-sr;ir>O(p/qr)&&$("overflow"),ir*=qr}var Jn=ae.length+1;St=U(Se-pn,Jn,pn==0),O(Se/Jn)>p-ot&&$("overflow"),ot+=O(Se/Jn),Se%=Jn,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ce=ee.length,Se=w,ot=0,St=E,qt=!0,On=!1,jn=void 0;try{for(var pn=ee[Symbol.iterator](),ir;!(qt=(ir=pn.next()).done);qt=!0){var kr=ir.value;kr<128&&ae.push(D(kr))}}catch(Oe){On=!0,jn=Oe}finally{try{!qt&&pn.return&&pn.return()}finally{if(On)throw jn}}var Vt=ae.length,sr=Vt;for(Vt&&ae.push(S);sr<Ce;){var qr=p,Jn=!0,Pi=!1,qs=void 0;try{for(var Zr=ee[Symbol.iterator](),yo;!(Jn=(yo=Zr.next()).done);Jn=!0){var Ui=yo.value;Ui>=Se&&Ui<qr&&(qr=Ui)}}catch(Oe){Pi=!0,qs=Oe}finally{try{!Jn&&Zr.return&&Zr.return()}finally{if(Pi)throw qs}}var zi=sr+1;qr-Se>O((p-ot)/zi)&&$("overflow"),ot+=(qr-Se)*zi,Se=qr;var Ho=!0,Ra=!1,Ws=void 0;try{for(var nc=ee[Symbol.iterator](),_d;!(Ho=(_d=nc.next()).done);Ho=!0){var Y=_d.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ye=se-fe,le=m-fe;ae.push(D(P(fe+ye%le,0))),se=O(ye/le)}ae.push(D(P(se,0))),St=U(ot,zi,sr==Vt),ot=0,++sr}}}catch(Oe){Ra=!0,Ws=Oe}finally{try{!Ho&&nc.return&&nc.return()}finally{if(Ra)throw Ws}}++ot,++Se}return ae.join("")},q=function(ee){return M(ee,function(ae){return x.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:z},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Ce=oe.length;ae<Ce;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Ce-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Ce-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),qt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(St&63)<<6|qt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ve(oe,ee){function ae(Ce){var Se=he(Ce);return Se.match(ee.UNRESERVED)?Se:Ce}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ce=d(ae,2),Se=Ce[1];return Se?Se.split(".").map(Ie).join("."):oe}function Xe(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ce=d(ae,3),Se=Ce[1],ot=Ce[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),qt=d(St,2),On=qt[0],jn=qt[1],pn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),kr=ee.IPV4ADDRESS.test(ir[ir.length-1]),Vt=kr?7:8,sr=ir.length-Vt,qr=Array(Vt),Jn=0;Jn<Vt;++Jn)qr[Jn]=pn[Jn]||ir[sr+Jn]||"";kr&&(qr[Vt-1]=be(qr[Vt-1],ee));var Pi=qr.reduce(function(zi,Ho,Ra){if(!Ho||Ho==="0"){var Ws=zi[zi.length-1];Ws&&Ws.index+Ws.length===Ra?Ws.length++:zi.push({index:Ra,length:1})}return zi},[]),qs=Pi.sort(function(zi,Ho){return Ho.length-zi.length})[0],Zr=void 0;if(qs&&qs.length>1){var yo=qr.slice(0,qs.index),Ui=qr.slice(qs.index+qs.length);Zr=yo.join(":")+"::"+Ui.join(":")}else Zr=qr.join(":");return ot&&(Zr+="%"+ot),Zr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ce=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Xe(be(ae.host,Ce),Ce)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Ce.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ve(ae,c)}else ve(ae,Ce);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ce=[];return oe.userinfo!==void 0&&(Ce.push(oe.userinfo),Ce.push("@")),oe.host!==void 0&&Ce.push(Xe(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ce.push(":"),Ce.push(String(oe.port))),Ce.length?Ce.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Ce=ae[0];oe=oe.slice(Ce.length),ee.push(Ce)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ge(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ce=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(qt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+qt}}ve(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ce.push(oe.scheme),Ce.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ce.push("//"),Ce.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ce.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ce.push(St)}return oe.query!==void 0&&(Ce.push("?"),Ce.push(oe.query)),oe.fragment!==void 0&&(Ce.push("#"),Ce.push(oe.fragment)),Ce.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ce=arguments[3],Se={};return Ce||(oe=it(ge(oe,ae),ae),ee=it(ge(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=We(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Ce=u({scheme:"null"},ae);return ge(ht(it(oe,Ce),it(ee,Ce),Ce,!0),Ce)}function pe(oe,ee){return typeof oe=="string"?oe=ge(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ge(oe,ee),ee)),oe}function Ae(oe,ee,ae){return typeof oe=="string"?oe=ge(it(oe,ae),ae):s(oe)==="object"&&(oe=ge(oe,ae)),typeof ee=="string"?ee=ge(it(ee,ae),ae):s(ee)==="object"&&(ee=ge(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ce=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ce?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Ar(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ce=ee;return Ce.secure=Ar(Ce),Ce.resourceName=(Ce.path||"/")+(Ce.query?"?"+Ce.query:""),Ce.path=void 0,Ce.query=void 0,Ce},serialize:function(ee,ae){if((ee.port===(Ar(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ce=ee.resourceName.split("?"),Se=d(Ce,2),ot=Se[0],St=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},gn={},An="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),Vo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ji="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",In=r(ji,'[\\"\\\\]'),Bi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ir=new RegExp(An,"g"),vs=new RegExp(rr,"g"),dp=new RegExp(r("[^]",Vo,"[\\.]",'[\\"]',In),"g"),fl=new RegExp(r("[^]",An,Bi),"g"),bd=fl;function Sr(oe){var ee=he(oe);return ee.match(Ir)?ee:oe}var Ni={scheme:"mailto",parse:function(ee,ae){var Ce=ee,Se=Ce.to=Ce.path?Ce.path.split(","):[];if(Ce.path=void 0,Ce.query){for(var ot=!1,St={},qt=Ce.query.split("&"),On=0,jn=qt.length;On<jn;++On){var pn=qt[On].split("=");switch(pn[0]){case"to":for(var ir=pn[1].split(","),kr=0,Vt=ir.length;kr<Vt;++kr)Se.push(ir[kr]);break;case"subject":Ce.subject=ut(pn[1],ae);break;case"body":Ce.body=ut(pn[1],ae);break;default:ot=!0,St[ut(pn[0],ae)]=ut(pn[1],ae);break}}ot&&(Ce.headers=St)}Ce.query=void 0;for(var sr=0,qr=Se.length;sr<qr;++sr){var Jn=Se[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(Pi){Ce.error=Ce.error||"Email address's domain name can not be converted to ASCII via punycode: "+Pi}Se[sr]=Jn.join("@")}return Ce},serialize:function(ee,ae){var Ce=ee,Se=a(ee.to);if(Se){for(var ot=0,St=Se.length;ot<St;++ot){var qt=String(Se[ot]),On=qt.lastIndexOf("@"),jn=qt.slice(0,On).replace(vs,Sr).replace(vs,o).replace(dp,de),pn=qt.slice(On+1);try{pn=ae.iri?ne.toUnicode(pn):ne.toASCII(ut(pn,ae).toLowerCase())}catch(sr){Ce.error=Ce.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[ot]=jn+"@"+pn}Ce.path=Se.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var kr=[];for(var Vt in ir)ir[Vt]!==gn[Vt]&&kr.push(Vt.replace(vs,Sr).replace(vs,o).replace(fl,de)+"="+ir[Vt].replace(vs,Sr).replace(vs,o).replace(bd,de));return kr.length&&(Ce.query=kr.join("&")),Ce}},Jr=/^([^\:]+)\:(.*)/,du={scheme:"urn",parse:function(ee,ae){var Ce=ee.path&&ee.path.match(Jr),Se=ee;if(Ce){var ot=ae.scheme||Se.scheme||"urn",St=Ce[1].toLowerCase(),qt=Ce[2],On=ot+":"+(ae.nid||St),jn=ce[On];Se.nid=St,Se.nss=qt,Se.path=void 0,jn&&(Se=jn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Ce=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Ce+":"+(ae.nid||Se),St=ce[ot];St&&(ee=St.serialize(ee,ae));var qt=ee,On=ee.nss;return qt.path=(Se||ae.nid)+":"+On,qt}},Ia=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ka={scheme:"urn:uuid",parse:function(ee,ae){var Ce=ee;return Ce.uuid=Ce.nss,Ce.nss=void 0,!ae.tolerant&&(!Ce.uuid||!Ce.uuid.match(Ia))&&(Ce.error=Ce.error||"UUID is not valid."),Ce},serialize:function(ee,ae){var Ce=ee;return Ce.nss=(ee.uuid||"").toLowerCase(),Ce}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ni.scheme]=Ni,ce[du.scheme]=du,ce[ka.scheme]=ka,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=ge,n.resolveComponents=ht,n.resolve=vt,n.normalize=pe,n.equal=Ae,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(gV,gV.exports);var FAt=gV.exports;Object.defineProperty(HQ,"__esModule",{value:!0});const VRe=FAt;VRe.code='require("ajv/dist/runtime/uri").default';HQ.default=VRe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Vf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=zk,i=RS,s=tb,o=Nu,a=Dn,u=Io,l=Rs,c=wt,f=LAt,d=HQ,h=(P,U)=>new RegExp(P,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(P){var U,W,j,q,G,ne,ce,de,he,ve,Ie,be,Xe,Ue,yt,it,_e,ke,ze,ct,Ot,We,ge,ht,vt;const pe=P.strict,Ae=(U=P.code)===null||U===void 0?void 0:U.optimize,He=Ae===!0||Ae===void 0?1:Ae||0,ut=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=P.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=P.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=P.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ve=(he=P.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ve!==void 0?ve:"log",strictTuples:(be=(Ie=P.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&be!==void 0?be:"log",strictRequired:(Ue=(Xe=P.strictRequired)!==null&&Xe!==void 0?Xe:pe)!==null&&Ue!==void 0?Ue:!1,code:P.code?{...P.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=P.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=P.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=P.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=P.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=P.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(We=P.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(ge=P.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(ht=P.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=P.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,..._(U)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(U.logger);const q=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),w.call(this,g,U,"NOT SUPPORTED"),w.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=I.call(this),U.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&A.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),x.call(this),U.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&U&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let j;if(typeof U=="string"){if(j=this.getSchema(U),!j)throw new Error(`no schema with key or ref "${U}"`)}else j=this.compile(U);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(U,W){const j=this._addSchema(U,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,U,W);async function q(ve,Ie){await G.call(this,ve.$schema);const be=this._addSchema(ve,Ie);return be.validate||ne.call(this,be)}async function G(ve){ve&&!this.getSchema(ve)&&await q.call(this,{$ref:ve},!0)}async function ne(ve){try{return this._compileSchemaEnv(ve)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ve)}}function ce({missingSchema:ve,missingRef:Ie}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Ie} cannot be resolved`)}async function de(ve){const Ie=await he.call(this,ve);this.refs[ve]||await G.call(this,Ie.$schema),this.refs[ve]||this.addSchema(Ie,ve,W)}async function he(ve){const Ie=this._loading[ve];if(Ie)return Ie;try{return await(this._loading[ve]=j(ve))}finally{delete this._loading[ve]}}}addSchema(U,W,j,q=this.opts.validateSchema){if(Array.isArray(U)){for(const ne of U)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof U=="object"){const{schemaId:ne}=this.opts;if(G=U[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(U,j,W,q,!0),this}addMetaSchema(U,W,j=this.opts.validateSchema){return this.addSchema(U,W,!0,j),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let j;if(j=U.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,U);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(U){let W;for(;typeof(W=S.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let j=U[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let j;if(typeof U=="string")j=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof U=="object"&&W===void 0){if(W=U,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===U);q>=0&&j.rules.splice(q,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!U||U.length===0?"No errors":U.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(U,W){const j=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const q of W){const G=q.split("/").slice(1);let ne=U;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ve=ne[ce];he&&ve&&(ne[ce]=H(ve))}}return U}_removeAllSchemas(U,W){for(const j in U){const q=U[j];(!W||W.test(j))&&(typeof q=="string"?delete U[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete U[j]))}}_addSchema(U,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof U=="object")ne=U[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(U);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,U,j);return de=new o.SchemaEnv({schema:U,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(U,!0),de}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function w(P,U,W,j="error"){for(const q in P){const G=q;G in U&&this.logger[j](`${W}: option ${q}. ${P[G]}`)}}function S(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function x(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const U in P)this.addSchema(P[U],U)}function C(){for(const P in this.opts.formats){const U=this.opts.formats[P];U&&this.addFormat(P,U)}}function A(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in P){const W=P[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function I(){const P={...this.opts};for(const U of p)delete P[U];return P}const R={log(){},warn(){},error(){}};function O(P){if(P===!1)return R;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,U){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!D.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,U,W){var j;const q=U==null?void 0:U.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[P]=!0,!U)return;const ce={keyword:P,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?M.call(this,ne,ce,U.before):ne.rules.push(ce),G.all[P]=ce,(j=U.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function M(P,U,W){const j=P.rules.findIndex(q=>q.keyword===W);j>=0?P.rules.splice(j,0,U):(P.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:U}=P;U!==void 0&&(P.$data&&this.opts.$data&&(U=H(U)),P.validateSchema=this.compile(U,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(P){return{anyOf:[P,z]}}})(fRe);var qQ={},WQ={},GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const jAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};GQ.default=jAt;var nb={};Object.defineProperty(nb,"__esModule",{value:!0});nb.callRef=nb.getValidate=void 0;const BAt=RS,lde=Nn,_u=Dn,D_=ep,cde=Nu,nP=wt,UAt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=cde.resolveRef.call(u,l,i,n);if(c===void 0)throw new BAt.default(r.opts.uriResolver,i,n);if(c instanceof cde.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return ND(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return ND(e,(0,_u._)`${p}.validate`,l,l.$async)}function d(p){const m=HRe(e,p);ND(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,_u.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:_u.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function HRe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,_u._)`${n.scopeValue("wrapper",{ref:t})}.validate`}nb.getValidate=HRe;function ND(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?D_.default.this:_u.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,_u._)`await ${(0,lde.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,_u._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,lde.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,_u._)`${p}.errors`;i.assign(D_.default.vErrors,(0,_u._)`${D_.default.vErrors} === null ? ${m} : ${D_.default.vErrors}.concat(${m})`),i.assign(D_.default.errors,(0,_u._)`${D_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=nP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,_u._)`${p}.evaluated.props`);s.props=nP.mergeEvaluated.props(i,y,s.props,_u.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=nP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,_u._)`${p}.evaluated.items`);s.items=nP.mergeEvaluated.items(i,y,s.items,_u.Name)}}}nb.callRef=ND;nb.default=UAt;Object.defineProperty(WQ,"__esModule",{value:!0});const zAt=GQ,VAt=nb,HAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",zAt.default,VAt.default];WQ.default=HAt;var YQ={},KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});const $$=Dn,wg=$$.operators,M$={maximum:{okStr:"<=",ok:wg.LTE,fail:wg.GT},minimum:{okStr:">=",ok:wg.GTE,fail:wg.LT},exclusiveMaximum:{okStr:"<",ok:wg.LT,fail:wg.GTE},exclusiveMinimum:{okStr:">",ok:wg.GT,fail:wg.LTE}},qAt={message:({keyword:e,schemaCode:t})=>(0,$$.str)`must be ${M$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,$$._)`{comparison: ${M$[e].okStr}, limit: ${t}}`},WAt={keyword:Object.keys(M$),type:"number",schemaType:"number",$data:!0,error:qAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,$$._)`${n} ${M$[t].fail} ${r} || isNaN(${n})`)}};KQ.default=WAt;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const $C=Dn,GAt={message:({schemaCode:e})=>(0,$C.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,$C._)`{multipleOf: ${e}}`},YAt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:GAt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,$C._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,$C._)`${o} !== parseInt(${o})`;e.fail$data((0,$C._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};XQ.default=YAt;var QQ={},JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});function qRe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}JQ.default=qRe;qRe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(QQ,"__esModule",{value:!0});const G1=Dn,KAt=wt,XAt=JQ,QAt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,G1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,G1._)`{limit: ${e}}`},JAt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:QAt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?G1.operators.GT:G1.operators.LT,o=i.opts.unicode===!1?(0,G1._)`${n}.length`:(0,G1._)`${(0,KAt.useFunc)(e.gen,XAt.default)}(${n})`;e.fail$data((0,G1._)`${o} ${s} ${r}`)}};QQ.default=JAt;var ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const ZAt=Nn,L$=Dn,eIt={message:({schemaCode:e})=>(0,L$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,L$._)`{pattern: ${e}}`},tIt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:eIt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,L$._)`(new RegExp(${i}, ${o}))`:(0,ZAt.usePattern)(e,r);e.fail$data((0,L$._)`!${a}.test(${t})`)}};ZQ.default=tIt;var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});const MC=Dn,nIt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,MC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,MC._)`{limit: ${e}}`},rIt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:nIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?MC.operators.GT:MC.operators.LT;e.fail$data((0,MC._)`Object.keys(${n}).length ${i} ${r}`)}};eJ.default=rIt;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const jT=Nn,LC=Dn,iIt=wt,sIt={message:({params:{missingProperty:e}})=>(0,LC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,LC._)`{missingProperty: ${e}}`},oIt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:sIt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,iIt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(LC.nil,f);else for(const h of n)(0,jT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,jT.checkMissingProp)(e,n,h)),(0,jT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,jT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,jT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,LC.not)(p),()=>{e.error(),t.break()})},LC.nil)}}};tJ.default=oIt;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const FC=Dn,aIt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,FC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,FC._)`{limit: ${e}}`},uIt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:aIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?FC.operators.GT:FC.operators.LT;e.fail$data((0,FC._)`${n}.length ${i} ${r}`)}};nJ.default=uIt;var rJ={},Vk={};Object.defineProperty(Vk,"__esModule",{value:!0});const WRe=QY;WRe.code='require("ajv/dist/runtime/equal").default';Vk.default=WRe;Object.defineProperty(rJ,"__esModule",{value:!0});const y9=Rs,Eo=Dn,lIt=wt,cIt=Vk,fIt={message:({params:{i:e,j:t}})=>(0,Eo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Eo._)`{i: ${e}, j: ${t}}`},dIt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:fIt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,y9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Eo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Eo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Eo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,y9.checkDataTypes)(l,g,a.opts.strictNumbers,y9.DataType.Wrong),v=t.const("indices",(0,Eo._)`{}`);t.for((0,Eo._)`;${p}--;`,()=>{t.let(g,(0,Eo._)`${n}[${p}]`),t.if(y,(0,Eo._)`continue`),l.length>1&&t.if((0,Eo._)`typeof ${g} == "string"`,(0,Eo._)`${g} += "_"`),t.if((0,Eo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Eo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Eo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,lIt.useFunc)(t,cIt.default),y=t.name("outer");t.label(y).for((0,Eo._)`;${p}--;`,()=>t.for((0,Eo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Eo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};rJ.default=dIt;var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const yV=Dn,hIt=wt,pIt=Vk,mIt={message:"must be equal to constant",params:({schemaCode:e})=>(0,yV._)`{allowedValue: ${e}}`},gIt={keyword:"const",$data:!0,error:mIt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,yV._)`!${(0,hIt.useFunc)(t,pIt.default)}(${n}, ${i})`):e.fail((0,yV._)`${s} !== ${n}`)}};iJ.default=gIt;var sJ={};Object.defineProperty(sJ,"__esModule",{value:!0});const M2=Dn,yIt=wt,vIt=Vk,bIt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,M2._)`{allowedValues: ${e}}`},_It={keyword:"enum",schemaType:"array",$data:!0,error:bIt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,yIt.useFunc)(t,vIt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,M2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,M2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,M2._)`${l()}(${n}, ${h}[${p}])`:(0,M2._)`${n} === ${m}`}}};sJ.default=_It;Object.defineProperty(YQ,"__esModule",{value:!0});const wIt=KQ,EIt=XQ,xIt=QQ,SIt=ZQ,TIt=eJ,CIt=tJ,AIt=nJ,IIt=rJ,kIt=iJ,RIt=sJ,NIt=[wIt.default,EIt.default,xIt.default,SIt.default,TIt.default,CIt.default,AIt.default,IIt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},kIt.default,RIt.default];YQ.default=NIt;var oJ={},NS={};Object.defineProperty(NS,"__esModule",{value:!0});NS.validateAdditionalItems=void 0;const Y1=Dn,vV=wt,PIt={message:({params:{len:e}})=>(0,Y1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Y1._)`{limit: ${e}}`},DIt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:PIt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,vV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}GRe(e,r)}};function GRe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Y1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Y1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,vV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Y1._)`${a} <= ${t.length}`);n.if((0,Y1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:vV.Type.Num},l),o.allErrors||n.if((0,Y1.not)(l),()=>n.break())})}}NS.validateAdditionalItems=GRe;NS.default=DIt;var aJ={},PS={};Object.defineProperty(PS,"__esModule",{value:!0});PS.validateTuple=void 0;const fde=Dn,PD=wt,OIt=Nn,$It={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return YRe(e,"additionalItems",t);n.items=!0,!(0,PD.alwaysValidSchema)(n,t)&&e.ok((0,OIt.validateArray)(e))}};function YRe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=PD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,fde._)`${s}.length`);n.forEach((f,d)=>{(0,PD.alwaysValidSchema)(a,f)||(r.if((0,fde._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,PD.checkStrictMode)(a,g,d.strictTuples)}}}PS.validateTuple=YRe;PS.default=$It;Object.defineProperty(aJ,"__esModule",{value:!0});const MIt=PS,LIt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,MIt.validateTuple)(e,"items")};aJ.default=LIt;var uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const dde=Dn,FIt=wt,jIt=Nn,BIt=NS,UIt={message:({params:{len:e}})=>(0,dde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,dde._)`{limit: ${e}}`},zIt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:UIt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,FIt.alwaysValidSchema)(r,t)&&(i?(0,BIt.validateAdditionalItems)(e,i):e.ok((0,jIt.validateArray)(e)))}};uJ.default=zIt;var lJ={};Object.defineProperty(lJ,"__esModule",{value:!0});const pc=Dn,rP=wt,VIt={message:({params:{min:e,max:t}})=>t===void 0?(0,pc.str)`must contain at least ${e} valid item(s)`:(0,pc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,pc._)`{minContains: ${e}}`:(0,pc._)`{minContains: ${e}, maxContains: ${t}}`},HIt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:VIt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,pc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,rP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,rP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,rP.alwaysValidSchema)(s,n)){let m=(0,pc._)`${c} >= ${o}`;a!==void 0&&(m=(0,pc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,pc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:rP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,pc._)`${m}++`),a===void 0?t.if((0,pc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,pc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,pc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};lJ.default=HIt;var KRe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dn,n=wt,r=Nn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(KRe);var cJ={};Object.defineProperty(cJ,"__esModule",{value:!0});const XRe=Dn,qIt=wt,WIt={message:"property name must be valid",params:({params:e})=>(0,XRe._)`{propertyName: ${e.propertyName}}`},GIt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:WIt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,qIt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,XRe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};cJ.default=GIt;var g4={};Object.defineProperty(g4,"__esModule",{value:!0});const iP=Nn,cf=Dn,YIt=ep,sP=wt,KIt={message:"must NOT have additional properties",params:({params:e})=>(0,cf._)`{additionalProperty: ${e.additionalProperty}}`},XIt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:KIt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,sP.alwaysValidSchema)(o,n))return;const l=(0,iP.allSchemaProperties)(r.properties),c=(0,iP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,cf._)`${s} === ${YIt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,sP.schemaRefOrVal)(o,r.properties,"properties");y=(0,iP.isOwnProperty)(t,v,g)}else l.length?y=(0,cf.or)(...l.map(v=>(0,cf._)`${g} === ${v}`)):y=cf.nil;return c.length&&(y=(0,cf.or)(y,...c.map(v=>(0,cf._)`${(0,iP.usePattern)(e,v)}.test(${g})`))),(0,cf.not)(y)}function h(g){t.code((0,cf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,sP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,cf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,cf.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:sP.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};g4.default=XIt;var fJ={};Object.defineProperty(fJ,"__esModule",{value:!0});const QIt=Vf,hde=Nn,v9=wt,pde=g4,JIt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&pde.default.code(new QIt.KeywordCxt(s,pde.default,"additionalProperties"));const o=(0,hde.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=v9.mergeEvaluated.props(t,(0,v9.toHash)(o),s.props));const a=o.filter(f=>!(0,v9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,hde.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};fJ.default=JIt;var dJ={};Object.defineProperty(dJ,"__esModule",{value:!0});const mde=Nn,oP=Dn,gde=wt,yde=wt,ZIt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,mde.allSchemaProperties)(n),u=a.filter(m=>(0,gde.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof oP.Name)&&(s.props=(0,yde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,gde.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,oP._)`${(0,mde.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:yde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,oP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,oP.not)(c),()=>t.break())})})}}};dJ.default=ZIt;var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});const ekt=wt,tkt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,ekt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};hJ.default=tkt;var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const nkt=Nn,rkt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:nkt.validateUnion,error:{message:"must match a schema in anyOf"}};pJ.default=rkt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const DD=Dn,ikt=wt,skt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,DD._)`{passingSchemas: ${e.passing}}`},okt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:skt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,ikt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,DD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,DD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,DD.Name)})})}}};mJ.default=okt;var gJ={};Object.defineProperty(gJ,"__esModule",{value:!0});const akt=wt,ukt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,akt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};gJ.default=ukt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const F$=Dn,QRe=wt,lkt={message:({params:e})=>(0,F$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,F$._)`{failingKeyword: ${e.ifClause}}`},ckt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:lkt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,QRe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=vde(r,"then"),s=vde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,F$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,F$._)`${c}`):e.setParams({ifClause:c})}}}};function vde(e,t){const n=e.schema[t];return n!==void 0&&!(0,QRe.alwaysValidSchema)(e,n)}yJ.default=ckt;var vJ={};Object.defineProperty(vJ,"__esModule",{value:!0});const fkt=wt,dkt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,fkt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};vJ.default=dkt;Object.defineProperty(oJ,"__esModule",{value:!0});const hkt=NS,pkt=aJ,mkt=PS,gkt=uJ,ykt=lJ,vkt=KRe,bkt=cJ,_kt=g4,wkt=fJ,Ekt=dJ,xkt=hJ,Skt=pJ,Tkt=mJ,Ckt=gJ,Akt=yJ,Ikt=vJ;function kkt(e=!1){const t=[xkt.default,Skt.default,Tkt.default,Ckt.default,Akt.default,Ikt.default,bkt.default,_kt.default,vkt.default,wkt.default,Ekt.default];return e?t.push(pkt.default,gkt.default):t.push(hkt.default,mkt.default),t.push(ykt.default),t}oJ.default=kkt;var bJ={},_J={};Object.defineProperty(_J,"__esModule",{value:!0});const is=Dn,Rkt={message:({schemaCode:e})=>(0,is.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,is._)`{format: ${e}}`},Nkt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Rkt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,is._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,is._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,is._)`${m}.type || "string"`).assign(y,(0,is._)`${m}.validate`),()=>n.assign(g,(0,is._)`"string"`).assign(y,m)),e.fail$data((0,is.or)(v(),_()));function v(){return u.strictSchema===!1?is.nil:(0,is._)`${o} && !${y}`}function _(){const E=c.$async?(0,is._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,is._)`${y}(${r})`,w=(0,is._)`(typeof ${y} == "function" ? ${E} : ${y}.test(${r}))`;return(0,is._)`${y} && ${y} !== true && ${g} === ${t} && !${w}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(E());function v(){if(u.strictSchema===!1){f.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(w){const S=w instanceof RegExp?(0,is.regexpCode)(w):u.code.formats?(0,is._)`${u.code.formats}${(0,is.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:w,code:S});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,is._)`${x}.validate`]:["string",w,x]}function E(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,is._)`await ${y}(${r})`}return typeof g=="function"?(0,is._)`${y}(${r})`:(0,is._)`${y}.test(${r})`}}}};_J.default=Nkt;Object.defineProperty(bJ,"__esModule",{value:!0});const Pkt=_J,Dkt=[Pkt.default];bJ.default=Dkt;var lx={};Object.defineProperty(lx,"__esModule",{value:!0});lx.contentVocabulary=lx.metadataVocabulary=void 0;lx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];lx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(qQ,"__esModule",{value:!0});const Okt=WQ,$kt=YQ,Mkt=oJ,Lkt=bJ,bde=lx,Fkt=[Okt.default,$kt.default,(0,Mkt.default)(),Lkt.default,bde.metadataVocabulary,bde.contentVocabulary];qQ.default=Fkt;var wJ={},y4={};Object.defineProperty(y4,"__esModule",{value:!0});y4.DiscrError=void 0;var _de;(function(e){e.Tag="tag",e.Mapping="mapping"})(_de||(y4.DiscrError=_de={}));Object.defineProperty(wJ,"__esModule",{value:!0});const tw=Dn,bV=y4,wde=Nu,jkt=RS,Bkt=wt,Ukt={message:({params:{discrError:e,tagName:t}})=>e===bV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,tw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},zkt={keyword:"discriminator",type:"object",schemaType:"object",error:Ukt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,tw._)`${n}${(0,tw.getProperty)(a)}`);t.if((0,tw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:bV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,tw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:bV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,tw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let E=0;E<o.length;E++){let w=o[E];if(w!=null&&w.$ref&&!(0,Bkt.schemaHasRulesButRef)(w,s.self.RULES)){const x=w.$ref;if(w=wde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,x),w instanceof wde.SchemaEnv&&(w=w.schema),w===void 0)throw new jkt.default(s.opts.uriResolver,s.baseId,x)}const S=(h=w==null?void 0:w.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(w)),v(S,E)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:E}){return Array.isArray(E)&&E.includes(a)}function v(E,w){if(E.const)_(E.const,w);else if(E.enum)for(const S of E.enum)_(S,w);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(E,w){if(typeof E!="string"||E in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[E]=w}}}};wJ.default=zkt;const Vkt="http://json-schema.org/draft-07/schema#",Hkt="http://json-schema.org/draft-07/schema#",qkt="Core schema meta-schema",Wkt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Gkt=["object","boolean"],Ykt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Kkt={$schema:Vkt,$id:Hkt,title:qkt,definitions:Wkt,type:Gkt,properties:Ykt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=fRe,r=qQ,i=wJ,s=Kkt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Vf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=zk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=RS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(fV,fV.exports);var Xkt=fV.exports;const JRe=Xl(Xkt),Qkt="#/definitions/StudyConfig",Jkt="http://json-schema.org/draft-07/schema#",Zkt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.5/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.5/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.5/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},eRt={$ref:Qkt,$schema:Jkt,definitions:Zkt},tRt="#/definitions/GlobalConfig",nRt="http://json-schema.org/draft-07/schema#",rRt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},iRt={$ref:tRt,$schema:nRt,definitions:rRt},ZRe=new JRe;ZRe.addSchema(iRt);const Ede=ZRe.getSchema("#/definitions/GlobalConfig"),eNe=new JRe;eNe.addSchema(eRt);const b9=eNe.getSchema("#/definitions/StudyConfig");function sRt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function v4(e){return e.baseComponent!==void 0}function oRt(e){const t=DQ.parse(e),n=Ede(t),r=sRt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ede.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function tNe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):tNe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function aRt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;v4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=gxe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return tNe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function uRt(e){let t=!1,n;try{n=DQ.parse(e),t=b9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=aRt(n);r=[...b9.errors||[],...s],i=o}else r=b9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function nNe(){const e=Zm(),{setAlertModal:t}=Yh(),n=Kh();k.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var xde=Object.prototype.hasOwnProperty;function Sde(e,t,n){for(n of e.keys())if(jC(n,t))return n}function jC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&jC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Sde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Sde(t,i),!i)||!jC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(xde.call(e,n)&&++r&&!xde.call(t,n)||!(n in t)||!jC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function lRt(e){var t=k.useRef(e),n=k.useRef(0);return jC(e,t.current)||(t.current=e,n.current+=1),k.useMemo(function(){return t.current},[n.current])}function cRt(e,t){return k.useEffect(e,lRt(t))}const fRt=(e,t=null)=>{const[n,r]=k.useState("idle"),[i,s]=k.useState(null),[o,a]=k.useState(null),u=k.useRef(),l=k.useRef(!1);k.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=k.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return cRt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function rNe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Tde=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],iNe=["participantId","trialId","trialOrder","responseId"];function EJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function dRt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(Tm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=v4(u)&&u.baseComponent&&n.baseComponents?KY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=rNe(s);return Object.entries(s.answer).map(([h,p])=>{var y,v;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(_=>_.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const _=(v=(y=l.correctAnswer)==null?void 0:y.find(E=>E.id===h))==null?void 0:v.answer;m.correctAnswer=typeof _=="object"?JSON.stringify(_):_}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()}async function hRt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...iNe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await dRt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function pRt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=k.useState([...Tde].filter(h=>h!=="meta")),a=gs(),{value:u,status:l,error:c}=fRt(hRt,[s,r,a.storageEngine,i]),f=k.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);EJ(h,n)},[n,u]),d=k.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return b.jsxs($i,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[b.jsx(GG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Tde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:b.jsx(fQe,{}),variant:"filled"}),b.jsx(Nl,{h:"md"}),b.jsxs(me,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?b.jsxs(Ht,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[b.jsx(Ht.Thead,{children:b.jsx(Ht.Tr,{children:u.header.map(h=>b.jsx(Ht.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:b.jsxs(Rt,{direction:"row",justify:"space-between",align:"center",children:[h,!iNe.includes(h)&&b.jsx(Db,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:b.jsx(wY,{size:16})})]})},h))})}),b.jsx(Ht.Tbody,{children:u.rows.slice(0,5).map((h,p)=>b.jsx(Ht.Tr,{children:u.header.map(m=>b.jsx(Ht.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?b.jsx(Qx,{variant:"light",children:c.message}):null,b.jsx(Fl,{visible:l==="pending"||l==="idle"})]}),b.jsx(Nl,{h:"sm"}),b.jsx(Rt,{justify:"center",fz:"sm",c:"dimmed",children:b.jsx(Ke,{children:d})}),b.jsx(Nl,{h:"md"}),b.jsxs(si,{justify:"right",children:[b.jsx(en,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),b.jsx(en,{leftSection:b.jsx(wwe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function mRt(){const e=V0(),{storageEngine:t}=gs(),n=co(v=>v.answers),[r,i]=k.useState(!1);k.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),nNe();const[s,o]=k.useState(),[a,u]=k.useState(""),l=e.studyMetadata.title.replace(" ","_");k.useEffect(()=>{async function v(){if(t){const _=await t.getCurrentParticipantId(),E=await t.getParticipantData();u(_),o(E)}}v()},[t]);const c=k.useCallback(async()=>{EJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=k.useState(Math.floor(d/1e3));k.useEffect(()=>{if(r){const v=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=My(),[g,y]=k.useState(!1);return k.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),b.jsx(Ll,{style:{height:"100%"},children:b.jsx(Rt,{direction:"column",children:r||!g?b.jsx(Ke,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?b.jsx(Za,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):b.jsxs(b.Fragment,{children:[b.jsx(Ke,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),b.jsx(Nl,{h:"lg"}),b.jsx(Ll,{children:b.jsx(Wc,{color:"blue"})})]})})})}function gRt(){return b.jsx(Ke,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function yRt(){var d;const e=V0(),t=Zm(),n=Ly()||"Notfound",r=e.components[n],i=XY();nNe();const{storageEngine:s}=gs(),o=Kh(),{setAlertModal:a}=Yh();if(k.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return b.jsx(mRt,{});if(n==="__trainingFailed")return b.jsx(gRt,{});if(n==="Notfound")return b.jsx(Vv,{email:e.uiConfig.contactEmail});const u=v4(r)&&e.baseComponents?KY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return b.jsxs(b.Fragment,{children:[c==="aboveStimulus"&&b.jsx(Za,{text:l}),b.jsx(i3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),b.jsxs(k.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&b.jsx(y2t,{currentConfig:u}),u.type==="website"&&b.jsx(vat,{currentConfig:u}),u.type==="image"&&b.jsx(_at,{currentConfig:u}),u.type==="react-component"&&b.jsx(g2t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&b.jsx(Za,{text:l}),b.jsx(i3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function _V(e){const[t]=vY();return b.jsx(yY,{...e,to:{pathname:e.to,search:t.toString()}})}function sNe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=sNe(o,t,n,r),r.includes(o.orderPath))break}return i}function oNe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=oNe(s,r)}}),n}function vRt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function bRt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=My(),c=Wh(),f=Zm(),[d,{close:h,open:p}]=gL(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?sNe(n,e,r,a.orderPath):-1,{trialId:y}=Em(),v=y===e,_=s?f===g:f===`reviewer-${e}`,E=u?v:_,w=k.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),x=u?w:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return b.jsxs(Do,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[b.jsx(Do.Target,{children:b.jsx(me,{onMouseEnter:p,onMouseLeave:h,children:b.jsx(HL,{active:E,style:{lineHeight:"32px",height:"32px"},label:b.jsxs(me,{children:[i&&b.jsx(JXe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),E?b.jsx(Ke,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):b.jsx(Ke,{size:"sm",display:"inline",children:e})]}),onClick:x,disabled:t})})}),m&&(m.description||m.meta)&&b.jsx(Do.Dropdown,{onMouseLeave:h,children:b.jsx(Ke,{size:"sm",children:b.jsxs(me,{children:[m.description&&b.jsxs(me,{children:[b.jsx(Ke,{fw:900,display:"inline-block",mr:2,children:"Description:"}),b.jsx(Ke,{fw:400,component:"span",children:m.description})]}),m.meta&&b.jsxs(Ke,{children:[b.jsx(Ke,{fw:"900",component:"span",children:"Task Meta: "}),b.jsx(Ke,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function j$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=E0(e.components);return n&&r&&(o=vRt(E0(e.components),E0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),b.jsx(b.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return b.jsx(bRt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Tm(c).length-oNe(u,c):0,d=Tm(u);return b.jsx(HL,{label:b.jsxs(me,{style:{opacity:f>0?1:.5},children:[b.jsx(Ke,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?b.jsx(XXe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&b.jsxs(b0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&b.jsx(b0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:b.jsx(me,{style:{borderLeft:"1px solid #e9ecef"},children:b.jsx(j$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function aNe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Cde({text:e}){return b.jsx(li,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:b.jsx(vwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function _Rt(){const e=co(f=>f.sequence),t=co(f=>f.metadata),{toggleStudyBrowser:n}=Yh(),r=V0(),i=Kh(),s=My(),o=dwe(`/${s}`),{storageEngine:a}=gs(),u=k.useMemo(()=>{let f=E0(r.sequence);return f=GY(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=k.useState("participant");return b.jsxs(mi.Aside,{p:"0",children:[b.jsx(mi.Section,{children:b.jsxs(Rt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[b.jsx(Ke,{size:"md",fw:700,pt:3,children:"Study Browser"}),b.jsx(en,{variant:"light",leftSection:b.jsx(_Y,{size:14}),onClick:()=>aNe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),b.jsx(Gm,{onClick:()=>i(n()),mt:1})]})}),b.jsx(mi.Section,{grow:!0,component:bm,p:"xs",pt:0,children:b.jsxs(ss,{value:l,onChange:c,children:[b.jsx(me,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:b.jsxs(ss.List,{grow:!0,children:[b.jsxs(ss.Tab,{value:"participant",children:["Participant View",b.jsx(Cde,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),b.jsxs(ss.Tab,{value:"allTrials",children:["All Trials View",b.jsx(Cde,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),b.jsx(ss.Panel,{value:"participant",children:b.jsx(j$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),b.jsx(ss.Panel,{value:"allTrials",children:b.jsx(j$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function wRt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=co(w=>w.config),r=co(w=>w.metadata),i=YY(),s=Kh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Yh(),{storageEngine:u}=gs(),l=Zm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=k.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=My(),y=dwe(`/${g}`),v=k.useRef(null),[_,E]=k.useState(!1);return k.useEffect(()=>{const w=v.current;w&&E(w.scrollWidth>w.offsetWidth)},[n]),b.jsx(mi.Header,{p:"md",children:b.jsxs(qa,{mt:-7,align:"center",children:[b.jsx(qa.Col,{span:4,children:b.jsxs(Rt,{align:"center",children:[b.jsx(Py,{w:40,src:`${Hu}${p}`,alt:"Study Logo"}),b.jsx(Nl,{w:"md"}),b.jsx(Ai,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),b.jsx(qa.Col,{span:4,children:m&&b.jsx(nS,{radius:"md",size:"lg",value:f})}),b.jsx(qa.Col,{span:4,children:b.jsxs(si,{wrap:"nowrap",justify:"right",children:[!t&&b.jsx(li,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:b.jsx(b0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&b.jsx(en,{variant:"outline",onClick:()=>s(o()),children:"Help"}),b.jsxs(Au,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[b.jsx(Au.Target,{children:b.jsx(Db,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:b.jsx(oQe,{})})}),b.jsxs(Au.Dropdown,{children:[e&&b.jsx(Au.Item,{leftSection:b.jsx(vQe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),b.jsx(Au.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:b.jsx(dQe,{size:14}),children:"Contact"}),e&&b.jsx(Au.Item,{leftSection:b.jsx(_Y,{size:14}),onClick:()=>aNe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function uNe(e,t){var n;return v4(e)&&t.baseComponents?KY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function ERt(){var u;const e=(u=V0())==null?void 0:u.uiConfig.sidebar,t=V0(),n=Ly(),r=t.components[n],i=k.useMemo(()=>r?uNe(r,t):null,[r,t]),s=XY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?b.jsxs(mi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&b.jsx(mi.Section,{bg:"gray.3",p:"md",children:b.jsxs(Ke,{c:"gray.9",children:[b.jsx(Ke,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),b.jsx(Za,{text:o})]})}),b.jsx(mi.Section,{p:"md",children:b.jsx(i3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):b.jsx(mi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:b.jsx(i3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function xRt(){const e=co(u=>u.showHelpText),t=co(u=>u.config),n=Kh(),{toggleShowHelpText:r}=Yh(),[i,s]=k.useState(""),[o,a]=k.useState(!0);return k.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await JY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),b.jsx($i,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?b.jsx(Za,{text:i}):b.jsx(Vv,{path:t.uiConfig.helpTextPath})})}function SRt(){const e=co(o=>o.alertModal),{setAlertModal:t}=Yh(),n=Kh(),[r,i]=k.useState(e.show),s=k.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return k.useEffect(()=>i(e.show),[e.show]),b.jsx($i,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:b.jsxs(Qx,{color:"red",radius:"xs",title:"Alert",icon:b.jsx(KXe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[b.jsx(Ke,{my:"md",children:e.message}),b.jsx(si,{w:"100%",justify:"end",children:b.jsx(en,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function TRt(){const e=k.useRef([]),t=V0(),n=t.uiConfig.windowEventDebounceTime??100,r=co(d=>d.showStudyBrowser);k.useEffect(()=>{const d=hf(w=>{e.current.push([Date.now(),"focus",w.target instanceof HTMLElement?w.target.tagName:""])},n,{maxWait:n}),h=hf(w=>{e.current.push([Date.now(),"input",w.data??""])},n,{maxWait:n}),p=hf(w=>{e.current.push([Date.now(),"keypress",w.key])},n,{maxWait:n}),m=hf(w=>{e.current.push([Date.now(),"mousedown",[w.clientX,w.clientY]])},n,{maxWait:n}),g=hf(w=>{e.current.push([Date.now(),"mouseup",[w.clientX,w.clientY]])},n,{maxWait:n}),y=hf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=hf(w=>{e.current.push([Date.now(),"mousemove",[w.clientX,w.clientY]])},n,{maxWait:n}),_=hf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=hf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",E)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=gs(),o=My(),[a,u]=k.useState(!1),[l,c]=k.useState(!1);k.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=k.useMemo(()=>a&&r,[a,r]);return b.jsx(Exe.Provider,{value:e,children:b.jsxs(mi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[b.jsx(ERt,{}),b.jsx(_Rt,{}),b.jsx(wRt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),b.jsx(xRt,{}),b.jsx(SRt,{}),b.jsx(mi.Main,{children:b.jsx(OXe,{})})]})})}function CRt(e,t=!1){return typeof e=="number"?Ade(e,t):Ade(e.length,t).map(r=>r.map(i=>e[i]))}function Ade(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function lNe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=lNe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function ARt(e,t){const n=E0(e);return lNe(n,t,"root")}function cNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&cNe(s,t,i,o)})}function IRt(e){const t=[];return cNe(e,t,"",0),t}function Ide(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return CRt(i.sort(()=>.5-Math.random()),!0)}function kRt(e){const n=IRt(e.sequence).map(s=>({[s]:Ide(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=ARt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Ide(e,o))})}),i}async function RRt(e){const t=await(await fetch(`${Hu}${e}`)).text();return uRt(t)}async function b4(e,t){const n=t.configsList.find(r=>xwe(r)===e);if(n){const r=t.configs[n];return await RRt(`${r.path}`)}return null}async function NRt(e){const t={},n=e.configsList.filter(i=>!e.configs[i].test).map(async i=>b4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function PRt({globalConfig:e}){const t=My(),[n,r]=k.useState(null),i=e.configsList.includes(t);k.useEffect(()=>{b4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=k.useState([]),[a,u]=k.useState(null),{storageEngine:l}=gs(),[c]=vY();k.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await kRt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(S=>""),v=y instanceof Response?await y.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},E=await l.initializeParticipantSession(t,g,n,_,m),w=await Mot(t,n,E.sequence,_,E.answers);u(w),o([{element:b.jsx(TRt,{}),children:[{path:"/",element:b.jsx(_V,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Ai,{order:2,mb:8,children:"Error loading config"}),b.jsx(y7,{issues:n.errors,type:"error"})]}):b.jsx(yRt,{})}]}])}h()},[l,n,t,c]);const f=pwe(s);let d=null;return i?s.length===0?d=b.jsx(Fl,{visible:!0}):d=f&&a?b.jsx(wxe.Provider,{value:a,children:b.jsx(Nst,{store:a.store,children:f})}):b.jsx(Vv,{}):d=b.jsx(Vv,{}),d}var kde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fNe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},DRt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},xJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fNe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):DRt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new ORt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ORt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $Rt=function(e){const t=fNe(e);return xJ.encodeByteArray(t,!0)},B$=function(e){return $Rt(e).replace(/\./g,"")},dNe=function(e){try{return xJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MRt=()=>hNe().__FIREBASE_DEFAULTS__,LRt=()=>{if(typeof process>"u"||typeof kde>"u")return;const e=kde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},FRt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&dNe(e[1]);return t&&JSON.parse(t)},_4=()=>{try{return MRt()||LRt()||FRt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},pNe=e=>{var t,n;return(n=(t=_4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},jRt=e=>{const t=pNe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},mNe=()=>{var e;return(e=_4())===null||e===void 0?void 0:e.config},gNe=e=>{var t;return(t=_4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BRt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[B$(JSON.stringify(n)),B$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function URt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jo())}function zRt(){var e;const t=(e=_4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VRt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function HRt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qRt(){const e=jo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function WRt(){return!zRt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SJ(){try{return typeof indexedDB=="object"}catch{return!1}}function GRt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YRt="FirebaseError";class tp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=YRt,Object.setPrototypeOf(this,tp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,DS.prototype.create)}}class DS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?KRt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new tp(i,a,r)}}function KRt(e,t){return e.replace(XRt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const XRt=/\{\$([^}]+)}/g;function QRt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Rde(s)&&Rde(o)){if(!fI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Rde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function JRt(e,t){const n=new ZRt(e,t);return n.subscribe.bind(n)}class ZRt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eNt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=_9),i.error===void 0&&(i.error=_9),i.complete===void 0&&(i.complete=_9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eNt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function _9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nNt=1e3,rNt=2,iNt=4*60*60*1e3,sNt=.5;function oNt(e,t=nNt,n=rNt){const r=t*Math.pow(n,e),i=Math.round(sNt*r*(Math.random()-.5)*2);return Math.min(iNt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(e){return e&&e._delegate?e._delegate:e}class Dh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new cI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lNt(t))try{this.getOrInitializeService({instanceIdentifier:j1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=j1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=j1){return this.instances.has(t)}getOptions(t=j1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=j1){return this.component?this.component.multipleInstances?t:j1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uNt(e){return e===j1?void 0:e}function lNt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cNt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new aNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const fNt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},dNt=Gn.INFO,hNt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},pNt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=hNt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class w4{constructor(t){this.name=t,this._logLevel=dNt,this._logHandler=pNt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fNt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const mNt=(e,t)=>t.some(n=>e instanceof n);let Nde,Pde;function gNt(){return Nde||(Nde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yNt(){return Pde||(Pde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yNe=new WeakMap,wV=new WeakMap,vNe=new WeakMap,w9=new WeakMap,TJ=new WeakMap;function vNt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(A0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&yNe.set(n,e)}).catch(()=>{}),TJ.set(t,e),t}function bNt(e){if(wV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});wV.set(e,t)}let EV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return wV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vNe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return A0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function _Nt(e){EV=e(EV)}function wNt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(E9(this),t,...n);return vNe.set(r,t.sort?t.sort():[t]),A0(r)}:yNt().includes(e)?function(...t){return e.apply(E9(this),t),A0(yNe.get(this))}:function(...t){return A0(e.apply(E9(this),t))}}function ENt(e){return typeof e=="function"?wNt(e):(e instanceof IDBTransaction&&bNt(e),mNt(e,gNt())?new Proxy(e,EV):e)}function A0(e){if(e instanceof IDBRequest)return vNt(e);if(w9.has(e))return w9.get(e);const t=ENt(e);return t!==e&&(w9.set(e,t),TJ.set(t,e)),t}const E9=e=>TJ.get(e);function xNt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=A0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(A0(o.result),u.oldVersion,u.newVersion,A0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const SNt=["get","getKey","getAll","getAllKeys","count"],TNt=["put","add","delete","clear"],x9=new Map;function Dde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(x9.get(t))return x9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=TNt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SNt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return x9.set(t,s),s}_Nt(e=>({...e,get:(t,n,r)=>Dde(t,n)||e.get(t,n,r),has:(t,n)=>!!Dde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CNt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ANt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ANt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const xV="@firebase/app",Ode="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new w4("@firebase/app"),INt="@firebase/app-compat",kNt="@firebase/analytics-compat",RNt="@firebase/analytics",NNt="@firebase/app-check-compat",PNt="@firebase/app-check",DNt="@firebase/auth",ONt="@firebase/auth-compat",$Nt="@firebase/database",MNt="@firebase/database-compat",LNt="@firebase/functions",FNt="@firebase/functions-compat",jNt="@firebase/installations",BNt="@firebase/installations-compat",UNt="@firebase/messaging",zNt="@firebase/messaging-compat",VNt="@firebase/performance",HNt="@firebase/performance-compat",qNt="@firebase/remote-config",WNt="@firebase/remote-config-compat",GNt="@firebase/storage",YNt="@firebase/storage-compat",KNt="@firebase/firestore",XNt="@firebase/vertexai-preview",QNt="@firebase/firestore-compat",JNt="firebase",ZNt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="[DEFAULT]",ePt={[xV]:"fire-core",[INt]:"fire-core-compat",[RNt]:"fire-analytics",[kNt]:"fire-analytics-compat",[PNt]:"fire-app-check",[NNt]:"fire-app-check-compat",[DNt]:"fire-auth",[ONt]:"fire-auth-compat",[$Nt]:"fire-rtdb",[MNt]:"fire-rtdb-compat",[LNt]:"fire-fn",[FNt]:"fire-fn-compat",[jNt]:"fire-iid",[BNt]:"fire-iid-compat",[UNt]:"fire-fcm",[zNt]:"fire-fcm-compat",[VNt]:"fire-perf",[HNt]:"fire-perf-compat",[qNt]:"fire-rc",[WNt]:"fire-rc-compat",[GNt]:"fire-gcs",[YNt]:"fire-gcs-compat",[KNt]:"fire-fst",[QNt]:"fire-fst-compat",[XNt]:"fire-vertex","fire-js":"fire-js",[JNt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$=new Map,tPt=new Map,TV=new Map;function $de(e,t){try{e.container.addComponent(t)}catch(n){rb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Mm(e){const t=e.name;if(TV.has(t))return rb.debug(`There were multiple attempts to register component ${t}.`),!1;TV.set(t,e);for(const n of U$.values())$de(n,e);for(const n of tPt.values())$de(n,e);return!0}function OS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function rh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},I0=new DS("app","Firebase",nPt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rPt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw I0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=ZNt;function bNe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:SV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw I0.create("bad-app-name",{appName:String(i)});if(n||(n=mNe()),!n)throw I0.create("no-options");const s=U$.get(i);if(s){if(fI(n,s.options)&&fI(r,s.config))return s;throw I0.create("duplicate-app",{appName:i})}const o=new cNt(i);for(const u of TV.values())o.addComponent(u);const a=new rPt(n,r,o);return U$.set(i,a),a}function CJ(e=SV){const t=U$.get(e);if(!t&&e===SV&&mNe())return bNe();if(!t)throw I0.create("no-app",{appName:e});return t}function Hf(e,t,n){var r;let i=(r=ePt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),rb.warn(a.join(" "));return}Mm(new Dh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iPt="firebase-heartbeat-database",sPt=1,dI="firebase-heartbeat-store";let S9=null;function _Ne(){return S9||(S9=xNt(iPt,sPt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(dI)}catch(n){console.warn(n)}}}}).catch(e=>{throw I0.create("idb-open",{originalErrorMessage:e.message})})),S9}async function oPt(e){try{const n=(await _Ne()).transaction(dI),r=await n.objectStore(dI).get(wNe(e));return await n.done,r}catch(t){if(t instanceof tp)rb.warn(t.message);else{const n=I0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});rb.warn(n.message)}}}async function Mde(e,t){try{const r=(await _Ne()).transaction(dI,"readwrite");await r.objectStore(dI).put(t,wNe(e)),await r.done}catch(n){if(n instanceof tp)rb.warn(n.message);else{const r=I0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rb.warn(r.message)}}}function wNe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aPt=1024,uPt=30*24*60*60*1e3;class lPt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fPt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Lde();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=uPt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lde(),{heartbeatsToSend:r,unsentEntries:i}=cPt(this._heartbeatsCache.heartbeats),s=B$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Lde(){return new Date().toISOString().substring(0,10)}function cPt(e,t=aPt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fPt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SJ()?GRt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oPt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Fde(e){return B$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dPt(e){Mm(new Dh("platform-logger",t=>new CNt(t),"PRIVATE")),Mm(new Dh("heartbeat",t=>new lPt(t),"PRIVATE")),Hf(xV,Ode,e),Hf(xV,Ode,"esm2017"),Hf("fire-js","")}dPt("");function ENe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hPt=ENe,xNe=new DS("auth","Firebase",ENe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=new w4("@firebase/auth");function pPt(e,...t){z$.logLevel<=Gn.WARN&&z$.warn(`Auth (${Gb}): ${e}`,...t)}function OD(e,...t){z$.logLevel<=Gn.ERROR&&z$.error(`Auth (${Gb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(e,...t){throw IJ(e,...t)}function qf(e,...t){return IJ(e,...t)}function AJ(e,t,n){const r=Object.assign(Object.assign({},hPt()),{[t]:n});return new DS("auth","Firebase",r).create(t,{appName:e.name})}function k0(e){return AJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mPt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Oh(e,"argument-error"),AJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function IJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return xNe.create(e,...t)}function an(e,t,...n){if(!e)throw IJ(t,...n)}function Qp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw OD(t),new Error(t)}function Lm(e,t){e||Qp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function gPt(){return jde()==="http:"||jde()==="https:"}function jde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yPt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gPt()||VRt()||"connection"in navigator)?navigator.onLine:!0}function vPt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Lm(n>t,"Short delay should be less than long delay!"),this.isMobile=URt()||HRt()}get(){return yPt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(e,t){Lm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bPt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Pt=new qk(3e4,6e4);function E4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function $S(e,t,n,r,i={}){return TNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Hk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),SNe.fetch()(ANe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function TNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},bPt),t);try{const i=new wPt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw aP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw aP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw aP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw aP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw AJ(e,c,l);Oh(e,c)}}catch(i){if(i instanceof tp)throw i;Oh(e,"network-request-failed",{message:String(i)})}}async function CNe(e,t,n,r,i={}){const s=await $S(e,t,n,r,i);return"mfaPendingCredential"in s&&Oh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ANe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?kJ(e.config,i):`${e.config.apiScheme}://${i}`}class wPt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qf(this.auth,"network-request-failed")),_Pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function aP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EPt(e,t){return $S(e,"POST","/v1/accounts:delete",t)}async function INe(e,t){return $S(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function xPt(e,t=!1){const n=oi(e),r=await n.getIdToken(t),i=RJ(r);an(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:BC(T9(i.auth_time)),issuedAtTime:BC(T9(i.iat)),expirationTime:BC(T9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function T9(e){return Number(e)*1e3}function RJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return OD("JWT malformed, contained fewer than 3 sections"),null;try{const i=dNe(n);return i?JSON.parse(i):(OD("Failed to decode base64 JWT payload"),null)}catch(i){return OD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Bde(e){const t=RJ(e);return an(t,"internal-error"),an(typeof t.exp<"u","internal-error"),an(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof tp&&SPt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function SPt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TPt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=BC(this.lastLoginAt),this.creationTime=BC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await hI(e,INe(n,{idToken:r}));an(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?kNe(s.providerUserInfo):[],a=APt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new AV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function CPt(e){const t=oi(e);await V$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function APt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function kNe(e){return e.map(t=>{var{providerId:n}=t,r=ZI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IPt(e,t){const n=await TNe(e,{},async()=>{const r=Hk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=ANe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",SNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kPt(e,t){return $S(e,"POST","/v2/accounts:revokeToken",E4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){an(t.idToken,"internal-error"),an(typeof t.idToken<"u","internal-error"),an(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Bde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){an(t.length!==0,"internal-error");const n=Bde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await IPt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new uE;return r&&(an(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(an(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(an(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new uE,this.toJSON())}_performRefresh(){return Qp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(e,t){an(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Jp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=ZI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TPt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new AV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await hI(this,this.stsTokenManager.getToken(this.auth,t));return an(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return xPt(this,t)}reload(){return CPt(this)}_assign(t){this!==t&&(an(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Jp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await V$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rh(this.auth.app))return Promise.reject(k0(this.auth));const t=await this.getIdToken();return await hI(this,EPt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:E,isAnonymous:w,providerData:S,stsTokenManager:x}=n;an(_&&x,t,"internal-error");const C=uE.fromJSON(this.name,x);an(typeof _=="string",t,"internal-error"),Eg(f,t.name),Eg(d,t.name),an(typeof E=="boolean",t,"internal-error"),an(typeof w=="boolean",t,"internal-error"),Eg(h,t.name),Eg(p,t.name),Eg(m,t.name),Eg(g,t.name),Eg(y,t.name),Eg(v,t.name);const A=new Jp({uid:_,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(I=>Object.assign({},I))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new uE;i.updateFromServerResponse(n);const s=new Jp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await V$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];an(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?kNe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new uE;a.updateFromIdToken(r);const u=new Jp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new AV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ude=new Map;function Zp(e){Lm(e instanceof Function,"Expected a class definition");let t=Ude.get(e);return t?(Lm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ude.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RNe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}RNe.type="NONE";const zde=RNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(e,t,n){return`firebase:${e}:${t}:${n}`}class lE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$D(this.userKey,i.apiKey,s),this.fullPersistenceKey=$D("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Jp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new lE(Zp(zde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Zp(zde);const o=$D(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Jp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new lE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new lE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DNe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(NNe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($Ne(t))return"Blackberry";if(MNe(t))return"Webos";if(NJ(t))return"Safari";if((t.includes("chrome/")||PNe(t))&&!t.includes("edge/"))return"Chrome";if(ONe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NNe(e=jo()){return/firefox\//i.test(e)}function NJ(e=jo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function PNe(e=jo()){return/crios\//i.test(e)}function DNe(e=jo()){return/iemobile/i.test(e)}function ONe(e=jo()){return/android/i.test(e)}function $Ne(e=jo()){return/blackberry/i.test(e)}function MNe(e=jo()){return/webos/i.test(e)}function x4(e=jo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function RPt(e=jo()){var t;return x4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function NPt(){return qRt()&&document.documentMode===10}function LNe(e=jo()){return x4(e)||ONe(e)||MNe(e)||$Ne(e)||/windows phone/i.test(e)||DNe(e)}function PPt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FNe(e,t=[]){let n;switch(e){case"Browser":n=Vde(jo());break;case"Worker":n=`${Vde(jo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DPt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OPt(e,t={}){return $S(e,"GET","/v2/passwordPolicy",E4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Pt=6;class MPt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:$Pt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hde(this),this.idTokenSubscription=new Hde(this),this.beforeStateQueue=new DPt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Zp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await lE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await INe(this,{idToken:t}),r=await Jp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(rh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await V$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=vPt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(rh(this.app))return Promise.reject(k0(this));const n=t?oi(t):null;return n&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return rh(this.app)?Promise.reject(k0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return rh(this.app)?Promise.reject(k0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await OPt(this),n=new MPt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new DS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kPt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Zp(t)||this._popupRedirectResolver;an(n,this,"argument-error"),this.redirectPersistenceManager=await lE.create(this,[Zp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=FNe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&pPt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Wk(e){return oi(e)}class Hde{constructor(t){this.auth=t,this.observer=null,this.addObserver=JRt(n=>this.observer=n)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FPt(e){PJ=e}function jPt(e){return PJ.loadJS(e)}function BPt(){return PJ.gapiScript}function UPt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zPt(e,t){const n=OS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(fI(s,t??{}))return i;Oh(i,"already-initialized")}return n.initialize({options:t})}function VPt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function HPt(e,t,n){const r=Wk(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=jNe(t),{host:o,port:a}=qPt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),WPt()}function jNe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function qPt(e){const t=jNe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:qde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:qde(o)}}}function qde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function WPt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BNe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Qp("not implemented")}_getIdTokenResponse(t){return Qp("not implemented")}_linkToIdToken(t,n){return Qp("not implemented")}_getReauthenticationResolver(t){return Qp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cE(e,t){return CNe(e,"POST","/v1/accounts:signInWithIdp",E4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GPt="http://localhost";class ib extends BNe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ib(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Oh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=ZI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ib(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return cE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,cE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,cE(t,n)}buildRequest(){const t={requestUri:GPt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Hk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk extends DJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends Gk{constructor(){super("facebook.com")}static credential(t){return ib._fromParams({providerId:qg.PROVIDER_ID,signInMethod:qg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qg.credentialFromTaggedObject(t)}static credentialFromError(t){return qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qg.credential(t.oauthAccessToken)}catch{return null}}}qg.FACEBOOK_SIGN_IN_METHOD="facebook.com";qg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends Gk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ib._fromParams({providerId:zp.PROVIDER_ID,signInMethod:zp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return zp.credentialFromTaggedObject(t)}static credentialFromError(t){return zp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return zp.credential(n,r)}catch{return null}}}zp.GOOGLE_SIGN_IN_METHOD="google.com";zp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends Gk{constructor(){super("github.com")}static credential(t){return ib._fromParams({providerId:Wg.PROVIDER_ID,signInMethod:Wg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wg.credentialFromTaggedObject(t)}static credentialFromError(t){return Wg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wg.credential(t.oauthAccessToken)}catch{return null}}}Wg.GITHUB_SIGN_IN_METHOD="github.com";Wg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg extends Gk{constructor(){super("twitter.com")}static credential(t,n){return ib._fromParams({providerId:Gg.PROVIDER_ID,signInMethod:Gg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gg.credentialFromTaggedObject(t)}static credentialFromError(t){return Gg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gg.credential(n,r)}catch{return null}}}Gg.TWITTER_SIGN_IN_METHOD="twitter.com";Gg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YPt(e,t){return CNe(e,"POST","/v1/accounts:signUp",E4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Jp._fromIdTokenResponse(t,r,i),o=Wde(r);return new ay({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Wde(r);return new ay({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Wde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KPt(e){var t;if(rh(e.app))return Promise.reject(k0(e));const n=Wk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ay({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await YPt(n,{returnSecureToken:!0}),i=await ay._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$ extends tp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,H$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new H$(t,n,r,i)}}function UNe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?H$._fromErrorAndOperation(e,s,t,r):s})}async function XPt(e,t,n=!1){const r=await hI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ay._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QPt(e,t,n=!1){const{auth:r}=e;if(rh(r.app))return Promise.reject(k0(r));const i="reauthenticate";try{const s=await hI(e,UNe(r,i,t,e),n);an(s.idToken,r,"internal-error");const o=RJ(s.idToken);an(o,r,"internal-error");const{sub:a}=o;return an(e.uid===a,r,"user-mismatch"),ay._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Oh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JPt(e,t,n=!1){if(rh(e.app))return Promise.reject(k0(e));const r="signIn",i=await UNe(e,r,t),s=await ay._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function ZPt(e,t,n,r){return oi(e).onIdTokenChanged(t,n,r)}function eDt(e,t,n){return oi(e).beforeAuthStateChanged(t,n)}function tDt(e,t,n,r){return oi(e).onAuthStateChanged(t,n,r)}function nDt(e){return oi(e).signOut()}const q$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zNe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(q$,"1"),this.storage.removeItem(q$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rDt(){const e=jo();return NJ(e)||x4(e)}const iDt=1e3,sDt=10;class VNe extends zNe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=rDt()&&PPt(),this.fallbackToPolling=LNe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);NPt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,sDt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},iDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}VNe.type="LOCAL";const oDt=VNe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HNe extends zNe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}HNe.type="SESSION";const qNe=HNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aDt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new S4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await aDt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}S4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uDt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=OJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){return window}function lDt(e){gh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WNe(){return typeof gh().WorkerGlobalScope<"u"&&typeof gh().importScripts=="function"}async function cDt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fDt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function dDt(){return WNe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GNe="firebaseLocalStorageDb",hDt=1,W$="firebaseLocalStorage",YNe="fbase_key";class Yk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function T4(e,t){return e.transaction([W$],t?"readwrite":"readonly").objectStore(W$)}function pDt(){const e=indexedDB.deleteDatabase(GNe);return new Yk(e).toPromise()}function IV(){const e=indexedDB.open(GNe,hDt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(W$,{keyPath:YNe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(W$)?t(r):(r.close(),await pDt(),t(await IV()))})})}async function Gde(e,t,n){const r=T4(e,!0).put({[YNe]:t,value:n});return new Yk(r).toPromise()}async function mDt(e,t){const n=T4(e,!1).get(t),r=await new Yk(n).toPromise();return r===void 0?null:r.value}function Yde(e,t){const n=T4(e,!0).delete(t);return new Yk(n).toPromise()}const gDt=800,yDt=3;class KNe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await IV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>yDt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WNe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=S4._getInstance(dDt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await cDt(),!this.activeServiceWorker)return;this.sender=new uDt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||fDt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await IV();return await Gde(t,q$,"1"),await Yde(t,q$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>mDt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=T4(i,!1).getAll();return new Yk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KNe.type="LOCAL";const vDt=KNe;new qk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XNe(e,t){return t?Zp(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J extends BNe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return cE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return cE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return cE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function bDt(e){return JPt(e.auth,new $J(e),e.bypassAuthState)}function _Dt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),QPt(n,new $J(e),e.bypassAuthState)}async function wDt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),XPt(n,new $J(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QNe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return bDt;case"linkViaPopup":case"linkViaRedirect":return wDt;case"reauthViaPopup":case"reauthViaRedirect":return _Dt;default:Oh(this.auth,"internal-error")}}resolve(t){Lm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Lm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EDt=new qk(2e3,1e4);async function xDt(e,t,n){if(rh(e.app))return Promise.reject(qf(e,"operation-not-supported-in-this-environment"));const r=Wk(e);mPt(e,t,DJ);const i=XNe(r,n);return new yv(r,"signInViaPopup",t,i).executeNotNull()}class yv extends QNe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,yv.currentPopupAction&&yv.currentPopupAction.cancel(),yv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return an(t,this.auth,"internal-error"),t}async onExecution(){Lm(this.filter.length===1,"Popup operations only handle one event");const t=OJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(qf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,EDt.get())};t()}}yv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDt="pendingRedirect",MD=new Map;class TDt extends QNe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=MD.get(this.auth._key());if(!t){try{const r=await CDt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}MD.set(this.auth._key(),t)}return this.bypassAuthState||MD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CDt(e,t){const n=kDt(t),r=IDt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ADt(e,t){MD.set(e._key(),t)}function IDt(e){return Zp(e._redirectPersistence)}function kDt(e){return $D(SDt,e.config.apiKey,e.name)}async function RDt(e,t,n=!1){if(rh(e.app))return Promise.reject(k0(e));const r=Wk(e),i=XNe(r,t),o=await new TDt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NDt=10*60*1e3;class PDt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!DDt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!JNe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=NDt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kde(t))}saveEventToCache(t){this.cachedEventUids.add(Kde(t)),this.lastProcessedEventTime=Date.now()}}function Kde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function JNe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function DDt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JNe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ODt(e,t={}){return $S(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Dt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MDt=/^https?/;async function LDt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ODt(e);for(const n of t)try{if(FDt(n))return}catch{}Oh(e,"unauthorized-domain")}function FDt(e){const t=CV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!MDt.test(n))return!1;if($Dt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jDt=new qk(3e4,6e4);function Xde(){const e=gh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function BDt(e){return new Promise((t,n)=>{var r,i,s;function o(){Xde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xde(),n(qf(e,"network-request-failed"))},timeout:jDt.get()})}if(!((i=(r=gh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=gh().gapi)===null||s===void 0)&&s.load)o();else{const a=UPt("iframefcb");return gh()[a]=()=>{gapi.load?o():n(qf(e,"network-request-failed"))},jPt(`${BPt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw LD=null,t})}let LD=null;function UDt(e){return LD=LD||BDt(e),LD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zDt=new qk(5e3,15e3),VDt="__/auth/iframe",HDt="emulator/auth/iframe",qDt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WDt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GDt(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kJ(t,HDt):`https://${e.config.authDomain}/${VDt}`,r={apiKey:t.apiKey,appName:e.name,v:Gb},i=WDt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Hk(r).slice(1)}`}async function YDt(e){const t=await UDt(e),n=gh().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:GDt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qDt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qf(e,"network-request-failed"),a=gh().setTimeout(()=>{s(o)},zDt.get());function u(){gh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KDt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XDt=500,QDt=600,JDt="_blank",ZDt="http://localhost";class Qde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eOt(e,t,n,r=XDt,i=QDt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},KDt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=jo().toLowerCase();n&&(a=PNe(l)?JDt:n),NNe(l)&&(t=t||ZDt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(RPt(l)&&a!=="_self")return tOt(t||"",a),new Qde(null);const f=window.open(t||"",a,c);an(f,e,"popup-blocked");try{f.focus()}catch{}return new Qde(f)}function tOt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nOt="__/auth/handler",rOt="emulator/auth/handler",iOt=encodeURIComponent("fac");async function Jde(e,t,n,r,i,s){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Gb,eventId:i};if(t instanceof DJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",QRt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Gk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${iOt}=${encodeURIComponent(u)}`:"";return`${sOt(e)}?${Hk(a).slice(1)}${l}`}function sOt({config:e}){return e.emulator?kJ(e,rOt):`https://${e.authDomain}/${nOt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9="webStorageSupport";class oOt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qNe,this._completeRedirectFn=RDt,this._overrideRedirectResult=ADt}async _openPopup(t,n,r,i){var s;Lm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Jde(t,n,r,CV(),i);return eOt(t,o,OJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Jde(t,n,r,CV(),i);return lDt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Lm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await YDt(t),r=new PDt(t);return n.register("authEvent",i=>(an(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(C9,{type:C9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[C9];o!==void 0&&n(!!o),Oh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LDt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return LNe()||NJ()||x4()}}const ZNe=oOt;var Zde="@firebase/auth",ehe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aOt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uOt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lOt(e){Mm(new Dh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;an(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FNe(e)},l=new LPt(r,i,s,u);return VPt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Mm(new Dh("auth-internal",t=>{const n=Wk(t.getProvider("auth").getImmediate());return(r=>new aOt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hf(Zde,ehe,uOt(e)),Hf(Zde,ehe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cOt=5*60,fOt=gNe("authIdTokenMaxAge")||cOt;let the=null;const dOt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>fOt)return;const i=n==null?void 0:n.token;the!==i&&(the=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function G$(e=CJ()){const t=OS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=zPt(e,{popupRedirectResolver:ZNe,persistence:[vDt,oDt,qNe]}),r=gNe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=dOt(s.toString());eDt(n,o,()=>o(n.currentUser)),ZPt(n,a=>o(a))}}const i=pNe("auth");return i&&HPt(n,`http://${i}`),n}function hOt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}FPt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=qf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hOt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lOt("Browser");var pOt="firebase",mOt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hf(pOt,mOt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ePe="firebasestorage.googleapis.com",tPe="storageBucket",gOt=2*60*1e3,yOt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends tp{constructor(t,n,r=0){super(A9(t),`Firebase Storage: ${n} (${A9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ts.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return A9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var es;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(es||(es={}));function A9(e){return"storage/"+e}function MJ(){const e="An unknown error occurred, please check the error payload for server response.";return new ts(es.UNKNOWN,e)}function vOt(e){return new ts(es.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function bOt(e){return new ts(es.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _Ot(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ts(es.UNAUTHENTICATED,e)}function wOt(){return new ts(es.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EOt(e){return new ts(es.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function xOt(){return new ts(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SOt(){return new ts(es.CANCELED,"User canceled the upload/download.")}function TOt(e){return new ts(es.INVALID_URL,"Invalid URL '"+e+"'.")}function COt(e){return new ts(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function AOt(){return new ts(es.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tPe+"' property when initializing the app?")}function IOt(){return new ts(es.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kOt(){return new ts(es.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ROt(e){return new ts(es.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kV(e){return new ts(es.INVALID_ARGUMENT,e)}function nPe(){return new ts(es.APP_DELETED,"The Firebase app was deleted.")}function NOt(e){return new ts(es.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function UC(e,t){return new ts(es.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function BT(e){throw new ts(es.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ya.makeFromUrl(t,n)}catch{return new Ya(t,"")}if(r.path==="")return r;throw COt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===ePe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<_.length;E++){const w=_[E],S=w.regex.exec(t);if(S){const x=S[w.indices.bucket];let C=S[w.indices.path];C||(C=""),r=new Ya(x,C),w.postModify(r);break}}if(r==null)throw TOt(t);return r}}class POt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DOt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function OOt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ot(e){return e!==void 0}function MOt(e){return typeof e=="object"&&!Array.isArray(e)}function LJ(e){return typeof e=="string"||e instanceof String}function nhe(e){return FJ()&&e instanceof Blob}function FJ(){return typeof Blob<"u"}function RV(e,t,n,r){if(r<t)throw kV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw kV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function rPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Av;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Av||(Av={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LOt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FOt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new uP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Av.NO_ERROR,u=s.getStatus();if(!a||LOt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===Av.ABORT;r(!1,new uP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new uP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());$Ot(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=MJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?nPe():SOt();o(u)}else{const u=xOt();o(u)}};this.canceled_?n(!1,new uP(!1,null,!0)):this.backoffId_=DOt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&OOt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function jOt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function BOt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function UOt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function zOt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function VOt(e,t,n,r,i,s,o=!0){const a=rPe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return UOt(l,t),jOt(l,n),BOt(l,s),zOt(l,r),new FOt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HOt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qOt(...e){const t=HOt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(FJ())return new Blob(e);throw new ts(es.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WOt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GOt(e){if(typeof atob>"u")throw ROt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class I9{constructor(t,n){this.data=t,this.contentType=n||null}}function YOt(e,t){switch(e){case ih.RAW:return new I9(iPe(t));case ih.BASE64:case ih.BASE64URL:return new I9(sPe(e,t));case ih.DATA_URL:return new I9(XOt(t),QOt(t))}throw MJ()}function iPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function KOt(e){let t;try{t=decodeURIComponent(e)}catch{throw UC(ih.DATA_URL,"Malformed data URL.")}return iPe(t)}function sPe(e,t){switch(e){case ih.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw UC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ih.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw UC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=GOt(t)}catch(i){throw i.message.includes("polyfill")?i:UC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class oPe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw UC(ih.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=JOt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function XOt(e){const t=new oPe(e);return t.base64?sPe(ih.BASE64,t.rest):KOt(t.rest)}function QOt(e){return new oPe(e).contentType}function JOt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,n){let r=0,i="";nhe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(nhe(this.data_)){const r=this.data_,i=WOt(r,t,n);return i===null?null:new Yg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Yg(r,!0)}}static getBlob(...t){if(FJ()){const n=t.map(r=>r instanceof Yg?r.data_:r);return new Yg(qOt.apply(null,n))}else{const n=t.map(o=>LJ(o)?YOt(ih.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(e){let t;try{t=JSON.parse(e)}catch{return null}return MOt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZOt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function e3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function aPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3t(e,t){return t}class Da{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||t3t}}let lP=null;function n3t(e){return!LJ(e)||e.length<2?e:aPe(e)}function uPe(){if(lP)return lP;const e=[];e.push(new Da("bucket")),e.push(new Da("generation")),e.push(new Da("metageneration")),e.push(new Da("name","fullPath",!0));function t(s,o){return n3t(o)}const n=new Da("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Da("size");return i.xform=r,e.push(i),e.push(new Da("timeCreated")),e.push(new Da("updated")),e.push(new Da("md5Hash",null,!0)),e.push(new Da("cacheControl",null,!0)),e.push(new Da("contentDisposition",null,!0)),e.push(new Da("contentEncoding",null,!0)),e.push(new Da("contentLanguage",null,!0)),e.push(new Da("contentType",null,!0)),e.push(new Da("metadata","customMetadata",!0)),lP=e,lP}function r3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ya(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function i3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return r3t(r,e),r}function lPe(e,t,n){const r=jJ(t);return r===null?null:i3t(e,r,n)}function s3t(e,t,n,r){const i=jJ(t);if(i===null||!LJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Kk(d,n,r),p=rPe({alt:"media",token:l});return h+p})[0]}function o3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rhe="prefixes",ihe="items";function a3t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[rhe])for(const i of n[rhe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ya(t,s));r.prefixes.push(o)}if(n[ihe])for(const i of n[ihe]){const s=e._makeStorageReference(new Ya(t,i.name));r.items.push(s)}return r}function u3t(e,t,n){const r=jJ(n);return r===null?null:a3t(e,t,r)}class C4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(e){if(!e)throw MJ()}function l3t(e,t){function n(r,i){const s=lPe(e,i,t);return BJ(s!==null),s}return n}function c3t(e,t){function n(r,i){const s=u3t(e,t,i);return BJ(s!==null),s}return n}function f3t(e,t){function n(r,i){const s=lPe(e,i,t);return BJ(s!==null),s3t(s,i,e.host,e._protocol)}return n}function UJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=wOt():i=_Ot():n.getStatus()===402?i=bOt(e.bucket):n.getStatus()===403?i=EOt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function cPe(e){const t=UJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=vOt(e.path)),s.serverResponse=i.serverResponse,s}return n}function d3t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Kk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new C4(a,u,c3t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=UJ(t),c}function h3t(e,t,n){const r=t.fullServerUrl(),i=Kk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new C4(i,s,f3t(e,n),o);return a.errorHandler=cPe(t),a}function p3t(e,t){const n=t.fullServerUrl(),r=Kk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new C4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=cPe(t),a}function m3t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function g3t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=m3t(null,t)),r}function y3t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let E=0;E<2;E++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=g3t(t,r,i),c=o3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Yg.getBlob(f,r,d);if(h===null)throw IOt();const p={name:l.fullPath},m=Kk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new C4(m,g,l3t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=UJ(t),v}class v3t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Av.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Av.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Av.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw BT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw BT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw BT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw BT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw BT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class b3t extends v3t{initXhr(){this.xhr_.responseType="text"}}function A4(){return new b3t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(t,n){this._service=t,n instanceof Ya?this._location=n:this._location=Ya.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new sb(t,n)}get root(){const t=new Ya(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aPe(this._location.path)}get storage(){return this._service}get parent(){const t=ZOt(this._location.path);if(t===null)return null;const n=new Ya(this._location.bucket,t);return new sb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw NOt(t)}}function _3t(e,t,n){e._throwIfRoot("uploadBytes");const r=y3t(e.storage,e._location,uPe(),new Yg(t,!0),n);return e.storage.makeRequestWithTokens(r,A4).then(i=>({metadata:i,ref:e}))}function w3t(e){const t={prefixes:[],items:[]};return fPe(e,t).then(()=>t)}async function fPe(e,t,n){const i=await E3t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await fPe(e,t,i.nextPageToken)}function E3t(e,t){t!=null&&typeof t.maxResults=="number"&&RV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=d3t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,A4)}function x3t(e){e._throwIfRoot("getDownloadURL");const t=h3t(e.storage,e._location,uPe());return e.storage.makeRequestWithTokens(t,A4).then(n=>{if(n===null)throw kOt();return n})}function S3t(e){e._throwIfRoot("deleteObject");const t=p3t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,A4)}function T3t(e,t){const n=e3t(e._location.path,t),r=new Ya(e._location.bucket,n);return new sb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3t(e){return/^[A-Za-z]+:\/\//.test(e)}function A3t(e,t){return new sb(e,t)}function dPe(e,t){if(e instanceof zJ){const n=e;if(n._bucket==null)throw AOt();const r=new sb(n,n._bucket);return t!=null?dPe(r,t):r}else return t!==void 0?T3t(e,t):e}function I3t(e,t){if(t&&C3t(t)){if(e instanceof zJ)return A3t(e,t);throw kV("To use ref(service, url), the first argument must be a Storage instance.")}else return dPe(e,t)}function she(e,t){const n=t==null?void 0:t[tPe];return n==null?null:Ya.makeFromBucketSpec(n,e)}function k3t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:BRt(i,e.app.options.projectId))}class zJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ePe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gOt,this._maxUploadRetryTime=yOt,this._requests=new Set,i!=null?this._bucket=Ya.makeFromBucketSpec(i,this._host):this._bucket=she(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ya.makeFromBucketSpec(this._url,t):this._bucket=she(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){RV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){RV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new sb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new POt(nPe());{const o=VOt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const ohe="@firebase/storage",ahe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hPe="storage";function k9(e,t,n){return e=oi(e),_3t(e,t,n)}function UT(e){return e=oi(e),w3t(e)}function R9(e){return e=oi(e),x3t(e)}function uhe(e){return e=oi(e),S3t(e)}function uc(e,t){return e=oi(e),I3t(e,t)}function R3t(e=CJ(),t){e=oi(e);const r=OS(e,hPe).getImmediate({identifier:t}),i=jRt("storage");return i&&N3t(r,...i),r}function N3t(e,t,n,r={}){k3t(e,t,n,r)}function P3t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new zJ(n,r,i,t,Gb)}function D3t(){Mm(new Dh(hPe,P3t,"PUBLIC").setMultipleInstances(!0)),Hf(ohe,ahe,""),Hf(ohe,ahe,"esm2017")}D3t();var lhe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iv,pPe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,C){function A(){}A.prototype=C.prototype,x.D=C.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(I,R,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return C.prototype[R].apply(I,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,C,A){A||(A=0);var I=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)I[R]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(R=0;16>R;++R)I[R]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=x.g[0],A=x.g[1],R=x.g[2];var O=x.g[3],D=C+(O^A&(R^O))+I[0]+3614090360&4294967295;C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+I[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+I[2]+606105819&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+I[3]+3250441966&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(O^A&(R^O))+I[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+I[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+I[6]+2821735955&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+I[7]+4249261313&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(O^A&(R^O))+I[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+I[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+I[10]+4294925233&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+I[11]+2304563134&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(O^A&(R^O))+I[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(R^C&(A^R))+I[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=R+(A^O&(C^A))+I[14]+2792965006&4294967295,R=O+(D<<17&4294967295|D>>>15),D=A+(C^R&(O^C))+I[15]+1236535329&4294967295,A=R+(D<<22&4294967295|D>>>10),D=C+(R^O&(A^R))+I[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+I[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+I[11]+643717713&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+I[0]+3921069994&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(A^R))+I[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+I[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+I[15]+3634488961&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+I[4]+3889429448&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(A^R))+I[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+I[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+I[3]+4107603335&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+I[8]+1163531501&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(R^O&(A^R))+I[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^R&(C^A))+I[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=R+(C^A&(O^C))+I[7]+1735328473&4294967295,R=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(R^O))+I[12]+2368359562&4294967295,A=R+(D<<20&4294967295|D>>>12),D=C+(A^R^O)+I[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+I[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+I[11]+1839030562&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+I[14]+4259657740&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(A^R^O)+I[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+I[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+I[7]+4139469664&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+I[10]+3200236656&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(A^R^O)+I[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+I[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+I[3]+3572445317&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+I[6]+76029189&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(A^R^O)+I[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^R)+I[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=R+(O^C^A)+I[15]+530742520&4294967295,R=O+(D<<16&4294967295|D>>>16),D=A+(R^O^C)+I[2]+3299628645&4294967295,A=R+(D<<23&4294967295|D>>>9),D=C+(R^(A|~O))+I[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+I[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+I[14]+2878612391&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+I[5]+4237533241&4294967295,A=R+(D<<21&4294967295|D>>>11),D=C+(R^(A|~O))+I[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+I[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+I[10]+4293915773&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+I[1]+2240044497&4294967295,A=R+(D<<21&4294967295|D>>>11),D=C+(R^(A|~O))+I[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+I[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+I[6]+2734768916&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+I[13]+1309151649&4294967295,A=R+(D<<21&4294967295|D>>>11),D=C+(R^(A|~O))+I[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~R))+I[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=R+(C^(O|~A))+I[2]+718787259&4294967295,R=O+(D<<15&4294967295|D>>>17),D=A+(O^(R|~C))+I[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var A=C-this.blockSize,I=this.B,R=this.h,O=0;O<C;){if(R==0)for(;O<=A;)i(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<C;)if(I[R++]=x.charCodeAt(O++),R==this.blockSize){i(this,I),R=0;break}}else for(;O<C;)if(I[R++]=x[O++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=C},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var A=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=A&255,A/=256;for(this.u(x),x=Array(16),C=A=0;4>C;++C)for(var I=0;32>I;I+=8)x[A++]=this.g[C]>>>I&255;return x};function s(x,C){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=C(x)}function o(x,C){this.h=C;for(var A=[],I=!0,R=x.length-1;0<=R;R--){var O=x[R]|0;I&&O==C||(A[R]=O,I=!1)}this.g=A}var a={};function u(x){return-128<=x&&128>x?s(x,function(C){return new o([C|0],0>C?-1:0)}):new o([x|0],0>x?-1:0)}function l(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return g(l(-x));for(var C=[],A=1,I=0;x>=A;I++)C[I]=x/A|0,A*=4294967296;return new o(C,0)}function c(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return g(c(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),I=f,R=0;R<x.length;R+=8){var O=Math.min(8,x.length-R),D=parseInt(x.substring(R,R+O),C);8>O?(O=l(Math.pow(C,O)),I=I.j(O).add(l(D))):(I=I.j(A),I=I.add(l(D)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var x=0,C=1,A=0;A<this.g.length;A++){var I=this.i(A);x+=(0<=I?I:4294967296+I)*C,C*=4294967296}return x},e.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(p(this))return"0";if(m(this))return"-"+g(this).toString(x);for(var C=l(Math.pow(x,6)),A=this,I="";;){var R=E(A,C).g;A=y(A,R.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=R,p(A))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},e.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function p(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function m(x){return x.h==-1}e.l=function(x){return x=y(this,x),m(x)?-1:p(x)?0:1};function g(x){for(var C=x.g.length,A=[],I=0;I<C;I++)A[I]=~x.g[I];return new o(A,~x.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],I=0,R=0;R<=C;R++){var O=I+(this.i(R)&65535)+(x.i(R)&65535),D=(O>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);I=D>>>16,O&=65535,D&=65535,A[R]=D<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(x,C){return x.add(g(C))}e.j=function(x){if(p(this)||p(x))return f;if(m(this))return m(x)?g(this).j(g(x)):g(g(this).j(x));if(m(x))return g(this.j(g(x)));if(0>this.l(h)&&0>x.l(h))return l(this.m()*x.m());for(var C=this.g.length+x.g.length,A=[],I=0;I<2*C;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<x.g.length;R++){var O=this.i(I)>>>16,D=this.i(I)&65535,$=x.i(R)>>>16,F=x.i(R)&65535;A[2*I+2*R]+=D*F,v(A,2*I+2*R),A[2*I+2*R+1]+=O*F,v(A,2*I+2*R+1),A[2*I+2*R+1]+=D*$,v(A,2*I+2*R+1),A[2*I+2*R+2]+=O*$,v(A,2*I+2*R+2)}for(I=0;I<C;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=C;I<2*C;I++)A[I]=0;return new o(A,0)};function v(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function _(x,C){this.g=x,this.h=C}function E(x,C){if(p(C))throw Error("division by zero");if(p(x))return new _(f,f);if(m(x))return C=E(g(x),C),new _(g(C.g),g(C.h));if(m(C))return C=E(x,g(C)),new _(g(C.g),C.h);if(30<x.g.length){if(m(x)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,I=C;0>=I.l(x);)A=w(A),I=w(I);var R=S(A,1),O=S(I,1);for(I=S(I,2),A=S(A,2);!p(I);){var D=O.add(I);0>=D.l(x)&&(R=R.add(A),O=D),I=S(I,1),A=S(A,1)}return C=y(x,R.j(C)),new _(R,C)}for(R=f;0<=x.l(C);){for(A=Math.max(1,Math.floor(x.m()/C.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=l(A),D=O.j(C);m(D)||0<D.l(x);)A-=I,O=l(A),D=O.j(C);p(O)&&(O=d),R=R.add(O),x=y(x,D)}return new _(R,x)}e.A=function(x){return E(this,x).h},e.and=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],I=0;I<C;I++)A[I]=this.i(I)&x.i(I);return new o(A,this.h&x.h)},e.or=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],I=0;I<C;I++)A[I]=this.i(I)|x.i(I);return new o(A,this.h|x.h)},e.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),A=[],I=0;I<C;I++)A[I]=this.i(I)^x.i(I);return new o(A,this.h^x.h)};function w(x){for(var C=x.g.length+1,A=[],I=0;I<C;I++)A[I]=x.i(I)<<1|x.i(I-1)>>>31;return new o(A,x.h)}function S(x,C){var A=C>>5;C%=32;for(var I=x.g.length-A,R=[],O=0;O<I;O++)R[O]=0<C?x.i(O+A)>>>C|x.i(O+A+1)<<32-C:x.i(O+A);return new o(R,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pPe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Iv=o}).apply(typeof lhe<"u"?lhe:typeof self<"u"?self:typeof window<"u"?window:{});var cP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mPe,gPe,L2,yPe,FD,NV,vPe,bPe,_Pe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,L,V){return T==Array.prototype||T==Object.prototype||(T[L]=V.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof cP=="object"&&cP];for(var L=0;L<T.length;++L){var V=T[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(T,L){if(L)e:{var V=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var we=T[Q];if(!(we in V))break e;V=V[we]}T=T[T.length-1],Q=V[T],L=L(Q),L!=Q&&L!=null&&t(V,T,{configurable:!0,writable:!0,value:L})}}function s(T,L){T instanceof String&&(T+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<T.length){var De=V++;return{value:L(De,T[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(T){return T||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var L=typeof T;return L=L!="object"?L:T?Array.isArray(T)?"array":L:"null",L=="array"||L=="object"&&typeof T.length=="number"}function l(T){var L=typeof T;return L=="object"&&T!=null||L=="function"}function c(T,L,V){return T.call.apply(T.bind,arguments)}function f(T,L,V){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),T.apply(L,we)}}return function(){return T.apply(L,arguments)}}function d(T,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,L){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,L){function V(){}V.prototype=L.prototype,T.aa=L.prototype,T.prototype=new V,T.prototype.constructor=T,T.Qb=function(Q,we,De){for(var ft=Array(arguments.length-2),Yr=2;Yr<arguments.length;Yr++)ft[Yr-2]=arguments[Yr];return L.prototype[we].apply(Q,ft)}}function m(T){const L=T.length;if(0<L){const V=Array(L);for(let Q=0;Q<L;Q++)V[Q]=T[Q];return V}return[]}function g(T,L){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=T.length||0,De=Q.length||0;T.length=we+De;for(let ft=0;ft<De;ft++)T[we+ft]=Q[ft]}else T.push(Q)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(T){return/^[\s\xa0]*$/.test(T)}function _(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function E(T){return E[" "](T),T}E[" "]=function(){};var w=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function S(T,L,V){for(const Q in T)L.call(V,T[Q],Q,T)}function x(T,L){for(const V in T)L.call(void 0,T[V],V,T)}function C(T){const L={};for(const V in T)L[V]=T[V];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(T,L){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)T[V]=Q[V];for(let De=0;De<A.length;De++)V=A[De],Object.prototype.hasOwnProperty.call(Q,V)&&(T[V]=Q[V])}}function R(T){var L=1;T=T.split(":");const V=[];for(;0<L&&T.length;)V.push(T.shift()),L--;return T.length&&V.push(T.join(":")),V}function O(T){a.setTimeout(()=>{throw T},0)}function D(){var T=H;let L=null;return T.g&&(L=T.g,T.g=T.g.next,T.g||(T.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const Q=F.get();Q.set(L,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new M,T=>T.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,H=new $,P=()=>{const T=a.Promise.resolve(void 0);B=()=>{T.then(U)}};var U=()=>{for(var T;T=D();){try{T.h.call(T.g)}catch(V){O(V)}var L=F;L.j(T),100>L.h&&(L.h++,T.next=L.g,L.g=T)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(T,L){this.type=T,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,L=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return T}();function G(T,L){if(j.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var V=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=L,L=T.relatedTarget){if(w){e:{try{E(L.nodeName);var we=!0;break e}catch{}we=!1}we||(L=null)}}else V=="mouseover"?L=T.fromElement:V=="mouseout"&&(L=T.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ne[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(T,L,V,Q,we){this.listener=T,this.proxy=null,this.src=L,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ve(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ie(T){this.src=T,this.g={},this.h=0}Ie.prototype.add=function(T,L,V,Q,we){var De=T.toString();T=this.g[De],T||(T=this.g[De]=[],this.h++);var ft=Xe(T,L,Q,we);return-1<ft?(L=T[ft],V||(L.fa=!1)):(L=new he(L,this.src,De,!!Q,we),L.fa=V,T.push(L)),L};function be(T,L){var V=L.type;if(V in T.g){var Q=T.g[V],we=Array.prototype.indexOf.call(Q,L,void 0),De;(De=0<=we)&&Array.prototype.splice.call(Q,we,1),De&&(ve(L),T.g[V].length==0&&(delete T.g[V],T.h--))}}function Xe(T,L,V,Q){for(var we=0;we<T.length;++we){var De=T[we];if(!De.da&&De.listener==L&&De.capture==!!V&&De.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(T,L,V,Q,we){if(Array.isArray(L)){for(var De=0;De<L.length;De++)it(T,L[De],V,Q,we);return null}return V=vt(V),T&&T[ce]?T.K(L,V,l(Q)?!!Q.capture:!!Q,we):_e(T,L,V,!1,Q,we)}function _e(T,L,V,Q,we,De){if(!L)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Yr=ge(T);if(Yr||(T[Ue]=Yr=new Ie(T)),V=Yr.add(L,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=T,Q.listener=V,T.addEventListener)q||(we=ft),we===void 0&&(we=!1),T.addEventListener(L.toString(),Q,we);else if(T.attachEvent)T.attachEvent(Ot(L.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function T(V){return L.call(T.src,T.listener,V)}const L=We;return T}function ze(T,L,V,Q,we){if(Array.isArray(L))for(var De=0;De<L.length;De++)ze(T,L[De],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),T&&T[ce]?(T=T.i,L=String(L).toString(),L in T.g&&(De=T.g[L],V=Xe(De,V,Q,we),-1<V&&(ve(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete T.g[L],T.h--)))):T&&(T=ge(T))&&(L=T.g[L.toString()],T=-1,L&&(T=Xe(L,V,Q,we)),(V=-1<T?L[T]:null)&&ct(V))}function ct(T){if(typeof T!="number"&&T&&!T.da){var L=T.src;if(L&&L[ce])be(L.i,T);else{var V=T.type,Q=T.proxy;L.removeEventListener?L.removeEventListener(V,Q,T.capture):L.detachEvent?L.detachEvent(Ot(V),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(V=ge(L))?(be(V,T),V.h==0&&(V.src=null,L[Ue]=null)):ve(T)}}}function Ot(T){return T in yt?yt[T]:yt[T]="on"+T}function We(T,L){if(T.da)T=!0;else{L=new G(L,this);var V=T.listener,Q=T.ha||T.src;T.fa&&ct(T),T=V.call(Q,L)}return T}function ge(T){return T=T[Ue],T instanceof Ie?T:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(T){return typeof T=="function"?T:(T[ht]||(T[ht]=function(L){return T.handleEvent(L)}),T[ht])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(T,L,V,Q){ze(this,T,L,V,Q)};function Ae(T,L){var V,Q=T.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(T=T.M,Q=L.type||L,typeof L=="string")L=new j(L,T);else if(L instanceof j)L.target=L.target||T;else{var we=L;L=new j(Q,T),I(L,we)}if(we=!0,V)for(var De=V.length-1;0<=De;De--){var ft=L.g=V[De];we=He(ft,Q,!0,L)&&we}if(ft=L.g=T,we=He(ft,Q,!0,L)&&we,we=He(ft,Q,!1,L)&&we,V)for(De=0;De<V.length;De++)ft=L.g=V[De],we=He(ft,Q,!1,L)&&we}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var T=this.i,L;for(L in T.g){for(var V=T.g[L],Q=0;Q<V.length;Q++)ve(V[Q]);delete T.g[L],T.h--}}this.F=null},pe.prototype.K=function(T,L,V,Q){return this.i.add(String(T),L,!1,V,Q)},pe.prototype.L=function(T,L,V,Q){return this.i.add(String(T),L,!0,V,Q)};function He(T,L,V,Q){if(L=T.i.g[String(L)],!L)return!0;L=L.concat();for(var we=!0,De=0;De<L.length;++De){var ft=L[De];if(ft&&!ft.da&&ft.capture==V){var Yr=ft.listener,vo=ft.ha||ft.src;ft.fa&&be(T.i,ft),we=Yr.call(vo,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(T,L,V){if(typeof T=="function")V&&(T=d(T,V));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(T,L||0)}function _t(T){T.g=ut(()=>{T.g=null,T.i&&(T.i=!1,_t(T))},T.l);const L=T.h;T.h=null,T.m.apply(null,L)}class Ln extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(T){W.call(this),this.h=T,this.g={}}p(Ar,W);var Fn=[];function cr(T){S(T.g,function(L,V){this.g.hasOwnProperty(V)&&ct(L)},T),T.g={}}Ar.prototype.N=function(){Ar.aa.N.call(this),cr(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,An=a.JSON.parse,nr=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function rr(){}rr.prototype.h=null;function Vo(T){return T.h||(T.h=T.i())}function ji(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){j.call(this,"d")}p(Bi,j);function Ir(){j.call(this,"c")}p(Ir,j);var vs={},dp=null;function fl(){return dp=dp||new pe}vs.La="serverreachability";function bd(T){j.call(this,vs.La,T)}p(bd,j);function Sr(T){const L=fl();Ae(L,new bd(L))}vs.STAT_EVENT="statevent";function Ni(T,L){j.call(this,vs.STAT_EVENT,T),this.stat=L}p(Ni,j);function Jr(T){const L=fl();Ae(L,new Ni(L,T))}vs.Ma="timingevent";function du(T,L){j.call(this,vs.Ma,T),this.size=L}p(du,j);function Ia(T,L){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},L)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function oe(T,L,V,Q,we,De){T.info(function(){if(T.g)if(De)for(var ft="",Yr=De.split("&"),vo=0;vo<Yr.length;vo++){var fr=Yr[vo].split("=");if(1<fr.length){var Go=fr[0];fr=fr[1];var Yo=Go.split("_");ft=2<=Yo.length&&Yo[1]=="type"?ft+(Go+"="+fr+"&"):ft+(Go+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+L+`
`+V+`
`+ft})}function ee(T,L,V,Q,we,De,ft){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+L+`
`+V+`
`+De+" "+ft})}function ae(T,L,V,Q){T.info(function(){return"XMLHTTP TEXT ("+L+"): "+Se(T,V)+(Q?" "+Q:"")})}function Ce(T,L){T.info(function(){return"TIMEOUT: "+L})}ka.prototype.info=function(){};function Se(T,L){if(!T.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(T=0;T<V.length;T++)if(Array.isArray(V[T])){var Q=V[T];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return gn(V)}catch{return L}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qt;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},qt=new On;function jn(T,L,V,Q){this.j=T,this.i=L,this.l=V,this.R=Q||1,this.U=new Ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var ir={},kr={};function Vt(T,L,V){T.L=1,T.v=Bn(Ge(L)),T.m=V,T.P=!0,sr(T,null)}function sr(T,L){T.F=Date.now(),Pi(T),T.A=Ge(T.v);var V=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),qR(V.i,"t",Q),T.C=0,V=T.j.J,T.h=new pn,T.g=Sie(T.j,V?L:null,!T.m),0<T.O&&(T.M=new Ln(d(T.Y,T,T.g),T.O)),L=T.U,V=T.g,Q=T.ca;var we="readystatechange";Array.isArray(we)||(we&&(Fn[0]=we.toString()),we=Fn);for(var De=0;De<we.length;De++){var ft=it(V,we[De],Q||L.handleEvent,!1,L.h||L);if(!ft)break;L.g[ft.key]=ft}L=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,L)):(T.u="GET",T.g.ea(T.A,T.u,null,L)),Sr(),oe(T.i,T.u,T.A,T.l,T.R,T.m)}jn.prototype.ca=function(T){T=T.target;const L=this.M;L&&ns(T)==3?L.j():this.Y(T)},jn.prototype.Y=function(T){try{if(T==this.g)e:{const Yo=ns(this.g);var L=this.g.Ba();const y_=this.g.Z();if(!(3>Yo)&&(Yo!=3||this.g&&(this.h.h||this.g.oa()||Wo(this.g)))){this.J||Yo!=4||L==7||(L==8||0>=y_?Sr(3):Sr(2)),Zr(this);var V=this.g.Z();this.X=V;t:if(qr(this)){var Q=Wo(this.g);T="";var we=Q.length,De=ns(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),yo(this);var ft="";break t}this.h.i=new a.TextDecoder}for(L=0;L<we;L++)this.h.h=!0,T+=this.h.i.decode(Q[L],{stream:!(De&&L==we-1)});Q.length=0,this.h.g+=T,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Yo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Yr,vo=this.g;if((Yr=vo.g?vo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Yr)){var fr=Yr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,V);else{this.o=!1,this.s=3,Jr(12),Ui(this),yo(this);break e}}if(this.P){V=!0;let nf;for(;!this.J&&this.C<ft.length;)if(nf=Jn(this,ft),nf==kr){Yo==4&&(this.s=4,Jr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(nf==ir){this.s=4,Jr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,nf,null),zi(this,nf);if(qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yo!=4||ft.length!=0||this.h.h||(this.s=1,Jr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Ui(this),yo(this);else if(0<ft.length&&!this.W){this.W=!0;var Go=this.j;Go.g==this&&Go.ba&&!Go.M&&(Go.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),q5(Go),Go.M=!0,Jr(11))}}else ae(this.i,this.l,ft,null),zi(this,ft);Yo==4&&Ui(this),this.o&&!this.J&&(Yo==4?_ie(this.j,this):(this.o=!1,Pi(this)))}else f1(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Jr(12)):(this.s=0,Jr(13)),Ui(this),yo(this)}}}catch{}finally{}};function qr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Jn(T,L){var V=T.C,Q=L.indexOf(`
`,V);return Q==-1?kr:(V=Number(L.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>L.length?kr:(L=L.slice(Q,Q+V),T.C=Q+V,L)))}jn.prototype.cancel=function(){this.J=!0,Ui(this)};function Pi(T){T.S=Date.now()+T.I,qs(T,T.I)}function qs(T,L){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Ia(d(T.ba,T),L)}function Zr(T){T.B&&(a.clearTimeout(T.B),T.B=null)}jn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Ce(this.i,this.A),this.L!=2&&(Sr(),Jr(17)),Ui(this),this.s=2,yo(this)):qs(this,this.S-T)};function yo(T){T.j.G==0||T.J||_ie(T.j,T)}function Ui(T){Zr(T);var L=T.M;L&&typeof L.ma=="function"&&L.ma(),T.M=null,cr(T.U),T.g&&(L=T.g,T.g=null,L.abort(),L.ma())}function zi(T,L){try{var V=T.j;if(V.G!=0&&(V.g==T||_d(V.h,T))){if(!T.K&&_d(V.h,T)&&V.G==3){try{var Q=V.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<T.F)JR(V),XR(V);else break e;H5(V),Jr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ia(d(V.Za,V),6e3));if(1>=nc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else d1(V,11)}else if((T.K||V.g==T)&&JR(V),!v(L))for(we=V.Da.g.parse(L),L=0;L<we.length;L++){let fr=we[L];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const Go=fr[3];Go!=null&&(V.la=Go,V.j.info("VER="+V.la));const Yo=fr[4];Yo!=null&&(V.Aa=Yo,V.j.info("SVER="+V.Aa));const y_=fr[5];y_!=null&&typeof y_=="number"&&0<y_&&(Q=1.5*y_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const nf=T.g;if(nf){const eN=nf.g?nf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eN){var De=Q.h;De.g||eN.indexOf("spdy")==-1&&eN.indexOf("quic")==-1&&eN.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const W5=nf.g?nf.g.getResponseHeader("X-HTTP-Session-Id"):null;W5&&(Q.ya=W5,Pt(Q.I,Q.D,W5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-T.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=T;if(Q.qa=xie(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Yr=ft,vo=Q.L;vo&&(Yr.I=vo),Yr.B&&(Zr(Yr),Pi(Yr)),Q.g=ft}else vie(Q);0<V.i.length&&QR(V)}else fr[0]!="stop"&&fr[0]!="close"||d1(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?d1(V,7):m_(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}Sr(4)}catch{}}var Ho=class{constructor(T,L){this.g=T,this.map=L}};function Ra(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ws(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function nc(T){return T.h?1:T.g?T.g.size:0}function _d(T,L){return T.h?T.h==L:T.g?T.g.has(L):!1}function Y(T,L){T.g?T.g.add(L):T.h=L}function se(T,L){T.h&&T.h==L?T.h=null:T.g&&T.g.has(L)&&T.g.delete(L)}Ra.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Z(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let L=T.i;for(const V of T.g.values())L=L.concat(V.D);return L}return m(T.i)}function fe(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var L=[],V=T.length,Q=0;Q<V;Q++)L.push(T[Q]);return L}L=[],V=0;for(Q in T)L[V++]=T[Q];return L}function ye(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var L=[];T=T.length;for(var V=0;V<T;V++)L.push(V);return L}L=[],V=0;for(const Q in T)L[V++]=Q;return L}}}function le(T,L){if(T.forEach&&typeof T.forEach=="function")T.forEach(L,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,L,void 0);else for(var V=ye(T),Q=fe(T),we=Q.length,De=0;De<we;De++)L.call(void 0,Q[De],V&&V[De],T)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(T,L){if(T){T=T.split("&");for(var V=0;V<T.length;V++){var Q=T[V].indexOf("="),we=null;if(0<=Q){var De=T[V].substring(0,Q);we=T[V].substring(Q+1)}else De=T[V];L(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof qe){this.h=T.h,st(this,T.j),this.o=T.o,this.g=T.g,Et(this,T.s),this.l=T.l;var L=T.i,V=new rc;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),mn(this,V),this.m=T.m}else T&&(L=String(T).match(Oe))?(this.h=!1,st(this,L[1]||"",!0),this.o=Rr(L[2]||""),this.g=Rr(L[3]||"",!0),Et(this,L[4]),this.l=Rr(L[5]||"",!0),mn(this,L[6]||"",!0),this.m=Rr(L[7]||"")):(this.h=!1,this.i=new rc(null,this.h))}qe.prototype.toString=function(){var T=[],L=this.j;L&&T.push(Nr(L,wd,!0),":");var V=this.g;return(V||L=="file")&&(T.push("//"),(L=this.o)&&T.push(Nr(L,wd,!0),"@"),T.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&T.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&T.push("/"),T.push(Nr(V,V.charAt(0)=="/"?aT:hp,!0))),(V=this.i.toString())&&T.push("?",V),(V=this.m)&&T.push("#",Nr(V,HR)),T.join("")};function Ge(T){return new qe(T)}function st(T,L,V){T.j=V?Rr(L,!0):L,T.j&&(T.j=T.j.replace(/:$/,""))}function Et(T,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);T.s=L}else T.s=null}function mn(T,L,V){L instanceof rc?(T.i=L,uT(T.i,T.h)):(V||(L=Nr(L,a1)),T.i=new rc(L,T.h))}function Pt(T,L,V){T.i.set(L,V)}function Bn(T){return Pt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Rr(T,L){return T?L?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Nr(T,L,V){return typeof T=="string"?(T=encodeURI(T).replace(L,qo),V&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function qo(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var wd=/[#\/\?@]/g,hp=/[#\?:]/g,aT=/[#\?]/g,a1=/[#\?@]/g,HR=/#/g;function rc(T,L){this.h=this.g=null,this.i=T||null,this.j=!!L}function hu(T){T.g||(T.g=new Map,T.h=0,T.i&&Ve(T.i,function(L,V){T.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=rc.prototype,e.add=function(T,L){hu(this),this.i=null,T=mp(this,T);var V=this.g.get(T);return V||this.g.set(T,V=[]),V.push(L),this.h+=1,this};function pp(T,L){hu(T),L=mp(T,L),T.g.has(L)&&(T.i=null,T.h-=T.g.get(L).length,T.g.delete(L))}function h_(T,L){return hu(T),L=mp(T,L),T.g.has(L)}e.forEach=function(T,L){hu(this),this.g.forEach(function(V,Q){V.forEach(function(we){T.call(L,we,Q,this)},this)},this)},e.na=function(){hu(this);const T=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let Q=0;Q<L.length;Q++){const we=T[Q];for(let De=0;De<we.length;De++)V.push(L[Q])}return V},e.V=function(T){hu(this);let L=[];if(typeof T=="string")h_(this,T)&&(L=L.concat(this.g.get(mp(this,T))));else{T=Array.from(this.g.values());for(let V=0;V<T.length;V++)L=L.concat(T[V])}return L},e.set=function(T,L){return hu(this),this.i=null,T=mp(this,T),h_(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[L]),this.h+=1,this},e.get=function(T,L){return T?(T=this.V(T),0<T.length?String(T[0]):L):L};function qR(T,L,V){pp(T,L),0<V.length&&(T.i=null,T.g.set(mp(T,L),m(V)),T.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var Q=L[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=De;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),T.push(we)}}return this.i=T.join("&")};function mp(T,L){return L=String(L),T.j&&(L=L.toLowerCase()),L}function uT(T,L){L&&!T.j&&(hu(T),T.i=null,T.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(pp(this,Q),qR(this,we,V))},T)),T.j=L}function WR(T,L){const V=new ka;if(a.Image){const Q=new Image;Q.onload=h(pu,V,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(pu,V,"TestLoadImage: error",!1,L,Q),Q.onabort=h(pu,V,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(pu,V,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else L(!1)}function gp(T,L){const V=new ka,Q=new AbortController,we=setTimeout(()=>{Q.abort(),pu(V,"TestPingServer: timeout",!1,L)},1e4);fetch(T,{signal:Q.signal}).then(De=>{clearTimeout(we),De.ok?pu(V,"TestPingServer: ok",!0,L):pu(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(we),pu(V,"TestPingServer: error",!1,L)})}function pu(T,L,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function V5(){this.g=new nr}function GR(T,L,V){const Q=V||"";try{le(T,function(we,De){let ft=we;l(we)&&(ft=gn(we)),L.push(Q+De+"="+encodeURIComponent(ft))})}catch(we){throw L.push(Q+"type="+encodeURIComponent("_badmap")),we}}function u1(T){this.l=T.Ub||null,this.j=T.eb||!1}p(u1,rr),u1.prototype.g=function(){return new l1(this.l,this.j)},u1.prototype.i=function(T){return function(){return T}}({});function l1(T,L){pe.call(this),this.D=T,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(l1,pe),e=l1.prototype,e.open=function(T,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=L,this.readyState=1,gg(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(L.body=T),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,c1(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,gg(this)),this.g&&(this.readyState=3,gg(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;YR(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function YR(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var L=T.value?T.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!T.done}))&&(this.response=this.responseText+=L)}T.done?c1(this):gg(this),this.readyState==3&&YR(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,c1(this))},e.Qa=function(T){this.g&&(this.response=T,c1(this))},e.ga=function(){this.g&&c1(this)};function c1(T){T.readyState=4,T.l=null,T.j=null,T.v=null,gg(T)}e.setRequestHeader=function(T,L){this.u.append(T,L)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,T.push(V[0]+": "+V[1]),V=L.next();return T.join(`\r
`)};function gg(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(l1.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function KR(T){let L="";return S(T,function(V,Q){L+=Q,L+=":",L+=V,L+=`\r
`}),L}function te(T,L,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=KR(V),typeof T=="string"?V!=null&&encodeURIComponent(String(V)):Pt(T,L,V))}function ue(T){pe.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,L,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);L=L?L.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qt.g(),this.v=this.o?Vo(this.o):Vo(qt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(T),!0),this.B=!1}catch(De){$n(this,De);return}if(T=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,L,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gr(this),this.u=!0,this.g.send(T),this.u=!1}catch(De){$n(this,De)}};function $n(T,L){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=L,T.m=5,Tr(T),Un(T)}function Tr(T){T.A||(T.A=!0,Ae(T,"complete"),Ae(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Ae(this,"complete"),Ae(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wr(this):this.bb())},e.bb=function(){Wr(this)};function Wr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||ns(T)!=4||T.Z()!=2)){if(T.u&&ns(T)==4)ut(T.Ea,0,T);else if(Ae(T,"readystatechange"),ns(T)==4){T.h=!1;try{const ft=T.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var Q;if(Q=ft===0){var we=String(T.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ae(T,"complete"),Ae(T,"success");else{T.m=6;try{var De=2<ns(T)?T.g.statusText:""}catch{De=""}T.l=De+" ["+T.Z()+"]",Tr(T)}}finally{Un(T)}}}}function Un(T,L){if(T.g){Gr(T);const V=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,L||Ae(T,"ready");try{V.onreadystatechange=Q}catch{}}}function Gr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function ns(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<ns(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var L=this.g.responseText;return T&&L.indexOf(T)==0&&(L=L.substring(T.length)),An(L)}};function Wo(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function f1(T){const L={};T=(T.g&&2<=ns(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var V=R(T[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=L[we]||[];L[we]=De,De.push(V)}x(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yp(T,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[T]||L}function p_(T){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yp("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yp("baseRetryDelayMs",5e3,T),this.cb=yp("retryDelaySeedMs",1e4,T),this.Wa=yp("forwardChannelMaxRetries",2,T),this.wa=yp("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Ra(T&&T.concurrentRequestLimit),this.Da=new V5,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=p_.prototype,e.la=8,e.G=1,e.connect=function(T,L,V,Q){Jr(0),this.W=T,this.H=L||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=xie(this,null,this.W),QR(this)};function m_(T){if(mie(T),T.G==3){var L=T.U++,V=Ge(T.I);if(Pt(V,"SID",T.K),Pt(V,"RID",L),Pt(V,"TYPE","terminate"),lT(T,V),L=new jn(T,T.j,L),L.L=2,L.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=Sie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Pi(L)}Eie(T)}function XR(T){T.g&&(q5(T),T.g.cancel(),T.g=null)}function mie(T){XR(T),T.u&&(a.clearTimeout(T.u),T.u=null),JR(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function QR(T){if(!Ws(T.h)&&!T.s){T.s=!0;var L=T.Ga;B||P(),z||(B(),z=!0),H.add(L,T),T.B=0}}function jje(T,L){return nc(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=L.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Ia(d(T.Ga,T,L),wie(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const we=new jn(this,this.j,T);let De=this.o;if(this.S&&(De?(De=C(De),I(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=yie(this,we,L),V=Ge(this.I),Pt(V,"RID",T),Pt(V,"CVER",22),this.D&&Pt(V,"X-HTTP-Session-Id",this.D),lT(this,V),De&&(this.O?L="headers="+encodeURIComponent(String(KR(De)))+"&"+L:this.m&&te(V,this.m,De)),Y(this.h,we),this.Ua&&Pt(V,"TYPE","init"),this.P?(Pt(V,"$req",L),Pt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,L),this.G=2}}else this.G==3&&(T?gie(this,T):this.i.length==0||Ws(this.h)||gie(this))};function gie(T,L){var V;L?V=L.l:V=T.U++;const Q=Ge(T.I);Pt(Q,"SID",T.K),Pt(Q,"RID",V),Pt(Q,"AID",T.T),lT(T,Q),T.m&&T.o&&te(Q,T.m,T.o),V=new jn(T,T.j,V,T.B+1),T.m===null&&(V.H=T.o),L&&(T.i=L.D.concat(T.i)),L=yie(T,V,1e3),V.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Y(T.h,V),Vt(V,Q,L)}function lT(T,L){T.H&&S(T.H,function(V,Q){Pt(L,Q,V)}),T.l&&le({},function(V,Q){Pt(L,Q,V)})}function yie(T,L,V){V=Math.min(T.i.length,V);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var we=T.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=we[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Yr=!0;for(let vo=0;vo<V;vo++){let fr=we[vo].g;const Go=we[vo].map;if(fr-=De,0>fr)De=Math.max(0,we[vo].g-100),Yr=!1;else try{GR(Go,ft,"req"+fr+"_")}catch{Q&&Q(Go)}}if(Yr){Q=ft.join("&");break e}}}return T=T.i.splice(0,V),L.D=T,Q}function vie(T){if(!T.g&&!T.u){T.Y=1;var L=T.Fa;B||P(),z||(B(),z=!0),H.add(L,T),T.v=0}}function H5(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Ia(d(T.Fa,T),wie(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,bie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Ia(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jr(10),XR(this),bie(this))};function q5(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function bie(T){T.g=new jn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var L=Ge(T.qa);Pt(L,"RID","rpc"),Pt(L,"SID",T.K),Pt(L,"AID",T.T),Pt(L,"CI",T.F?"0":"1"),!T.F&&T.ja&&Pt(L,"TO",T.ja),Pt(L,"TYPE","xmlhttp"),lT(T,L),T.m&&T.o&&te(L,T.m,T.o),T.L&&(T.g.I=T.L);var V=T.g;T=T.ia,V.L=1,V.v=Bn(Ge(L)),V.m=null,V.P=!0,sr(V,T)}e.Za=function(){this.C!=null&&(this.C=null,XR(this),H5(this),Jr(19))};function JR(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function _ie(T,L){var V=null;if(T.g==L){JR(T),q5(T),T.g=null;var Q=2}else if(_d(T.h,L))V=L.D,se(T.h,L),Q=1;else return;if(T.G!=0){if(L.o)if(Q==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var we=T.B;Q=fl(),Ae(Q,new du(Q,V)),QR(T)}else vie(T);else if(we=L.s,we==3||we==0&&0<L.X||!(Q==1&&jje(T,L)||Q==2&&H5(T)))switch(V&&0<V.length&&(L=T.h,L.i=L.i.concat(V)),we){case 1:d1(T,5);break;case 4:d1(T,10);break;case 3:d1(T,6);break;default:d1(T,2)}}}function wie(T,L){let V=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(V*=2),V*L}function d1(T,L){if(T.j.info("Error code "+L),L==2){var V=d(T.fb,T),Q=T.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),we?WR(Q.toString(),V):gp(Q.toString(),V)}else Jr(2);T.G=0,T.l&&T.l.sa(L),Eie(T),mie(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),Jr(2)):(this.j.info("Failed to ping google.com"),Jr(1))};function Eie(T){if(T.G=0,T.ka=[],T.l){const L=Z(T.h);(L.length!=0||T.i.length!=0)&&(g(T.ka,L),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function xie(T,L,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")L&&(Q.g=L+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,L=L?L+"."+we.hostname:we.hostname,we=+we.port;var De=new qe(null);Q&&st(De,Q),L&&(De.g=L),we&&Et(De,we),V&&(De.l=V),Q=De}return V=T.D,L=T.ya,V&&L&&Pt(Q,V,L),Pt(Q,"VER",T.la),lT(T,Q),Q}function Sie(T,L,V){if(L&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=T.Ca&&!T.pa?new ue(new u1({eb:V})):new ue(T.pa),L.Ha(T.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tie(){}e=Tie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ZR(){}ZR.prototype.g=function(T,L){return new dl(T,L)};function dl(T,L){pe.call(this),this.g=new p_(L),this.l=T,this.h=L&&L.messageUrlParams||null,T=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(T?T["X-WebChannel-Content-Type"]=L.messageContentType:T={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(T?T["X-WebChannel-Client-Profile"]=L.va:T={"X-WebChannel-Client-Profile":L.va}),this.g.S=T,(T=L&&L.Sb)&&!v(T)&&(this.g.m=T),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,T=this.h,T!==null&&L in T&&(T=this.h,L in T&&delete T[L])),this.j=new g_(this)}p(dl,pe),dl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dl.prototype.close=function(){m_(this.g)},dl.prototype.o=function(T){var L=this.g;if(typeof T=="string"){var V={};V.__data__=T,T=V}else this.u&&(V={},V.__data__=gn(T),T=V);L.i.push(new Ho(L.Ya++,T)),L.G==3&&QR(L)},dl.prototype.N=function(){this.g.l=null,delete this.j,m_(this.g),delete this.g,dl.aa.N.call(this)};function Cie(T){Bi.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var L=T.__sm__;if(L){e:{for(const V in L){T=V;break e}T=void 0}(this.i=T)&&(T=this.i,L=L!==null&&T in L?L[T]:void 0),this.data=L}else this.data=T}p(Cie,Bi);function Aie(){Ir.call(this),this.status=1}p(Aie,Ir);function g_(T){this.g=T}p(g_,Tie),g_.prototype.ua=function(){Ae(this.g,"a")},g_.prototype.ta=function(T){Ae(this.g,new Cie(T))},g_.prototype.sa=function(T){Ae(this.g,new Aie)},g_.prototype.ra=function(){Ae(this.g,"b")},ZR.prototype.createWebChannel=ZR.prototype.g,dl.prototype.send=dl.prototype.o,dl.prototype.open=dl.prototype.m,dl.prototype.close=dl.prototype.close,_Pe=function(){return new ZR},bPe=function(){return fl()},vPe=vs,NV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,FD=ot,St.COMPLETE="complete",yPe=St,ji.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",pe.prototype.listen=pe.prototype.K,L2=ji,gPe=u1,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,mPe=ue}).apply(typeof cP<"u"?cP:typeof self<"u"?self:typeof window<"u"?window:{});const che="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}wu.UNAUTHENTICATED=new wu(null),wu.GOOGLE_CREDENTIALS=new wu("google-credentials-uid"),wu.FIRST_PARTY=new wu("first-party-uid"),wu.MOCK_USER=new wu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new w4("@firebase/firestore");function zT(){return ob.logLevel}function It(e,...t){if(ob.logLevel<=Gn.DEBUG){const n=t.map(VJ);ob.debug(`Firestore (${MS}): ${e}`,...n)}}function Fm(e,...t){if(ob.logLevel<=Gn.ERROR){const n=t.map(VJ);ob.error(`Firestore (${MS}): ${e}`,...n)}}function pI(e,...t){if(ob.logLevel<=Gn.WARN){const n=t.map(VJ);ob.warn(`Firestore (${MS}): ${e}`,...n)}}function VJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(e="Unexpected state"){const t=`FIRESTORE (${MS}) INTERNAL ASSERTION FAILED: `+e;throw Fm(t),new Error(t)}function ii(e,t){e||un()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends tp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class $3t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(wu.UNAUTHENTICATED))}shutdown(){}}class M3t{constructor(t){this.t=t,this.currentUser=wu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new cm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ii(typeof r.accessToken=="string"),new O3t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ii(t===null||typeof t=="string"),new wu(t)}}class L3t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=wu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class F3t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new L3t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(wu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j3t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B3t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ii(typeof n.token=="string"),this.R=n.token,new j3t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wPe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=U3t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function br(e,t){return e<t?-1:e>t?1:0}function cx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Fs.fromMillis(Date.now())}static fromDate(t){return Fs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Fs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?br(this.nanoseconds,t.nanoseconds):br(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Fs(0,0))}static max(){return new dn(new Fs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(t,n,r){n===void 0?n=0:n>t.length&&un(),r===void 0?r=t.length-n:r>t.length-n&&un(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return mI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof mI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class fi extends mI{construct(t,n,r){return new fi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fi(n)}static emptyPath(){return new fi([])}}const z3t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ko extends mI{construct(t,n,r){return new ko(t,n,r)}static isValidIdentifier(t){return z3t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ko.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ko(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ko(n)}static emptyPath(){return new ko([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(fi.fromString(t))}static fromName(t){return new Ut(fi.fromString(t).popFirst(5))}static empty(){return new Ut(fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return fi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new fi(t.slice()))}}function V3t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Fs(n+1,0):new Fs(n,r));return new uy(i,Ut.empty(),t)}function H3t(e){return new uy(e.readTime,e.key,-1)}class uy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new uy(dn.min(),Ut.empty(),-1)}static max(){return new uy(dn.max(),Ut.empty(),-1)}}function q3t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:br(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G3t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==W3t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Y3t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}HJ.oe=-1;function I4(e){return e==null}function Y$(e){return e===0&&1/e==-1/0}function K3t(e){return typeof e=="number"&&Number.isInteger(e)&&!Y$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fhe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function EPe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,n){this.comparator=t,this.root=n||Co.EMPTY}insert(t,n){return new Fi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Co.BLACK,null,null))}remove(t){return new Fi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Co.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new fP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new fP(this.root,t,this.comparator,!1)}getReverseIterator(){return new fP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new fP(this.root,t,this.comparator,!0)}}class fP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Co{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Co.RED,this.left=i??Co.EMPTY,this.right=s??Co.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Co(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Co.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Co.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw un();const t=this.left.check();if(t!==this.right.check())throw un();return t+(this.isRed()?0:1)}}Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1;Co.EMPTY=new class{constructor(){this.size=0}get key(){throw un()}get value(){throw un()}get color(){throw un()}get left(){throw un()}get right(){throw un()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Co(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(t){this.comparator=t,this.data=new Fi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new dhe(this.data.getIterator())}getIteratorFrom(t){return new dhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $o)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $o(this.comparator);return n.data=t,n}}class dhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.fields=t,t.sort(ko.comparator)}static empty(){return new Il([])}unionWith(t){let n=new $o(ko.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Il(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return cx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xPe("Invalid base64 string: "+s):s}}(t);return new Ea(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ea(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return br(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ea.EMPTY_BYTE_STRING=new Ea("");const X3t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ly(e){if(ii(!!e),typeof e=="string"){let t=0;const n=X3t.exec(e);if(ii(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Es(e.seconds),nanos:Es(e.nanos)}}function Es(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ab(e){return typeof e=="string"?Ea.fromBase64String(e):Ea.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function WJ(e){const t=e.mapValue.fields.__previous_value__;return qJ(t)?WJ(t):t}function gI(e){const t=ly(e.mapValue.fields.__local_write_time__.timestampValue);return new Fs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class yI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new yI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof yI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ub(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qJ(e)?4:J3t(e)?9007199254740991:10:un()}function $h(e,t){if(e===t)return!0;const n=ub(e);if(n!==ub(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gI(e).isEqual(gI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ly(i.timestampValue),a=ly(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return ab(i.bytesValue).isEqual(ab(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Es(i.geoPointValue.latitude)===Es(s.geoPointValue.latitude)&&Es(i.geoPointValue.longitude)===Es(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Es(i.integerValue)===Es(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Es(i.doubleValue),a=Es(s.doubleValue);return o===a?Y$(o)===Y$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return cx(e.arrayValue.values||[],t.arrayValue.values||[],$h);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(fhe(o)!==fhe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!$h(o[u],a[u])))return!1;return!0}(e,t);default:return un()}}function vI(e,t){return(e.values||[]).find(n=>$h(n,t))!==void 0}function fx(e,t){if(e===t)return 0;const n=ub(e),r=ub(t);if(n!==r)return br(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return br(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Es(s.integerValue||s.doubleValue),u=Es(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return hhe(e.timestampValue,t.timestampValue);case 4:return hhe(gI(e),gI(t));case 5:return br(e.stringValue,t.stringValue);case 6:return function(s,o){const a=ab(s),u=ab(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=br(a[l],u[l]);if(c!==0)return c}return br(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=br(Es(s.latitude),Es(o.latitude));return a!==0?a:br(Es(s.longitude),Es(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=fx(a[l],u[l]);if(c)return c}return br(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===dP.mapValue&&o===dP.mapValue)return 0;if(s===dP.mapValue)return 1;if(o===dP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=br(u[f],c[f]);if(d!==0)return d;const h=fx(a[u[f]],l[c[f]]);if(h!==0)return h}return br(u.length,c.length)}(e.mapValue,t.mapValue);default:throw un()}}function hhe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return br(e,t);const n=ly(e),r=ly(t),i=br(n.seconds,r.seconds);return i!==0?i:br(n.nanos,r.nanos)}function dx(e){return PV(e)}function PV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ly(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ab(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=PV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${PV(n.fields[o])}`;return i+"}"}(e.mapValue):un()}function phe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function DV(e){return!!e&&"integerValue"in e}function GJ(e){return!!e&&"arrayValue"in e}function mhe(e){return!!e&&"nullValue"in e}function ghe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jD(e){return!!e&&"mapValue"in e}function zC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=zC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function J3t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t){this.value=t}static empty(){return new Pu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!jD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=zC(n)}setAll(t){let n=ko.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=zC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());jD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return $h(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];jD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Yb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Pu(zC(this.value))}}function SPe(e){const t=[];return Yb(e.fields,(n,r)=>{const i=new ko([n]);if(jD(r)){const s=SPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Il(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ca(t,0,dn.min(),dn.min(),dn.min(),Pu.empty(),0)}static newFoundDocument(t,n,r,i){return new ca(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new ca(t,2,n,dn.min(),dn.min(),Pu.empty(),0)}static newUnknownDocument(t,n){return new ca(t,3,n,dn.min(),dn.min(),Pu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Pu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Pu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ca&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K$=class{constructor(t,n){this.position=t,this.inclusive=n}};function yhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=fx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!$h(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,n="asc"){this.field=t,this.dir=n}}function Z3t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TPe=class{};class Ss extends TPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new t$t(t,n,r):n==="array-contains"?new i$t(t,r):n==="in"?new s$t(t,r):n==="not-in"?new o$t(t,r):n==="array-contains-any"?new a$t(t,r):new Ss(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new n$t(t,r):new r$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fx(n,this.value)):n!==null&&ub(this.value)===ub(n)&&this.matchesComparison(fx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zf extends TPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Zf(t,n)}matches(t){return CPe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function CPe(e){return e.op==="and"}function APe(e){return e$t(e)&&CPe(e)}function e$t(e){for(const t of e.filters)if(t instanceof Zf)return!1;return!0}function OV(e){if(e instanceof Ss)return e.field.canonicalString()+e.op.toString()+dx(e.value);if(APe(e))return e.filters.map(t=>OV(t)).join(",");{const t=e.filters.map(n=>OV(n)).join(",");return`${e.op}(${t})`}}function IPe(e,t){return e instanceof Ss?function(r,i){return i instanceof Ss&&r.op===i.op&&r.field.isEqual(i.field)&&$h(r.value,i.value)}(e,t):e instanceof Zf?function(r,i){return i instanceof Zf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&IPe(o,i.filters[a]),!0):!1}(e,t):void un()}function kPe(e){return e instanceof Ss?function(n){return`${n.field.canonicalString()} ${n.op} ${dx(n.value)}`}(e):e instanceof Zf?function(n){return n.op.toString()+" {"+n.getFilters().map(kPe).join(" ,")+"}"}(e):"Filter"}class t$t extends Ss{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class n$t extends Ss{constructor(t,n){super(t,"in",n),this.keys=RPe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class r$t extends Ss{constructor(t,n){super(t,"not-in",n),this.keys=RPe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function RPe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class i$t extends Ss{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return GJ(n)&&vI(n.arrayValue,this.value)}}class s$t extends Ss{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vI(this.value.arrayValue,n)}}class o$t extends Ss{constructor(t,n){super(t,"not-in",n)}matches(t){if(vI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!vI(this.value.arrayValue,n)}}class a$t extends Ss{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!GJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function bhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new u$t(e,t,n,r,i,s,o)}function YJ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>OV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),I4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>dx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>dx(r)).join(",")),t.ue=n}return t.ue}function KJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Z3t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!IPe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vhe(e.startAt,t.startAt)&&vhe(e.endAt,t.endAt)}function $V(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function l$t(e,t,n,r,i,s,o,a){return new LS(e,t,n,r,i,s,o,a)}function XJ(e){return new LS(e)}function _he(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function NPe(e){return e.collectionGroup!==null}function VC(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $o(ko.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new bI(s,r))}),n.has(ko.keyField().canonicalString())||t.ce.push(new bI(ko.keyField(),r))}return t.ce}function yh(e){const t=hn(e);return t.le||(t.le=c$t(t,VC(e))),t.le}function c$t(e,t){if(e.limitType==="F")return bhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bI(i.field,s)});const n=e.endAt?new K$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new K$(e.startAt.position,e.startAt.inclusive):null;return bhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function MV(e,t){const n=e.filters.concat([t]);return new LS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function LV(e,t,n){return new LS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function k4(e,t){return KJ(yh(e),yh(t))&&e.limitType===t.limitType}function PPe(e){return`${YJ(yh(e))}|lt:${e.limitType}`}function nw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kPe(i)).join(", ")}]`),I4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>dx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>dx(i)).join(",")),`Target(${r})`}(yh(e))}; limitType=${e.limitType})`}function R4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of VC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=yhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,VC(r),i)||r.endAt&&!function(o,a,u){const l=yhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,VC(r),i))}(e,t)}function f$t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function DPe(e){return(t,n)=>{let r=!1;for(const i of VC(e)){const s=d$t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function d$t(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?fx(u,l):un()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return un()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Yb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return EPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$t=new Fi(Ut.comparator);function jm(){return h$t}const OPe=new Fi(Ut.comparator);function F2(...e){let t=OPe;for(const n of e)t=t.insert(n.key,n);return t}function $Pe(e){let t=OPe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function vv(){return HC()}function MPe(){return HC()}function HC(){return new FS(e=>e.toString(),(e,t)=>e.isEqual(t))}const p$t=new Fi(Ut.comparator),m$t=new $o(Ut.comparator);function zn(...e){let t=m$t;for(const n of e)t=t.add(n);return t}const g$t=new $o(br);function y$t(){return g$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LPe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Y$(t)?"-0":t}}function FPe(e){return{integerValue:""+e}}function v$t(e,t){return K3t(t)?FPe(t):LPe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this._=void 0}}function b$t(e,t,n){return e instanceof _I?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qJ(s)&&(s=WJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof wI?BPe(e,t):e instanceof EI?UPe(e,t):function(i,s){const o=jPe(i,s),a=whe(o)+whe(i.Pe);return DV(o)&&DV(i.Pe)?FPe(a):LPe(i.serializer,a)}(e,t)}function _$t(e,t,n){return e instanceof wI?BPe(e,t):e instanceof EI?UPe(e,t):n}function jPe(e,t){return e instanceof X$?function(r){return DV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class _I extends N4{}class wI extends N4{constructor(t){super(),this.elements=t}}function BPe(e,t){const n=zPe(t);for(const r of e.elements)n.some(i=>$h(i,r))||n.push(r);return{arrayValue:{values:n}}}class EI extends N4{constructor(t){super(),this.elements=t}}function UPe(e,t){let n=zPe(t);for(const r of e.elements)n=n.filter(i=>!$h(i,r));return{arrayValue:{values:n}}}class X$ extends N4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function whe(e){return Es(e.integerValue||e.doubleValue)}function zPe(e){return GJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w$t{constructor(t,n){this.field=t,this.transform=n}}function E$t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof wI&&i instanceof wI||r instanceof EI&&i instanceof EI?cx(r.elements,i.elements,$h):r instanceof X$&&i instanceof X$?$h(r.Pe,i.Pe):r instanceof _I&&i instanceof _I}(e.transform,t.transform)}class x$t{constructor(t,n){this.version=t,this.transformResults=n}}class Gu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Gu}static exists(t){return new Gu(void 0,t)}static updateTime(t){return new Gu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function BD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class P4{}function VPe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new D4(e.key,Gu.none()):new Jk(e.key,e.data,Gu.none());{const n=e.data,r=Pu.empty();let i=new $o(ko.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gy(e.key,r,new Il(i.toArray()),Gu.none())}}function S$t(e,t,n){e instanceof Jk?function(i,s,o){const a=i.value.clone(),u=xhe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Gy?function(i,s,o){if(!BD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=xhe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(HPe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function qC(e,t,n,r){return e instanceof Jk?function(s,o,a,u){if(!BD(s.precondition,o))return a;const l=s.value.clone(),c=She(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gy?function(s,o,a,u){if(!BD(s.precondition,o))return a;const l=She(s.fieldTransforms,u,o),c=o.data;return c.setAll(HPe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return BD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function T$t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=jPe(r.transform,i||null);s!=null&&(n===null&&(n=Pu.empty()),n.set(r.field,s))}return n||null}function Ehe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cx(r,i,(s,o)=>E$t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Jk extends P4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gy extends P4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HPe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xhe(e,t,n){const r=new Map;ii(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,_$t(o,a,n[i]))}return r}function She(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,b$t(s,o,t))}return r}class D4 extends P4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C$t extends P4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A$t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&S$t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=qC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=qC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=MPe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=VPe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&cx(this.mutations,t.mutations,(n,r)=>Ehe(n,r))&&cx(this.baseMutations,t.baseMutations,(n,r)=>Ehe(n,r))}}class QJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ii(t.mutations.length===r.length);let i=function(){return p$t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new QJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I$t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k$t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bs,Zn;function R$t(e){switch(e){default:return un();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function qPe(e){if(e===void 0)return Fm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case bs.OK:return Be.OK;case bs.CANCELLED:return Be.CANCELLED;case bs.UNKNOWN:return Be.UNKNOWN;case bs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case bs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case bs.INTERNAL:return Be.INTERNAL;case bs.UNAVAILABLE:return Be.UNAVAILABLE;case bs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case bs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case bs.NOT_FOUND:return Be.NOT_FOUND;case bs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case bs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case bs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case bs.ABORTED:return Be.ABORTED;case bs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case bs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case bs.DATA_LOSS:return Be.DATA_LOSS;default:return un()}}(Zn=bs||(bs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$t=new Iv([4294967295,4294967295],0);function The(e){const t=N$t().encode(e),n=new pPe;return n.update(t),new Uint8Array(n.digest())}function Che(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Iv([n,r],0),new Iv([i,s],0)]}class JJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new j2(`Invalid padding: ${n}`);if(r<0)throw new j2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new j2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new j2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Iv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Iv.fromNumber(r)));return i.compare(P$t)===1&&(i=new Iv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=The(t),[r,i]=Che(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new JJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=The(t),[r,i]=Che(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class j2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Zk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new O4(dn.min(),i,new Fi(br),jm(),zn())}}class Zk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Zk(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class WPe{constructor(t,n){this.targetId=t,this.me=n}}class GPe{constructor(t,n,r=Ea.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Ahe{constructor(){this.fe=0,this.ge=khe(),this.pe=Ea.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:un()}}),new Zk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=khe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ii(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class D$t{constructor(t){this.Le=t,this.Be=new Map,this.ke=jm(),this.qe=Ihe(),this.Qe=new Fi(br)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:un()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if($V(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,ca.newNoDocument(o,dn.min()))}else ii(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ab(r).toUint8Array()}catch(u){if(u instanceof xPe)return pI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new JJ(o,i,s)}catch(u){return pI(u instanceof j2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&$V(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ca.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new O4(t,n,this.Qe,this.ke,r);return this.ke=jm(),this.qe=Ihe(),this.Qe=new Fi(br),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Ahe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new $o(br),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ahe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Ihe(){return new Fi(Ut.comparator)}function khe(){return new Fi(Ut.comparator)}const O$t={asc:"ASCENDING",desc:"DESCENDING"},$$t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M$t={and:"AND",or:"OR"};class L$t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function FV(e,t){return e.useProto3Json||I4(t)?t:{value:t}}function Q$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YPe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function F$t(e,t){return Q$(e,t.toTimestamp())}function vh(e){return ii(!!e),dn.fromTimestamp(function(n){const r=ly(n);return new Fs(r.seconds,r.nanos)}(e))}function ZJ(e,t){return jV(e,t).canonicalString()}function jV(e,t){const n=function(i){return new fi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function KPe(e){const t=fi.fromString(e);return ii(eDe(t)),t}function BV(e,t){return ZJ(e.databaseId,t.path)}function N9(e,t){const n=KPe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(QPe(n))}function XPe(e,t){return ZJ(e.databaseId,t)}function j$t(e){const t=KPe(e);return t.length===4?fi.emptyPath():QPe(t)}function UV(e){return new fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function QPe(e){return ii(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Rhe(e,t,n){return{name:BV(e,t),fields:n.value.mapValue.fields}}function B$t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:un()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ii(c===void 0||typeof c=="string"),Ea.fromBase64String(c||"")):(ii(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ea.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:qPe(l.code);return new bt(c,l.message||"")}(o);n=new GPe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=N9(e,r.document.name),s=vh(r.document.updateTime),o=r.document.createTime?vh(r.document.createTime):dn.min(),a=new Pu({mapValue:{fields:r.document.fields}}),u=ca.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new UD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=N9(e,r.document),s=r.readTime?vh(r.readTime):dn.min(),o=ca.newNoDocument(i,s),a=r.removedTargetIds||[];n=new UD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=N9(e,r.document),s=r.removedTargetIds||[];n=new UD([],s,i,null)}else{if(!("filter"in t))return un();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new k$t(i,s),a=r.targetId;n=new WPe(a,o)}}return n}function U$t(e,t){let n;if(t instanceof Jk)n={update:Rhe(e,t.key,t.value)};else if(t instanceof D4)n={delete:BV(e,t.key)};else if(t instanceof Gy)n={update:Rhe(e,t.key,t.data),updateMask:X$t(t.fieldMask)};else{if(!(t instanceof C$t))return un();n={verify:BV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof _I)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof EI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof X$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw un()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:F$t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:un()}(e,t.precondition)),n}function z$t(e,t){return e&&e.length>0?(ii(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?vh(i.updateTime):vh(s);return o.isEqual(dn.min())&&(o=vh(s)),new x$t(o,i.transformResults||[])}(n,t))):[]}function V$t(e,t){return{documents:[XPe(e,t.path)]}}function H$t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XPe(e,i);const s=function(l){if(l.length!==0)return ZPe(Zf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:rw(d.field),direction:G$t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=FV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function q$t(e){let t=j$t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ii(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=JPe(f);return d instanceof Zf&&APe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new bI(iw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,I4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new K$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new K$(h,d)}(n.endAt)),l$t(t,i,o,s,a,"F",u,l)}function W$t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function JPe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=iw(n.unaryFilter.field);return Ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=iw(n.unaryFilter.field);return Ss.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=iw(n.unaryFilter.field);return Ss.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=iw(n.unaryFilter.field);return Ss.create(o,"!=",{nullValue:"NULL_VALUE"});default:return un()}}(e):e.fieldFilter!==void 0?function(n){return Ss.create(iw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return un()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Zf.create(n.compositeFilter.filters.map(r=>JPe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return un()}}(n.compositeFilter.op))}(e):un()}function G$t(e){return O$t[e]}function Y$t(e){return $$t[e]}function K$t(e){return M$t[e]}function rw(e){return{fieldPath:e.canonicalString()}}function iw(e){return ko.fromServerFormat(e.fieldPath)}function ZPe(e){return e instanceof Ss?function(n){if(n.op==="=="){if(ghe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NAN"}};if(mhe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ghe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NOT_NAN"}};if(mhe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rw(n.field),op:Y$t(n.op),value:n.value}}}(e):e instanceof Zf?function(n){const r=n.getFilters().map(i=>ZPe(i));return r.length===1?r[0]:{compositeFilter:{op:K$t(n.op),filters:r}}}(e):un()}function X$t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function eDe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Ea.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new n0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new n0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$t{constructor(t){this.ct=t}}function J$t(e){const t=q$t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?LV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z$t{constructor(){this._n=new eMt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(uy.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(uy.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class eMt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new $o(fi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new $o(fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new hx(0)}static Ln(){return new hx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tMt{constructor(){this.changes=new FS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ca.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&qC(r.mutation,i,Il.empty(),Fs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=vv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=F2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=vv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=jm();const o=HC(),a=function(){return HC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Gy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),qC(c.mutation,l,c.mutation.getFieldMask(),Fs.now())):o.set(l.key,Il.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new nMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=HC();let i=new Fi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Il.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=MPe();c.forEach(d=>{if(!s.has(d)){const h=VPe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):NPe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(vv());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:$Pe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=F2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=F2();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new LS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ca.newInvalidDocument(c)))});let a=F2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&qC(c.mutation,l,Il.empty(),Fs.now()),R4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vh(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:J$t(i.bundledQuery),readTime:vh(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sMt{constructor(){this.overlays=new Fi(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=vv();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=vv(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Fi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=vv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=vv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new I$t(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(){this.Pr=new $o(Xs.Ir),this.Tr=new $o(Xs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Xs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Xs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new fi([])),r=new Xs(n,t),i=new Xs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new fi([])),r=new Xs(n,t),i=new Xs(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Xs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Xs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||br(t.pr,n.pr)}static Er(t,n){return br(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new $o(Xs.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new A$t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Xs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Xs(n,0),i=new Xs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $o(br);return n.forEach(i=>{const s=new Xs(i,0),o=new Xs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Xs(new Ut(s),0);let a=new $o(br);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ii(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new Xs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Xs(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMt{constructor(t){this.vr=t,this.docs=function(){return new Fi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():ca.newInvalidDocument(n))}getEntries(t,n){let r=jm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ca.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=jm();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||q3t(H3t(c),r)<=0||(i.has(c.key)||R4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){un()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new uMt(this)}getSize(t){return Qe.resolve(this.size)}}class uMt extends tMt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lMt{constructor(t){this.persistence=t,this.Mr=new FS(n=>YJ(n),KJ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new eZ,this.targetCount=0,this.Lr=hx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new hx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cMt{constructor(t,n){this.Br={},this.overlays={},this.kr=new HJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new lMt(this),this.indexManager=new Z$t,this.remoteDocumentCache=function(i){return new aMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Q$t(n),this.$r=new iMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new sMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new oMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new fMt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class fMt extends G3t{constructor(t){super(),this.currentSequenceNumber=t}}class tZ{constructor(t){this.persistence=t,this.zr=new eZ,this.jr=null}static Hr(t){return new tZ(t)}get Jr(){if(this.jr)return this.jr;throw un()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new nZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dMt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hMt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return WRt()?8:Y3t(jo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dMt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(zT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",nw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(zT()<=Gn.DEBUG&&It("QueryEngine","Query:",nw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(zT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",nw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yh(n))):Qe.resolve())}ji(t,n){if(_he(n))return Qe.resolve(null);let r=yh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=LV(n,null,"F"),r=yh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,LV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return _he(n)||i.isEqual(dn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(zT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nw(n)),this.es(t,o,n,V3t(i,-1)).next(a=>a))})}Zi(t,n){let r=new $o(DPe(t));return n.forEach((i,s)=>{R4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return zT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",nw(n)),this.zi.getDocumentsMatchingQuery(t,n,uy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pMt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Fi(br),this.rs=new FS(s=>YJ(s),KJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new rMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function mMt(e,t,n,r){return new pMt(e,t,n,r)}async function tDe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function gMt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ii(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function nDe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function yMt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ea.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=jm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(vMt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function vMt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=jm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function bMt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function _Mt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new n0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function zV(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qk(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Nhe(e,t,n){const r=hn(e);let i=dn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,yh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:zn())).next(a=>(wMt(r,f$t(t),a),{documents:a,hs:s})))}function wMt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Phe{constructor(){this.activeTargetIds=y$t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class EMt{constructor(){this.no=new Phe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Phe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xMt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hP=null;function P9(){return hP===null?hP=function(){return 268435456+Math.round(2147483648*Math.random())}():hP++,"0x"+hP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SMt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TMt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="WebChannelConnection";class CMt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=P9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw pI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+MS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=SMt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=P9();return new Promise((o,a)=>{const u=new mPe;u.setWithCredentials(!0),u.listenOnce(yPe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case FD.NO_ERROR:const c=u.getResponseJson();It(na,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case FD.TIMEOUT:It(na,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case FD.HTTP_ERROR:const f=u.getStatus();if(It(na,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:un()}}finally{It(na,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(na,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=P9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=_Pe(),a=bPe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new gPe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(na,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new TMt({lo:g=>{h?It(na,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(na,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(na,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,L2.EventType.OPEN,()=>{h||(It(na,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,L2.EventType.CLOSE,()=>{h||(h=!0,It(na,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,L2.EventType.ERROR,g=>{h||(h=!0,pI(na,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,L2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ii(!!v);const _=v,E=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(E){It(na,`RPC '${t}' stream ${i} received error:`,E);const w=E.status;let S=function(A){const I=bs[A];if(I!==void 0)return qPe(I)}(w),x=E.message;S===void 0&&(S=Be.INTERNAL,x="Unknown error status: "+w+" with message "+E.message),h=!0,p.po(new bt(S,x)),f.close()}else It(na,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,vPe.STAT_EVENT,g=>{g.stat===NV.PROXY?It(na,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===NV.NOPROXY&&It(na,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function D9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(e){return new L$t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rDe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iDe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new rDe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Fm(n.toString()),Fm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AMt extends iDe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=B$t(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?vh(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=UV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=$V(u)?{documents:V$t(s,u)}:{query:H$t(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=YPe(s,o.resumeToken);const l=FV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=Q$(s,o.snapshotVersion.toTimestamp());const l=FV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=W$t(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=UV(this.serializer),n.removeTarget=t,this.i_(n)}}class IMt extends iDe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ii(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=z$t(t.writeResults,t.commitTime),r=vh(t.commitTime);return this.listener.A_(r,n)}return ii(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=UV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>U$t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kMt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,jV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,jV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class RMt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Fm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NMt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Kb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await tR(l),l.N_.set("Unknown"),l.M_.delete(4),await eR(l)}(this))})}),this.N_=new RMt(r,i)}}async function eR(e){if(Kb(e))for(const t of e.x_)await t(!0)}async function tR(e){for(const t of e.x_)await t(!1)}function sDe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),oZ(n)?sZ(n):jS(n).Xo()&&iZ(n,t))}function rZ(e,t){const n=hn(e),r=jS(n);n.F_.delete(t),r.Xo()&&oDe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Kb(n)&&n.N_.set("Unknown"))}function iZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}jS(e).P_(t)}function oDe(e,t){e.L_.xe(t),jS(e).I_(t)}function sZ(e){e.L_=new D$t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),jS(e).start(),e.N_.w_()}function oZ(e){return Kb(e)&&!jS(e).Zo()&&e.F_.size>0}function Kb(e){return hn(e).M_.size===0}function aDe(e){e.L_=void 0}async function PMt(e){e.N_.set("Online")}async function DMt(e){e.F_.forEach((t,n)=>{iZ(e,t)})}async function OMt(e,t){aDe(e),oZ(e)?(e.N_.D_(t),sZ(e)):e.N_.set("Unknown")}async function $Mt(e,t,n){if(e.N_.set("Online"),t instanceof GPe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await J$(e,r)}else if(t instanceof UD?e.L_.Ke(t):t instanceof WPe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await nDe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ea.EMPTY_BYTE_STRING,c.snapshotVersion)),oDe(s,u);const f=new n0(c.target,u,l,c.sequenceNumber);iZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await J$(e,r)}}async function J$(e,t,n){if(!Qk(t))throw t;e.M_.add(1),await tR(e),e.N_.set("Offline"),n||(n=()=>nDe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await eR(e)})}function uDe(e,t){return t().catch(n=>J$(e,n,t))}async function M4(e){const t=hn(e),n=cy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;MMt(t);)try{const i=await bMt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,LMt(t,i)}catch(i){await J$(t,i)}lDe(t)&&cDe(t)}function MMt(e){return Kb(e)&&e.v_.length<10}function LMt(e,t){e.v_.push(t);const n=cy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function lDe(e){return Kb(e)&&!cy(e).Zo()&&e.v_.length>0}function cDe(e){cy(e).start()}async function FMt(e){cy(e).V_()}async function jMt(e){const t=cy(e);for(const n of e.v_)t.d_(n.mutations)}async function BMt(e,t,n){const r=e.v_.shift(),i=QJ.from(r,t,n);await uDe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await M4(e)}async function UMt(e,t){t&&cy(e).E_&&await async function(r,i){if(function(o){return R$t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();cy(r).t_(),await uDe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await M4(r)}}(e,t),lDe(e)&&cDe(e)}async function Ohe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Kb(n);n.M_.add(3),await tR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await eR(n)}async function zMt(e,t){const n=hn(e);t?(n.M_.delete(2),await eR(n)):t||(n.M_.add(2),await tR(n),n.N_.set("Unknown"))}function jS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new AMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:PMt.bind(null,e),To:DMt.bind(null,e),Ao:OMt.bind(null,e),h_:$Mt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),oZ(e)?sZ(e):e.N_.set("Unknown")):(await e.B_.stop(),aDe(e))})),e.B_}function cy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new IMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:FMt.bind(null,e),Ao:UMt.bind(null,e),R_:jMt.bind(null,e),A_:BMt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await M4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new aZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uZ(e,t){if(Fm("AsyncQueue",`${t}: ${e}`),Qk(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=F2(),this.sortedSet=new Fi(this.comparator)}static emptySet(t){return new fE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof fE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new fE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $he{constructor(){this.q_=new Fi(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):un():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class px{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new px(t,n,fE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&k4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VMt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class HMt{constructor(){this.queries=new FS(t=>PPe(t),k4),this.onlineState="Unknown",this.z_=new Set}}async function fDe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new VMt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=uZ(o,`Initialization of query '${nw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&lZ(n)}async function dDe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qMt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&lZ(n)}function WMt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function lZ(e){e.z_.forEach(t=>{t.next()})}var VV,Mhe;(Mhe=VV||(VV={})).J_="default",Mhe.Cache="cache";class hDe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new px(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=px.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==VV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pDe{constructor(t){this.key=t}}class mDe{constructor(t){this.key=t}}class GMt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=DPe(t),this.Ta=new fE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new $he,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=R4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new px(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new $he,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new mDe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new pDe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return px.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class YMt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class KMt{constructor(t){this.key=t,this.wa=!1}}class XMt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new FS(a=>PPe(a),k4),this.Da=new Map,this.Ca=new Set,this.va=new Fi(Ut.comparator),this.Fa=new Map,this.Ma=new eZ,this.xa={},this.Oa=new Map,this.Na=hx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function QMt(e,t,n=!0){const r=wDe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await gDe(r,t,n,!0),i}async function JMt(e,t){const n=wDe(e);await gDe(n,t,!0,!1)}async function gDe(e,t,n,r){const i=await _Mt(e.localStore,yh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await ZMt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&sDe(e.remoteStore,i),a}async function ZMt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await Nhe(m.localStore,g.query,!1).then(({documents:x})=>g.view.da(x,_)));const E=v&&v.targetChanges.get(g.targetId),w=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(_,m.isPrimaryClient,E,w);return Fhe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Nhe(e.localStore,t,!0),o=new GMt(t,s.hs),a=o.da(s.documents),u=Zk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Fhe(e,n,l.fa);const c=new YMt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function eLt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!k4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rZ(r.remoteStore,i.targetId),HV(r,i.targetId)}).catch(Xk)):(HV(r,i.targetId),await zV(r.localStore,i.targetId,!0))}async function tLt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rZ(n.remoteStore,r.targetId))}async function nLt(e,t,n){const r=lLt(e);try{const i=await function(o,a){const u=hn(o),l=Fs.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=jm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=T$t(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Gy(v.key,_,SPe(_.value.mapValue),Gu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:$Pe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Fi(br)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await nR(r,i.changes),await M4(r.remoteStore)}catch(i){const s=uZ(i,"Failed to persist write");n.reject(s)}}async function yDe(e,t){const n=hn(e);try{const r=await yMt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ii(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ii(o.wa):i.removedDocuments.size>0&&(ii(o.wa),o.wa=!1))}),await nR(n,r,t)}catch(r){await Xk(r)}}function Lhe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&lZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Fi(Ut.comparator);o=o.insert(s,ca.newNoDocument(s,dn.min()));const a=zn().add(s),u=new O4(dn.min(),new Map,new Fi(br),o,a);await yDe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),cZ(r)}else await zV(r.localStore,t,!1).then(()=>HV(r,t,n)).catch(Xk)}async function iLt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await gMt(n.localStore,t);bDe(n,r,null),vDe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nR(n,i)}catch(i){await Xk(i)}}async function sLt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ii(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);bDe(r,t,n),vDe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nR(r,i)}catch(i){await Xk(i)}}function vDe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function bDe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function HV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||_De(e,r)})}function _De(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(rZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),cZ(e))}function Fhe(e,t,n){for(const r of n)r instanceof pDe?(e.Ma.addReference(r.key,t),oLt(e,r)):r instanceof mDe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||_De(e,r.key)):un()}function oLt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),cZ(e))}function cZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(fi.fromString(t)),r=e.Na.next();e.Fa.set(r,new KMt(n)),e.va=e.va.insert(n,r),sDe(e.remoteStore,new n0(yh(XJ(n.path)),r,"TargetPurposeLimboResolution",HJ.oe))}}async function nR(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=nZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Qk(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function aLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await tDe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await nR(n,r.us)}}function uLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function wDe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yDe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rLt.bind(null,t),t.Sa.h_=qMt.bind(null,t.eventManager),t.Sa.ka=WMt.bind(null,t.eventManager),t}function lLt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iLt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sLt.bind(null,t),t}class jhe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=$4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return mMt(this.persistence,new hMt,t.initialUser,this.serializer)}createPersistence(t){return new cMt(tZ.Hr,this.serializer)}createSharedClientState(t){return new EMt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cLt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lhe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aLt.bind(null,this.syncEngine),await zMt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new HMt}()}createDatastore(t){const n=$4(t.databaseInfo.databaseId),r=function(s){return new CMt(s)}(t.databaseInfo);return function(s,o,a,u){return new kMt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new NMt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Lhe(this.syncEngine,n,0),function(){return Dhe.D()?new Dhe:new xMt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new XMt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await tR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Fm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fLt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=wu.UNAUTHENTICATED,this.clientId=wPe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=uZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function O9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tDe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Bhe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xDe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Ohe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Ohe(t.remoteStore,i)),e._onlineComponents=t}function dLt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function xDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await O9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!dLt(n))throw n;pI("Error using user provided cache. Falling back to memory cache: "+n),await O9(e,new jhe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await O9(e,new jhe);return e._offlineComponents}async function fZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Bhe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Bhe(e,new cLt))),e._onlineComponents}function hLt(e){return xDe(e).then(t=>t.persistence)}function pLt(e){return fZ(e).then(t=>t.remoteStore)}function mLt(e){return fZ(e).then(t=>t.syncEngine)}async function SDe(e){const t=await fZ(e),n=t.eventManager;return n.onListen=QMt.bind(null,t.syncEngine),n.onUnlisten=eLt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=JMt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tLt.bind(null,t.syncEngine),n}function gLt(e){return e.asyncQueue.enqueue(async()=>{const t=await hLt(e),n=await pLt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),eR(s)}(n)})}function yLt(e,t,n={}){const r=new cm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new EDe({next:d=>{o.enqueueAndForget(()=>dDe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new hDe(XJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return fDe(s,f)}(await SDe(e),e.asyncQueue,t,n,r)),r.promise}function vLt(e,t,n={}){const r=new cm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new EDe({next:d=>{o.enqueueAndForget(()=>dDe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new hDe(a,c,{includeMetadataChanges:!0,ra:!0});return fDe(s,f)}(await SDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CDe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bLt(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function zhe(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Vhe(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function L4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":un()}function ed(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=L4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hhe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bLt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hhe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hhe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $3t;switch(r.type){case"firstParty":return new F3t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Uhe.get(n);r&&(It("ComponentProvider","Removing Datastore"),Uhe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Xb(this.firestore,t,this._query)}}class Qa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new R0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Qa(this.firestore,t,this._key)}}class R0 extends Xb{constructor(t,n,r){super(t,n,XJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Qa(this.firestore,null,new Ut(t))}withConverter(t){return new R0(this.firestore,t,this._path)}}function of(e,t,...n){if(e=oi(e),CDe("collection","path",t),e instanceof dZ){const r=fi.fromString(t,...n);return Vhe(r),new R0(e,null,r)}{if(!(e instanceof Qa||e instanceof R0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fi.fromString(t,...n));return Vhe(r),new R0(e.firestore,null,r)}}function Vi(e,t,...n){if(e=oi(e),arguments.length===1&&(t=wPe.newId()),CDe("doc","path",t),e instanceof dZ){const r=fi.fromString(t,...n);return zhe(r),new Qa(e,null,new Ut(r))}{if(!(e instanceof Qa||e instanceof R0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fi.fromString(t,...n));return zhe(r),new Qa(e.firestore,e instanceof R0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Lt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new rDe(this,"async_queue_retry"),this.hu=()=>{const n=D9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=D9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=D9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new cm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Qk(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Fm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=aZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&un()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Yy extends dZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new _Lt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||ADe(this),this._firestoreClient.terminate()}}function wLt(e,t,n){n||(n="(default)");const r=OS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(fI(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function rR(e){return e._firestoreClient||ADe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ADe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Q3t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,TDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new fLt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function ELt(e){return gLt(rR(e=ed(e,Yy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mx(Ea.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new mx(Ea.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ko(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return br(this._lat,t._lat)||br(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xLt=/^__.*__$/;class SLt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Gy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Jk(t,this.data,n,this.fieldTransforms)}}class IDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Gy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function kDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un()}}class pZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new pZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Z$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(kDe(this.fu)&&xLt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class TLt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||$4(t)}Fu(t,n,r,i=!1){return new pZ({fu:t,methodName:n,vu:r,path:ko.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j4(e){const t=e._freezeSettings(),n=$4(e._databaseId);return new TLt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function RDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);gZ("Data must be an object, but it was:",o,r);const a=DDe(r,o);let u,l;if(s.merge)u=new Il(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=qV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);$De(c,d)||c.push(d)}u=new Il(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new SLt(new Pu(a),u,l)}class B4 extends F4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof B4}}class mZ extends F4{_toFieldTransform(t){return new w$t(t.path,new _I)}isEqual(t){return t instanceof mZ}}function NDe(e,t,n,r){const i=e.Fu(1,t,n);gZ("Data must be an object, but it was:",i,r);const s=[],o=Pu.empty();Yb(r,(u,l)=>{const c=yZ(t,u,n);l=oi(l);const f=i.Su(c);if(l instanceof B4)s.push(c);else{const d=sR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Il(s);return new IDe(o,a,i.fieldTransforms)}function PDe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[qV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(qV(t,s[d])),u.push(s[d+1]);const l=[],c=Pu.empty();for(let d=a.length-1;d>=0;--d)if(!$De(l,a[d])){const h=a[d];let p=u[d];p=oi(p);const m=o.Su(h);if(p instanceof B4)l.push(h);else{const g=sR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Il(l);return new IDe(c,f,o.fieldTransforms)}function CLt(e,t,n,r=!1){return sR(n,e.Fu(r?4:3,t))}function sR(e,t){if(ODe(e=oi(e)))return gZ("Unsupported field value:",t,e),DDe(e,t);if(e instanceof F4)return function(r,i){if(!kDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=sR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=oi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v$t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Fs.fromDate(r);return{timestampValue:Q$(i.serializer,s)}}if(r instanceof Fs){const s=new Fs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Q$(i.serializer,s)}}if(r instanceof hZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mx)return{bytesValue:YPe(i.serializer,r._byteString)};if(r instanceof Qa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ZJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${L4(r)}`)}(e,t)}function DDe(e,t){const n={};return EPe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yb(e,(r,i)=>{const s=sR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ODe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Fs||e instanceof hZ||e instanceof mx||e instanceof Qa||e instanceof F4)}function gZ(e,t,n){if(!ODe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=L4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function qV(e,t,n){if((t=oi(t))instanceof iR)return t._internalPath;if(typeof t=="string")return yZ(e,t);throw Z$("Field path arguments must be of type string or ",e,!1,void 0,n)}const ALt=new RegExp("[~\\*/\\[\\]]");function yZ(e,t,n){if(t.search(ALt)>=0)throw Z$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new iR(...t.split("."))._internalPath}catch{throw Z$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Z$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function $De(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MDe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ILt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(U4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ILt extends MDe{data(){return super.data()}}function U4(e,t){return typeof t=="string"?yZ(e,t):t instanceof iR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kLt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vZ{}class LDe extends vZ{}function qhe(e,t,...n){let r=[];t instanceof vZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof bZ).length,a=s.filter(u=>u instanceof z4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class z4 extends LDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new z4(t,n,r)}_apply(t){const n=this._parse(t);return FDe(t._query,n),new Xb(t.firestore,t.converter,MV(t._query,n))}_parse(t){const n=j4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Ghe(f,c);const h=[];for(const p of f)h.push(Whe(u,s,p));d={arrayValue:{values:h}}}else d=Whe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Ghe(f,c),d=CLt(a,o,f,c==="in"||c==="not-in");return Ss.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function RLt(e,t,n){const r=t,i=U4("where",e);return z4._create(i,r,n)}class bZ extends vZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new bZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)FDe(o,u),o=MV(o,u)}(t._query,n),new Xb(t.firestore,t.converter,MV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _Z extends LDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new _Z(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bI(s,o)}(t._query,this._field,this._direction);return new Xb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new LS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function NLt(e,t="asc"){const n=t,r=U4("orderBy",e);return _Z._create(r,n)}function Whe(e,t,n){if(typeof(n=oi(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NPe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(fi.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return phe(e,new Ut(r))}if(n instanceof Qa)return phe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${L4(n)}.`)}function Ghe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class PLt{convertValue(t,n="none"){switch(ub(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Es(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ab(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw un()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Yb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new hZ(Es(t.latitude),Es(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=WJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gI(t));default:return null}}convertTimestamp(t){const n=ly(t);return new Fs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=fi.fromString(t);ii(eDe(r));const i=new yI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Fm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class BDe extends MDe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new zD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(U4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zD extends BDe{data(t={}){return super.data(t)}}class DLt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new B2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new zD(this._firestore,this._userDataWriter,r.key,r,new B2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new zD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new B2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new zD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new B2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:OLt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OLt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(e){e=ed(e,Qa);const t=ed(e.firestore,Yy);return yLt(rR(t),e._key).then(n=>LLt(t,e,n))}class UDe extends PLt{constructor(t){super(),this.firestore=t}convertBytes(t){return new mx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Qa(this.firestore,null,n)}}function VT(e){e=ed(e,Xb);const t=ed(e.firestore,Yy),n=rR(t),r=new UDe(t);return kLt(e._query),vLt(n,e._query).then(i=>new DLt(t,r,e,i))}function Oa(e,t,n){e=ed(e,Qa);const r=ed(e.firestore,Yy),i=jDe(e.converter,t,n);return V4(r,[RDe(j4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Gu.none())])}function $Lt(e,t,n,...r){e=ed(e,Qa);const i=ed(e.firestore,Yy),s=j4(i);let o;return o=typeof(t=oi(t))=="string"||t instanceof iR?PDe(s,"updateDoc",e._key,t,n,r):NDe(s,"updateDoc",e._key,t),V4(i,[o.toMutation(e._key,Gu.exists(!0))])}function MLt(e){return V4(ed(e.firestore,Yy),[new D4(e._key,Gu.none())])}function V4(e,t){return function(r,i){const s=new cm;return r.asyncQueue.enqueueAndForget(async()=>nLt(await mLt(r),i,s)),s.promise}(rR(e),t)}function LLt(e,t,n){const r=n.docs.get(t._key),i=new UDe(e);return new BDe(e,i,t._key,r,new B2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FLt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=j4(t)}set(t,n,r){this._verifyNotCommitted();const i=$9(t,this._firestore),s=jDe(i.converter,n,r),o=RDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Gu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=$9(t,this._firestore);let o;return o=typeof(n=oi(n))=="string"||n instanceof iR?PDe(this._dataReader,"WriteBatch.update",s._key,n,r,i):NDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Gu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=$9(t,this._firestore);return this._mutations=this._mutations.concat(new D4(n._key,Gu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $9(e,t){if((e=oi(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function jLt(){return new mZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yhe(e){return rR(e=ed(e,Yy)),new FLt(e,t=>V4(e,t))}(function(t,n=!0){(function(i){MS=i})(Gb),Mm(new Dh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Yy(new M3t(r.getProvider("auth-internal")),new B3t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hf(che,"4.6.3",t),Hf(che,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Map,zDe={activated:!1,tokenObservers:[]},BLt={initialized:!1,enabled:!1};function js(e){return WV.get(e)||Object.assign({},zDe)}function ULt(e,t){return WV.set(e,t),WV.get(e)}function H4(){return BLt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VDe="https://content-firebaseappcheck.googleapis.com/v1",zLt="exchangeRecaptchaV3Token",VLt="exchangeDebugToken",Khe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},HLt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qLt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new cI,this.pending.promise.catch(n=>{}),await WLt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new cI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function WLt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GLt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ju=new DS("appCheck","AppCheck",GLt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xhe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function wZ(e){if(!js(e).activated)throw ju.create("use-before-activation",{appName:e.name})}function HDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=mP(n)+"d:"),r&&(o+=mP(r)+"h:"),o+=mP(i)+"m:"+mP(s)+"s",o}function mP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw ju.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw ju.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw ju.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ju.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function YLt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${VDe}/projects/${n}/apps/${r}:${zLt}?key=${i}`,body:{recaptcha_v3_token:t}}}function qDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${VDe}/projects/${n}/apps/${r}:${VLt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KLt="firebase-app-check-database",XLt=1,xI="firebase-app-check-store",WDe="debug-token";let gP=null;function GDe(){return gP||(gP=new Promise((e,t)=>{try{const n=indexedDB.open(KLt,XLt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(ju.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(xI,{keyPath:"compositeKey"})}}}catch(n){t(ju.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),gP)}function QLt(e){return KDe(XDe(e))}function JLt(e,t){return YDe(XDe(e),t)}function ZLt(e){return YDe(WDe,e)}function e6t(){return KDe(WDe)}async function YDe(e,t){const r=(await GDe()).transaction(xI,"readwrite"),s=r.objectStore(xI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(ju.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function KDe(e){const n=(await GDe()).transaction(xI,"readonly"),i=n.objectStore(xI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(ju.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function XDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI=new w4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6t(e){if(SJ()){let t;try{t=await QLt(e)}catch(n){SI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function M9(e,t){return SJ()?JLt(e,t).catch(n=>{SI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function n6t(){let e;try{e=await e6t()}catch{}if(e)return e;{const t=tNt();return ZLt(t).catch(n=>SI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xZ(){return H4().enabled}async function SZ(){const e=H4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function r6t(){const e=hNe(),t=H4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new cI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(n6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6t={error:"UNKNOWN_ERROR"};function s6t(e){return xJ.encodeString(JSON.stringify(e),!1)}async function GV(e,t=!1){const n=e.app;wZ(n);const r=js(n);let i=r.token,s;if(i&&!Aw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Aw(u)?i=u:await M9(n,void 0))}if(!t&&i&&Aw(i))return{token:i.token};let o=!1;if(xZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=EZ(qDe(n,await SZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await M9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await js(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?SI.warn(u.message):SI.error(u),s=u}let a;return i?s?Aw(i)?a={token:i.token,internalError:s}:a=Jhe(s):(a={token:i.token},r.token=i,await M9(n,i)):a=Jhe(s),o&&ZDe(n,a),a}async function o6t(e){const t=e.app;wZ(t);const{provider:n}=js(t);if(xZ()){const r=await SZ(),{token:i}=await EZ(qDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function QDe(e,t,n,r){const{app:i}=e,s=js(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Aw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Qhe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Qhe(e))}function JDe(e,t){const n=js(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Qhe(e){const{app:t}=e,n=js(t);let r=n.tokenRefresher;r||(r=a6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function a6t(e){const{app:t}=e;return new qLt(async()=>{const n=js(t);let r;if(n.token?r=await GV(e,!0):r=await GV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=js(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Khe.RETRIAL_MIN_WAIT,Khe.RETRIAL_MAX_WAIT)}function ZDe(e,t){const n=js(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Aw(e){return e.expireTimeMillis-Date.now()>0}function Jhe(e){return{token:s6t(i6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=js(this.app);for(const n of t)JDe(this.app,n.next);return Promise.resolve()}}function l6t(e,t){return new u6t(e,t)}function c6t(e){return{getToken:t=>GV(e,t),getLimitedUseToken:()=>o6t(e),addTokenListener:t=>QDe(e,"INTERNAL",t),removeTokenListener:t=>JDe(e.app,t)}}const f6t="@firebase/app-check",d6t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6t="https://www.google.com/recaptcha/api.js";function p6t(e,t){const n=new cI,r=js(e);r.reCAPTCHAState={initialized:n};const i=m6t(e),s=Xhe(!1);return s?Zhe(e,t,s,i,n):v6t(()=>{const o=Xhe(!1);if(!o)throw new Error("no recaptcha");Zhe(e,t,o,i,n)}),n.promise}function Zhe(e,t,n,r,i){n.ready(()=>{y6t(e,t,n,r),i.resolve(n)})}function m6t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function g6t(e){wZ(e);const n=await js(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=js(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function y6t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{js(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{js(e).reCAPTCHAState.succeeded=!1}}),s=js(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function v6t(e){const t=document.createElement("script");t.src=h6t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;_6t(this._throttleData);const i=await g6t(this._app).catch(o=>{throw ju.create("recaptcha-error")});if(!(!((t=js(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw ju.create("recaptcha-error");let s;try{s=await EZ(YLt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=b6t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),ju.create("throttled",{time:HDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=OS(t,"heartbeat"),p6t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof TZ?this._siteKey===t._siteKey:!1}}function b6t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+HLt,httpStatus:e};{const n=t?t.backoffCount:0,r=oNt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function _6t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw ju.create("throttled",{time:HDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6t(e=CJ(),t){e=oi(e);const n=OS(e,"app-check");if(H4().initialized||r6t(),xZ()&&SZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw ju.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return E6t(e,t.provider,t.isTokenAutoRefreshEnabled),js(e).isTokenAutoRefreshEnabled&&QDe(r,"INTERNAL",()=>{}),r}function E6t(e,t,n){const r=ULt(e,Object.assign({},zDe));r.activated=!0,r.provider=t,r.cachedTokenPromise=t6t(e).then(i=>(i&&Aw(i)&&(r.token=i,ZDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const x6t="app-check",epe="app-check-internal";function S6t(){Mm(new Dh(x6t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return l6t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(epe).initialize()})),Mm(new Dh(epe,e=>{const t=e.getProvider("app-check").getImmediate();return c6t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Hf(f6t,d6t)}S6t();function yP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eOe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof yP=="function"&&yP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof yP=="function"&&yP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof no<"u"?no:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,w!==o&&m(this,w)}f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,S){if(typeof w!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var x=new this.constructor(o);if(this.state!==c){var C=this.state===l?w:S;h(x,C,this.outcome)}else this.queue.push(new d(x,w,S));return x};function d(w,S,x){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(w){a.resolve(this.promise,w)},d.prototype.otherCallFulfilled=function(w){h(this.promise,this.onFulfilled,w)},d.prototype.callRejected=function(w){a.reject(this.promise,w)},d.prototype.otherCallRejected=function(w){h(this.promise,this.onRejected,w)};function h(w,S,x){s(function(){var C;try{C=S(x)}catch(A){return a.reject(w,A)}C===w?a.reject(w,new TypeError("Cannot resolve promise with itself")):a.resolve(w,C)})}a.resolve=function(w,S){var x=g(p,S);if(x.status==="error")return a.reject(w,x.value);var C=x.value;if(C)m(w,C);else{w.state=l,w.outcome=S;for(var A=-1,I=w.queue.length;++A<I;)w.queue[A].callFulfilled(S)}return w},a.reject=function(w,S){w.state=u,w.outcome=S;for(var x=-1,C=w.queue.length;++x<C;)w.queue[x].callRejected(S);return w};function p(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function m(w,S){var x=!1;function C(O){x||(x=!0,a.reject(w,O))}function A(O){x||(x=!0,a.resolve(w,O))}function I(){S(A,C)}var R=g(I);R.status==="error"&&C(R.value)}function g(w,S){var x={};try{x.value=w(S),x.status="success"}catch(C){x.status="error",x.value=C}return x}f.resolve=y;function y(w){return w instanceof this?w:a.resolve(new this(o),w)}f.reject=v;function v(w){var S=new this(o);return a.reject(S,w)}f.all=_;function _(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=w.length,C=!1;if(!x)return this.resolve([]);for(var A=new Array(x),I=0,R=-1,O=new this(o);++R<x;)D(w[R],R);return O;function D($,F){S.resolve($).then(M,function(B){C||(C=!0,a.reject(O,B))});function M(B){A[F]=B,++I===x&&!C&&(C=!0,a.resolve(O,A))}}}f.race=E;function E(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=w.length,C=!1;if(!x)return this.resolve([]);for(var A=-1,I=new this(o);++A<x;)R(w[A]);return I;function R(O){S.resolve(O).then(function(D){C||(C=!0,a.resolve(I,D))},function(D){C||(C=!0,a.reject(I,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof no<"u"?no:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ye=0;ye<Y.length;ye+=1)fe.append(Y[ye]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,E="readonly",w="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ye=0;ye<se;ye++)fe[ye]=Y.charCodeAt(ye);return Z}function x(Y){return new f(function(se){var Z=Y.transaction(g,w),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):x(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ye){Z.resolve=fe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function I(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var le=u.open.apply(u,ye);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),I(Y)}})}function D(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function M(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ye){var le=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function z(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function P(Y){A(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ye=Z[fe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,D(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw R(Y,le),le})}function U(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){U(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ye.forages.length;Ve++){var qe=ye.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ye.forages.slice(0);return f.all(le).then(function(){return Z.db=ye.db,D(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ye.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var mn=Ge[Et];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){U(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),z(st)&&(st=B(st)),ye(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){U(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var mn=Et.value;z(mn)&&(mn=B(mn));var Pt=Y(mn,Et.key,st++);Pt!==void 0?ye(Pt):Et.continue()}else ye()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ye=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,_.call(se)==="[object Blob]"?C(Ve.db).then(function(qe){return qe?se:M(se)}):se}).then(function(qe){U(fe._dbInfo,w,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var mn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;Oe(Pt)}}catch(Pt){Oe(Pt)}})}).catch(Oe)});return d(ye,Z),ye}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ye()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){U(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ye(Ge)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){U(se._dbInfo,E,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ye(qe.error)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function ve(Y,se){var Z=this,fe=new f(function(ye,le){if(Y<0){ye(null);return}Z.ready().then(function(){U(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ye(null);return}Y===0||Ge?ye(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){U(se._dbInfo,E,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ye(qe.error)}}catch(st){ye(st)}})}).catch(ye)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):D(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ye=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;A(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var mn=st[Et];mn._dbInfo.db=null,mn._dbInfo.version=qe}var Pt=new f(function(Bn,Rr){var Nr=u.open(Y.name,qe);Nr.onerror=function(qo){var wd=Nr.result;wd.close(),Rr(qo)},Nr.onupgradeneeded=function(){var qo=Nr.result;qo.deleteObjectStore(Y.storeName)},Nr.onsuccess=function(){var qo=Nr.result;qo.close(),Bn(qo)}});return Pt.then(function(Bn){Ge.db=Bn;for(var Rr=0;Rr<st.length;Rr++){var Nr=st[Rr];Nr._dbInfo.db=Bn,I(Nr._dbInfo)}}).catch(function(Bn){throw(R(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ye=Oe.then(function(Ve){A(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var mn=new f(function(Pt,Bn){var Rr=u.deleteDatabase(Y.name);Rr.onerror=function(){var Nr=Rr.result;Nr&&Nr.close(),Bn(Rr.error)},Rr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Rr.onsuccess=function(){var Nr=Rr.result;Nr&&Nr.close(),Pt(Nr)}});return mn.then(function(Pt){qe.db=Pt;for(var Bn=0;Bn<Ge.length;Bn++){var Rr=Ge[Bn];I(Rr._dbInfo)}}).catch(function(Pt){throw(R(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ye,se),ye}var Xe={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ve,keys:Ie,dropInstance:be};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",We="si08",ge="ui08",ht="uic8",vt="si16",pe="si32",Ae="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Ar=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ye=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),Oe=yt.indexOf(Y[fe+1]),Ve=yt.indexOf(Y[fe+2]),qe=yt.indexOf(Y[fe+3]),st[ye++]=le<<2|Oe>>4,st[ye++]=(Oe&15)<<4|Ve>>2,st[ye++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function gn(Y,se){var Z="";if(Y&&(Z=Ar.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Ar.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ye=ke;Y instanceof ArrayBuffer?(fe=Y,ye+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ye+=We:Z==="[object Uint8Array]"?ye+=ge:Z==="[object Uint8ClampedArray]"?ye+=ht:Z==="[object Int16Array]"?ye+=vt:Z==="[object Uint16Array]"?ye+=Ae:Z==="[object Int32Array]"?ye+=pe:Z==="[object Uint32Array]"?ye+=He:Z==="[object Float32Array]"?ye+=ut:Z==="[object Float64Array]"?ye+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ye+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Ot+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function An(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Ot&&_e.test(se)){var ye=se.match(_e);fe=ye[1],se=se.substring(ye[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Ot:return c([le],{type:fe});case We:return new Int8Array(le);case ge:return new Uint8Array(le);case ht:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ae:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:gn,deserialize:An,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Vo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ye=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ye}function ji(Y,se,Z,fe,ye,le){Y.executeSql(Z,fe,ye,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ye,le)},le)},le):le(Oe,Ve)},le)}function In(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){ji(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Bi(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){ji(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,mn=0;mn<Et;mn++){var Pt=st.item(mn),Bn=Pt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Pt.key,mn+1),Bn!==void 0){ye(Bn);return}}ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ir(Y,se,Z,fe){var ye=this;Y=p(Y);var le=new f(function(Oe,Ve){ye.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ye._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(mn){ji(mn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Pt,Bn){Ve(Bn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){Oe(Ir.apply(ye,[Y,qe,Z,fe-1]));return}Ve(mn)}})})}).catch(Ve)});return d(le,Z),le}function vs(Y,se,Z){return Ir.apply(this,[Y,se,Z,1])}function dp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){ji(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function fl(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){ji(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function bd(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){ji(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function Sr(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){ji(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ni(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){ji(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function Jr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ye,le){Z(le)})},function(fe){Z(fe)})})}function du(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;return Y.name?ye=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Jr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Pt){return new f(function(Bn,Rr){qe.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){Bn()},function(Nr,qo){Rr(qo)})})}for(var st=[],Et=0,mn=le.storeNames.length;Et<mn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Pt){Ve(Pt)})},function(qe){Ve(qe)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Ia={_driver:"webSQLStorage",_initStorage:Vo,_support:Ue(),iterate:Bi,getItem:In,setItem:vs,removeItem:dp,clear:fl,length:bd,key:Sr,keys:Ni,dropInstance:du};function ka(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ce(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var le=localStorage.key(ye);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo,le=localStorage.getItem(ye.keyPrefix+Y);return le&&(le=ye.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ye=Z._dbInfo,le=ye.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ye.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function qt(Y,se){var Z=this,fe=Z.ready().then(function(){var ye=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ye.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ye=localStorage.length,le=[],Oe=0;Oe<ye;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ye=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ye,Z),ye}function kr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ye;return Y.name?ye=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Ce,_support:ka(),iterate:St,getItem:ot,setItem:ir,removeItem:pn,clear:Se,length:jn,key:qt,keys:On,dropInstance:kr},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},qr=function(se,Z){for(var fe=se.length,ye=0;ye<fe;){if(sr(se[ye],Z))return!0;ye++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Pi={},qs={},Zr={INDEXEDDB:Xe,WEBSQL:Ia,LOCALSTORAGE:Vt},yo=[Zr.INDEXEDDB._driver,Zr.WEBSQL._driver,Zr.LOCALSTORAGE._driver],Ui=["dropInstance"],zi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ui),Ho={description:"",driver:yo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ra(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Ws(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var nc=function(){function Y(se){o(this,Y);for(var Z in Zr)if(Zr.hasOwnProperty(Z)){var fe=Zr[Z],ye=fe._driver;this[Z]=ye,Pi[ye]||this.defineDriver(fe)}this._defaultConfig=Ws({},Ho),this._config=Ws({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ye){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=zi.concat("_initStorage"),Et=0,mn=st.length;Et<mn;Et++){var Pt=st[Et],Bn=!qr(Ui,Pt);if((Bn||Z[Pt])&&typeof Z[Pt]!="function"){Ve(Ge);return}}var Rr=function(){for(var wd=function(rc){return function(){var hu=new Error("Method "+rc+" is not implemented by the current driver"),pp=f.reject(hu);return d(pp,arguments[arguments.length-1]),pp}},hp=0,aT=Ui.length;hp<aT;hp++){var a1=Ui[hp];Z[a1]||(Z[a1]=wd(a1))}};Rr();var Nr=function(wd){Pi[qe]&&console.info("Redefining LocalForage driver: "+qe),Pi[qe]=Z,qs[qe]=wd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Nr,Ve):Nr(!!Z._support):Nr(!0)}catch(qo){Ve(qo)}});return h(le,fe,ye),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ye){var le=Pi[Z]?f.resolve(Pi[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ye),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ye=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,fe,ye){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var mn=0;function Pt(){for(;mn<Et.length;){var Bn=Et[mn];return mn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Pt)}Ve();var Rr=new Error("No available storage method found.");return le._driverSet=f.reject(Rr),le._driverSet}return Pt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(mn){le._driver=mn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!qs[Z]},Y.prototype._extend=function(Z){Ws(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ye=0,le=Z.length;ye<le;ye++){var Oe=Z[ye];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=zi.length;Z<fe;Z++)Ra(this,zi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),_d=new nc;r.exports=_d},{3:3}]},{},[4])(4)})})(eOe);var T6t=eOe.exports;const sw=Xl(T6t);var wo=[];for(var L9=0;L9<256;++L9)wo.push((L9+256).toString(16).slice(1));function C6t(e,t=0){return(wo[e[t+0]]+wo[e[t+1]]+wo[e[t+2]]+wo[e[t+3]]+"-"+wo[e[t+4]]+wo[e[t+5]]+"-"+wo[e[t+6]]+wo[e[t+7]]+"-"+wo[e[t+8]]+wo[e[t+9]]+"-"+wo[e[t+10]]+wo[e[t+11]]+wo[e[t+12]]+wo[e[t+13]]+wo[e[t+14]]+wo[e[t+15]]).toLowerCase()}var vP,A6t=new Uint8Array(16);function I6t(){if(!vP&&(vP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vP(A6t)}var k6t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const tpe={randomUUID:k6t};function eM(e,t,n){if(tpe.randomUUID&&!t&&!e)return tpe.randomUUID();e=e||{};var r=e.random||(e.rng||I6t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,C6t(r)}class tOe{constructor(t){mu(this,"engine");mu(this,"connected",!1);mu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function tM(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function HT(e){return e.participantId!==void 0}class _c extends tOe{constructor(){super("firebase");mu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");mu(this,"firestore");mu(this,"collectionPrefix","prod-");mu(this,"studyCollection");mu(this,"storage");mu(this,"studyId","");mu(this,"localForage",sw.createInstance({name:"currentParticipantId"}));mu(this,"participantData",null);const n=DQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=bNe(n);this.firestore=wLt(r,{}),this.storage=R3t();try{w6t(r,{provider:new TZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await ELt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=G$();if(!i.currentUser&&(await KPt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=of(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await tM(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.setcurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(HT(a))return this.participantData=a,a;const l=await tM(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Vi(this.studyCollection,"configHash"),r=await pP(n);return r.exists()?r.data().configHash:null}async setcurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Vi(this.studyCollection,"configHash");await Oa(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=uc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=eM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Vi(this.studyCollection,"sequenceAssignment");await Oa(i,{});const s=of(i,"sequenceAssignment"),o=Vi(s,this.currentParticipantId),a=qhe(s,RLt("participantId","==","")),u=await VT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await MLt(m.ref),await Oa(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await Oa(o,{participantId:this.currentParticipantId,timestamp:jLt()});const l=qhe(s,NLt("timestamp","asc")),d=(await VT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=uc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await UT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");HT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return HT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=eM();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=of(this.firestore,"user-management"),i=await VT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await Oa(Vi(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Oa(Vi(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Oa(Vi(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Oa(Vi(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Oa(Vi(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=uc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await UT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");HT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=of(this.firestore,`${this.collectionPrefix}${n}`),o=uc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!HT(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=Vi(s,"sequenceAssignment"),l=of(u,"sequenceAssignment"),c=Vi(l,r);await $Lt(c,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=Vi(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Oa(s,{[r]:i},{merge:!0})}async getModes(n){const r=Vi(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await pP(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Oa(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Vi(this.firestore,"metadata","collections"),i=await pP(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Vi(this.firestore,"metadata","collections");await Oa(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Vi(this.firestore,"metadata","collections");return await Oa(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Vi(this.firestore,"metadata","collections"),i=await pP(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Oa(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=uc(this.storage,n),s=(await UT(r)).items.map(o=>uhe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=uc(this.storage,n),o=(await UT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=uc(this.storage,n),s=uc(this.storage,r),o=await R9(i),u=await(await fetch(o)).blob();await k9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=of(this.firestore,n),s=Vi(i,"sequenceAssignment"),o=of(s,"sequenceAssignment"),a=of(this.firestore,r),u=Vi(a,"sequenceAssignment");await Oa(u,{});const l=of(u,"sequenceAssignment"),c=await VT(o),f=Yhe(this.firestore);c.docs.forEach(d=>{const h=Vi(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=of(this.firestore,n),i=Vi(r,"sequenceAssignment"),s=of(i,"sequenceAssignment"),o=await VT(s),a=Yhe(this.firestore);o.forEach(u=>{const l=Vi(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=uc(this.storage,n);return(await UT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=uc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await R9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await R9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=uc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await k9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await k9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=uc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await uhe(i)}}const nOe=k.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Qb=()=>k.useContext(nOe);function R6t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=k.useState(t),[o,a]=k.useState(!1),{storageEngine:u}=gs(),l=async()=>{const h=G$();try{await nDt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;k.useEffect(()=>{s(t);let h;if(u instanceof _c)try{h=G$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof _c){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=tDt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=k.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return b.jsx(nOe.Provider,{value:d,children:i.determiningStatus?b.jsx(Fl,{visible:!0}):e})}function WC({studyIds:e}){const t=Wh(),{studyId:n}=Em(),r=Dy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=gs(),{user:o,logout:a}=Qb(),[u,l]=k.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:b.jsx(lQe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:b.jsx(eQe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:b.jsx(_we,{}),href:"settings",needAdmin:!0}];return b.jsx(mi.Header,{p:"md",children:b.jsxs(qa,{mt:-7,align:"center",children:[b.jsx(qa.Col,{span:6,children:b.jsxs(Rt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[b.jsx(Py,{w:40,src:`${Hu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsx(Nl,{w:"md"}),b.jsx(Ai,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),b.jsx(qa.Col,{span:6,children:b.jsxs(Rt,{justify:"flex-end",direction:"row",children:[c&&b.jsx(uk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),b.jsx(PG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),b.jsx(Hh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:b.jsxs(Rt,{direction:"column",mt:20,children:[b.jsx(Ke,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?b.jsx(en,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Hu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:b.jsx(en,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Hu}${d.href}`,children:d.name},`menu-item-${d.name}`)),b.jsxs(me,{ml:10,children:[b.jsx(PE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?b.jsx(Ke,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):b.jsx(Ke,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function CZ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=gL(!1),[a,u]=k.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;EJ(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return b.jsxs(b.Fragment,{children:[b.jsxs(si,{style:{gap:n},children:[b.jsx(li,{label:"Download all participants data as JSON",children:b.jsx(en,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:b.jsx(sQe,{})})}),b.jsx(li,{label:"Download all participants data as a tidy CSV",children:b.jsx(en,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:b.jsx(wwe,{})})})]}),i&&a.length>0&&b.jsx(pRt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function N6t({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?b.jsx(Ht.Td,{children:b.jsx(Wa,{miw:100,children:Object.entries(e.answer).map(([t,n])=>b.jsxs(me,{children:[b.jsxs(Ke,{fw:700,span:!0,children:[" ",`${t}: `]}),b.jsx(Ke,{span:!0,children:`${n}`})]},`cell-${t}`))})}):b.jsx(Ht.Td,{children:"N/A"})}function npe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=rNe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?b.jsxs(Ht.Td,{children:[t.toFixed(1)," ","s",n&&b.jsxs(b.Fragment,{children:[b.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):b.jsx(Ht.Td,{children:"N/A"})}function P6t(e){const{metaData:t}=e;return b.jsx(Ht.Td,{children:b.jsx(sY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:b.jsxs(Wa,{gap:"xs",children:[b.jsxs(me,{children:["IP:"," ",t.ip]}),b.jsxs(me,{children:["Language:"," ",t.language]}),b.jsxs(me,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),b.jsxs(me,{children:["User Agent:"," ",t.userAgent]})]})})})}function D6t({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=gs(),{studyId:o}=Em(),{user:a}=Qb(),u=async(x,C)=>{if(s&&o)if(a.isAdmin){const A=C===""?"Rejected by admin":C;await s.rejectParticipant(o,x,A),await i()}else console.warn("You are not authorized to perform this action.")},[l,c]=k.useState([]),[f,d]=k.useState(!1),[h,p]=k.useState(!1),[m,g]=k.useState(""),y=async()=>{d(!0),p(!1);const x=l.map(async C=>await u(C,m));await Promise.all(x),c([]),await i(),d(!1)},v=k.useMemo(()=>[...e,...t,...n],[e,t,n]);function _(x){x==="all"?l.length===v.length?c([]):c(v.map(C=>C.participantId)):l.includes(x)?c(l.filter(C=>C!==x)):c([...l,x])}const E=_xe(r.sequence),w=[b.jsx(Ht.Th,{children:b.jsx(Rt,{justify:"center",children:b.jsx(Tl,{mb:-4,checked:l.length===v.length,onChange:()=>_("all")})})},"action"),b.jsx(Ht.Th,{children:"ID"},"ID"),b.jsx(Ht.Th,{children:"Status"},"status"),b.jsx(Ht.Th,{children:"Meta"},"meta"),...E.flatMap(x=>[b.jsx(Ht.Th,{children:x.componentName},`header-${x.componentName}-${x.timesSeenInBlock}`),b.jsxs(Ht.Th,{children:[b.jsx("span",{style:{whiteSpace:"nowrap"},children:x.componentName})," ","Duration (clean)"]},`header-${x.componentName}-${x.timesSeenInBlock}-duration`)]),b.jsx(Ht.Th,{children:"Total Duration (clean)"},"total-duration")],S=v.map(x=>b.jsxs(Ht.Tr,{children:[b.jsx(Ht.Td,{children:b.jsx(Rt,{justify:"center",children:b.jsx(Tl,{mb:-4,checked:l.includes(x.participantId),onChange:()=>_(x.participantId)})})}),b.jsx(Ht.Td,{style:{whiteSpace:"nowrap"},children:x.participantId}),b.jsx(Ht.Td,{children:b.jsxs(Rt,{direction:"column",miw:100,children:[b.jsxs(Rt,{direction:"row",align:"center",children:[x.rejected?b.jsx(li,{label:"Rejected",children:b.jsx(wY,{size:16,color:"red",style:{marginBottom:-3}})}):x.completed?b.jsx(li,{label:"Completed",children:b.jsx(ywe,{size:16,color:"teal",style:{marginBottom:-3}})}):b.jsx(li,{label:"In Progress",children:b.jsx(bwe,{size:16,color:"orange",style:{marginBottom:-3}})}),!x.completed&&b.jsxs(Ke,{size:"sm",mb:-1,ml:4,children:[(Object.entries(x.answers).filter(([C,A])=>A.endTime!==-1&&A.endTime!==void 0).length/(Tm(x.sequence).length-1)*100).toFixed(2),"%"]})]}),x.rejected&&b.jsx(Ke,{mt:5,fz:10,children:x.rejected.reason})]})}),x.metadata?b.jsx(P6t,{metaData:x.metadata}):b.jsx(Ht.Td,{children:"N/A"}),E.map(C=>{const A=vxe(x.sequence,C.orderPath),I=A&&Object.entries(x.answers).sort((R,O)=>{const D=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10),$=parseInt(O[0].slice(O[0].lastIndexOf("_")+1),10);return D-$}).filter(([R])=>{const O=R.slice(0,R.lastIndexOf("_")),D=parseInt(R.slice(R.lastIndexOf("_")+1),10);return O===C.componentName&&D<=A[0].lastIndex&&D>=A[0].firstIndex});return I!==null&&I.length>=C.timesSeenInBlock+1&&I[C.timesSeenInBlock][1].endTime!==-1?b.jsxs(wr.Fragment,{children:[b.jsx(N6t,{cellData:I[C.timesSeenInBlock][1]}),b.jsx(npe,{cellData:I[C.timesSeenInBlock][1]})]},`cellgroup-${x.participantId}-${C.componentName}-${C.timesSeenInBlock}`):b.jsxs(wr.Fragment,{children:[b.jsx(Ht.Td,{children:"N/A"}),b.jsx(Ht.Td,{children:"N/A"})]},`cellgroup-${x.participantId}-${C.componentName}-${C.timesSeenInBlock}`)}),b.jsx(npe,{cellData:{startTime:Math.min(...Object.values(x.answers).filter(C=>C.endTime!==-1&&C.endTime!==void 0).map(C=>C.startTime)),endTime:Math.max(...Object.values(x.answers).filter(C=>C.endTime!==-1&&C.endTime!==void 0).map(C=>C.endTime)),answer:{},windowEvents:Object.values(x.answers).flatMap(C=>C.windowEvents)}},`cell-${x.participantId}-total-duration`)]},x.participantId));return v.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Fl,{visible:f,overlayProps:{blur:2}}),b.jsxs(Rt,{justify:"space-between",mb:8,p:8,children:[b.jsx(si,{children:b.jsx(uk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:v.map(x=>({value:x.participantId,label:x.participantId})),searchable:!0,value:null,leftSection:b.jsx(bQe,{size:14}),onChange:x=>x&&_(x)})}),b.jsxs(si,{children:[b.jsx(CZ,{allParticipants:v,studyId:o||""}),b.jsxs(en,{disabled:l.length===0||!a.isAdmin,onClick:()=>p(!0),color:"red",children:["Reject Participants (",l.length,")"]})]})]}),b.jsx(Rt,{direction:"column",style:{width:"100%",overflow:"auto"},children:b.jsxs(Ht,{striped:!0,withTableBorder:!0,children:[b.jsx(Ht.Thead,{children:b.jsx(Ht.Tr,{children:w})}),b.jsx(Ht.Tbody,{children:S})]})}),b.jsxs($i,{opened:h,onClose:()=>p(!1),title:b.jsxs(Ke,{children:["Reject Participants (",l.length,")"]}),children:[b.jsx(Wp,{label:"Please enter the reason for rejection.",onChange:x=>g(x.target.value)}),b.jsxs(Rt,{mt:"sm",justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"dark",onClick:()=>{p(!1),g("")},children:"Cancel"}),b.jsx(en,{color:"red",onClick:()=>y(),children:"Reject Participants"})]})]})]}):b.jsxs(b.Fragment,{children:[b.jsx(Nl,{h:"xl"}),b.jsx(Rt,{justify:"center",align:"center",children:b.jsx(Ke,{children:"No data available"})})]})}const O6t="_root_1spq0_1",$6t="_description_1spq0_9",M6t="_title_1spq0_10",L6t="_closeButton_1spq0_14",F6t={root:O6t,description:$6t,title:M6t,closeButton:L6t},nM=e=>{const{title:t,message:n,color:r}=e;Fb.show({title:t,message:n,position:"top-center",classNames:F6t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function j6t({studyId:e,refresh:t}){const[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[u,l]=k.useState(!1),[c,f]=k.useState(""),[d,h]=k.useState([]),[p,m]=k.useState(""),[g,y]=k.useState(""),[v,_]=k.useState(!1),[E,w]=k.useState(!1),{storageEngine:S}=gs(),x=S,C=k.useCallback(async()=>{w(!0);const P=await x.getSnapshots(e);h(P),w(!1)},[x,e]);k.useEffect(()=>{C()},[C]);const A=async(P,...U)=>{_(!0);const W=await P(...U);W.status==="SUCCESS"?(C(),_(!1),await t(),W.notifications&&W.notifications.forEach(j=>{nM(j)})):(_(!1),nM({title:W.error.title,message:W.error.message,color:"red"}))},I=async()=>{await A(x.createSnapshot.bind(x),e,!1)},R=async()=>{m(""),r(!1),await A(x.createSnapshot.bind(x),e,!0)},O=async()=>{a(!1),await A(x.renameSnapshot.bind(x),c,g)},D=async P=>{await A(x.restoreSnapshot.bind(x),e,P)},$=async()=>{m(""),s(!1),await A(x.removeSnapshotOrLive.bind(x),c,!0)},F=async()=>{m(""),l(!1),await A(x.removeSnapshotOrLive.bind(x),e,!0)},M=()=>Joe({title:"Create a Snapshot",children:b.jsx(Ke,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>I()}),B=P=>Joe({title:"Restore Snapshot",children:b.jsx(Ke,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(P)}),z=P=>{const U=/-snapshot-(.+)$/,W=P.match(U);return W&&W[1]?W[1].replace("T"," "):null},H=async P=>{const U=P.slice(P.indexOf("-")+1);return await x.getAllParticipantsDataByStudy(U)};return b.jsxs(b.Fragment,{children:[b.jsx(Fl,{visible:v}),b.jsxs(Rt,{justify:"space-between",align:"center",children:[b.jsxs(me,{style:{width:"70%"},children:[b.jsx(Ai,{order:5,children:"Create a Snapshot"}),b.jsxs(Ke,{children:["This will create a snapshot of the live"," ",b.jsx(Ke,{span:!0,fw:700,children:e})," ","database. It will"," ",b.jsx(Ke,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(li,{label:"Create a snapshot",children:b.jsx(en,{onClick:M,children:"Snapshot"})})]}),b.jsx(Nl,{h:"lg"}),b.jsxs(Rt,{justify:"space-between",align:"center",children:[b.jsxs(me,{style:{width:"70%"},children:[b.jsx(Ai,{order:5,children:"Archive Data"}),b.jsxs(Ke,{children:["This will create a snapshot of the live"," ",b.jsx(Ke,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(li,{label:"Snapshot and Delete Data",children:b.jsx(en,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),b.jsx(Nl,{h:"lg"}),b.jsxs(Rt,{justify:"space-between",align:"center",children:[b.jsxs(me,{style:{width:"70%"},children:[b.jsx(Ai,{order:5,children:"Delete Data"}),b.jsxs(Ke,{children:["This will delete the live"," ",b.jsx(Ke,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),b.jsx(li,{label:"Delete Data",children:b.jsx(en,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),b.jsx(Nl,{h:"xl"}),b.jsxs(Rt,{direction:"column",children:[b.jsx(Rt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:b.jsx(Ai,{order:5,children:"Snapshots"})}),b.jsxs(me,{style:{position:"relative"},children:[b.jsx(Fl,{visible:E}),d.length>0?b.jsxs(Ht,{children:[b.jsx(Ht.Thead,{children:b.jsxs(Ht.Tr,{children:[b.jsx(Ht.Th,{children:"Snapshot Name"}),b.jsx(Ht.Th,{children:"Date Created"}),b.jsx(Ht.Th,{children:"Actions"})]})}),b.jsx(Ht.Tbody,{children:d.map(P=>b.jsxs(Ht.Tr,{children:[b.jsx(Ht.Td,{children:P.alternateName}),b.jsx(Ht.Td,{children:z(P.originalName)}),b.jsx(Ht.Td,{children:b.jsxs(Rt,{children:[b.jsx(li,{label:"Rename",children:b.jsx(en,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(P.originalName)},children:b.jsx(pQe,{})})}),b.jsx(li,{label:"Restore Snapshot",children:b.jsx(en,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(P.originalName)},children:b.jsx(yQe,{})})}),b.jsx(li,{label:"Delete Snapshot",children:b.jsx(en,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(P.originalName)},children:b.jsx(Ewe,{})})}),b.jsx(CZ,{allParticipants:()=>H(P.originalName),studyId:e,gap:"10px",fileName:P.alternateName})]})})]},P.originalName))})]}):b.jsx(Ke,{children:"No snapshots."})]})]}),b.jsxs($i,{opened:n,onClose:()=>{r(!1),m("")},title:b.jsx(Ke,{children:"Archive Data"}),children:[b.jsx(Ke,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),b.jsx(Wp,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Rt,{mt:"sm",justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),b.jsx(en,{color:"red",onClick:R,disabled:p!==e,children:"Archive"})]})]}),b.jsxs($i,{opened:i,onClose:()=>{s(!1),m("")},title:b.jsx(Ke,{children:"Delete Snapshot"}),children:[b.jsxs(Ke,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",b.jsx(Ke,{span:!0,fw:700,children:"irreversible"}),"."]}),b.jsx(Wp,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Rt,{mt:"sm",justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),b.jsx(en,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),b.jsxs($i,{opened:o,onClose:()=>{a(!1),y("")},title:b.jsx(Ke,{children:"Rename Snapshot"}),children:[b.jsx(Wp,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:P=>y(P.target.value)}),b.jsxs(Rt,{mt:"sm",justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),b.jsx(en,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),b.jsxs($i,{opened:u,onClose:()=>{l(!1),m("")},title:b.jsx(Ke,{children:"Delete Live Data"}),children:[b.jsxs(Ke,{mb:"sm",children:["This will permanently delete the live"," ",b.jsx(Ke,{span:!0,fw:700,children:e})," ","data. This action is"," ",b.jsx(Ke,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),b.jsx(Wp,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),b.jsxs(Rt,{mt:"sm",justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),b.jsx(en,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function B6t({studyId:e}){const{storageEngine:t}=gs(),[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[u,l]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&b.jsxs(Wa,{children:[b.jsx(Vw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),b.jsx(Vw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),b.jsx(Vw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function U6t({studyId:e,refresh:t}){const{storageEngine:n}=gs();return b.jsx($c,{children:b.jsxs(Eu,{multiple:!0,variant:"contained",children:[b.jsxs(Eu.Item,{value:"ReVISit Modes",children:[b.jsx(Eu.Control,{children:b.jsx(Ai,{order:5,children:"ReVISit Modes"})}),b.jsx(Eu.Panel,{children:b.jsx(B6t,{studyId:e})})]},"modes"),b.jsxs(Eu.Item,{value:"Data Management",children:[b.jsx(Eu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:b.jsx(Ai,{order:5,children:"Data Management"})}),b.jsx(Eu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&b.jsx(j6t,{studyId:e,refresh:t})})]},"dataManagement")]})})}const O_=14;function rOe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return b.jsxs(Rt,{ml:4,gap:4,children:[b.jsx(li,{label:"Completed",children:b.jsx(b0,{variant:"light",color:"green",leftSection:b.jsx(ywe,{width:O_,height:O_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),b.jsx(li,{label:"In Progress",children:b.jsx(b0,{variant:"light",color:"orange",leftSection:b.jsx(bwe,{width:O_,height:O_,style:{paddingTop:1}}),pb:1,children:t})}),b.jsx(li,{label:"Rejected",children:b.jsx(b0,{variant:"light",color:"red",leftSection:b.jsx(wY,{width:O_,height:O_,style:{paddingTop:1}}),pb:1,children:n})})]})}const rpe={};function YV(e,t){e===void 0&&(e=rpe),t===void 0&&(t=rpe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var z6t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V6t=Object.prototype.hasOwnProperty;function H6t(e,t){return V6t.call(e,t)}function q6t(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)H6t(e,i)&&r.push(i);return r}function gx(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function KV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function W6t(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function XV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(XV(e[t]))return!0}else if(typeof e=="object"){for(var r=q6t(e),i=r.length,s=0;s<i;s++)if(XV(e[r[s]]))return!0}}return!1}function ipe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var G6t=function(e){z6t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,ipe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=ipe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ws=G6t,Iw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=QV(n,this.path);r&&(r=gx(r));var i=GC(n,{op:"remove",path:this.from}).removed;return GC(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=QV(n,this.from);return GC(n,{op:"add",path:this.path,value:gx(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:rM(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Y6t={add:function(e,t,n){return KV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Iw.move,copy:Iw.copy,test:Iw.test,_get:Iw._get};function QV(e,t){if(t=="")return e;var n={op:"_get",path:t};return GC(e,n),n.value}function GC(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):JV(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=QV(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=rM(e,t.value),o.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ws("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=gx(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=JV;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=W6t(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!KV(h))throw new ws("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);KV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ws("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Y6t[t.op].call(t,l,h,e);if(o.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Iw[t.op].call(t,l,h,e);if(o.test===!1)throw new ws("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ws("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function iOe(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ws("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=gx(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=GC(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function JV(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ws("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Iw[e.op]){if(typeof e.path!="string")throw new ws("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ws('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ws("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ws("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&XV(e.value))throw new ws("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ws("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ws("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=K6t([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ws("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ws("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function K6t(e,t,n){try{if(!Array.isArray(e))throw new ws("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)iOe(gx(t),gx(e),n||!0);else{n=n||JV;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ws)return i;throw i}}function rM(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!rM(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!rM(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var X6t=/("(?:[^\\"]|\\.)*")|[:,]/g,Q6t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,E,w;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),E=JSON.stringify(a,s),E===void 0)return E;if(g=i-u.length-l,E.length<=g&&(v=E.replace(X6t,function(S,x){return x||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(E),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",w=o(a[h],y,p.length+(f===g-1?0:1)),w!==void 0&&d.push(p+w);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return E}(t,"",0)};const F9=Xl(Q6t);function ll(e,t,n){return e.fields=t||[],e.fname=n,e}function Ji(e){return e==null?null:e.fname}function ga(e){return e==null?null:e.fields}function sOe(e){return e.length===1?J6t(e[0]):Z6t(e)}const J6t=e=>function(t){return t[e]},Z6t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function np(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function jc(e,t,n){const r=np(e);return e=r.length===1?r[0]:e,ll((n&&n.get||sOe)(r),[e],t||e)}const oR=jc("id"),xa=ll(e=>e,[],"identity"),Kg=ll(()=>0,[],"zero"),BS=ll(()=>1,[],"one"),Bc=ll(()=>!0,[],"true"),Ag=ll(()=>!1,[],"false");function e4t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const oOe=0,AZ=1,IZ=2,aOe=3,uOe=4;function kZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e4t,r=e||oOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=AZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=IZ&&n(t||"warn","WARN",arguments),this},info(){return r>=aOe&&n(t||"log","INFO",arguments),this},debug(){return r>=uOe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function gt(e){return e===Object(e)}const spe=e=>e!=="__proto__";function US(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=t4t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;zS(r,s,i[s],o)}return r},{})}function zS(e,t,n,r){if(!spe(t))return;let i,s;if(gt(n)&&!je(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?zS(s,i,n[i]):spe(i)&&(s[i]=n[i])}else e[t]=n}function t4t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ha(e){return e==null||e===""?null:+e}const lOe=e=>t=>e*Math.exp(t),cOe=e=>t=>Math.log(e*t),fOe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),dOe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,iM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function q4(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function hOe(e,t){return q4(e,t,ha,xa)}function pOe(e,t){var n=Math.sign(e[0]);return q4(e,t,cOe(n),lOe(n))}function mOe(e,t,n){return q4(e,t,iM(n),iM(1/n))}function gOe(e,t,n){return q4(e,t,fOe(n),dOe(n))}function W4(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function RZ(e,t,n){return W4(e,t,n,ha,xa)}function NZ(e,t,n){const r=Math.sign(e[0]);return W4(e,t,n,cOe(r),lOe(r))}function sM(e,t,n,r){return W4(e,t,n,iM(r),iM(1/r))}function PZ(e,t,n,r){return W4(e,t,n,fOe(r),dOe(r))}function yOe(e){return 1+~~(new Date(e).getMonth()/3)}function vOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?je(e)?e:[e]:[]}function bOe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const n4t="descending";function DZ(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||r4t;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===n4t?-1:1),i.push(a=_n(a)?a:jc(a,null,n)),(ga(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ll(o(i,r),Object.keys(s))}const G4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),r4t=(e,t)=>e.length===1?i4t(e[0],t[0]):s4t(e,t,e.length),i4t=(e,t)=>function(n,r){return G4(e(n),e(r))*t},s4t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=G4(s(r),s(i));return o*t[a]});function Sa(e){return _n(e)?e:()=>e}function OZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Mh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function _Oe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const o4t=Object.prototype.hasOwnProperty;function jt(e,t){return o4t.call(e,t)}const bP={};function VS(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==bP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===bP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=bP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==bP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function wOe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function kw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ky(e){return typeof e=="boolean"}function N0(e){return Object.prototype.toString.call(e)==="[object Date]"}function EOe(e){return e&&_n(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function xOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function $Z(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||sOe,s=a=>i(t?[a]:np(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ll(o,e,"key")}function SOe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const a4t=1e4;function TOe(e){e=+e||a4t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function COe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function U2(e,t){let n="";for(;--t>=0;)n+=e;return n}function AOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?U2(i,o)+s:r==="center"?U2(i,~~(o/2))+s+U2(i,Math.ceil(o/2)):s+U2(i,o)}function aR(e){return e&&Qn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function MZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const u4t=e=>lr(e)||N0(e)?e:Date.parse(e);function LZ(e,t){return t=t||u4t,e==null||e===""?null:t(e)}function FZ(e){return e==null||e===""?null:e+""}function td(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function IOe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Mg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function l4t(e){return e}function c4t(e){if(e==null)return l4t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function f4t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function d4t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ope(e,n)})}:ope(e,t)}function ope(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=kOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function kOe(e,t){var n=c4t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&f4t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function h4t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function p4t(e){return kOe(e,m4t.apply(this,arguments))}function m4t(e,t,n){var r,i,s;if(arguments.length>1)r=g4t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:h4t(e,r)}}function g4t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Mo="year",rl="quarter",ya="month",Ms="week",il="date",da="day",Lh="dayofyear",ql="hours",Wl="minutes",Uc="seconds",nd="milliseconds",jZ=[Mo,rl,ya,Ms,il,da,Lh,ql,Wl,Uc,nd],j9=jZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function BZ(e){const t=pt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{jt(j9,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[Ms]||n[da]?1:0)+(n[rl]||n[ya]||n[il]?1:0)+(n[Lh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>j9[i]-j9[s]),t}const y4t={[Mo]:"%Y ",[rl]:"Q%q ",[ya]:"%b ",[il]:"%d ",[Ms]:"W%U ",[da]:"%a ",[Lh]:"%j ",[ql]:"%H:00",[Wl]:"00:%M",[Uc]:":%S",[nd]:".%L",[`${Mo}-${ya}`]:"%Y-%m ",[`${Mo}-${ya}-${il}`]:"%Y-%m-%d ",[`${ql}-${Wl}`]:"%H:%M"};function ROe(e,t){const n=bn({},y4t,t),r=BZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const K1=new Date;function UZ(e){return K1.setFullYear(e),K1.setMonth(0),K1.setDate(1),K1.setHours(0,0,0,0),K1}function NOe(e){return DOe(new Date(e))}function POe(e){return ZV(new Date(e))}function DOe(e){return am.count(UZ(e.getFullYear())-1,e)}function ZV(e){return mS.count(UZ(e.getFullYear())-1,e)}function eH(e){return UZ(e).getDay()}function v4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function OOe(e){return MOe(new Date(e))}function $Oe(e){return tH(new Date(e))}function MOe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return x0.count(t-1,e)}function tH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return gS.count(t-1,e)}function nH(e){return K1.setTime(Date.UTC(e,0,1)),K1.getUTCDay()}function b4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function LOe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,_)=>(_=_||y,_4t(n[_],r[_],y===o&&s,v)),u=new Date,l=td(e),c=l[Mo]?a(Mo):Sa(2012),f=l[ya]?a(ya):l[rl]?a(rl):Kg,d=l[Ms]&&l[da]?a(da,1,Ms+da):l[Ms]?a(Ms,1):l[da]?a(da,1):l[il]?a(il,1):l[Lh]?a(Lh,1):BS,h=l[ql]?a(ql):Kg,p=l[Wl]?a(Wl):Kg,m=l[Uc]?a(Uc):Kg,g=l[nd]?a(nd):Kg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function _4t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function yx(e,t,n){return t+e*7-(n+6)%7}const w4t={[Mo]:e=>e.getFullYear(),[rl]:e=>Math.floor(e.getMonth()/3),[ya]:e=>e.getMonth(),[il]:e=>e.getDate(),[ql]:e=>e.getHours(),[Wl]:e=>e.getMinutes(),[Uc]:e=>e.getSeconds(),[nd]:e=>e.getMilliseconds(),[Lh]:e=>DOe(e),[Ms]:e=>ZV(e),[Ms+da]:(e,t)=>yx(ZV(e),e.getDay(),eH(t)),[da]:(e,t)=>yx(1,e.getDay(),eH(t))},E4t={[rl]:e=>3*e,[Ms]:(e,t)=>yx(e,0,eH(t))};function FOe(e,t){return LOe(e,t||1,w4t,E4t,v4t)}const x4t={[Mo]:e=>e.getUTCFullYear(),[rl]:e=>Math.floor(e.getUTCMonth()/3),[ya]:e=>e.getUTCMonth(),[il]:e=>e.getUTCDate(),[ql]:e=>e.getUTCHours(),[Wl]:e=>e.getUTCMinutes(),[Uc]:e=>e.getUTCSeconds(),[nd]:e=>e.getUTCMilliseconds(),[Lh]:e=>MOe(e),[Ms]:e=>tH(e),[da]:(e,t)=>yx(1,e.getUTCDay(),nH(t)),[Ms+da]:(e,t)=>yx(tH(e),e.getUTCDay(),nH(t))},S4t={[rl]:e=>3*e,[Ms]:(e,t)=>yx(e,0,nH(t))};function jOe(e,t){return LOe(e,t||1,x4t,S4t,b4t)}const T4t={[Mo]:Th,[rl]:qA.every(3),[ya]:qA,[Ms]:mS,[il]:am,[da]:am,[Lh]:am,[ql]:P6,[Wl]:R6,[Uc]:Xp,[nd]:qE},C4t={[Mo]:Ch,[rl]:WA.every(3),[ya]:WA,[Ms]:gS,[il]:x0,[da]:x0,[Lh]:x0,[ql]:D6,[Wl]:N6,[Uc]:Xp,[nd]:qE};function HS(e){return T4t[e]}function qS(e){return C4t[e]}function BOe(e,t,n){return e?e.offset(t,n):void 0}function UOe(e,t,n){return BOe(HS(e),t,n)}function zOe(e,t,n){return BOe(qS(e),t,n)}function VOe(e,t,n,r){return e?e.range(t,n,r):void 0}function HOe(e,t,n,r){return VOe(HS(e),t,n,r)}function qOe(e,t,n,r){return VOe(qS(e),t,n,r)}const z2=1e3,V2=z2*60,H2=V2*60,Y4=H2*24,A4t=Y4*7,ape=Y4*30,rH=Y4*365,WOe=[Mo,ya,il,ql,Wl,Uc,nd],q2=WOe.slice(0,-1),W2=q2.slice(0,-1),G2=W2.slice(0,-1),I4t=G2.slice(0,-1),k4t=[Mo,Ms],upe=[Mo,ya],GOe=[Mo],qT=[[q2,1,z2],[q2,5,5*z2],[q2,15,15*z2],[q2,30,30*z2],[W2,1,V2],[W2,5,5*V2],[W2,15,15*V2],[W2,30,30*V2],[G2,1,H2],[G2,3,3*H2],[G2,6,6*H2],[G2,12,12*H2],[I4t,1,Y4],[k4t,1,A4t],[upe,1,ape],[upe,3,3*ape],[GOe,1,rH]];function YOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(aR(t))/n;let i=fS(a=>a[2]).right(qT,r),s,o;return i===qT.length?(s=GOe,o=q0(t[0]/rH,t[1]/rH,n)):i?(i=qT[r/qT[i-1][2]<qT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=WOe,o=Math.max(q0(t[0],t[1],n),1)),{units:s,step:o}}function Y2(e){const t={};return n=>t[n]||(t[n]=e(n))}function R4t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=N4t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function N4t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function KOe(e){const t=Y2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Gv(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return R4t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Gv(o??",f");const a=q0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=VSe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=HSe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=zSe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let iH;XOe();function XOe(){return iH=KOe({format:jy,formatPrefix:yK})}function QOe(e){return KOe(USe(e))}function oM(e){return arguments.length?iH=QOe(e):iH}function lpe(e,t,n){n=n||{},gt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(Uc),i=t(Wl),s=t(ql),o=t(il),a=t(Ms),u=t(ya),l=t(rl),c=t(Mo),f=e(n[nd]||".%L"),d=e(n[Uc]||":%S"),h=e(n[Wl]||"%I:%M"),p=e(n[ql]||"%I %p"),m=e(n[il]||n[da]||"%a %d"),g=e(n[Ms]||"%b %d"),y=e(n[ya]||"%B"),v=e(n[rl]||"%B"),_=e(n[Mo]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:g:c(E)<E?l(E)<E?y:v:_)(E)}function JOe(e){const t=Y2(e.format),n=Y2(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):lpe(t,HS,r),utcFormat:r=>mt(r)?n(r):lpe(n,qS,r),timeParse:Y2(e.parse),utcParse:Y2(e.utcParse)}}let sH;ZOe();function ZOe(){return sH=JOe({format:RK,parse:r2e,utcFormat:Tk,utcParse:i2e})}function e3e(e){return JOe(JTe(e))}function TI(e){return arguments.length?sH=e3e(e):sH}const oH=(e,t)=>bn({},e,t);function t3e(e,t){const n=e?QOe(e):oM(),r=t?e3e(t):TI();return oH(n,r)}function zZ(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?oH(oM(e),TI(t)):oH(oM(),TI())}function P4t(){return XOe(),ZOe(),zZ()}const D4t=/^(data:|([A-Za-z]+:)?\/\/)/,O4t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,$4t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,cpe="file://";function M4t(e,t){return n=>({options:n||{},sanitize:F4t,load:L4t,fileAccess:!!t,file:j4t(t),http:U4t(e)})}async function L4t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function F4t(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=O4t.test(e.replace($4t,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=D4t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(cpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(cpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function j4t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):B4t}async function B4t(){Le("No file system access.")}function U4t(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:z4t}async function z4t(){Le("No HTTP fetch method available.")}const V4t=e=>e!=null&&e===e,H4t=e=>e==="true"||e==="false"||e===!0||e===!1,q4t=e=>!Number.isNaN(Date.parse(e)),n3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),W4t=e=>n3e(e)&&Number.isInteger(+e),aH={boolean:MZ,integer:ha,number:ha,date:LZ,string:FZ,unknown:xa},_P=[H4t,W4t,n3e,q4t],G4t=["boolean","integer","number","date"];function r3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=_P.length,i=_P.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&V4t(u)&&!_P[a](u)&&(i[a]=0,++o,o===_P.length))return"string";return G4t[i.reduce((s,o)=>s===0?o:s,0)-1]}function i3e(e,t){return t.reduce((n,r)=>(n[r]=r3e(e,r),n),{})}function fpe(e){const t=function(n,r){const i={delimiter:e};return VZ(n,r?bn(r,i):i)};return t.responseType="text",t}function VZ(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),LSe(t.delimiter).parse(e+"")}VZ.responseType="text";function Y4t(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function HZ(e,t){const n=t&&t.property?jc(t.property):xa;return gt(e)&&!Y4t(e)?K4t(n(e),t):n(JSON.parse(e))}HZ.responseType="json";function K4t(e,t){return!je(e)&&EOe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const X4t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function s3e(e,t){let n,r,i,s;return e=HZ(e,t),t&&t.feature?(n=d4t,i=t.feature):t&&t.mesh?(n=p4t,i=t.mesh,s=X4t[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}s3e.responseType="json";const VD={dsv:VZ,csv:fpe(","),tsv:fpe("	"),json:HZ,topojson:s3e};function qZ(e,t){return arguments.length>1?(VD[e]=t,this):jt(VD,e)?VD[e]:null}function o3e(e){const t=qZ(e);return t&&t.responseType||"text"}function a3e(e,t,n,r){t=t||{};const i=qZ(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Q4t(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function Q4t(e,t,n,r){if(!e.length)return;const i=TI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=i3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!aH[p])throw Error("Illegal format pattern: "+h+":"+p);return aH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const K4=M4t(typeof fetch<"u"&&fetch,null);function X4(e){const t=e||xa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function HD(e,t){try{await t(e)}catch(n){e.error(n)}}const u3e=Symbol("vega_id");let J4t=1;function Q4(e){return!!(e&&Lt(e))}function Lt(e){return e[u3e]}function l3e(e,t){return e[u3e]=t,e}function xr(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:l3e(t,J4t++)}function WZ(e){return J4(e,xr({}))}function J4(e,t){for(const n in e)t[n]=e[n];return t}function c3e(e,t){return l3e(t,Lt(e))}function Jb(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function f3e(e){return e&&e.constructor===Zb}function Zb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Zb,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Sa(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(xr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,_,E){E?v[_]=E(v):a.encode=_,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const qD="_:mod:_";function Z4(){Object.defineProperty(this,qD,{writable:!0,value:{}})}Z4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[qD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[qD];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[qD]={},this}};let Z4t=0;const eFt="pulse",tFt=new Z4,nFt=1,rFt=2;function Xr(e,t,n,r){this.id=++Z4t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function dpe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Xr.prototype={targets(){return this._targets||(this._targets=X4(oR))},set(e){return this.value!==e?(this.value=e,1):0},skip:dpe(nFt),modified:dpe(rFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Z4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Xr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===eFt)pt(a).forEach(f=>{f instanceof Xr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||tFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function iFt(e,t,n,r){let i=1,s;return e instanceof Xr?s=e:e&&e.prototype instanceof Xr?s=new e:_n(e)?s=new Xr(null,e):(i=0,s=new Xr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function sFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let oFt=0;function eF(e,t,n){this.id=++oFt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ig(e,t,n){return new eF(e,t,n)}eF.prototype={_filter:Bc,_apply:xa,targets(){return this._targets||(this._targets=X4(oR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ig(e);return this.targets().add(t),t},apply(e){const t=Ig(null,e);return this.targets().add(t),t},merge(){const e=Ig();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ig();return this.targets().add(Ig(null,null,OZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ig(null,null,()=>n=!0)),t.targets().add(Ig(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Bc,this._targets=null}};function aFt(e,t,n,r){const i=this,s=Ig(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function uFt(e,t){const n=this.locale();return a3e(e,t,n.timeParse,n.utcParse)}function lFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function cFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:o3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function fFt(e,t,n){const r=this,i=r._pending||dFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Bc).insert(s.data||[])),i.done(),s}function dFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const hFt={skip:!0};function pFt(e,t,n,r,i){return(e instanceof Xr?gFt:mFt)(this,e,t,n,r,i),this}function mFt(e,t,n,r,i,s){const o=bn({},s,hFt);let a,u;_n(n)||(n=Sa(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Xr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;f3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function gFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Xr(null,yFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function yFt(e,t){return t=_n(t)?t:Sa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function vFt(e){e.rank=++this._rank}function bFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const aM={},Md=1,Lg=2,kp=4,_Ft=Md|Lg,hpe=Md|kp,$_=Md|Lg|kp,ppe=8,WT=16,mpe=32,gpe=64;function P0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function B9(e,t){const n=[];return Mg(e,t,r=>n.push(r)),n}function ype(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function wP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}P0.prototype={StopPropagation:aM,ADD:Md,REM:Lg,MOD:kp,ADD_REM:_Ft,ADD_MOD:hpe,ALL:$_,REFLOW:ppe,SOURCE:WT,NO_SOURCE:mpe,NO_FIELDS:gpe,fork(e){return new P0(this.dataflow).init(this,e)},clone(){const e=this.fork($_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize($_|WT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new P0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&gpe)&&(n.fields=e.fields),t&Md?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Lg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&kp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&mpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||$_;return t&Md&&this.add.length||t&Lg&&this.rem.length||t&kp&&this.mod.length},reflow(e){if(e)return this.fork($_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(kp,ype(this,Md))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Md&&(n.addF=wP(n.addF,t)),e&Lg&&(n.remF=wP(n.remF,t)),e&kp&&(n.modF=wP(n.modF,t)),e&WT&&(n.srcF=wP(n.srcF,t)),n},materialize(e){e=e||$_;const t=this;return e&Md&&t.addF&&(t.add=B9(t.add,t.addF),t.addF=null),e&Lg&&t.remF&&(t.rem=B9(t.rem,t.remF),t.remF=null),e&kp&&t.modF&&(t.mod=B9(t.mod,t.modF),t.modF=null),e&WT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&WT)return Mg(n.source,n.srcF,r),n;e&Md&&Mg(n.add,n.addF,r),e&Lg&&Mg(n.rem,n.remF,r),e&kp&&Mg(n.mod,n.modF,r);const i=n.source;if(e&ppe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Mg(i,ype(n,hpe),r):Mg(i,n.srcF,r))}return n}};function GZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(GZ,P0,{fork(e){const t=new P0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function wFt(e,t,n){const r=this,i=[];if(r._pulse)return d3e(r);if(r._pending&&await r._pending,t&&await HD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new P0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=X4(oR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=aM),u!==aM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await HD(r,c[f].callback)}return n&&await HD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function EFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function xFt(e,t,n){return this._pulse?d3e(this):(this.evaluate(e,t,n),this)}function SFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function d3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function TFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function CFt(e,t){const n=e.source,r=this._clock;return n&&je(n)?new GZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||AFt(this._pulse,n&&n.pulse)}function AFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==aM&&(e.source=t.source),e)}const YZ={skip:!1,force:!1};function IFt(e,t){const n=t||YZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function kFt(e,t,n){const r=n||YZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function RFt(e,t,n){this.touch(e,n||YZ);const r=new P0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function NFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),h3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,PFt(t,0,e)):r=n,r}}}function h3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function PFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,h3e(e,r,t,n)}function dE(){this.logger(kZ()),this.logLevel(AZ),this._clock=0,this._rank=0,this._locale=zZ();try{this._loader=K4()}catch{}this._touched=X4(oR),this._input={},this._pulse=null,this._heap=NFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function GT(e){return function(){return this._log[e].apply(this,arguments)}}dE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:GT("error"),warn:GT("warn"),info:GT("info"),debug:GT("debug"),logLevel:GT("level"),cleanThreshold:1e4,add:iFt,connect:sFt,rank:vFt,rerank:bFt,pulse:RFt,touch:IFt,update:kFt,changeset:Zb,ingest:lFt,parse:uFt,preload:fFt,request:cFt,events:aFt,on:pFt,evaluate:wFt,run:xFt,runAsync:EFt,runAfter:SFt,_enqueue:TFt,_getPulse:CFt};function Pe(e,t){Xr.call(this,e,null,t)}lt(Pe,Xr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const vx={};function p3e(e){const t=m3e(e);return t&&t.Definition||null}function m3e(e){return e=e&&e.toLowerCase(),jt(vx,e)?vx[e]:null}function*g3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function KZ(e,t,n){const r=Float64Array.from(g3e(e,n));return r.sort(im),t.map(i=>Mxe(r,i))}function XZ(e,t){return KZ(e,[.25,.5,.75],t)}function QZ(e,t){const n=e.length,r=Cat(e,t),i=XZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function y3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var zc=Math.random;function DFt(e){zc=e}function v3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(g3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(zc()*s)];c[l]=a/s}return c.sort(im),[N7(c,n/2),N7(c,1-n/2)]}function b3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?OFt(s,t+t/4):s}function OFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function $Ft(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function MFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*zc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const _3e=Math.sqrt(2*Math.PI),LFt=Math.SQRT2;let YT=NaN;function tF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(YT===YT)n=YT,YT=NaN;else{do n=zc()*2-1,r=zc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,YT=r*s}return e+n*t}function JZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*_3e)}function nF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function rF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*LFt*FFt(2*e-1)}function FFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function ZZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>tF(n,r),pdf:s=>JZ(s,n,r),cdf:s=>nF(s,n,r),icdf:s=>rF(s,n,r)};return i.mean(e).stdev(t)}function eee(e,t){const n=ZZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=QZ(e)),i):t},sample(){return e[~~(zc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function tee(e,t){return e=e||0,t=t??1,Math.exp(e+tF()*t)}function nee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*_3e*e)}function ree(e,t,n){return nF(Math.log(e),t,n)}function iee(e,t,n){return Math.exp(rF(e,t,n))}function w3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>tee(n,r),pdf:s=>nee(s,n,r),cdf:s=>ree(s,n,r),icdf:s=>iee(s,n,r)};return i.mean(e).stdev(t)}function E3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=zc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function see(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*zc()}function oee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function aee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function uee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function x3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>see(n,r),pdf:s=>oee(s,n,r),cdf:s=>aee(s,n,r),icdf:s=>uee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function lee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function uR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function iF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function lR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function WS(e,t,n,r,i){let s=0,o=0;return lR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function cee(e,t,n){let r=0,i=0,s=0,o=0,a=0;lR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=uR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:WS(e,t,n,i,l)}}function S3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;lR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=uR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:WS(e,t,n,i,l)}}function T3e(e,t,n){const[r,i,s,o]=iF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;lR(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=uR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:WS(e,t,n,o,y)}}function C3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;lR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=uR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:WS(e,t,n,a,c)}}function fee(e,t,n){const[r,i,s,o]=iF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,E=(f*y-d*l)/v,w=-_*u,S=x=>(x=x-s,_*x*x+E*x+w+o);return{coef:[w-E*s+_*s*s+o,E-2*_*s,_],predict:S,rSquared:WS(e,t,n,o,S)}}function A3e(e,t,n,r){if(r===0)return lee(e,t,n);if(r===1)return cee(e,t,n);if(r===2)return fee(e,t,n);const[i,s,o,a]=iF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=BFt(c),v=_=>{_-=o;let E=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)E+=y[d]*Math.pow(_,d);return E};return{coef:jFt(f,y,-o,a),predict:v,rSquared:WS(e,t,n,a,v)}}function jFt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function BFt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const vpe=2,bpe=1e-12;function I3e(e,t,n,r){const[i,s,o,a]=iF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=vpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],E=y-i[v]>i[_]-y?v:_;let w=0,S=0,x=0,C=0,A=0;const I=1/Math.abs(i[E]-y||1);for(let D=v;D<=_;++D){const $=i[D],F=s[D],M=UFt(Math.abs(y-$)*I)*d[D],B=$*M;w+=M,S+=B,x+=F*M,C+=F*B,A+=$*B}const[R,O]=uR(S/w,x/w,C/w,A/w);c[g]=R+O*y,f[g]=Math.abs(s[g]-c[g]),zFt(i,g+1,p)}if(h===vpe)break;const m=Lxe(f);if(Math.abs(m)<bpe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?bpe:(v=1-y*y)*v}return VFt(i,c,o,a)}function UFt(e){return(e=1-e*e*e)*e*e}function zFt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function VFt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const HFt=.5*Math.PI/180;function sF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=qFt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&WFt(f,m,d,h,p)>HFt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function qFt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function WFt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function GFt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function uH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:GFt(e)}function k3e(e,t,n){return n||e+(t?"_"+t:"")}const U9=()=>{},YFt={init:U9,add:U9,rem:U9,idx:0},CI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},cR=Object.keys(CI).filter(e=>e!=="__count__");function KFt(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},YFt,t)}[...cR,"__count__"].forEach(e=>{CI[e]=KFt(e,CI[e])});function R3e(e,t,n){return CI[e](n,t)}function N3e(e,t){return e.idx-t.idx}function XFt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=CI[i]())})};return e.forEach(n),Object.values(t).sort(N3e)}function QFt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function JFt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ZFt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function e5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function P3e(e,t){const n=t||xa,r=XFt(e),i=e.slice().sort(N3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=QFt,s.prototype.add=JFt,s.prototype.rem=ZFt,s.prototype.set=e5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function dee(e){this._key=e?jc(e):Lt,this.reset()}const zo=dee.prototype;zo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};zo.add=function(e){this._add.push(e)};zo.rem=function(e){this._rem.push(e)};zo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};zo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};zo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=_Oe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};zo.argmin=function(e){return this.extent(e)[0]||{}};zo.argmax=function(e){return this.extent(e)[1]||{}};zo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};zo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};zo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=XZ(this.values(),e),this._get=e),this._q};zo.q1=function(e){return this.quartile(e)[0]};zo.q2=function(e){return this.quartile(e)[1]};zo.q3=function(e){return this.quartile(e)[2]};zo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=v3e(this.values(),1e3,.05,e),this._get=e),this._ci};zo.ci0=function(e){return this.ci(e)[0]};zo.ci1=function(e){return this.ci(e)[1]};function fy(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}fy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(fy,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=pt(ga(v)),E=_.length;let w=0,S;for(;w<E;++w)r[S=_[w]]||(r[S]=1,t.push(S))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const _=Ji(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:uH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Ji(f),g=k3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(R3e(d,h,g))}return this._measures=this._measures.map(v=>P3e(v,v.field)),Object.create(null)},cellkey:uH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new dee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?c3e(t.tuple,s):xr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const t5t=1e-14;function hee(e){Pe.call(this,null,e)}hee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(hee,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ga(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=y3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ha(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(t5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ll(u,ga(t),e.name||"bin_"+Ji(t))}});function D3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?COe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function pee(e){Pe.call(this,[],e)}pee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(pee,Pe,{transform(e,t){const n=t.fork(t.ALL),r=D3e(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Jb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function O3e(e){Xr.call(this,null,n5t,e)}lt(O3e,Xr);function n5t(e){return this.value&&!e.modified()?this.value:DZ(e.fields,e.orders)}function mee(e){Pe.call(this,null,e)}mee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function r5t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(mee,Pe,{transform(e,t){const n=f=>d=>{for(var h=r5t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=xr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function gee(e){Pe.call(this,null,e)}gee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(gee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=i5t(a,i,s,e.filter||Bc)):n.mod=a,n.source=this.value,n.modifies(r)}});function i5t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(xr(s)),s={},s[t]=l);return i}const _pe={kde:eee,mixture:E3e,normal:ZZ,lognormal:w3e,uniform:x3e},s5t="distributions",wpe="function",o5t="field";function $3e(e,t){const n=e[wpe];jt(_pe,n)||Le("Unknown distribution function: "+n);const r=_pe[n]();for(const i in e)i===o5t?r.data((e.from||t()).map(e[i])):i===s5t?r[i](e[i].map(s=>$3e(s,t))):typeof r[i]===wpe&&r[i](e[i]);return r}function yee(e){Pe.call(this,null,e)}const M3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],a5t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:M3e},{name:"weights",type:"number",array:!0}]};yee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:M3e.concat(a5t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(yee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=$3e(e.distribution,u5t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Mh(r.data()),l=sF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],xr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function u5t(e){return()=>e.materialize(e.SOURCE).source}function L3e(e,t){return e?e.map((n,r)=>t[r]||Ji(n)):null}function vee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const F3e="bin";function bee(e){Pe.call(this,null,e)}bee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:F3e}]};const l5t=(e,t)=>aR(Mh(e,t))/30;lt(bee,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=vee(t.source,e.groupby,xa),i=e.smooth||!1,s=e.field,o=e.step||l5t(n,s),a=Jb((p,m)=>s(p)-s(m)),u=e.as||F3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of b3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function j3e(e){Xr.call(this,null,c5t,e),this.modified(!0)}lt(j3e,Xr);function c5t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ll(n=>t(n,e),ga(t),Ji(t))}function _ee(e){Pe.call(this,[void 0,void 0],e)}_ee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(_ee,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ha(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ji(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function wee(e,t){Xr.call(this,e),this.parent=t,this.count=0}lt(wee,Xr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function oF(e){Pe.call(this,{},e),this._keys=VS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(oF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new wee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function B3e(e){Xr.call(this,null,f5t,e)}lt(B3e,Xr);function f5t(e){return this.value&&!e.modified()?this.value:je(e.name)?pt(e.name).map(t=>jc(t)):jc(e.name,e.as)}function Eee(e){Pe.call(this,VS(),e)}Eee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(Eee,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function xee(e){Pe.call(this,[],e)}xee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(xee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=L3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=WZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function See(e){Pe.call(this,[],e)}See.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(See,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ji),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=WZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Tee(e){Pe.call(this,null,e)}Tee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(Tee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function U3e(e){Pe.call(this,[],e)}lt(U3e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=xr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const EP={value:"value",median:Lxe,mean:Pat,min:R7,max:sm},d5t=[];function Cee(e){Pe.call(this,[],e)}Cee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function h5t(e){var t=e.method||EP.value,n;if(EP[t]==null)Le("Unrecognized imputation method: "+t);else return t===EP.value?(n=e.value!==void 0?e.value:0,()=>n):EP[t]}function p5t(e){const t=e.field;return n=>n?t(n):NaN}lt(Cee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=h5t(e),i=p5t(e),s=Ji(e.field),o=Ji(e.key),a=(e.groupby||[]).map(Ji),u=m5t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,E,w;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],w={_impute:!0},y=0,E=p.length;y<E;++y)w[a[y]]=p[y];w[o]=m,w[s]=Number.isNaN(h)?h=r(d,i):h,l.push(xr(w))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function m5t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):d5t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Aee(e){fy.call(this,e)}Aee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:cR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Aee,fy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Iee(e){Pe.call(this,null,e)}Iee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Iee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=vee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ji),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Mh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=eee(h,o)[a],m=e.counts?h.length:1,g=c||Mh(h);sF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(xr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function z3e(e){Xr.call(this,null,g5t,e)}lt(z3e,Xr);function g5t(e){return this.value&&!e.modified()?this.value:$Z(e.fields,e.flat)}function V3e(e){Pe.call(this,[],e),this._pending=null}lt(V3e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?z9(this,t,this._pending):y5t(e)?t.StopPropagation:e.values?z9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>z9(this,t,pt(r.data)))}});function y5t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function z9(e,t,n){n.forEach(xr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function kee(e){Pe.call(this,{},e)}kee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(kee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Ji),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function H3e(e){Xr.call(this,null,v5t,e)}lt(H3e,Xr);function v5t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function q3e(e){Xr.call(this,null,b5t,e)}lt(q3e,Xr);function b5t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function W3e(e){Pe.call(this,null,e)}lt(W3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Ree(e){fy.call(this,e)}Ree.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:cR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(Ree,fy,{_transform:fy.prototype.transform,transform(e,t){return this._transform(_5t(e,t),t)}});function _5t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ga(n).concat(ga(r)),o=E5t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>w5t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function w5t(e,t,n,r){return ll(i=>t(i)===e?n(i):NaN,r,e+"")}function E5t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(G4),t?i.slice(0,t):i}function G3e(e){oF.call(this,e)}lt(G3e,oF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(ga(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(xr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Nee(e){Pe.call(this,null,e)}Nee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(Nee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=L3e(e.fields,e.as||[]),s=r?(a,u)=>x5t(a,u,r,i):J4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,xr({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function x5t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function Y3e(e){Pe.call(this,null,e)}lt(Y3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Pee(e){Pe.call(this,null,e)}Pee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const S5t=1e-14;lt(Pee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=vee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ji),a=[],u=e.step||.01,l=e.probs||Mu(u/2,1-S5t,u),c=l.length;return s.forEach(f=>{const d=KZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(xr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function K3e(e){Pe.call(this,null,e)}lt(K3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=WZ(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Dee(e){Pe.call(this,[],e),this.count=0}Dee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(Dee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*zc()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function Oee(e){Pe.call(this,null,e)}Oee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(Oee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Mu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,xr(s)}),n.add=t.add.concat(this.value),n}});function X3e(e){Pe.call(this,null,e),this.modified(!0)}lt(X3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function $ee(e){Pe.call(this,null,e)}const Q3e=["unit0","unit1"];$ee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:jZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Q3e}]};lt($ee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?qS:HS)(s.unit).offset,a=e.as||Q3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ga(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:YOe({extent:e.extent||Mh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=BZ(r),o=this.value||{},a=(n?jOe:FOe)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function J3e(e){Pe.call(this,VS(),e)}lt(J3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Z3e(e){Pe.call(this,null,e)}lt(Z3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Jb(e.sort)):t.source).map(e.field))}});function T5t(e,t,n,r){const i=AI[e](t,n);return{init:i.init||Kg,update:function(s,o){o[r]=i.next(s)}}}const AI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=AI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=AI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=C5t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function C5t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const A5t=Object.keys(AI);function e$e(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(ga(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Ji(g),E=k3e(p,_,s[m]);if(h(g),o.push(E),jt(AI,p))a.push(T5t(p,g,y,E));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let w=l[_];w||(w=l[_]=[],w.field=g,f.push(w)),w.push(R3e(p,v,E))}}),(c.length||f.length)&&(this.cell=I5t(f,c,d)),this.inputs=Object.keys(u)}const t$e=e$e.prototype;t$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};t$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function I5t(e,t,n){e=e.map(u=>P3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new dee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Mee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}Mee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:A5t.concat(cR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(Mee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Jb(e.sort),i=uH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new e$e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)k5t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=D3e(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function k5t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?fS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Sa(-1)};t.init();for(let f=0;f<u;++f)R5t(c,o,f,u),s&&N5t(c,l),t.update(c,a[f])}function R5t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function N5t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const P5t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:fy,bin:hee,collect:pee,compare:O3e,countpattern:mee,cross:gee,density:yee,dotbin:bee,expression:j3e,extent:_ee,facet:oF,field:B3e,filter:Eee,flatten:xee,fold:See,formula:Tee,generate:U3e,impute:Cee,joinaggregate:Aee,kde:Iee,key:z3e,load:V3e,lookup:kee,multiextent:H3e,multivalues:q3e,params:W3e,pivot:Ree,prefacet:G3e,project:Nee,proxy:Y3e,quantile:Pee,relay:K3e,sample:Dee,sequence:Oee,sieve:X3e,subflow:wee,timeunit:$ee,tupleindex:J3e,values:Z3e,window:Mee},Symbol.toStringTag,{value:"Module"}));function D0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const D5t=()=>typeof Image<"u"?Image:null;function Lee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const O5t="identity",bx="linear",Bm="log",fR="pow",dR="sqrt",aF="symlog",lb="time",cb="utc",bh="sequential",GS="diverging",_x="quantile",uF="quantize",lF="threshold",Fee="ordinal",lH="point",n$e="band",jee="bin-ordinal",Hs="continuous",hR="discrete",pR="discretizing",Zc="interpolating",Bee="temporal";function $5t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function M5t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Uee(){const e=Uy().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Lee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Mu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,H0(h,m)-1),v=m===g?y:H0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Uee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function r$e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return r$e(t())},e}function L5t(){return r$e(Uee().paddingInner(1))}var F5t=Array.prototype.map;function j5t(e){return F5t.call(e,ha)}const B5t=Array.prototype.slice;function i$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(H0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=j5t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=B5t.call(r),n):t.slice()},n.tickFormat=function(r,i){return zTe(e[0],Qn(e),r??10,i)},n.copy=function(){return i$e().domain(n.domain()).range(n.range())},n}const uM=new Map,s$e=Symbol("vega_scale");function o$e(e){return e[s$e]=!0,e}function U5t(e){return e&&e[s$e]===!0}function z5t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?$5t(s):s.invertExtent?M5t(s):void 0),s.type=e,o$e(s)};return r.metadata=td(pt(n)),r}function yr(e,t,n){return arguments.length>1?(uM.set(e,z5t(e,t,n)),this):a$e(e)?uM.get(e):void 0}yr(O5t,VTe);yr(bx,Lc,Hs);yr(Bm,qTe,[Hs,Bm]);yr(fR,IK,Hs);yr(dR,smt,Hs);yr(aF,WTe,Hs);yr(lb,PK,[Hs,Bee]);yr(cb,_gt,[Hs,Bee]);yr(bh,DK,[Hs,Zc]);yr(`${bh}-${bx}`,DK,[Hs,Zc]);yr(`${bh}-${Bm}`,s2e,[Hs,Zc,Bm]);yr(`${bh}-${fR}`,OK,[Hs,Zc]);yr(`${bh}-${dR}`,wgt,[Hs,Zc]);yr(`${bh}-${aF}`,o2e,[Hs,Zc]);yr(`${GS}-${bx}`,a2e,[Hs,Zc]);yr(`${GS}-${Bm}`,u2e,[Hs,Zc,Bm]);yr(`${GS}-${fR}`,$K,[Hs,Zc]);yr(`${GS}-${dR}`,Egt,[Hs,Zc]);yr(`${GS}-${aF}`,l2e,[Hs,Zc]);yr(_x,GTe,[pR,_x]);yr(uF,YTe,pR);yr(lF,KTe,pR);yr(jee,i$e,[hR,pR]);yr(Fee,Uy,hR);yr(n$e,Uee,hR);yr(lH,L5t,hR);function a$e(e){return uM.has(e)}function e_(e,t){const n=uM.get(e);return n&&n.metadata[t]}function zee(e){return e_(e,Hs)}function wx(e){return e_(e,hR)}function cH(e){return e_(e,pR)}function u$e(e){return e_(e,Bm)}function V5t(e){return e_(e,Bee)}function l$e(e){return e_(e,Zc)}function c$e(e){return e_(e,_x)}const H5t=["clamp","base","constant","exponent"];function f$e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function cF(e,t,n){return aK(Vee(t||"rgb",n),e)}function d$e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function h$e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Sa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=yr(s)().domain([t,n]).range([0,1]),H5t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Vee(e,t){const n=nct[q5t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function q5t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const W5t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},G5t={accent:Sgt,category10:xgt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Tgt,observable10:Cgt,paired:Agt,pastel1:Igt,pastel2:kgt,set1:Rgt,set2:Ngt,set3:Pgt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function p$e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function m$e(e,t){for(const n in e)Hee(n,t(e[n]))}const Epe={};m$e(G5t,p$e);m$e(W5t,e=>cF(p$e(e)));function Hee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Epe[e]=t,this):Epe[e]}const WD="symbol",Y5t="discrete",K5t="gradient",X5t=e=>je(e)?e.map(t=>String(t)):String(e),Q5t=(e,t)=>e[1]-t[1],J5t=(e,t)=>t[1]-e[1];function qee(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(aR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===lb?HS(t):e.type==cb?qS(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function g$e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=Q5t;if(i>s&&(r=s,s=i,i=r,o=J5t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Wee(e,t){return e.bins?g$e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function y$e(e,t,n,r,i,s){const o=t.type;let a=X5t;if(o===lb||i===lb)a=e.timeFormat(r);else if(o===cb||i===cb)a=e.utcFormat(r);else if(u$e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=v$e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function v$e(e,t,n){const r=Wee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const fH={[_x]:"quantiles",[uF]:"thresholds",[lF]:"domain"},b$e={[_x]:"quantiles",[uF]:"domain"};function _$e(e,t){return e.bins?tjt(e.bins):e.type===Bm?v$e(e,t,!0):fH[e.type]?ejt(e[fH[e.type]]()):Wee(e,t)}function Z5t(e,t,n){const r=t[b$e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function ejt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function tjt(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const njt=e=>fH[e.type]||e.bins;function w$e(e,t,n,r,i,s,o){const a=b$e[t.type]&&s!==lb&&s!==cb?Z5t(e,t,i):y$e(e,t,n,i,s,o);return r===WD&&njt(t)?rjt(a):r===Y5t?ijt(a):sjt(a)}const rjt=e=>(t,n,r)=>{const i=xpe(r[n+1],xpe(r.max,1/0)),s=Spe(t,e),o=Spe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},xpe=(e,t)=>e??t,ijt=e=>(t,n)=>n?e(t):null,sjt=e=>t=>e(t),Spe=(e,t)=>Number.isFinite(e)?t(e):null;function ojt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===lF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function ajt(e,t,n,r){const i=r||t.type;return mt(n)&&V5t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===lb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===cb?e.utcFormat("%A, %d %B %Y, %X UTC"):w$e(e,t,5,null,n,r,!0)}function E$e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=ajt(e,t,n.format,n.formatType);if(cH(t.type)){const s=_$e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(wx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let x$e=0;function ujt(){x$e=0}const lM="p_";function Gee(e){return e&&e.gradient}function S$e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?lM:"";return i||(i=e.id="gradient_"+x$e++,r==="radial"?(e.x1=Td(e.x1,.5),e.y1=Td(e.y1,.5),e.r1=Td(e.r1,0),e.x2=Td(e.x2,.5),e.y2=Td(e.y2,.5),e.r2=Td(e.r2,.5),s=lM):(e.x1=Td(e.x1,0),e.y1=Td(e.y1,0),e.x2=Td(e.x2,1),e.y2=Td(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Td(e,t){return e??t}function T$e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Tpe={basis:{curve:Wgt},"basis-closed":{curve:Ggt},"basis-open":{curve:Ygt},bundle:{curve:Kgt,tension:"beta",value:.85},cardinal:{curve:Xgt,tension:"tension",value:0},"cardinal-open":{curve:Jgt,tension:"tension",value:0},"cardinal-closed":{curve:Qgt,tension:"tension",value:0},"catmull-rom":{curve:Zgt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:e0t,tension:"alpha",value:.5},"catmull-rom-open":{curve:t0t,tension:"alpha",value:.5},linear:{curve:MK},"linear-closed":{curve:n0t},monotone:{horizontal:i0t,vertical:r0t},natural:{curve:s0t},step:{curve:o0t},"step-after":{curve:u0t},"step-before":{curve:a0t}};function Yee(e,t,n){var r=jt(Tpe,e)&&Tpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const ljt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},cjt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,fjt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,djt=/^((\s+,?\s*)|(,\s*))/,hjt=/^[01]/;function Ex(e){const t=[];return(e.match(cjt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=ljt[s],a=pjt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function pjt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?hjt:fjt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(djt);u!==null&&(i+=u[0].length)}return r}const dy=Math.PI/180,mjt=1e-14,X1=Math.PI/2,Jd=Math.PI*2,M_=Math.sqrt(3)/2;var V9={},H9={},C$e=[].join;function gjt(e,t,n,r,i,s,o,a,u){const l=C$e.call(arguments);if(V9[l])return V9[l];const c=o*dy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,E=g*a+y*u,w=v*a+_*u,S=g*e+y*t,x=v*e+_*t;let A=1/((S-E)*(S-E)+(x-w)*(x-w))-.25;A<0&&(A=0);let I=Math.sqrt(A);s==i&&(I=-I);const R=.5*(E+S)-I*(x-w),O=.5*(w+x)+I*(S-E),D=Math.atan2(w-O,E-R);let F=Math.atan2(x-O,S-R)-D;F<0&&s===1?F+=Jd:F>0&&s===0&&(F-=Jd);const M=Math.ceil(Math.abs(F/(X1+.001))),B=[];for(let z=0;z<M;++z){const H=D+z*F/M,P=D+(z+1)*F/M;B[z]=[R,O,H,P,n,r,f,d]}return V9[l]=B}function yjt(e){const t=C$e.call(e);if(H9[t])return H9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),E=8/3*_*_/Math.sin(v),w=n+p-E*m,S=r+m+E*p,x=n+g,C=r+y,A=x+E*y,I=C-E*g;return H9[t]=[c*w+f*S,d*w+h*S,c*A+f*I,d*A+h*I,c*x+f*C,d*x+h*C]}const lc=["l",0,0,0,0,0,0,0];function vjt(e,t,n){const r=lc[0]=e[0];if(r==="a"||r==="A")lc[1]=t*e[1],lc[2]=n*e[2],lc[3]=e[3],lc[4]=e[4],lc[5]=e[5],lc[6]=t*e[6],lc[7]=n*e[7];else if(r==="h"||r==="H")lc[1]=t*e[1];else if(r==="v"||r==="V")lc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)lc[i]=(i%2==1?t:n)*e[i];return lc}function II(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=vjt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Cpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Cpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Cpe(e,t,n,r){const i=gjt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=yjt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Ape=.5773502691896257,Ipe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Jd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n,i=r-n*Ape,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n,i=r-n*Ape;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function A$e(e){return jt(Ipe,e)?Ipe[e]:bjt(e)}var q9={};function bjt(e){if(!jt(q9,e)){const t=Ex(e);q9[e]={draw:function(n,r){II(n,t,0,0,Math.sqrt(r)/2)}}}return q9[e]}const xg=.448084975506;function _jt(e){return e.x}function wjt(e){return e.y}function Ejt(e){return e.width}function xjt(e){return e.height}function _p(e){return typeof e=="function"?e:()=>+e}function xP(e,t,n){return Math.max(t,Math.min(e,n))}function I$e(){var e=_jt,t=wjt,n=Ejt,r=xjt,i=_p(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=xP(+i.call(this,c),0,v),E=xP(+s.call(this,c),0,v),w=xP(+o.call(this,c),0,v),S=xP(+a.call(this,c),0,v);if(u||(u=h=x6()),_<=0&&E<=0&&w<=0&&S<=0)u.rect(p,m,g,y);else{var x=p+g,C=m+y;u.moveTo(p+_,m),u.lineTo(x-E,m),u.bezierCurveTo(x-xg*E,m,x,m+xg*E,x,m+E),u.lineTo(x,C-S),u.bezierCurveTo(x,C-xg*S,x-xg*S,C,x-S,C),u.lineTo(p+w,C),u.bezierCurveTo(p+xg*w,C,p,C-xg*w,p,C-w),u.lineTo(p,m+_),u.bezierCurveTo(p,m+xg*_,p+xg*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=_p(c),l):e},l.y=function(c){return arguments.length?(t=_p(c),l):t},l.width=function(c){return arguments.length?(n=_p(c),l):n},l.height=function(c){return arguments.length?(r=_p(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=_p(c),s=f!=null?_p(f):i,a=d!=null?_p(d):i,o=h!=null?_p(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function k$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,E=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+v,a+_),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,Jd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=x6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function mR(e,t){return e??t}const gR=e=>e.x||0,yR=e=>e.y||0,Sjt=e=>e.width||0,Tjt=e=>e.height||0,Cjt=e=>(e.x||0)+(e.width||0),Ajt=e=>(e.y||0)+(e.height||0),Ijt=e=>e.startAngle||0,kjt=e=>e.endAngle||0,Rjt=e=>e.padAngle||0,Njt=e=>e.innerRadius||0,Pjt=e=>e.outerRadius||0,Djt=e=>e.cornerRadius||0,Ojt=e=>mR(e.cornerRadiusTopLeft,e.cornerRadius)||0,$jt=e=>mR(e.cornerRadiusTopRight,e.cornerRadius)||0,Mjt=e=>mR(e.cornerRadiusBottomRight,e.cornerRadius)||0,Ljt=e=>mR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Fjt=e=>mR(e.size,64),jjt=e=>e.size||1,fF=e=>e.defined!==!1,Bjt=e=>A$e(e.shape||"circle"),Ujt=gz().startAngle(Ijt).endAngle(kjt).padAngle(Rjt).innerRadius(Njt).outerRadius(Pjt).cornerRadius(Djt),zjt=p2e().x(gR).y1(yR).y0(Ajt).defined(fF),Vjt=p2e().y(yR).x1(gR).x0(Cjt).defined(fF),Hjt=h2e().x(gR).y(yR).defined(fF),qjt=I$e().x(gR).y(yR).width(Sjt).height(Tjt).cornerRadius(Ojt,$jt,Mjt,Ljt),Wjt=qgt().type(Bjt).size(Fjt),Gjt=k$e().x(gR).y(yR).defined(fF).size(jjt);function Kee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Yjt(e,t){return Ujt.context(e)(t)}function Kjt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Vjt:zjt).curve(Yee(r,n.orient,n.tension)).context(e)(t)}function Xjt(e,t){const n=t[0],r=n.interpolate||"linear";return Hjt.curve(Yee(r,n.orient,n.tension)).context(e)(t)}function YS(e,t,n,r){return qjt.context(e)(t,n,r)}function Qjt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Jjt(e,t){return Wjt.context(e)(t)}function Zjt(e,t){return Gjt.context(e)(t)}var R$e=1;function N$e(){R$e=1}function Xee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+R$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):Kee(n)?o.path=YS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function As(e){this.clear(),e&&this.union(e)}As.prototype={clone(){return new As(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function dF(e){this.mark=e,this.bounds=this.bounds||new As}function hF(e){dF.call(this,e),this.items=this.items||[]}lt(hF,dF);class P$e{constructor(t){this._pending=0,this._loader=t||K4()}pending(){return this._pending}sanitizeURL(t){const n=this;return kpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(KT(n),r)).catch(()=>(KT(n),null))}loadImage(t){const n=this,r=D5t();return kpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>KT(n),o.onerror=()=>KT(n),o.src=s,o}).catch(i=>(KT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function kpe(e){e._pending+=1}function KT(e){e._pending-=1}function ag(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?e8t(t,r):0))}return e}function e8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const t8t=Jd-1e-8;let pF,GD,YD,bv,dH,KD,hH,pH;const r0=(e,t)=>pF.add(e,t),XD=(e,t)=>r0(GD=e,YD=t),Rpe=e=>r0(e,pF.y1),Npe=e=>r0(pF.x1,e),Q1=(e,t)=>dH*e+hH*t,J1=(e,t)=>KD*e+pH*t,W9=(e,t)=>r0(Q1(e,t),J1(e,t)),G9=(e,t)=>XD(Q1(e,t),J1(e,t));function vR(e,t){return pF=e,t?(bv=t*dy,dH=pH=Math.cos(bv),KD=Math.sin(bv),hH=-KD):(dH=pH=1,bv=KD=hH=0),n8t}const n8t={beginPath(){},closePath(){},moveTo:G9,lineTo:G9,rect(e,t,n,r){bv?(W9(e+n,t),W9(e+n,t+r),W9(e,t+r),G9(e,t)):(r0(e+n,t+r),XD(e,t))},quadraticCurveTo(e,t,n,r){const i=Q1(e,t),s=J1(e,t),o=Q1(n,r),a=J1(n,r);Ppe(GD,i,o,Rpe),Ppe(YD,s,a,Npe),XD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Q1(e,t),a=J1(e,t),u=Q1(n,r),l=J1(n,r),c=Q1(i,s),f=J1(i,s);Dpe(GD,o,u,c,Rpe),Dpe(YD,a,l,f,Npe),XD(c,f)},arc(e,t,n,r,i,s){if(r+=bv,i+=bv,GD=n*Math.cos(i)+e,YD=n*Math.sin(i)+t,Math.abs(i-r)>t8t)r0(e-n,t-n),r0(e+n,t+n);else{const o=l=>r0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Jd,r<0&&(r+=Jd),i=i%Jd,i<0&&(i+=Jd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Jd,a=r-r%X1,u=0;u<4&&a>i;++u,a-=X1)o(a);else for(a=r-r%X1+X1,u=0;u<4&&a<i;++u,a=a+X1)o(a)}}};function Ppe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Dpe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>mjt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Ope(u,e,t,n,r)),0<l&&l<1&&i(Ope(l,e,t,n,r))}function Ope(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var O0=(O0=D0(1,1))?O0.getContext("2d"):null;const mH=new As;function Qee(e){return function(t,n){if(!O0)return!0;e(O0,t),mH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=mH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(O0.isPointInPath(u,a))return!0;return!1}}function Jee(e,t){return t.contains(e.x||0,e.y||0)}function D$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(mH.set(n,r,n+i,r+s))}function O$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Rw(t,n,r,i,s)}function Rw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function xx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ff(e,t){return e??t}function $pe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function r8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+ff(t.x1,.5)*r,n.y1+ff(t.y1,.5)*i,Math.max(r,i)*ff(t.r1,0),n.x1+ff(t.x2,.5)*r,n.y1+ff(t.y2,.5)*i,Math.max(r,i)*ff(t.r2,.5));else{const o=ff(t.x1,0),a=ff(t.y1,0),u=ff(t.x2,1),l=ff(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=D0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=$pe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return $pe(s,t.stops)}function $$e(e,t,n){return Gee(n)?r8t(e,n,t.bounds):n}function cM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=$$e(e,t,t.fill),!0):!1}var i8t=[];function Sx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=$$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||i8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function s8t(e,t){return e.zindex-t.zindex||e.index-t.index}function Zee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(s8t)}function rd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Zee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function fM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Zee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function ete(e){return function(t,n,r){rd(n,i=>{(!r||r.intersects(i.bounds))&&M$e(e,t,i,i)})}}function o8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&M$e(e,t,n.items[0],n.items)}}function M$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(xx(t,n),n.fill&&cM(t,n,i)&&t.fill(),n.stroke&&Sx(t,n,i)&&t.stroke()))}function mF(e){return e=e||Bc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,fM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function bR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function tte(e){return mF(bR(e))}function kv(e,t){return"translate("+e+","+t+")"}function nte(e){return"rotate("+e+")"}function a8t(e,t){return"scale("+e+","+t+")"}function L$e(e){return kv(e.x||0,e.y||0)}function u8t(e){return kv(e.x||0,e.y||0)+(e.angle?" "+nte(e.angle):"")}function l8t(e){return kv(e.x||0,e.y||0)+(e.angle?" "+nte(e.angle):"")+(e.scaleX||e.scaleY?" "+a8t(e.scaleX||1,e.scaleY||1):"")}function rte(e,t,n){function r(o,a){o("transform",u8t(a)),o("d",t(null,a))}function i(o,a){return t(vR(o,a.angle),a),ag(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=dy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:ete(s),pick:tte(s),isect:n||Qee(s)}}var c8t=rte("arc",Yjt);function f8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function d8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function h8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function ite(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(vR(u),c),ag(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=bR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:o8t(s),pick:a,isect:Jee,tip:n}}var p8t=ite("area",Kjt,f8t);function m8t(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):F$e(e,t.group)}function F$e(e,t){e.beginPath(),Kee(t)?YS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function j$e(e){const t=ff(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function g8t(e,t){e("transform",L$e(t))}function B$e(e,t){const n=j$e(t);e("d",YS(null,t,n,n))}function y8t(e,t){e("class","background"),e("aria-hidden",!0),B$e(e,t)}function v8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?B$e(e,t):e("d","")}function b8t(e,t,n){const r=t.clip?Xee(n,t,t):null;e("clip-path",r)}function _8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ag(e,t),e.translate(t.x||0,t.y||0)}function kI(e,t,n,r){const i=j$e(t);e.beginPath(),YS(e,t,(n||0)+i,(r||0)+i)}const w8t=bR(kI),E8t=bR(kI,!1),x8t=bR(kI,!0);function S8t(e,t,n,r){rd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(kI(e,i,s,o),xx(e,i),i.fill&&cM(e,i,u)&&e.fill(),i.stroke&&!a&&Sx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&F$e(e,i),n&&n.translate(-s,-o),rd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(kI(e,i,s,o),xx(e,i),Sx(e,i,u)&&e.stroke())})}function T8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return fM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Kee(u)&&!x8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&E8t(e,u,o,a)?(e.restore(),u):(l=fM(u,v=>C8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&w8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function C8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var A8t={type:"group",tag:"g",nested:!1,attr:g8t,bound:_8t,draw:S8t,pick:T8t,isect:D$e,content:b8t,background:y8t,foreground:v8t},RI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ste(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function ote(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function ate(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function gF(e,t){return e==="center"?t/2:e==="right"?t:0}function yF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function I8t(e,t,n){const r=ste(t,n),i=ote(t,r),s=ate(t,r),o=(t.x||0)-gF(t.align,i),a=(t.y||0)-yF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,RI["xmlns:xlink"],"xlink:href"),e("transform",kv(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function k8t(e,t){const n=t.image,r=ote(t,n),i=ate(t,n),s=(t.x||0)-gF(t.align,r),o=(t.y||0)-yF(t.baseline,i);return e.set(s,o,s+r,o+i)}function R8t(e,t,n){rd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=ste(r,this);let s=ote(r,i),o=ate(r,i);if(s===0||o===0)return;let a=(r.x||0)-gF(r.align,s),u=(r.y||0)-yF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(xx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var N8t={type:"image",tag:"image",nested:!1,attr:I8t,bound:k8t,draw:R8t,pick:mF(),isect:Bc,get:ste,xOffset:gF,yOffset:yF},P8t=ite("line",Xjt,d8t);function D8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",l8t(t)),e("d",t.path)}function QD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*dy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Ex(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),II(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):II(e,u,r,i,s,o)}function O8t(e,t){return QD(vR(e,t.angle),t)?e.set(0,0,0,0):ag(e,t,!0)}var $8t={type:"path",tag:"path",nested:!1,attr:D8t,bound:O8t,draw:ete(QD),pick:tte(QD),isect:Qee(QD)};function M8t(e,t){e("d",YS(null,t))}function L8t(e,t){var n,r;return ag(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Mpe(e,t){e.beginPath(),YS(e,t)}var F8t={type:"rect",tag:"path",nested:!1,attr:M8t,bound:L8t,draw:ete(Mpe),pick:tte(Mpe),isect:D$e};function j8t(e,t){e("transform",L$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function B8t(e,t){var n,r;return ag(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function U$e(e,t,n){var r,i,s,o;return t.stroke&&Sx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function U8t(e,t,n){rd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&U$e(e,r,i)&&(xx(e,r),e.stroke())}})}function z8t(e,t,n,r){return e.isPointInStroke?U$e(e,t,1)&&e.isPointInStroke(n,r):!1}var V8t={type:"rule",tag:"line",nested:!1,attr:j8t,bound:B8t,draw:U8t,pick:mF(z8t),isect:O$e},H8t=rte("shape",Qjt),q8t=rte("symbol",Jjt,Jee);const Lpe=TOe();var Pl={height:rp,measureWidth:ute,estimateWidth:dM,width:dM,canvas:z$e};z$e(!0);function z$e(e){Pl.width=e&&O0?ute:dM}function dM(e,t){return V$e(py(e,t),rp(e))}function V$e(e,t){return~~(.8*e.length*t)}function ute(e,t){return rp(e)<=0||!(t=py(e,t))?0:H$e(t,vF(e))}function H$e(e,t){const n=`(${t}) ${e}`;let r=Lpe.get(n);return r===void 0&&(O0.font=t,r=O0.measureText(e).width,Lpe.set(n,r)),r}function rp(e){return e.fontSize!=null?+e.fontSize||0:11}function hy(e){return e.lineHeight!=null?e.lineHeight:rp(e)+2}function W8t(e){return je(e)?e.length>1?e:e[0]:e}function _R(e){return W8t(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function lte(e){const t=_R(e);return(je(t)?t.length-1:0)*hy(e)}function py(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Y8t(e,n):n}function G8t(e){if(Pl.width===ute){const t=vF(e);return n=>H$e(n,t)}else if(Pl.width===dM){const t=rp(e);return n=>V$e(n,t)}else return t=>Pl.width(e,t)}function Y8t(e,t){var n=+e.limit,r=G8t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function wR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function vF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+rp(e)+"px "+wR(e,t)}function cte(e){var t=e.baseline,n=rp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*hy(e):t==="line-bottom"?.29*n-.5*hy(e):0)}const K8t={left:"start",center:"middle",right:"end"},YC=new As;function bF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-X1,t+=r*Math.cos(i),n+=r*Math.sin(i)),YC.x1=t,YC.y1=n,YC}function X8t(e,t){var n=t.dx||0,r=(t.dy||0)+cte(t),i=bF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",K8t[t.align]||"start"),a?(u=kv(s,o)+" "+nte(a),(n||r)&&(u+=" "+kv(n,r))):u=kv(s+n,o+r),e("transform",u)}function fte(e,t,n){var r=Pl.height(t),i=t.align,s=bF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+cte(t)-Math.round(.8*r),c=_R(t),f;if(je(c)?(r+=hy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Pl.width(t,h)),0)):f=Pl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*dy,o,a);else if(n===2)return e.rotatedPoints(t.angle*dy,o,a);return e}function Q8t(e,t,n){rd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=vF(r),e.textAlign=r.align||"left",s=bF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*dy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+cte(r),c=_R(r),xx(e,r),je(c))for(l=hy(r),u=0;u<c.length;++u)f=py(r,c[u]),r.fill&&cM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Sx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=py(r,c),r.fill&&cM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Sx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function J8t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=bF(t),a=o.x1,u=o.y1,l=fte(YC,t,1),c=-t.angle*dy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function Z8t(e,t){const n=fte(YC,e,2);return Rw(t,n[0],n[1],n[2],n[3])||Rw(t,n[0],n[1],n[4],n[5])||Rw(t,n[4],n[5],n[6],n[7])||Rw(t,n[2],n[3],n[6],n[7])}var e9t={type:"text",tag:"text",nested:!1,attr:X8t,bound:fte,draw:Q8t,pick:mF(J8t),isect:Z8t},t9t=ite("trail",Zjt,h8t),Gl={arc:c8t,area:p8t,group:A8t,image:N8t,line:P8t,path:$8t,rect:F8t,rule:V8t,shape:H8t,symbol:q8t,text:e9t,trail:t9t};function gH(e,t,n){var r=Gl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new As),e,n)}var Fpe={mark:null};function q$e(e,t,n){var r=Gl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Fpe.mark=e,l=Fpe),c=gH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new As,o)for(a=0,u=s.length;a<u;++a)t.union(gH(s[a],i,n));return e.bounds=t}const n9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function W$e(e,t){return JSON.stringify(e,n9t,t)}function G$e(e){const t=typeof e=="string"?JSON.parse(e):e;return Y$e(t)}function Y$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&Y$e(n[i]);return t&&q$e(e),e}class K$e{constructor(t){arguments.length?this.root=G$e(t):(this.root=jpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new hF(this.root)])}toJSON(t){return W$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=jpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function jpe(e,t){const n={bounds:new As,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function i0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function dte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Os(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=i0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function wc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function X$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function _F(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function r9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Gl[i.marktype]).tip){for(o=_F(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let hte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||K4(),this._tooltip=n||i9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=i0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=r9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function i9t(e,t,n,r){e.element().setAttribute("title",r||"")}class ER{constructor(t){this._el=null,this._bgcolor=null,this._loader=new P$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const s9t="keydown",o9t="keypress",a9t="keyup",Q$e="dragenter",JD="dragleave",J$e="dragover",yH="pointerdown",u9t="pointerup",hM="pointermove",ZD="pointerout",Z$e="pointerover",vH="mousedown",l9t="mouseup",eMe="mousemove",pM="mouseout",tMe="mouseover",mM="click",c9t="dblclick",f9t="wheel",nMe="mousewheel",gM="touchstart",yM="touchmove",vM="touchend",d9t=[s9t,o9t,a9t,Q$e,JD,J$e,yH,u9t,hM,ZD,Z$e,vH,l9t,eMe,pM,tMe,mM,c9t,f9t,nMe,gM,yM,vM],bH=hM,KC=pM,_H=mM;class xR extends hte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=d9t,this.pointermove=Upe([hM,eMe],[Z$e,tMe],[ZD,pM]),this.dragover=Upe([J$e],[Q$e],[JD]),this.pointerout=zpe([ZD,pM]),this.dragleave=zpe([JD])}initialize(t,n,r){return this._canvas=t&&dte(t,"canvas"),[mM,vH,yH,hM,ZD,JD].forEach(i=>Bpe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(nMe,t)}pointerdown(t){this._down=this._active,this.fire(yH,t)}mousedown(t){this._down=this._active,this.fire(vH,t)}click(t){this._down===this._active&&(this.fire(mM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(gM,t,!0)}touchmove(t){this.fire(yM,t,!0)}touchend(t){this.fire(vM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===_H&&i&&i.href?this.handleHref(n,i,i.href):(t===bH||t===KC)&&this.handleTooltip(n,i,t!==KC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Bpe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=_F(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Gl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const h9t=e=>e===gM||e===yM||e===vM?[gM,yM,vM]:[e];function Bpe(e,t){h9t(t).forEach(n=>p9t(e,n))}function p9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function K2(e,t,n){t.forEach(r=>e.fire(r,n))}function Upe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?K2(this,e,r):((!i||!i.exit)&&K2(this,n,r),this._active=s,K2(this,t,r),K2(this,e,r))}}function zpe(e){return function(t){K2(this,e,t),this._active=null}}function m9t(){return typeof window<"u"&&window.devicePixelRatio||1}function g9t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?m9t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class bM extends ER{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new As,this._tempb=new As}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:D0(1,1,this._options.type),t&&this._canvas&&(wc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)g9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=y9t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):v9t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Gl[n.marktype];n.clip&&m8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const y9t=(e,t,n)=>new As().set(0,0,t,n).translate(-e[0],-e[1]);function v9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class rMe extends hte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=Y9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=Y9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==KC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(_H,this._hrefHandler),i.removeEventListener(bH,this._tooltipHandler),i.removeEventListener(KC,this._tooltipHandler)),this._svg=i=t&&dte(t,"svg"),i&&(i.addEventListener(_H,this._hrefHandler),i.addEventListener(bH,this._tooltipHandler),i.addEventListener(KC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:Y9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const Y9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},iMe="aria-hidden",pte="aria-label",mte="role",gte="aria-roledescription",sMe="graphics-object",yte="graphics-symbol",oMe=(e,t,n)=>({[mte]:e,[gte]:t,[pte]:n||void 0}),b9t=td(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Vpe={axis:{desc:"axis",caption:E9t},legend:{desc:"legend",caption:x9t},"title-text":{desc:"title",caption:e=>`Title text '${qpe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${qpe(e)}'`}},Hpe={ariaRole:mte,ariaRoleDescription:gte,description:pte};function aMe(e,t){const n=t.aria===!1;if(e(iMe,n||void 0),n||t.description==null)for(const r in Hpe)e(Hpe[r],void 0);else{const r=t.mark.marktype;e(pte,t.description),e(mte,t.ariaRole||(r==="group"?sMe:yte)),e(gte,t.ariaRoleDescription||`${r} mark`)}}function uMe(e){return e.aria===!1?{[iMe]:!0}:b9t[e.role]?null:Vpe[e.role]?w9t(e,Vpe[e.role]):_9t(e)}function _9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return oMe(n?sMe:yte,`${t} mark container`,e.description)}function w9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return oMe(t.role||yte,t.desc,n.description||r(n))}catch{return null}}function qpe(e){return pt(e.text).join(" ")}function E9t(e){const t=e.datum,n=e.orient,r=t.title?lMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${wx(a)?"discrete":a} scale with ${E$e(o,s,e)}`}function x9t(e){const t=e.datum,n=t.title?lMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return T9t(r)+(n?` titled '${n}'`:"")+` for ${S9t(s)} with ${E$e(u,a,e)}`}function lMe(e){try{return pt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function S9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function T9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const cMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),C9t=e=>cMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function vte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${C9t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=cMe(u),a),toString:()=>e};return a}const fMe=e=>dMe(vte(),e)+"";function dMe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):dMe(e,r)}return e.close()}const _M={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},wM={blend:"mix-blend-mode"},hMe={fill:"none","stroke-miterlimit":10},XT=0,Wpe="http://www.w3.org/2000/xmlns/",Ps=RI.xmlns;class bte extends ER{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Os(t,0,"svg",Ps),this._svg.setAttributeNS(Wpe,"xmlns",Ps),this._svg.setAttributeNS(Wpe,"xmlns:xlink",RI["xmlns:xlink"]),this._svg.setAttribute("version",RI.version),this._svg.setAttribute("class","marks"),wc(t,1),this._root=Os(this._svg,XT,"g",Ps),s0(this._root,hMe),wc(this._svg,XT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(s0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Os(t,XT,"rect",Ps),s0(r,{width:this._width,height:this._height,fill:n}));const i=fMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),wc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Gl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Gpe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Gpe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Gl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Ype(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return wc(c,0),n._svg;c.setAttribute("class",X$e(n));const f=uMe(n);for(const m in f)Ma(c,m,f[m]);l||Ma(c,"pointer-events",u),Ma(c,"clip-path",n.clip?Xee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Ype(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&k9t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):rd(n,p),wc(c,h),c}_update(t,n,r){em=n,oa=n.__values__,aMe(XC,r),t.attr(XC,r,this);const i=N9t[t.type];i&&i.call(this,t,n,r),em&&this.style(em,r)}style(t,n){if(n!=null){for(const r in _M){let i=r==="font"?wR(n):n[r];if(i===oa[r])continue;const s=_M[r];i==null?t.removeAttribute(s):(Gee(i)&&(i=S$e(i,this._defs.gradient,pMe())),t.setAttribute(s,i+"")),oa[r]=i}for(const r in wM)eO(t,wM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Os(t,XT+1,"defs",Ps)),i=A9t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Os(t,XT+1,"defs",Ps)),i=I9t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):wc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Gpe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function A9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Os(e,n++,"pattern",Ps);s0(o,{id:lM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Os(o,0,"rect",Ps),s0(o,{width:1,height:1,fill:`url(${pMe()}#${t.id})`}),e=Os(e,n++,"radialGradient",Ps),s0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Os(e,n++,"linearGradient",Ps),s0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Os(e,r,"stop",Ps),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return wc(e,r),n}function I9t(e,t,n){let r;return e=Os(e,n,"clipPath",Ps),e.setAttribute("id",t.id),t.path?(r=Os(e,0,"path",Ps),r.setAttribute("d",t.path)):(r=Os(e,0,"rect",Ps),s0(r,{x:0,y:0,width:t.width,height:t.height})),wc(e,1),n+1}function k9t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;rd(n,o=>{i=e.mark(t,o,i,r),++s}),wc(t,1+s)}function Ype(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=i0(o,r,Ps),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=i0(o,"path",Ps);s.appendChild(a),a.__data__=e;const u=i0(o,"g",Ps);s.appendChild(u),u.__data__=e;const l=i0(o,"path",Ps);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||R9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function R9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let em=null,oa=null;const N9t={group(e,t,n){const r=em=t.childNodes[2];oa=r.__values__,e.foreground(XC,n,this),oa=t.__values__,em=t.childNodes[1],e.content(XC,n,this);const i=em=t.childNodes[0];e.background(XC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==oa.events&&(Ma(r,"pointer-events",s),Ma(i,"pointer-events",s),oa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ma(r,"display",null),this.style(i,n),Ma(i,"stroke",null),o&&(n.fill=null),oa=r.__values__,this.style(r,n),o&&(n.fill=o),em=null}else Ma(r,"display","none")},image(e,t,n){n.smooth===!1?(eO(t,"image-rendering","optimizeSpeed"),eO(t,"image-rendering","pixelated")):eO(t,"image-rendering",null)},text(e,t,n){const r=_R(n);let i,s,o,a;je(r)?(s=r.map(u=>py(n,u)),i=s.join(`
`),i!==oa.text&&(wc(t,0),o=t.ownerDocument,a=hy(n),s.forEach((u,l)=>{const c=i0(o,"tspan",Ps);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),oa.text=i)):(s=py(n,r),s!==oa.text&&(t.textContent=s,oa.text=s)),Ma(t,"font-family",wR(n)),Ma(t,"font-size",rp(n)+"px"),Ma(t,"font-style",n.fontStyle),Ma(t,"font-variant",n.fontVariant),Ma(t,"font-weight",n.fontWeight)}};function XC(e,t,n){t!==oa[e]&&(n?P9t(em,e,t,n):Ma(em,e,t),oa[e]=t)}function eO(e,t,n){n!==oa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),oa[t]=n)}function s0(e,t){for(const n in t)Ma(e,n,t[n])}function Ma(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function P9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function pMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class mMe extends ER{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=vte();n.open("svg",bn({},RI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",hMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Gl[n.marktype],i=r.tag,s=[aMe,r.attr];t.open("g",{class:X$e(n),"clip-path":n.clip?Xee(this,n,n.group):null},uMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=_R(a);if(je(l)){const c={x:0,dy:hy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(py(a,l[f])).close()}else t.text(py(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),rd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):rd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&D9t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:lM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function D9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=wR(t),e["font-size"]=rp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in _M){let a=t[o];const u=_M[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Gee(a)&&(a=S$e(a,i.gradient,"")),e[u]=a)}for(const o in wM){const a=t[o];a!=null&&(s=s||[],s.push(`${wM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const bf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function O9t(e){bf.svgMarkTypes=e.svgMarkTypes??["text"],bf.svgOnTop=e.svgOnTop??!0,bf.debug=e.debug??!1}class wH extends ER{constructor(t){super(t),this._svgRenderer=new bte(t),this._canvasRenderer=new bM(t)}initialize(t,n,r,i,s){this._root_el=Os(t,0,"div");const o=Os(this._root_el,0,"div"),a=Os(this._root_el,1,"div");return this._root_el.style.position="relative",bf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=bf.svgOnTop?a:o,this._canvasEl=bf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return bf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!bf.svgMarkTypes.includes(s));this._svgRenderer.render(t,bf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return bf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class gMe extends xR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Os(Os(t,0,"div"),bf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const yMe="canvas",vMe="hybrid",bMe="png",_Me="svg",wMe="none",o0={Canvas:yMe,PNG:bMe,SVG:_Me,Hybrid:vMe,None:wMe},fb={};fb[yMe]=fb[bMe]={renderer:bM,headless:bM,handler:xR};fb[_Me]={renderer:bte,headless:mMe,handler:rMe};fb[vMe]={renderer:wH,headless:wH,handler:gMe};fb[wMe]={};function wF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(fb[e]=t,this):fb[e]}function EMe(e,t,n){const r=[],i=new As().union(t),s=e.marktype;return s?xMe(e,i,n,r):s==="group"?SMe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function xMe(e,t,n,r){if($9t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)SMe(i[a],t,n,r);else for(const u=Gl[s].isect;a<o;++a){const l=i[a];TMe(l,t,u)&&r.push(l)}}return r}function $9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function SMe(e,t,n,r){n&&n(e.mark)&&TMe(e,t,Gl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)xMe(i[u],t,n,r);t.translate(o,a)}return r}function TMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const K9=new As;function CMe(e){const t=e.clip;if(_n(t))t(vR(K9.clear()));else if(t)K9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(K9)}const M9t=1e-9;function _te(e,t,n){return e===t?!0:n==="path"?AMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=M9t:!e||!t||!gt(e)&&!gt(t)?e==t:L9t(e,t)}function AMe(e,t){return _te(Ex(e),Ex(t))}function L9t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!_te(e[i],t[i],i))return!1;return typeof e==typeof t}function F9t(){N$e(),ujt()}const Tx="top",kf="left",Of="right",my="bottom",j9t="top-left",B9t="top-right",U9t="bottom-left",z9t="bottom-right",wte="start",EH="middle",ja="end",V9t="x",H9t="y",EF="group",Ete="axis",xte="title",q9t="frame",W9t="scope",Ste="legend",IMe="row-header",kMe="row-footer",RMe="row-title",NMe="column-header",PMe="column-footer",DMe="column-title",G9t="padding",Y9t="symbol",OMe="fit",$Me="fit-x",MMe="fit-y",K9t="pad",Tte="none",SP="all",xH="each",Cte="flush",a0="column",u0="row";function LMe(e){Pe.call(this,null,e)}lt(LMe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Gl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=TP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===EF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(TP(l,o))),r.role){case Ete:case Ste:case xte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(TP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(TP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return CMe(r),t.modifies("bounds")}});function TP(e,t,n){return t(e.bounds.clear(),e,n)}const Kpe=":vega_identifier:";function Ate(e){Pe.call(this,0,e)}Ate.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Ate,Pe,{transform(e,t){const n=X9t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function X9t(e){return e._signals[Kpe]||(e._signals[Kpe]=e.add(0))}function FMe(e){Pe.call(this,null,e)}lt(FMe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Q9t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===EF?hF:dF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Q9t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function jMe(e){Pe.call(this,null,e)}const Xpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!BMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},BMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Qpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(BMe(i,s=e[n].bounds,t))return!0},J9t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Z9t=(e,t,n)=>{var r=e.range(),i=new As;return t===Tx||t===my?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Jpe=e=>(e.forEach(t=>t.opacity=1),e),Zpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(jMe,Pe,{transform(e,t){const n=Xpe[e.method]||Xpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Jpe(i),t=Zpe(t,e)),t;if(i=i.filter(J9t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Jpe(i),t=Zpe(t,e),s.length>=3&&Qpe(s,r)){do s=n(s,r);while(s.length>=3&&Qpe(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Z9t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function UMe(e){Pe.call(this,null,e)}lt(UMe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ia=new As;function Nw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function eBt(e){var t=e.items[0].orient;return t===kf||t===Of}function tBt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function nBt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=tBt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&lte(p),v=0,_=0,E,w;switch(ia.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case Tx:v=f||0,_=-c,w=Math.max(d,Math.min(h,-g.y1)),g.add(0,-w).add(l,0),p&&CP(e,p,w,m,y,0,-1,g);break;case kf:v=-c,_=f||0,w=Math.max(d,Math.min(h,-g.x1)),g.add(-w,0).add(0,l),p&&CP(e,p,w,m,y,1,-1,g);break;case Of:v=n+c,_=f||0,w=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(w,l),p&&CP(e,p,w,m,y,1,1,g);break;case my:v=f||0,_=r+c,w=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,w),p&&CP(e,p,w,m,0,0,1,g);break;default:v=i.x,_=i.y}return ag(g.translate(v,_),i),Nw(i,"x",v+o)|Nw(i,"y",_+o)&&(i.bounds=ia,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function CP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const eme=(e,t)=>Math.floor(Math.min(e,t)),tme=(e,t)=>Math.ceil(Math.max(e,t));function rBt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===EF)switch(i.role){case Ete:case Ste:case xte:break;case IMe:o.rowheaders.push(...s);break;case kMe:o.rowfooters.push(...s);break;case NMe:o.colheaders.push(...s);break;case PMe:o.colfooters.push(...s);break;case RMe:o.rowtitle=s[0];break;case DMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function iBt(e){return new As().set(0,0,e.width||0,e.height||0)}function sBt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ei(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function nme(e){return e<0?Math.ceil(-e):0}function zMe(e,t,n){var r=!n.nodirty,i=n.bounds===Cte?iBt:sBt,s=ia.set(0,0,0,0),o=Ei(n.align,a0),a=Ei(n.align,u0),u=Ei(n.padding,a0),l=Ei(n.padding,u0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),E=Array(d),w=Array(d),S,x,C,A,I,R,O,D,$,F,M;for(x=0;x<c;++x)p[x]=0;for(x=0;x<f;++x)y[x]=0;for(x=0;x<d;++x)R=t[x],I=w[x]=i(R),R.x=R.x||0,_[x]=0,R.y=R.y||0,E[x]=0,C=x%c,A=~~(x/c),m=Math.max(m,O=Math.ceil(I.x2)),v=Math.max(v,D=Math.ceil(I.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],D),h[x]=u+nme(I.x1),g[x]=l+nme(I.y1),r&&e.dirty(t[x]);for(x=0;x<d;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===xH)for(C=1;C<c;++C){for(M=0,x=C;x<d;x+=c)M<h[x]&&(M=h[x]);for(x=C;x<d;x+=c)h[x]=M+p[C-1]}else if(o===SP){for(M=0,x=0;x<d;++x)x%c&&M<h[x]&&(M=h[x]);for(x=0;x<d;++x)x%c&&(h[x]=M+m)}else for(o=!1,C=1;C<c;++C)for(x=C;x<d;x+=c)h[x]+=p[C-1];if(a===xH)for(A=1;A<f;++A){for(M=0,x=A*c,S=x+c;x<S;++x)M<g[x]&&(M=g[x]);for(x=A*c;x<S;++x)g[x]=M+y[A-1]}else if(a===SP){for(M=0,x=c;x<d;++x)M<g[x]&&(M=g[x]);for(x=c;x<d;++x)g[x]=M+v}else for(a=!1,A=1;A<f;++A)for(x=A*c,S=x+c;x<S;++x)g[x]+=y[A-1];for($=0,x=0;x<d;++x)$=h[x]+(x%c?$:0),_[x]+=$-t[x].x;for(C=0;C<c;++C)for(F=0,x=C;x<d;x+=c)F+=g[x],E[x]+=F-t[x].y;if(o&&Ei(n.center,a0)&&f>1)for(x=0;x<d;++x)I=o===SP?m:p[x%c],$=I-w[x].x2-t[x].x-_[x],$>0&&(_[x]+=$/2);if(a&&Ei(n.center,u0)&&c!==1)for(x=0;x<d;++x)I=a===SP?v:y[~~(x/c)],F=I-w[x].y2-t[x].y-E[x],F>0&&(E[x]+=F/2);for(x=0;x<d;++x)s.union(w[x].translate(_[x],E[x]));switch($=Ei(n.anchor,V9t),F=Ei(n.anchor,H9t),Ei(n.anchor,a0)){case ja:$-=s.width();break;case EH:$-=s.width()/2}switch(Ei(n.anchor,u0)){case ja:F-=s.height();break;case EH:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),x=0;x<d;++x)t[x].mark.bounds.clear();for(x=0;x<d;++x)R=t[x],R.x+=_[x]+=$,R.y+=E[x]+=F,s.union(R.mark.bounds.union(R.bounds.translate(_[x],E[x]))),r&&e.dirty(R);return s}function oBt(e,t,n){var r=rBt(t),i=r.marks,s=n.bounds===Cte?aBt:uBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=zMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Ei(n.headerBand,u0,null),c=AP(e,r.rowheaders,i,a,u,-Ei(o,"rowHeader"),eme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Ei(n.headerBand,a0,null),f=AP(e,r.colheaders,i,a,a,-Ei(o,"columnHeader"),eme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Ei(n.footerBand,u0,null),d=AP(e,r.rowfooters,i,a,u,Ei(o,"rowFooter"),tme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Ei(n.footerBand,a0,null),h=AP(e,r.colfooters,i,a,a,Ei(o,"columnFooter"),tme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Ei(n.titleAnchor,u0),g=Ei(o,"rowTitle"),g=p===ja?d+g:c-g,m=Ei(n.titleBand,u0,.5),rme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Ei(n.titleAnchor,a0),g=Ei(o,"columnTitle"),g=p===ja?h+g:f-g,m=Ei(n.titleBand,a0,.5),rme(e,r.coltitle,g,1,y,m))}function aBt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function uBt(e,t){return e.bounds[t]}function AP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,E,w,S,x,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,E=t.length;v<E;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,E=t.length;v<E;++v,y+=f){for(S=t[v],w=S.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=d);a?(C=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),A=m):(C=m,A=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),w.union(S.bounds.translate(C-(S.x||0),A-(S.y||0))),S.x=C,S.y=A,e.dirty(S),g=o(g,w[l])}return g}function rme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function lBt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function cBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function fBt(e,t,n,r,i,s,o){const a=lBt(n,t),u=cBt(e,a("offset",0)),l=a("anchor",wte),c=l===ja?1:l===EH?.5:0,f={align:xH,bounds:a("bounds",Cte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case kf:f.anchor={x:Math.floor(r.x1)-u,column:ja,y:c*(o||r.height()+2*r.y1),row:l};break;case Of:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Tx:f.anchor={y:Math.floor(i.y1)-u,row:ja,x:c*(s||i.width()+2*i.x1),column:l};break;case my:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case j9t:f.anchor={x:u,y:u};break;case B9t:f.anchor={x:s-u,y:u,column:ja};break;case U9t:f.anchor={x:u,y:o-u,row:ja};break;case z9t:f.anchor={x:s-u,y:o-u,column:ja,row:ja};break}return f}function dBt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),pBt(e,n,n.items[0].items[0]),s=hBt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Y9t&&mBt(n.items[0].items[0].items[0].items),i!==Tte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,ag(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function hBt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function pBt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&QT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case kf:i+=Math.ceil(o.bounds.width())+u;break;case Of:case my:break;default:s+=o.bounds.height()+u}switch((i||s)&&QT(e,n,i,s),o.orient){case kf:c+=L_(t,n,o,a,1,1);break;case Of:l+=L_(t,n,o,ja,0,0)+u,c+=L_(t,n,o,a,1,1);break;case my:l+=L_(t,n,o,a,0,0),c+=L_(t,n,o,ja,-1,0,1)+u;break;default:l+=L_(t,n,o,a,0,0)}(l||c)&&QT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(QT(e,n,-l,0),QT(e,o,-l,0))}}function L_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:lte(n);return Math.round(r===wte?f:r===ja?d-h:.5*(c-h))}function QT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function mBt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function gBt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===kf||a===Of?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==EF?a===kf?(p=i.y2,h=i.y1):a===Of?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===kf&&(p=r,h=0),_=u===wte?p:u===ja?h:(p+h)/2,d&&d.text){switch(a){case Tx:case my:v=f.bounds.height()+c;break;case kf:y=f.bounds.width()+c;break;case Of:y=-f.bounds.width()-c;break}ia.clear().union(d.bounds),ia.translate(y-(d.x||0),v-(d.y||0)),Nw(d,"x",y)|Nw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ia),d.mark.bounds.clear().union(ia),e.dirty(d)),ia.clear().union(d.bounds)}else ia.clear();switch(ia.union(f.bounds),a){case Tx:m=_,g=i.y1-ia.height()-l;break;case kf:m=i.x1-ia.width()-l,g=_;break;case Of:m=i.x2+ia.width()+l,g=_;break;case my:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return Nw(s,"x",m)|Nw(s,"y",g)&&(ia.translate(m,g),e.dirty(s),s.bounds.clear().union(ia),t.bounds.clear().union(ia),e.dirty(s)),s.bounds}function VMe(e){Pe.call(this,null,e)}lt(VMe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&oBt(n,r,e.layout),vBt(n,r,e)}),yBt(e.mark.group)?t.reflow():t}});function yBt(e){return e&&e.mark.role!=="legend-entry"}function vBt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new As().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Ete:h=eBt(f)?a:u,h.union(nBt(e,f,i,s));break;case xte:c=f;break;case Ste:l.push(dBt(e,f));break;case q9t:case W9t:case IMe:case kMe:case RMe:case NMe:case PMe:case DMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Of,d!==Tte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];zMe(e,v,fBt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===OMe||n.autosize.type===$Me||n.autosize.type===MMe))switch(y.orient){case kf:case Of:o.add(v.x1,0).add(v.x2,0);break;case Tx:case my:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(gBt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),bBt(e,t,o,n)}function bBt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===G9t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Tte?(l=0,f=0,u=o,c=a):s===OMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===$Me?(u=Math.max(0,o-l-d),a=c+f+h):s===MMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===K9t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const _Bt=Object.freeze(Object.defineProperty({__proto__:null,bound:LMe,identifier:Ate,mark:FMe,overlap:jMe,render:UMe,viewlayout:VMe},Symbol.toStringTag,{value:"Module"}));function HMe(e){Pe.call(this,null,e)}lt(HMe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=qee(s,o,e.minstep),u=e.format||y$e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?g$e(s,e.values,a):Wee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>xr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(xr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function qMe(e){Pe.call(this,null,e)}function wBt(){return xr({})}function EBt(e){const t=VS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(qMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||wBt,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=EBt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function WMe(e){Pe.call(this,null,e)}lt(WMe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Ag,u=i.enter||Ag,l=i.exit||Ag,c=(s&&!o?i[s]:a)||Ag;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Ag&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ag&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Ag){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function GMe(e){Pe.call(this,[],e)}lt(GMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||WD,o=e.scale,a=+e.limit,u=qee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===WD,c=e.format||w$e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||_$e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===WD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Sa(m=p||8),i=i.map((y,v)=>xr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(xr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===K5t?(d=o.domain(),h=h$e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>xr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=ojt(o),i=f.map((y,v)=>xr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const xBt=e=>e.source.x,SBt=e=>e.source.y,TBt=e=>e.target.x,CBt=e=>e.target.y;function Ite(e){Pe.call(this,{},e)}Ite.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Ite,Pe,{transform(e,t){var n=e.sourceX||xBt,r=e.sourceY||SBt,i=e.targetX||TBt,s=e.targetY||CBt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=ime.get(u+"-"+a)||ime.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const YMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,ABt=(e,t,n,r)=>YMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),KMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},IBt=(e,t,n,r)=>KMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),XMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},kBt=(e,t,n,r)=>XMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),RBt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,NBt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,PBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},DBt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},OBt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},$Bt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},ime=VS({line:YMe,"line-radial":ABt,arc:KMe,"arc-radial":IBt,curve:XMe,"curve-radial":kBt,"orthogonal-horizontal":RBt,"orthogonal-vertical":NBt,"orthogonal-radial":PBt,"diagonal-horizontal":DBt,"diagonal-vertical":OBt,"diagonal-radial":$Bt});function kte(e){Pe.call(this,null,e)}kte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(kte,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||BS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/jxe(l),h=Mu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const MBt=5;function LBt(e){const t=e.type;return!e.bins&&(t===bx||t===fR||t===dR)}function QMe(e){return zee(e)&&e!==bh}const FBt=td(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function JMe(e){Pe.call(this,null,e),this.modified(!0)}lt(JMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=jBt(e);(!r||i!==r.type)&&(this.value=r=yr(i)());for(i in e)if(!FBt[i]){if(i==="padding"&&QMe(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return qBt(r,e,HBt(r,e,UBt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function jBt(e){var t=e.type,n="",r;return t===bh?bh+"-"+bx:(BBt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?bh+"-":r===3?GS+"-":""),(n+t||bx).toLowerCase())}function BBt(e){const t=e.type;return zee(t)&&t!==lb&&t!==cb&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function UBt(e,t,n){const r=zBt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&LBt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return QMe(s)&&t.padding&&i[0]!==Qn(i)&&(i=VBt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(ZMe(s,i,n)),s===Fee&&e.unknown(t.domainImplicit?hz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&qee(e,t.nice)||null),i.length}function zBt(e,t,n){return t?(e.domain(ZMe(e.type,t,n)),t.length):-1}function VBt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Bm?NZ(t,null,a):e===dR?sM(t,null,a,.5):e===fR?sM(t,null,a,i||1):e===aF?PZ(t,null,a,s||1):RZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function ZMe(e,t,n){if(u$e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function HBt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Mu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===jee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function qBt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=WBt(r,t,n);else if(t.scheme&&(s=GBt(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&l$e(r))return e.interpolator(cF(SH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Vee(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?bk:eg),s&&e.range(SH(s,t.reverse))}function WBt(e,t,n){e!==n$e&&e!==lH&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===lH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Lee(n,i,r)]}function GBt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=cF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Hee(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===lF?n+1:e===jee?n-1:e===_x||e===uF?+t.schemeCount||MBt:n,l$e(e)?sme(s,r,t.reverse):_n(s)?d$e(sme(s,r),n):e===Fee?s:s.slice(0,n)}function sme(e,t,n){return _n(e)&&(t||n)?f$e(e,SH(t||[0,1],n)):e}function SH(e,t){return t?e.slice().reverse():e}function eLe(e){Pe.call(this,null,e)}lt(eLe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Jb(e.sort)),this.modified(n),t}});const ome="zero",tLe="center",nLe="normalize",rLe=["y0","y1"];function Rte(e){Pe.call(this,null,e)}Rte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:ome,values:[ome,tLe,nLe]},{name:"as",type:"string",array:!0,length:2,default:rLe}]};lt(Rte,Pe,{transform(e,t){var n=e.as||rLe,r=n[0],i=n[1],s=Jb(e.sort),o=e.field||BS,a=e.offset===tLe?YBt:e.offset===nLe?KBt:XBt,u,l,c,f;for(u=QBt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function YBt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function KBt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function XBt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function QBt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const JBt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:HMe,datajoin:qMe,encode:WMe,legendentries:GMe,linkpath:Ite,pie:kte,scale:JMe,sortitems:eLe,stack:Rte},Symbol.toStringTag,{value:"Module"}));var ZBt=Math.abs,TH=Math.cos,EM=Math.sin,eUt=1e-6,iLe=Math.PI,CH=iLe/2,ame=tUt(2);function ume(e){return e>1?CH:e<-1?-CH:Math.asin(e)}function tUt(e){return e>0?Math.sqrt(e):0}function nUt(e,t){var n=e*EM(t),r=30,i;do t-=i=(t+EM(t)-n)/(1+TH(t));while(ZBt(i)>eUt&&--r>0);return t/2}function rUt(e,t,n){function r(i,s){return[e*i*TH(s=nUt(n,s)),t*EM(s)]}return r.invert=function(i,s){return s=ume(s/t),[i/(e*TH(s)),ume((2*s+EM(2*s))/n)]},r}var iUt=rUt(ame/CH,ame,iLe);function sUt(){return Qh(iUt).scale(169.529)}const oUt=bTe(),AH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function aUt(e,t){return function n(){const r=t();return r.type=e,r.path=bTe().projection(r),r.copy=r.copy||function(){const i=n();return AH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},o$e(r)}}function Nte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(xM[e]=aUt(e,t),this):xM[e]||null}function sLe(e){return e&&e.path||oUt}const xM={albers:wTe,albersusa:Pht,azimuthalequalarea:Dht,azimuthalequidistant:Oht,conicconformal:Lht,conicequalarea:B3,conicequidistant:Bht,equalEarth:zht,equirectangular:Fht,gnomonic:Vht,identity:Hht,mercator:$ht,mollweide:sUt,naturalEarth1:qht,orthographic:Wht,stereographic:Ght,transversemercator:Yht};for(const e in xM)Nte(e,xM[e]);function uUt(){}const wp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function oLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),lUt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(cUt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,wp[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,wp[m|g<<1].forEach(_);for(wp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,wp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,wp[m|g<<1|y<<2|v<<3].forEach(_);wp[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,wp[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,wp[y<<2|v<<3].forEach(_);wp[y<<3].forEach(_);function _(E){var w=[E[0][0]+h,E[0][1]+p],S=[E[1][0]+h,E[1][1]+p],x=o(w),C=o(S),A,I;(A=d[x])?(I=f[C])?(delete d[A.end],delete f[I.start],A===I?(A.ring.push(S),c(A.ring)):f[A.start]=d[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=C]=A):(A=f[C])?(I=d[x])?(delete f[A.start],delete d[I.end],A===I?(A.ring.push(S),c(A.ring)):f[I.start]=d[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(w),f[A.start=x]=A):f[x]=d[C]={start:x,end:C,ring:[w,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:uUt,r):n===a},r}function lUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function cUt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=fUt(e,t[n]))return i;return 0}function fUt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(dUt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function dUt(e,t,n){var r;return hUt(e,t,n)&&pUt(e[r=+(e[0]===t[0])],n[r],t[r])}function hUt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function pUt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function aLe(e,t,n){return function(r){var i=Mh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?q0(s,o,e):a/(e+1);return Mu(s+u,o,u)}}function Pte(e){Pe.call(this,null,e)}Pte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Pte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||xa,s=oLe().smooth(e.smooth!==!1),o=e.thresholds||mUt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));gUt(f,c,l,e),f.forEach(d=>{u.push(J4(l,xr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mUt(e,t,n){const r=aLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>sm(t(i).values)))}function gUt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(uLe(t,o,a,u,l))}function uLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function lme(e,t,n){const r=e>=0?e:QZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function X9(e){return _n(e)?e:Sa(+e)}function lLe(){var e=u=>u[0],t=u=>u[1],n=BS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=lme(r[0],u,e)>>o,f=lme(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(E=>{const w=d+(+e(E)>>o),S=h+(+t(E)>>o);w>=0&&w<p&&S>=0&&S<m&&(g[w+S*p]+=+n(E))}),c>0&&f>0?(F_(p,m,g,y,c),j_(p,m,y,g,f),F_(p,m,g,y,c),j_(p,m,y,g,f),F_(p,m,g,y,c),j_(p,m,y,g,f)):c>0?(F_(p,m,g,y,c),F_(p,m,y,g,c),F_(p,m,g,y,c),v=y):f>0&&(j_(p,m,g,y,f),j_(p,m,y,g,f),j_(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/jxe(v);for(let E=0,w=p*m;E<w;++E)v[E]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=X9(u),a):e},a.y=function(u){return arguments.length?(t=X9(u),a):t},a.weight=function(u){return arguments.length?(n=X9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function F_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function j_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Dte(e){Pe.call(this,null,e)}Dte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yUt=["x","y","weight","size","cellSize","bandwidth"];function cLe(e,t){return yUt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Dte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=vUt(r,e.groupby),s=(e.groupby||[]).map(Ji),o=cLe(lLe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>xr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function vUt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ote(e){Pe.call(this,null,e)}Ote.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Ote,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=oLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||aLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=cLe(lLe(),e)(i,!0),u=uLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(xr),n}});const IH="Feature",$te="FeatureCollection",bUt="MultiPoint";function Mte(e){Pe.call(this,null,e)}Mte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(Mte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&xa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ga(a))||s&&t.modified(ga(s))||o&&t.modified(ga(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:IH,geometry:{type:bUt,coordinates:r}})),this.value={type:$te,features:n}}});function Lte(e){Pe.call(this,null,e)}Lte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(Lte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||xa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=sLe(e.projection),n.materialize().reflow()):o=i===xa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=_Ut(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function _Ut(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Fte(e){Pe.call(this,null,e)}Fte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(Fte,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function jte(e){Pe.call(this,null,e)}jte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(jte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=wUt(sLe(e.projection),e.field||jc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function wUt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Bte(e){Pe.call(this,[],e),this.generator=fht()}Bte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(Bte,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(c3e(n[0],i)):t.add.push(xr(i)),n[0]=i,t}});function Ute(e){Pe.call(this,null,e)}Ute.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(Ute,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||xa,s=xUt(e.opacity,e),o=EUt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?sm(n.map(l=>sm(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=sm(c.values||[])),l[a]=SUt(c,f,o.dep?o:Sa(o(f)),s.dep?s:Sa(s(f)))}),t.reflow(!0).modifies(a)}});function EUt(e,t){let n;return _n(e)?(n=r=>W0(e(r,t)),n.dep=fLe(e)):n=Sa(W0(e||"#888")),n}function xUt(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=fLe(e)):e?n=Sa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function fLe(e){if(!_n(e))return!1;const t=td(ga(e));return t.$x||t.$y||t.$value||t.$max}function SUt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Kg,d=D0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const E=n(t);m[y+0]=E.r,m[y+1]=E.g,m[y+2]=E.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function dLe(e){Pe.call(this,null,e),this.modified(!0)}lt(dLe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=CUt(e.type),AH.forEach(r=>{e[r]!=null&&cme(n,r,e[r])})):AH.forEach(r=>{e.modified(r)&&cme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&TUt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TUt(e,t){const n=AUt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function CUt(e){const t=Nte((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function cme(e,t,n){_n(e[t])&&e[t](n)}function AUt(e){return e=pt(e),e.length===1?e[0]:{type:$te,features:e.reduce((t,n)=>t.concat(IUt(n)),[])}}function IUt(e){return e.type===$te?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===IH?t:{type:IH,geometry:t})}const kUt=Object.freeze(Object.defineProperty({__proto__:null,contour:Ote,geojson:Mte,geopath:Lte,geopoint:Fte,geoshape:jte,graticule:Bte,heatmap:Ute,isocontour:Pte,kde2d:Dte,projection:dLe},Symbol.toStringTag,{value:"Module"})),fme={center:tdt,collide:_dt,nbody:Ndt,link:Edt,x:Pdt,y:Ddt},X2="forces",kH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],RUt=["static","iterations"],hLe=["x","y","vx","vy"];function zte(e){Pe.call(this,null,e)}zte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:hLe}]};lt(zte,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(kH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&pLe(n,e,0,t)):(this.value=n=PUt(t.source,e),n.on("tick",NUt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(RUt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==X2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(hLe)}});function NUt(e,t){return()=>e.touch(t).run()}function PUt(e,t){const n=Rdt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),pLe(n,t,!0).on("end",()=>s=!0)}function pLe(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=kH.length;s<o;++s)a=kH[s],a!==X2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=X2+s,a=n||t.modified(X2,s)?OUt(i[s]):r&&DUt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(X2+s,null);return e.numForces=i.length,e}function DUt(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(ga(r)))return 1;return 0}function OUt(e){var t,n;jt(fme,e.force)||Le("Unrecognized force: "+e.force),t=fme[e.force]();for(n in e)_n(t[n])&&$Ut(t[n],e[n],e);return t}function $Ut(e,t,n){e(_n(t)?r=>t(r,n):t)}const MUt=Object.freeze(Object.defineProperty({__proto__:null,force:zte},Symbol.toStringTag,{value:"Module"}));function RH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Vte(e){Pe.call(this,null,e)}Vte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const LUt=e=>e.values;lt(Vte,Pe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Q4(o.data)&&i.rem.push(o.data)}),this.value=s=A6({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),FUt()).entries(i.source)},LUt),n&&s.each(o=>{o.children&&(o=xr(o.data),i.add.push(o),i.source.push(o))}),RH(s,Lt,Lt)),i.source.root=s,i}});function FUt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ug(e){Pe.call(this,null,e)}const jUt=(e,t)=>e.parent===t.parent?1:2;lt(ug,Pe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Jb(e.sort,o=>o.data)),BUt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?jUt:BS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>UUt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function BUt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function UUt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const NH=["x","y","r","depth","children"];function Hte(e){ug.call(this,e)}Hte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:NH.length,default:NH}]};lt(Hte,ug,{layout:MTe,params:["radius","size","padding"],fields:NH});const PH=["x0","y0","x1","y1","depth","children"];function qte(e){ug.call(this,e)}qte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PH.length,default:PH}]};lt(qte,ug,{layout:Dpt,params:["size","round","padding"],fields:PH});function Wte(e){Pe.call(this,null,e)}Wte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(Wte,Pe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?RH(Gle().id(e.key).parentId(e.parentKey)(i.source),e.key,Bc):RH(Gle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const dme={tidy:Vpt,cluster:npt},DH=["x","y","depth","children"];function Gte(e){ug.call(this,e)}Gte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:DH.length,default:DH}]};lt(Gte,ug,{layout(e){const t=e||"tidy";if(jt(dme,t))return dme[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:DH});function Yte(e){Pe.call(this,[],e)}Yte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Yte,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(xr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const hme={binary:qpt,dice:xk,slice:I6,slicedice:Wpt,squarify:BTe,resquarify:Gpt},OH=["x0","y0","x1","y1","depth","children"];function Kte(e){ug.call(this,e)}Kte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OH.length,default:OH}]};lt(Kte,ug,{layout(){const e=Hpt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(hme,t)?e.tile(hme[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:OH});const zUt=Object.freeze(Object.defineProperty({__proto__:null,nest:Vte,pack:Hte,partition:qte,stratify:Wte,tree:Gte,treelinks:Yte,treemap:Kte},Symbol.toStringTag,{value:"Module"})),Q9=4278190080;function VUt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function HUt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=D0(s,o).getContext("2d"),l=D0(s,o).getContext("2d"),c=a&&D0(s,o).getContext("2d");n.forEach(C=>tO(u,C,!1)),tO(l,t,!1),a&&tO(c,t,!0);const f=J9(u,s,o),d=J9(l,s,o),h=a&&J9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,E,w,S,x;for(y=0;y<o;++y)for(g=0;g<s;++g)E=y*s+g,w=f[E]&Q9,x=d[E]&Q9,S=a&&h[E]&Q9,(w||S||x)&&(v=e(g),_=e(y),!i&&(w||x)&&p.set(v,_),a&&(w||S)&&m.set(v,_));return[p,m]}function J9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function tO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>tO(e,s.items,n))}):Gl[r].draw(e,{items:n?t.map(qUt):t})}function qUt(e){const t=J4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ep=5,$a=31,NI=32,Fg=new Uint32Array(NI+1),xf=new Uint32Array(NI+1);xf[0]=0;Fg[0]=~xf[0];for(let e=1;e<=NI;++e)xf[e]=xf[e-1]<<1|1,Fg[e]=~xf[e];function WUt(e,t){const n=new Uint32Array(~~((e*t+NI)/NI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ep]&1<<(a&$a)},set:(s,o)=>{const a=o*e+s;r(a>>>Ep,1<<(a&$a))},clear:(s,o)=>{const a=o*e+s;i(a>>>Ep,~(1<<(a&$a)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ep,h=f>>>Ep,d===h){if(n[d]&Fg[c&$a]&xf[(f&$a)+1])return!0}else{if(n[d]&Fg[c&$a]||n[h]&xf[(f&$a)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ep,d=c>>>Ep,f===d)r(f,Fg[l&$a]&xf[(c&$a)+1]);else for(r(f,Fg[l&$a]),r(d,xf[(c&$a)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ep,d=c>>>Ep,f===d)i(f,xf[l&$a]|Fg[(c&$a)+1]);else for(i(f,xf[l&$a]),i(d,Fg[(c&$a)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function GUt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>WUt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function YUt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Pl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function SM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function l0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function KUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!SM(p,m,d,h,i,s)&&!l0(e,p,m,h,d,g,o,a)&&!l0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,l0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Pl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,E,w,S,x,C,A,I,R,O,D,$,F,M,B,z;for(let H=0;H<f;++H){for(v=c[H].x,E=c[H].y,_=c[H].x2===void 0?v:c[H].x2,w=c[H].y2===void 0?E:c[H].y2,v>_&&(z=v,v=_,_=z),E>w&&(z=E,E=w,w=z),I=e(v),O=e(_),R=~~((I+O)/2),D=e(E),F=e(w),$=~~((D+F)/2),C=R;C>=I;--C)for(A=$;A>=D;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=R;C<=O;++C)for(A=$;A<=F;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(_-v+w-E),S=(v+_)/2,x=(E+w)/2,M>=y&&!SM(S,x,h,d,i,s)&&!l0(e,S,x,d,h,d,o,null)&&(y=M,l.x=S,l.y=x,g=!0))}return m||g?(S=h/2,x=d/2,o.setRange(e(l.x-S),e(l.y-x),e(l.x+S),e(l.y+x)),l.align="center",l.baseline="middle",!0):!1}}const XUt=[-1,-1,1,1],QUt=[-1,1,-1,1];function JUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Pl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,E,w,S,x,C,A,I,R,O,D,$;for(let F=0;F<f;++F){for(_=c[F].x,w=c[F].y,E=c[F].x2===void 0?_:c[F].x2,S=c[F].y2===void 0?w:c[F].y2,p.push([e((_+E)/2),e((w+S)/2)]);p.length;)if([A,I]=p.pop(),!(o.get(A,I)||a.get(A,I)||u.get(A,I))){u.set(A,I);for(let M=0;M<4;++M)x=A+XUt[M],C=I+QUt[M],u.outOfBounds(x,C,x,C)||p.push([x,C]);if(x=e.invert(A),C=e.invert(I),R=m,O=s,!SM(x,C,h,d,i,s)&&!l0(e,x,C,d,h,R,o,a)&&!l0(e,x,C,d,h,d,o,null)){for(;O-R>=1;)D=(R+O)/2,l0(e,x,C,d,h,D,o,a)?O=D:R=D;R>m&&(l.x=x,l.y=C,m=R,g=!0)}}!g&&!n&&($=Math.abs(E-_+S-w),x=(_+E)/2,C=(w+S)/2,$>=v&&!SM(x,C,h,d,i,s)&&!l0(e,x,C,d,h,d,o,null)&&(v=$,l.x=x,l.y=C,y=!0))}return g||y?(x=h/2,C=d/2,o.setRange(e(l.x-x),e(l.y-C),e(l.x+x),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const ZUt=["right","center","left"],e7t=["bottom","middle","top"];function t7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,E,w,S,x,C,A,I,R;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,x=c[4+p]+y*f*p/2+r[O]*p*g,E=x-f/2,w=x+f/2,C=e(v),I=e(E),R=e(w),!d)if(pme(C,C,I,R,o,a,v,v,E,w,c,m))d=Pl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,_=S+d/2,C=e(v),A=e(_),pme(C,A,I,R,o,a,v,_,E,w,c,m))return l.x=h?h*y<0?_:v:S,l.y=p?p*y<0?w:E:x,l.align=ZUt[h*y+1],l.baseline=e7t[p*y+1],o.setRange(C,I,A,R),!0}return!1}}function pme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const Z9=0,eB=4,tB=8,nB=0,rB=1,iB=2,n7t={"top-left":Z9+nB,top:Z9+rB,"top-right":Z9+iB,left:eB+nB,middle:eB+rB,right:eB+iB,"bottom-left":tB+nB,bottom:tB+rB,"bottom-right":tB+iB},r7t={naive:YUt,"reduced-search":KUt,floodfill:JUt};function i7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=s7t(r,f),h=o7t(i,f),p=a7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=u7t(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let E=-1,w=-1;const S=e.map(I=>{const R=v?Pl.width(I,I.text):void 0;return E=Math.max(E,R),w=Math.max(w,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(E,w)+Math.max(...r):l;const x=GUt(t[0],t[1],l);let C;if(!_){n&&S.sort((O,D)=>n(O.datum,D.datum));let I=!1;for(let O=0;O<h.length&&!I;++O)I=h[O]===5||d[O]<0;const R=(p&&o||g)&&e.map(O=>O.datum);C=s.length||R?HUt(x,R||[],s,I,g):VUt(x,o&&S)}const A=g?r7t[c](x,C,o,u):t7t(x,C,h,d);return S.forEach(I=>I.opacity=+A(I)),S}function s7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function o7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=n7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function a7t(e){return e&&e.mark&&e.mark.marktype}function u7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const $H=["x","y","opacity","align","baseline"],mLe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Xte(e){Pe.call(this,null,e)}Xte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:mLe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:$H.length,default:$H}]};lt(Xte,Pe,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||$H;return i7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||mLe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const l7t=Object.freeze(Object.defineProperty({__proto__:null,label:Xte},Symbol.toStringTag,{value:"Module"}));function gLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Qte(e){Pe.call(this,null,e)}Qte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(Qte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=gLe(r,e.groupby),s=(e.groupby||[]).map(Ji),o=s.length,a=e.as||[Ji(e.x),Ji(e.y)],u=[];i.forEach(l=>{I3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(xr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const MH={constant:lee,linear:cee,log:S3e,exp:T3e,pow:C3e,quad:fee,poly:A3e},c7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Jte(e){Pe.call(this,null,e)}Jte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(MH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(Jte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=gLe(r,e.groupby),s=(e.groupby||[]).map(Ji),o=e.method||"linear",a=e.order==null?3:e.order,u=c7t(o,a),l=e.as||[Ji(e.x),Ji(e.y)],c=MH[o],f=[];let d=e.extent;jt(MH,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(xr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Mh(h,e.x),y=v=>{const _={};for(let E=0;E<s.length;++E)_[s[E]]=h.dims[E];_[l[0]]=v[0],_[l[1]]=v[1],f.push(xr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):sF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const f7t=Object.freeze(Object.defineProperty({__proto__:null,loess:Qte,regression:Jte},Symbol.toStringTag,{value:"Module"}));function Zte(e){Pe.call(this,null,e)}Zte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const d7t=[-1e5,-1e5,1e5,1e5];lt(Zte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:d7t;const s=this.value=hK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!p7t(u)?h7t(u):null}return t.reflow(e.modified()).modifies(n)}});function h7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function p7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const m7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Zte},Symbol.toStringTag,{value:"Module"}));var sB=Math.PI/180,Q2=64,nO=2048;function g7t(){var e=[256,256],t,n,r,i,s,o,a,u=yLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(D0()),m=E7t((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],E=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,x)=>x.size-S.size);++v<y;){var w=E[v];w.x=e[0]*(c()+.5)>>1,w.y=e[1]*(c()+.5)>>1,y7t(p,w,E,v),w.hasText&&h(m,w,g)&&(_.push(w),g?b7t(g,w):g=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(Q2<<5)/m,p.height=nO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),E=u(e),w=c()<.5?1:-1,S=-w,x,C,A;(x=E(S+=w))&&(C=~~x[0],A=~~x[1],!(Math.min(Math.abs(C),Math.abs(A))>=_));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!v7t(m,p,e[0]))&&(!g||_7t(m,g))){for(var I=m.sprite,R=m.width>>5,O=e[0]>>5,D=m.x-(R<<4),$=D&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(D>>5),z,H=0;H<M;H++){z=0;for(var P=0;P<=R;P++)p[B+P]|=z<<F|(P<R?(z=I[H*R+P])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=m1(p),f):n},f.fontStyle=function(p){return arguments.length?(i=m1(p),f):i},f.fontWeight=function(p){return arguments.length?(s=m1(p),f):s},f.rotate=function(p){return arguments.length?(o=m1(p),f):o},f.text=function(p){return arguments.length?(t=m1(p),f):t},f.spiral=function(p){return arguments.length?(u=x7t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=m1(p),f):r},f.padding=function(p){return arguments.length?(a=m1(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function y7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(Q2<<5)/s,nO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*sB),g=Math.cos(t.rotate*sB),y=c*g,v=c*m,_=d*g,E=d*m;c=Math.max(Math.abs(y+E),Math.abs(y-E))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=Q2<<5&&(o=0,a+=u,u=0),a+d>=nO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*sB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var w=i.getImageData(0,0,(Q2<<5)/s,nO/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),I=w[(a+p)*(Q2<<5)+(o+h)<<2]?1<<31-h%32:0;S[A]|=I,x|=I}x?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function v7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function b7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function _7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function yLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function w7t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function E7t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function m1(e){return typeof e=="function"?e:function(){return e}}var x7t={archimedean:yLe,rectangular:w7t};const vLe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],S7t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function ene(e){Pe.call(this,g7t(),e)}ene.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:vLe}]};lt(ene,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||S7t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||vLe;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Sa(a),u){const p=a,m=yr("sqrt")().domain(Mh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(zc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const T7t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:ene},Symbol.toStringTag,{value:"Module"})),C7t=e=>new Uint8Array(e),A7t=e=>new Uint16Array(e),QC=e=>new Uint32Array(e);function I7t(){let e=8,t=[],n=QC(0),r=IP(0,e),i=IP(0,e);return{data:()=>t,seen:()=>n=k7t(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=IP(s,e,r),i=IP(s,e))}}}function k7t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function IP(e,t,n){const r=(t<257?C7t:t<65537?A7t:QC)(e);return n&&r.set(n),r}function mme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function gme(){let e=QC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=QC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=R7t(h,d),c)p=t,m=e,t=Array(c+f),e=QC(c+f),N7t(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Sat(u,a[0],0,l),H0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function R7t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Aat(e,t)}function N7t(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function tne(e){Pe.call(this,I7t(),e),this._indices=null,this._dims=null}tne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(tne,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=gme()),s.push(mme(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,E,w,S,x;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},v=t.mod,w=0,S=v.length;w<S;++w)E[v[w]._index]=1;for(w=0;w<h;++w)x=r[w],(!o[w]||e.modified("fields",w)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=gme(),p[y]=m=g.insert(x,t.source,0)),o[w]=mme(g,w,i[w]).onAdd(m,u));for(w=0,S=a.data().length;w<S;++w)_[w]||(l[w]!==u[w]?f.push(w):E[w]&&u[w]!==c&&d.push(w));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function nne(e){Pe.call(this,null,e)}nne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(nne,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const P7t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:tne,resolvefilter:nne},Symbol.toStringTag,{value:"Module"})),D7t="RawCode",db="Literal",O7t="Property",$7t="Identifier",M7t="ArrayExpression",L7t="BinaryExpression",bLe="CallExpression",F7t="ConditionalExpression",j7t="LogicalExpression",B7t="MemberExpression",U7t="ObjectExpression",z7t="UnaryExpression";function fd(e){this.type=e}fd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=V7t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function V7t(e){switch(e.type){case M7t:return e.elements;case L7t:case j7t:return[e.left,e.right];case bLe:return[e.callee].concat(e.arguments);case F7t:return[e.test,e.consequent,e.alternate];case B7t:return[e.object,e.property];case U7t:return e.properties;case O7t:return[e.key,e.value];case z7t:return[e.argument];case $7t:case db:case D7t:default:return[]}}var ip,kt,$e,va,Or,xF=1,SR=2,hb=3,Xy=4,SF=5,t_=6,Tu=7,TR=8,H7t=9;ip={};ip[xF]="Boolean";ip[SR]="<end>";ip[hb]="Identifier";ip[Xy]="Keyword";ip[SF]="Null";ip[t_]="Numeric";ip[Tu]="Punctuator";ip[TR]="String";ip[H7t]="RegularExpression";var q7t="ArrayExpression",W7t="BinaryExpression",G7t="CallExpression",Y7t="ConditionalExpression",_Le="Identifier",K7t="Literal",X7t="LogicalExpression",Q7t="MemberExpression",J7t="ObjectExpression",Z7t="Property",ezt="UnaryExpression",so="Unexpected token %0",tzt="Unexpected number",nzt="Unexpected string",rzt="Unexpected identifier",izt="Unexpected reserved word",szt="Unexpected end of input",LH="Invalid regular expression",oB="Invalid regular expression: missing /",wLe="Octal literals are not allowed in strict mode.",ozt="Duplicate data property in object literal not allowed in strict mode",No="ILLEGAL",PI="Disabled.",azt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),uzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function TF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Op(e){return e>=48&&e<=57}function rne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function JC(e){return"01234567".indexOf(e)>=0}function lzt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function DI(e){return e===10||e===13||e===8232||e===8233}function CR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&azt.test(String.fromCharCode(e))}function TM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&uzt.test(String.fromCharCode(e))}const czt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function ELe(){for(;$e<va;){const e=kt.charCodeAt($e);if(lzt(e)||DI(e))++$e;else break}}function FH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<va&&rne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):mr({},so,No);return String.fromCharCode(i)}function fzt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&mr({},so,No);$e<va&&(e=kt[$e++],!!rne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&mr({},so,No),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function xLe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&mr({},so,No),++$e,e=FH("u"),(!e||e==="\\"||!CR(e.charCodeAt(0)))&&mr({},so,No),t=e);$e<va&&(e=kt.charCodeAt($e),!!TM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&mr({},so,No),++$e,e=FH("u"),(!e||e==="\\"||!TM(e.charCodeAt(0)))&&mr({},so,No),t+=e);return t}function dzt(){var e,t;for(e=$e++;$e<va;){if(t=kt.charCodeAt($e),t===92)return $e=e,xLe();if(TM(t))++$e;else break}return kt.slice(e,$e)}function hzt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?xLe():dzt(),t.length===1?n=hb:czt.hasOwnProperty(t)?n=Xy:t==="null"?n=SF:t==="true"||t==="false"?n=xF:n=hb,{type:n,value:t,start:e,end:$e}}function aB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Tu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Tu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Tu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Tu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Tu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Tu,value:i,start:e,end:$e};if(i==="//"&&mr({},so,No),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Tu,value:r,start:e,end:$e};mr({},so,No)}function pzt(e){let t="";for(;$e<va&&rne(kt[$e]);)t+=kt[$e++];return t.length===0&&mr({},so,No),CR(kt.charCodeAt($e))&&mr({},so,No),{type:t_,value:parseInt("0x"+t,16),start:e,end:$e}}function mzt(e){let t="0"+kt[$e++];for(;$e<va&&JC(kt[$e]);)t+=kt[$e++];return(CR(kt.charCodeAt($e))||Op(kt.charCodeAt($e)))&&mr({},so,No),{type:t_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function yme(){var e,t,n;if(n=kt[$e],TF(Op(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,pzt(t);if(JC(n))return mzt(t);n&&Op(n.charCodeAt(0))&&mr({},so,No)}for(;Op(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Op(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Op(kt.charCodeAt($e)))for(;Op(kt.charCodeAt($e));)e+=kt[$e++];else mr({},so,No);return CR(kt.charCodeAt($e))&&mr({},so,No),{type:t_,value:parseFloat(e),start:t,end:$e}}function gzt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],TF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<va;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!DI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=fzt()):e+=FH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:JC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<va&&JC(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<va&&JC(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(DI(r.charCodeAt(0)))break;e+=r}return t!==""&&mr({},so,No),{type:TR,value:e,octal:s,start:n,end:$e}}function yzt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";mr({},LH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{mr({},LH)}try{return new RegExp(e,t)}catch{return null}}function vzt(){var e,t,n,r,i;for(e=kt[$e],TF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<va;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],DI(e.charCodeAt(0))&&mr({},oB),t+=e;else if(DI(e.charCodeAt(0)))mr({},oB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||mr({},oB),i=t.substr(1,t.length-2),{value:i,literal:t}}function bzt(){var e,t,n;for(t="",n="";$e<va&&(e=kt[$e],!!TM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<va?mr({},so,No):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&mr({},LH,n),{value:n,literal:t}}function _zt(){var e,t,n,r;return Or=null,ELe(),e=$e,t=vzt(),n=bzt(),r=yzt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function wzt(e){return e.type===hb||e.type===Xy||e.type===xF||e.type===SF}function SLe(){if(ELe(),$e>=va)return{type:SR,start:$e,end:$e};const e=kt.charCodeAt($e);return CR(e)?hzt():e===40||e===41||e===59?aB():e===39||e===34?gzt():e===46?Op(kt.charCodeAt($e+1))?yme():aB():Op(e)?yme():aB()}function Du(){const e=Or;return $e=e.end,Or=SLe(),$e=e.end,e}function TLe(){const e=$e;Or=SLe(),$e=e}function Ezt(e){const t=new fd(q7t);return t.elements=e,t}function vme(e,t,n){const r=new fd(e==="||"||e==="&&"?X7t:W7t);return r.operator=e,r.left=t,r.right=n,r}function xzt(e,t){const n=new fd(G7t);return n.callee=e,n.arguments=t,n}function Szt(e,t,n){const r=new fd(Y7t);return r.test=e,r.consequent=t,r.alternate=n,r}function ine(e){const t=new fd(_Le);return t.name=e,t}function J2(e){const t=new fd(K7t);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function bme(e,t,n){const r=new fd(Q7t);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Tzt(e){const t=new fd(J7t);return t.properties=e,t}function _me(e,t,n){const r=new fd(Z7t);return r.key=t,r.value=n,r.kind=e,r}function Czt(e,t){const n=new fd(ezt);return n.operator=e,n.argument=t,n.prefix=!0,n}function mr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(TF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function CF(e){e.type===SR&&mr(e,szt),e.type===t_&&mr(e,tzt),e.type===TR&&mr(e,nzt),e.type===hb&&mr(e,rzt),e.type===Xy&&mr(e,izt),mr(e,so,e.value)}function ba(e){const t=Du();(t.type!==Tu||t.value!==e)&&CF(t)}function di(e){return Or.type===Tu&&Or.value===e}function uB(e){return Or.type===Xy&&Or.value===e}function Azt(){const e=[];for($e=Or.start,ba("[");!di("]");)di(",")?(Du(),e.push(null)):(e.push(pb()),di("]")||ba(","));return Du(),Ezt(e)}function wme(){$e=Or.start;const e=Du();return e.type===TR||e.type===t_?(e.octal&&mr(e,wLe),J2(e)):ine(e.value)}function Izt(){var e,t,n,r;if($e=Or.start,e=Or,e.type===hb)return n=wme(),ba(":"),r=pb(),_me("init",n,r);if(e.type===SR||e.type===Tu)CF(e);else return t=wme(),ba(":"),r=pb(),_me("init",t,r)}function kzt(){var e=[],t,n,r,i={},s=String;for($e=Or.start,ba("{");!di("}");)t=Izt(),t.key.type===_Le?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?mr({},ozt):i[r]=!0,e.push(t),di("}")||ba(",");return ba("}"),Tzt(e)}function Rzt(){ba("(");const e=sne();return ba(")"),e}const Nzt={if:1};function Pzt(){var e,t,n;if(di("("))return Rzt();if(di("["))return Azt();if(di("{"))return kzt();if(e=Or.type,$e=Or.start,e===hb||Nzt[Or.value])n=ine(Du().value);else if(e===TR||e===t_)Or.octal&&mr(Or,wLe),n=J2(Du());else{if(e===Xy)throw new Error(PI);e===xF?(t=Du(),t.value=t.value==="true",n=J2(t)):e===SF?(t=Du(),t.value=null,n=J2(t)):di("/")||di("/=")?(n=J2(_zt()),TLe()):CF(Du())}return n}function Dzt(){const e=[];if(ba("("),!di(")"))for(;$e<va&&(e.push(pb()),!di(")"));)ba(",");return ba(")"),e}function Ozt(){$e=Or.start;const e=Du();return wzt(e)||CF(e),ine(e.value)}function $zt(){return ba("."),Ozt()}function Mzt(){ba("[");const e=sne();return ba("]"),e}function Lzt(){var e,t,n;for(e=Pzt();;)if(di("."))n=$zt(),e=bme(".",e,n);else if(di("("))t=Dzt(),e=xzt(e,t);else if(di("["))n=Mzt(),e=bme("[",e,n);else break;return e}function Eme(){const e=Lzt();if(Or.type===Tu&&(di("++")||di("--")))throw new Error(PI);return e}function rO(){var e,t;if(Or.type!==Tu&&Or.type!==Xy)t=Eme();else{if(di("++")||di("--"))throw new Error(PI);if(di("+")||di("-")||di("~")||di("!"))e=Du(),t=rO(),t=Czt(e.value,t);else{if(uB("delete")||uB("void")||uB("typeof"))throw new Error(PI);t=Eme()}}return t}function xme(e){let t=0;if(e.type!==Tu&&e.type!==Xy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Fzt(){var e,t,n,r,i,s,o,a,u,l;if(e=Or,u=rO(),r=Or,i=xme(r),i===0)return u;for(r.prec=i,Du(),t=[e,Or],o=rO(),s=[u,r,o];(i=xme(Or))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=vme(a,u,o),s.push(n);r=Du(),r.prec=i,s.push(r),t.push(Or),n=rO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=vme(s[l-1].value,s[l-2],n),l-=2;return n}function pb(){var e,t,n;return e=Fzt(),di("?")&&(Du(),t=pb(),ba(":"),n=pb(),e=Szt(e,t,n)),e}function sne(){const e=pb();if(di(","))throw new Error(PI);return e}function one(e){kt=e,$e=0,va=kt.length,Or=null,TLe();const t=sne();if(Or.type!==SR)throw new Error("Unexpect token after expression.");return t}var CLe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function ALe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function jzt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function ILe(e){e=e||{};const t=e.allowed?td(e.allowed):{},n=e.forbidden?td(e.forbidden):{},r=e.constants||CLe,i=(e.functions||ALe)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Le("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[jzt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Sme=Symbol("vega_selection_getter");function kLe(e){return(!e.getter||!e.getter[Sme])&&(e.getter=jc(e.field),e.getter[Sme]=!0),e.getter}const ane="intersect",Tme="union",Bzt="vlMulti",Uzt="vlPoint",Cme="or",zzt="and",Fd="_vgsid_",OI=jc(Fd),Vzt="E",Hzt="R",qzt="R-E",Wzt="R-LE",Gzt="R-RE",CM="index:unit";function Ame(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=kLe(a)(e),N0(o)&&(o=ha(o)),N0(r[s])&&(r[s]=ha(r[s])),je(r[s])&&N0(r[s][0])&&(r[s]=r[s].map(ha)),a.type===Vzt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===Hzt){if(!kw(o,r[s]))return!1}else if(a.type===Gzt){if(!kw(o,r[s],!0,!1))return!1}else if(a.type===qzt){if(!kw(o,r[s],!1,!1))return!1}else if(a.type===Wzt&&!kw(o,r[s],!1,!0))return!1;return!0}function Yzt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[CM]&&r[CM].value:void 0,o=n===ane,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Ame(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Ame(t,l),o^h)return h;return a&&o}const RLe=fS(OI),Kzt=RLe.left,Xzt=RLe.right;function Qzt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[CM]&&r[CM].value:void 0,o=n===ane,a=OI(t),u=Kzt(i,a);if(u===i.length||OI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Xzt(i,a)-u<s.size)return!1}return!0}function Jzt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>kLe(r)(n.datum))}:{[Fd]:OI(n.datum)},t))}function Zzt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,E=0,w,S;E<_;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(w=0,S=c.length;w<S;++w)h=c[w],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=lB[`${y}_union`],m[d]=v(g,pt(f[w]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((x,C,A)=>(x[c[A].field]=C,x),{})))}else h=Fd,p=OI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Fd]:p}));if(t=t||Tme,o[Fd]?o[Fd]=lB[`${Fd}_${t}`](...Object.values(o[Fd])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(C=>o[x][C]).reduce((C,A)=>C===void 0?A:lB[`${u[x]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const x=r?Uzt:Bzt;o[x]=t===Tme?{[Cme]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[zzt]:s.map(C=>({[Cme]:a[C]}))}}return o}var lB={[`${Fd}_union`]:Mat,[`${Fd}_intersect`]:Oat,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ha(t[0]),r=ha(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const eVt=":",tVt="@";function une(e,t,n,r){t[0].type!==db&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=tVt+o,u=eVt+i;s===ane&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function NLe(e){const t=this.context.data[e];return t?t.values.value:[]}function nVt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function rVt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Bc).insert(t)),1}function iVt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const AR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},sVt=AR("format"),PLe=AR("timeFormat"),oVt=AR("utcFormat"),aVt=AR("timeParse"),uVt=AR("utcParse"),kP=new Date(2e3,0,1);function AF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(kP.setYear(2e3),kP.setMonth(e),kP.setDate(t),PLe.call(this,kP,n))}function lVt(e){return AF.call(this,e,1,"%B")}function cVt(e){return AF.call(this,e,1,"%b")}function fVt(e){return AF.call(this,0,2+e,"%A")}function dVt(e){return AF.call(this,0,2+e,"%a")}const hVt=":",pVt="@",jH="%",DLe="$";function lne(e,t,n,r){t[0].type!==db&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=hVt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function mVt(e,t,n,r){t[0].type!==db&&Le("First argument to indata must be a string literal."),t[1].type!==db&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=pVt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ja(e,t,n,r){if(t[0].type===db)Ime(n,r,t[0].value);else for(e in n.scales)Ime(n,r,e)}function Ime(e,t,n){const r=jH+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function sp(e,t){if(_n(e))return e;if(mt(e)){const n=t.scales[e];return n&&U5t(n.value)?n.value:void 0}}function gVt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ja,n._range=Ja,n._scale=Ja;const r=i=>"_["+(i.type===db?rt(jH+i.value):rt(jH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function cne(e,t){return function(n,r,i){if(n){const s=sp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const yVt=cne("area",Hdt),vVt=cne("bounds",Ydt),bVt=cne("centroid",eht);function _Vt(e,t){const n=sp(e,(t||this).context);return n&&n.scale()}function wVt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function fne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function EVt(){return fne(this.context.dataflow,"warn",arguments)}function xVt(){return fne(this.context.dataflow,"info",arguments)}function SVt(){return fne(this.context.dataflow,"debug",arguments)}function cB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function BH(e){const t=W0(e),n=cB(t.r),r=cB(t.g),i=cB(t.b);return .2126*n+.7152*r+.0722*i}function TVt(e,t){const n=BH(e),r=BH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function CVt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function OLe(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?AVt(e,t):!1:gt(e)&&gt(t)?$Le(e,t):!1}function AVt(e,t){for(let n=0,r=e.length;n<r;++n)if(!OLe(e[n],t[n]))return!1;return!0}function $Le(e,t){for(const n in e)if(!OLe(e[n],t[n]))return!1;return!0}function kme(e){return t=>$Le(e,t)}function IVt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Bc:je(n)||Q4(n)?n:kme(n),c.remove(f)),t&&c.insert(t),r&&(f=kme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function kVt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function RVt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Rme={};function NVt(e,t){const n=Rme[t]||(Rme[t]=jc(t));return je(e)?e.map(n):n(e)}function dne(e){return je(e)||ArrayBuffer.isView(e)?e:null}function hne(e){return dne(e)||(mt(e)?e:null)}function PVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dne(e).join(...n)}function DVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hne(e).indexOf(...n)}function OVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hne(e).lastIndexOf(...n)}function $Vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return hne(e).slice(...n)}function MVt(e,t,n){return _n(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function LVt(e){return dne(e).slice().reverse()}function FVt(e,t,n){return Lee(e||0,t||0,n||0)}function jVt(e,t){const n=sp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function BVt(e,t){const n=sp(e,(t||this).context);return n?n.copy():void 0}function UVt(e,t){const n=sp(e,(t||this).context);return n?n.domain():[]}function zVt(e,t,n){const r=sp(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function VVt(e,t){const n=sp(e,(t||this).context);return n&&n.range?n.range():[]}function HVt(e,t,n){const r=sp(e,(n||this).context);return r?r(t):void 0}function qVt(e,t,n,r,i){e=sp(e,(i||this).context);const s=T$e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=xa;return u-a?l=h$e(e,a,u):e=(e.interpolator?yr("sequential")().interpolator(e.interpolator()):yr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function WVt(e,t,n){const r=sp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function GVt(e){let t=null;return function(n){return n?II(n,t=t||Ex(e)):e}}const MLe=e=>e.data;function LLe(e,t){const n=NLe.call(t,e);return n.root&&n.root.lookup||{}}function YVt(e,t,n){const r=LLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(MLe):void 0}function KVt(e,t){const n=LLe(e,this)[t];return n?n.ancestors().map(MLe):void 0}const FLe=()=>typeof window<"u"&&window||null;function XVt(){const e=FLe();return e?e.screen:{}}function QVt(){const e=FLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function JVt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function jLe(e,t,n){if(!e)return[];const[r,i]=e,s=new As().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return EMe(o,s,ZVt(t))}function ZVt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function eHt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function tHt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function nHt(e,t,n){const{x:r,y:i,mark:s}=n,o=new As().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),jLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>rHt(u.x,u.y,t))}function rHt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const $I={random(){return zc()},cumulativeNormal:nF,cumulativeLogNormal:ree,cumulativeUniform:aee,densityNormal:JZ,densityLogNormal:nee,densityUniform:oee,quantileNormal:rF,quantileLogNormal:iee,quantileUniform:uee,sampleNormal:tF,sampleLogNormal:tee,sampleUniform:see,isArray:je,isBoolean:Ky,isDate:N0,isDefined(e){return e!==void 0},isNumber:lr,isObject:gt,isRegExp:xOe,isString:mt,isTuple:Q4,isValid(e){return e!=null&&e===e},toBoolean:MZ,toDate(e){return LZ(e)},toNumber:ha,toString:FZ,indexof:DVt,join:PVt,lastindexof:OVt,replace:MVt,reverse:LVt,slice:$Vt,flush:wOe,lerp:SOe,merge:CVt,pad:AOe,peek:Qn,pluck:NVt,span:aR,inrange:kw,truncate:IOe,rgb:W0,lab:h3,hcl:p3,hsl:f3,luminance:BH,contrast:TVt,sequence:Mu,format:sVt,utcFormat:oVt,utcParse:uVt,utcOffset:zOe,utcSequence:qOe,timeFormat:PLe,timeParse:aVt,timeOffset:UOe,timeSequence:HOe,timeUnitSpecifier:ROe,monthFormat:lVt,monthAbbrevFormat:cVt,dayFormat:fVt,dayAbbrevFormat:dVt,quarter:yOe,utcquarter:vOe,week:POe,utcweek:$Oe,dayofyear:NOe,utcdayofyear:OOe,warn:EVt,info:xVt,debug:SVt,extent(e){return Mh(e)},inScope:wVt,intersect:jLe,clampRange:bOe,pinchDistance:kVt,pinchAngle:RVt,screen:XVt,containerSize:JVt,windowSize:QVt,bandspace:FVt,setdata:rVt,pathShape:GVt,panLinear:hOe,panLog:pOe,panPow:mOe,panSymlog:gOe,zoomLinear:RZ,zoomLog:NZ,zoomPow:sM,zoomSymlog:PZ,encode:iVt,modify:IVt,lassoAppend:eHt,lassoPath:tHt,intersectLasso:nHt},iHt=["view","item","group","xy","x","y"],sHt="event.vega.",BLe="this.",pne={},ULe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(DLe+e)}]`,functions:oHt,constants:CLe,visitors:pne},UH=ILe(ULe);function oHt(e){const t=ALe(e);iHt.forEach(n=>t[n]=sHt+n);for(const n in $I)t[n]=BLe+n;return bn(t,gVt(e,$I,pne)),t}function ys(e,t,n){return arguments.length===1?$I[e]:($I[e]=t,n&&(pne[e]=n),UH&&(UH.functions[e]=BLe+e),this)}ys("bandwidth",jVt,Ja);ys("copy",BVt,Ja);ys("domain",UVt,Ja);ys("range",VVt,Ja);ys("invert",zVt,Ja);ys("scale",HVt,Ja);ys("gradient",qVt,Ja);ys("geoArea",yVt,Ja);ys("geoBounds",vVt,Ja);ys("geoCentroid",bVt,Ja);ys("geoShape",WVt,Ja);ys("geoScale",_Vt,Ja);ys("indata",nVt,mVt);ys("data",NLe,lne);ys("treePath",YVt,lne);ys("treeAncestors",KVt,lne);ys("vlSelectionTest",Yzt,une);ys("vlSelectionIdTest",Qzt,une);ys("vlSelectionResolve",Zzt,une);ys("vlSelectionTuples",Jzt);function Fh(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=one(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==bLe)return;const o=s.callee.name,a=ULe.visitors[o];a&&a(o,s.arguments,t,n)});const i=UH(r);return i.globals.forEach(s=>{const o=DLe+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function aHt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const uHt=td(["rule"]),Nme=td(["group","image","rect"]);function lHt(e,t){let n="";return uHt[t]||(e.x2&&(e.x?(Nme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Nme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function mne(e){return(e+"").toLowerCase()}function cHt(e){return mne(e)==="operator"}function fHt(e){return mne(e)==="collect"}function JT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function dHt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var hHt={operator:(e,t)=>JT(e,["_"],t.code),parameter:(e,t)=>JT(e,["datum","_"],t.code),event:(e,t)=>JT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return JT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=lHt(r,n),i+="return m;",JT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),dHt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function pHt(e){const t=this;cHt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function mHt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function gHt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>Pme(s,n,t)):Pme(i,n,t)}return t}function Pme(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=Dme.length,s;r<i;++r)if(s=Dme[r],jt(e,s.key))return s.parse(e,t,n);return e}var Dme=[{key:"$ref",parse:yHt},{key:"$key",parse:bHt},{key:"$expr",parse:vHt},{key:"$field",parse:_Ht},{key:"$encode",parse:EHt},{key:"$compare",parse:wHt},{key:"$context",parse:xHt},{key:"$subflow",parse:SHt},{key:"$tupleid",parse:THt}];function yHt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function vHt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ll(t.parameterExpression(e.$expr),e.$fields))}function bHt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$Z(e.$key,e.$flat,t.expr.codegen))}function _Ht(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=jc(e.$field,e.$name,t.expr.codegen))}function wHt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=DZ(r,e.$order,t.expr.codegen))}function EHt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ll(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function xHt(e,t){return t}function SHt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function THt(){return Lt}function CHt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function AHt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const IHt={skip:!0};function kHt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function RHt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],IHt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Bc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function zLe(e,t,n,r){return new VLe(e,t,n,r)}function VLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||hHt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ome(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}VLe.prototype=Ome.prototype={fork(){const e=new Ome(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),fHt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[mne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:aHt,parseOperator:pHt,parseOperatorParameters:mHt,parseParameters:gHt,parseStream:CHt,parseUpdate:AHt,getState:kHt,setState:RHt};function NHt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),HLe(t,e.description()))}function HLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function PHt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const fB="default";function DHt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:fB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:fB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),zH(e,r&&r!==fB?r:i||r),i},{cursor:t})}function zH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function AM(e,t){var n=e._runtime.data;return jt(n,t)||Le("Unrecognized data set: "+t),n[t]}function OHt(e,t){return arguments.length<2?AM(this,e).values.value:IF.call(this,e,Zb().remove(Bc).insert(t))}function IF(e,t){f3e(t)||Le("Second argument to changes must be a changeset.");const n=AM(this,e);return n.modified=!0,this.pulse(n.input,t)}function $Ht(e,t){return IF.call(this,e,Zb().insert(t))}function MHt(e,t){return IF.call(this,e,Zb().remove(t))}function qLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function WLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function kF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function LHt(e){var t=kF(e),n=qLe(e),r=WLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function FHt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=kF(e),o=t.changedTouches?t.changedTouches[0]:t,s=_F(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=jHt(e,n,s),t}function jHt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Sa(e),item:Sa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const $me="view",BHt="timer",UHt="window",zHt={trap:!1};function VHt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=td(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function GLe(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function HHt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function RP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function qHt(e,t,n){var r=this,i=new eF(n),s=function(l,c){r.runAsync(null,()=>{e===$me&&HHt(r,t)&&l.preventDefault(),i.receive(FHt(r,l,c))})},o;if(e===BHt)RP(r,"timer",t)&&r.timer(s,t);else if(e===$me)RP(r,"view",t)&&r.addEventListener(t,s,zHt);else if(e===UHt?RP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&RP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);GLe(r,o,t,s)}return i}function Mme(e){return e.item}function Lme(e){return e.item.mark.source}function Fme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function WHt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Mme),Lme,Fme(e)),this.on(this.events("view","pointerout",Mme),Lme,Fme(t)),this}function GHt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Dl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const YHt="vega-bind",KHt="vega-bind-name",XHt="vega-bind-radio";function QHt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=OZ(r.debounce,i.update))),(r.input==null&&r.element?JHt:eqt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function JHt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),GLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(ZHt(i))}}function ZHt(e){return typeof Event<"u"?new Event(e):{type:e}}function eqt(e,t,n,r){const i=r.signal(n.signal),s=Dl("div",{class:YHt}),o=n.input==="radio"?s:s.appendChild(Dl("label"));o.appendChild(Dl("span",{class:KHt},n.name||n.signal)),t.appendChild(s);let a=tqt;switch(n.input){case"checkbox":a=nqt;break;case"select":a=rqt;break;case"radio":a=iqt;break;case"range":a=sqt;break}a(e,o,n,i)}function tqt(e,t,n,r){const i=Dl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function nqt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Dl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function rqt(e,t,n,r){const i=Dl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};IM(o,r)&&(u.selected=!0),i.appendChild(Dl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(IM(n.options[a],o)){i.selectedIndex=a;return}}}function iqt(e,t,n,r){const i=Dl("span",{class:XHt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};IM(o,r)&&(u.checked=!0);const l=Dl("input",u);l.addEventListener("change",()=>e.update(o));const c=Dl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)IM(a[l].value,o)&&(a[l].checked=!0)}}function sqt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||q0(s,i,100),a=Dl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Dl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function IM(e,t){return e===t||e+""==t+""}function YLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,qLe(e),WLe(e),kF(e),i,s).background(e.background())}function gne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function oqt(e,t,n,r){const i=new r(e.loader(),gne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,kF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function aqt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=wF(r);e=n._el=e?dB(n,e,!0):null,NHt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||xR,a=e?s.renderer:s.headless;return n._renderer=a?YLe(n,n._renderer,e,a):null,n._handler=oqt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=dB(n,t,!0):e.appendChild(Dl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=dB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{QHt(n,u.element||t,u)})),n}function dB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const ZT=e=>+e||0,uqt=e=>({top:e,bottom:e,left:e,right:e});function jme(e){return gt(e)?{top:ZT(e.top),bottom:ZT(e.bottom),left:ZT(e.left),right:ZT(e.right)}:uqt(ZT(e))}async function yne(e,t,n,r){const i=wF(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),YLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function lqt(e,t){e!==o0.Canvas&&e!==o0.SVG&&e!==o0.PNG&&Le("Unrecognized image type: "+e);const n=await yne(this,e,t);return e===o0.SVG?cqt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function cqt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function fqt(e,t){return(await yne(this,o0.Canvas,e,t)).canvas()}async function dqt(e){return(await yne(this,o0.SVG,e)).svg()}function hqt(e,t,n){return zLe(e,vx,$I,n).parse(t)}function pqt(e){var t=this._runtime.scales;return jt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var KLe="width",XLe="height",vne="padding",Bme={skip:!0};function QLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===vne?r.left+r.right:0)}function JLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===vne?r.top+r.bottom:0)}function mqt(e){var t=e._signals,n=t[KLe],r=t[XLe],i=t[vne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=QLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=JLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function gqt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(KLe,n,Bme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(XLe,r,Bme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function yqt(e){return this._runtime.getState(e||{data:vqt,signals:bqt,recurse:!0})}function vqt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function bqt(e,t){return!(e==="parent"||t instanceof vx.proxy)}function _qt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function wqt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(act(n,t))}function Eqt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",xqt(r))}function xqt(e){return e==null?"":je(e)?ZLe(e):gt(e)&&!N0(e)?Sqt(e):e+""}function Sqt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?ZLe(n):e6e(n))}).join(`
`)}function ZLe(e){return"["+e.map(e6e).join(", ")+"]"}function e6e(e){return je(e)?"[]":gt(e)&&!N0(e)?"{}":e}function Tqt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function t6e(e,t){const n=this;if(t=t||{},dE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(t3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||o0.Canvas,n._scenegraph=new K$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Eqt,n._redraw=!0,n._handler=new xR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=VHt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=hqt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=QLe(n,n._width),n._viewHeight=JLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,mqt(n),PHt(n),DHt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function NP(e,t){return jt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function n6e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Ume(e,t,n,r){let i=n6e(n,r);return i||(i=gne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function zme(e,t,n){const r=n6e(t,n);return r&&t._targets.remove(r),e}lt(t6e,dE,{async evaluate(e,t,n){if(await dE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,LHt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&HD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&HLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=NP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",jme(e)):jme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(wF(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(dE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(NP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:gqt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=gne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Ume(this,e,NP(this,e),t)},removeSignalListener(e,t){return zme(this,NP(this,e),t)},addDataListener(e,t){return Ume(this,e,AM(this,e).values,t)},removeDataListener(e,t){return zme(this,AM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=zH(this,null);this._globalCursor=!!e,t&&zH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:wqt,events:qHt,finalize:GHt,hover:WHt,data:OHt,change:IF,insert:$Ht,remove:MHt,scale:pqt,initialize:aqt,toImageURL:lqt,toCanvas:fqt,toSVG:dqt,getState:yqt,setState:_qt,_watchPixelRatio:Tqt});const Cqt="view",kM="[",RM="]",r6e="{",i6e="}",Aqt=":",s6e=",",Iqt="@",kqt=">",Rqt=/[[\]{}]/,Nqt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let o6e,a6e;function Qy(e,t,n){return o6e=t||Cqt,a6e=n||Nqt,u6e(e.trim()).map(VH)}function Pqt(e){return a6e[e]}function ZC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function u6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=ZC(e,i,s6e,kM+r6e,RM+i6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function VH(e){return e[0]==="["?Dqt(e):Oqt(e)}function Dqt(e){const t=e.length;let n=1,r;if(n=ZC(e,n,RM,kM,RM),n===t)throw"Empty between selector: "+e;if(r=u6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==kqt)throw"Expected '>' after between selector: "+e;r=r.map(VH);const i=VH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Oqt(e){const t={source:o6e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===i6e){if(a=e.lastIndexOf(r6e),a>=0){try{r=$qt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Iqt&&(i=++a),u=ZC(e,a,Aqt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=ZC(e,a,kM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=ZC(e,a,RM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==kM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Rqt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Pqt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function $qt(e){const t=e.split(s6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Mqt(e){return gt(e)?e:{type:e||"pad"}}const e2=e=>+e||0,Lqt=e=>({top:e,bottom:e,left:e,right:e});function Fqt(e){return gt(e)?e.signal?e:{top:e2(e.top),bottom:e2(e.bottom),left:e2(e.left),right:e2(e.right)}:Lqt(e2(e))}const oo=e=>gt(e)&&!je(e)?bn({},e):{value:e};function Vme(e,t,n,r){return n!=null?(gt(n)&&!je(n)||je(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Bo(e,t,n){for(const r in t)Vme(e,r,t[r]);for(const r in n)Vme(e,r,n[r],"update")}function KS(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function ow(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const bne="mark",_ne="frame",wne="scope",jqt="axis",Bqt="axis-domain",Uqt="axis-grid",zqt="axis-label",Vqt="axis-tick",Hqt="axis-title",qqt="legend",Wqt="legend-band",Gqt="legend-entry",Yqt="legend-gradient",l6e="legend-label",Kqt="legend-symbol",Xqt="legend-title",Qqt="title",Jqt="title-text",Zqt="title-subtitle";function eWt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!ow(u,e)&&hB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===_ne?i.group:n===bne?bn({},i.mark,i[t]):null;for(u in c)l=ow(u,e)||(u==="fill"||u==="stroke")&&(ow("fill",e)||ow("stroke",e)),l||hB(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)ow(h,e)||hB(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function hB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const c6e=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:f6e(e);function RF(e){if(e.gradient!=null)return nWt(e);let t=e.signal?`(${e.signal})`:e.color?tWt(e.color):e.field!=null?f6e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=rWt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${iO(e.exponent)})`),e.mult!=null&&(t+=`*${iO(e.mult)}`),e.offset!=null&&(t+=`+${iO(e.offset)}`),e.round&&(t=`round(${t})`),t}const PP=(e,t,n,r)=>`(${e}(${[t,n,r].map(RF).join(",")})+'')`;function tWt(e){return e.c?PP("hcl",e.h,e.c,e.l):e.h||e.s?PP("hsl",e.h,e.s,e.l):e.l||e.a?PP("lab",e.l,e.a,e.b):e.r||e.g||e.b?PP("rgb",e.r,e.g,e.b):null}function nWt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(c6e(e.gradient)),`gradient(${t.join(",")})`}function iO(e){return gt(e)?"("+RF(e)+")":e}function f6e(e){return d6e(gt(e)?e:{datum:e})}function d6e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?np(r).map(rt).join("]["):d6e(r)),t+"["+r+"]"}function rWt(e,t){const n=c6e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+iO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function iWt(e){let t="";return e.forEach(n=>{const r=RF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function h6e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=eWt(e,t,n,r,i.config);for(const a in e)o[a]=sWt(e[a],t,s,i);return s}function sWt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=aWt(oWt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function oWt(e){return je(e)?iWt(e):RF(e)}function aWt(e,t,n,r){const i=Fh(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const uWt="outer",lWt=["value","update","init","react","bind"];function Hme(e,t){Le(e+' for "outer" push: '+rt(t))}function p6e(e,t){const n=e.name;if(e.push===uWt)t.signals[n]||Hme("No prior signal definition",n),lWt.forEach(r=>{e[r]!==void 0&&Hme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function HH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function NF(e,t,n,r){return new HH(e,t,n,r)}function NM(e,t){return NF("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function MI(e,t){return t?{$field:e,$name:t}:{$field:e}}const qH=MI("key");function qme(e,t){return{$compare:e,$order:t}}function cWt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const fWt="ascending",dWt="descending";function hWt(e){return gt(e)?(e.order===dWt?"-":"+")+PF(e.op,e.field):""}function PF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Ene="scope",WH="view";function Bs(e){return e&&e.signal}function pWt(e){return e&&e.expr}function sO(e){if(Bs(e))return!0;if(gt(e)){for(const t in e)if(sO(e[t]))return!0}return!1}function _f(e,t){return e??t}function Rv(e){return e&&e.signal||e}const Wme="timer";function LI(e,t){return(e.merge?gWt:e.stream?yWt:e.type?vWt:Le("Invalid stream specification: "+rt(e)))(e,t)}function mWt(e){return e===Ene?WH:e||WH}function gWt(e,t){const n=e.merge.map(i=>LI(i,t)),r=xne({merge:n},e,t);return t.addStream(r).id}function yWt(e,t){const n=LI(e.stream,t),r=xne({stream:n},e,t);return t.addStream(r).id}function vWt(e,t){let n;e.type===Wme?(n=t.event(Wme,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(mWt(e.source),e.type);const r=xne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function xne(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[LI(r[0],n),LI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(bWt(t.marktype,t.markname,t.markrole)),t.source===Ene&&r.push("inScope(event.item)"),r.length&&(e.filter=Fh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function bWt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const _Wt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function wWt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),mt(s)&&(s=Qy(s,t.isSubscope()?Ene:WH)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[xWt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?Fh(o,t):o.expr!=null?Fh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:_Wt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(EWt(u,t),i)))}function EWt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):LI(e,t)}}function xWt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function SWt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Fh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>wWt(i,t,n.id))}const Hr=e=>(t,n,r)=>NF(e,n,t||void 0,r),m6e=Hr("aggregate"),TWt=Hr("axisticks"),g6e=Hr("bound"),dd=Hr("collect"),Gme=Hr("compare"),CWt=Hr("datajoin"),y6e=Hr("encode"),AWt=Hr("expression"),IWt=Hr("facet"),kWt=Hr("field"),RWt=Hr("key"),NWt=Hr("legendentries"),PWt=Hr("load"),DWt=Hr("mark"),OWt=Hr("multiextent"),$Wt=Hr("multivalues"),MWt=Hr("overlap"),LWt=Hr("params"),v6e=Hr("prefacet"),FWt=Hr("projection"),jWt=Hr("proxy"),BWt=Hr("relay"),b6e=Hr("render"),UWt=Hr("scale"),n_=Hr("sieve"),zWt=Hr("sortitems"),_6e=Hr("viewlayout"),VWt=Hr("values");let HWt=0;const w6e={min:"min",max:"max",count:"sum"};function qWt(e,t){const n=e.type||"linear";a$e(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function WWt(e,t){const n=t.getScale(e.name).params;let r;n.domain=E6e(e.domain,e,t),e.range!=null&&(n.range=S6e(e,t,n)),e.interpolate!=null&&nGt(e.interpolate,n),e.nice!=null&&(n.nice=tGt(e.nice,t)),e.bins!=null&&(n.bins=eGt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Ac(e[r],t))}function Ac(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function oO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ac(n,t))}function DF(e){Le("Can not find data set: "+rt(e))}function E6e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?GWt:e.fields?KWt:YWt)(e,t,n)}function GWt(e,t,n){return e.map(r=>Ac(r,n))}function YWt(e,t,n){const r=n.getData(e.data);return r||DF(e.data),wx(t.type)?r.valuesRef(n,e.field,x6e(e.sort,!1)):c$e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function KWt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:je(o)||o.signal?XWt(o,n):o,s.push(o),s),[]);return(wx(t.type)?QWt:c$e(t.type)?JWt:ZWt)(e,n,i)}function XWt(e,t){const n="_:vega:_"+HWt++,r=dd({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,n_({})]),{data:n,field:"data"}}function QWt(e,t,n){const r=x6e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||DF(l.data),c.countsRef(t,l.field,r)}),a={groupby:qH,pulse:o};r&&(i=r.op||"count",s=r.field?PF(i,r.field):"count",a.ops=[w6e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(m6e(a));const u=t.add(dd({pulse:Mt(i)}));return s=t.add(VWt({field:qH,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function x6e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!w6e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function JWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||DF(i.data),s.domainRef(t,i.field)});return Mt(t.add($Wt({values:r})))}function ZWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||DF(i.data),s.extentRef(t,i.field)});return Mt(t.add(OWt({extents:r})))}function eGt(e,t){return e.signal||je(e)?oO(e,t):t.objectProperty(e)}function tGt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Ac(e.interval),step:Ac(e.step)}:Ac(e)}function nGt(e,t){t.interpolate=Ac(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ac(e.gamma))}function S6e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=bn({},e,{range:r[i]}),S6e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=wx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?oO(i.scheme,t):Ac(i.scheme,t),i.extent&&(n.schemeExtent=oO(i.extent,t)),i.count&&(n.schemeCount=Ac(i.count,t));return}else if(i.step){n.rangeStep=Ac(i.step,t);return}else{if(wx(e.type)&&!je(i))return E6e(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?oO:Ac)(s,t))}function rGt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=GH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=GH(n[i],i,t));t.addProjection(e.name,r)}function GH(e,t,n){return je(e)?e.map(r=>GH(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const hd="top",XS="left",QS="right",gy="bottom",T6e="center",iGt="vertical",sGt="start",oGt="middle",aGt="end",YH="index",Sne="label",uGt="offset",Cx="perc",lGt="perc2",Rc="value",IR="guide-label",Tne="guide-title",cGt="group-title",fGt="group-subtitle",Yme="symbol",aO="gradient",KH="discrete",XH="size",dGt="shape",hGt="fill",pGt="stroke",mGt="strokeWidth",gGt="strokeDash",yGt="opacity",Cne=[XH,dGt,hGt,pGt,mGt,gGt,yGt],kR={name:1,style:1,interactive:1},tr={value:0},Nc={value:1},OF="group",C6e="rect",Ane="rule",vGt="symbol",r_="text";function FI(e){return e.type=OF,e.interactive=e.interactive||!1,e}function cl(e,t){const n=(r,i)=>_f(e[r],_f(t[r],i));return n.isVertical=r=>iGt===_f(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>_f(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>_f(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>_f(e.columns,_f(t.columns,+n.isVertical(!0))),n}function A6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function bGt(e,t,n){const r=t.config.style[n];return r&&r[e]}function $F(e,t,n){return`item.anchor === '${sGt}' ? ${e} : item.anchor === '${aGt}' ? ${t} : ${n}`}const Ine=$F(rt(XS),rt(QS),rt(T6e));function _Gt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function I6e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:I6e(e.offset,t)}):{value:e,offset:t}:t:e}function Yl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=KS(e.encode,t,kR)):e.interactive=!1,e}function wGt(e,t,n,r){const i=cl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:oo(f),height:oo(d)},update:bn({},u,{opacity:Nc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return Bo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Yl({type:C6e,role:Yqt,encode:h},r)}function EGt(e,t,n,r,i){const s=cl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:Rc}};p[l]={signal:h+"datum."+Cx,mult:u},p[c]=tr,p[f]={signal:h+"datum."+lGt,mult:u},p[d]=oo(a);const m={enter:p,update:bn({},p,{opacity:Nc}),exit:{opacity:tr}};return Bo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Yl({type:C6e,role:Wqt,key:Rc,from:i,encode:m},r)}const xGt=`datum.${Cx}<=0?"${XS}":datum.${Cx}>=1?"${QS}":"${T6e}"`,SGt=`datum.${Cx}<=0?"${gy}":datum.${Cx}>=1?"${hd}":"${oGt}"`;function Kme(e,t,n,r){const i=cl(e,t),s=i.isVertical(),o=oo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:Nc,text:{field:Sne}},exit:{opacity:tr}};return Bo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:_f(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:SGt},f="y",d="x",h="1-"):(l.align=c.align={signal:xGt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Cx,mult:a},l[d]=c[d]=o,o.offset=_f(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+YH}:void 0,Yl({type:r_,role:l6e,style:IR,key:Rc,from:r,encode:p,overlap:u},n)}function TGt(e,t,n,r,i){const s=cl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${uGt} : datum.${XH}`,h=l?oo(l):{field:XH},p=`datum.${YH}`,m=`max(1, ${i})`;let g,y,v,_,E;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Nc,x:y.x,y:y.y},exit:{opacity:tr}};let w=null,S=null;e.fill||(w=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Bo(g,{fill:s("symbolFillColor",w),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Cne.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:Rc})});const x=Yl({type:vGt,role:Kqt,key:Rc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=oo(c);C.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:C},y:h},update:v={opacity:Nc,text:{field:Sne},x:y.x,y:y.y},exit:{opacity:tr}},Bo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Yl({type:r_,role:l6e,style:IR,key:Rc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?oo(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:Nc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,E={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,E={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:YH}},FI({role:wne,from:r,encode:KS(g,o,kR),marks:[x,A],name:u,interactive:a,sort:E})}function CGt(e,t){const n=cl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const kne='item.orient === "left"',Rne='item.orient === "right"',MF=`(${kne} || ${Rne})`,AGt=`datum.vgrad && ${MF}`,IGt=$F('"top"','"bottom"','"middle"'),kGt=$F('"right"','"left"','"center"'),RGt=`datum.vgrad && ${Rne} ? (${kGt}) : (${MF} && !(datum.vgrad && ${kne})) ? "left" : ${Ine}`,NGt=`item._anchor || (${MF} ? "middle" : "start")`,PGt=`${AGt} ? (${kne} ? -90 : 90) : 0`,DGt=`${MF} ? (datum.vgrad ? (${Rne} ? "bottom" : "top") : ${IGt}) : "top"`;function OGt(e,t,n,r){const i=cl(e,t),s={enter:{opacity:tr},update:{opacity:Nc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return Bo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:NGt},angle:{signal:PGt},align:{signal:RGt},baseline:{signal:DGt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Yl({type:r_,role:Xqt,style:Tne,from:r,encode:s},n)}function $Gt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Xme(e.path)+")":e.sphere&&(n="geoShape("+Xme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Xme(e){return gt(e)&&e.signal?e.signal:rt(e)}function k6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===OF?wne:t||bne}function MGt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||k6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function LGt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Nne(e,t){const n=p3e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=NF(n.type.toLowerCase(),null,R6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function R6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=FGt(o,t,n)}return r}function FGt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return jGt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return BGt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Bs(i)?i.map(s=>Qme(e,s,n)):Qme(e,i,n)}function Qme(e,t,n){const r=e.type;if(Bs(t))return Zme(r)?Le("Expression references can not be signals."):pB(r)?n.fieldRef(t):ege(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||pB(r);return i&&UGt(t)?n.exprRef(t.expr,t.as):i&&zGt(t)?MI(t.field,t.as):Zme(r)?Fh(t,n):VGt(r)?Mt(n.getData(t).values):pB(r)?MI(t):ege(r)?n.compareRef(t):t}}function jGt(e,t,n){return mt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function BGt(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>Jme(e,i,n))):Jme(e,r,n)}function Jme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=bn(R6e(i,t,n),i.key);return Mt(n.add(LWt(s)))}const UGt=e=>e&&e.expr,zGt=e=>e&&e.field,VGt=e=>e==="data",Zme=e=>e==="expr",pB=e=>e==="field",ege=e=>e==="compare";function HGt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=uO(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=Nne(bn({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=uO(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(dd(null,[{}]))),o||(o=uO(e,n)),{key:i,pulse:o,parent:a}}function uO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function mb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}mb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new mb(e,s,i,r,o)};function N6e(e){return mt(e)?e:null}function tge(e,t,n){const r=PF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function t2(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=hWt(s);let l=N6e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:qH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(NF(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}mb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=N6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&tge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&tge(e,u,n),a=e.add(m6e(u)),o=e.add(dd({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return t2(e,this,"extent","extent",t,!1)},domainRef(e,t){return t2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return t2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return t2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return t2(e,this,"indata","tupleindex",t,!0,!0)}};function qGt(e,t,n){const r=e.from.facet,i=r.name,s=uO(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(v6e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(IWt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(dd()),l=a.add(n_({pulse:Mt(u)}));a.addData(i,new mb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function WGt(e,t,n){const r=t.add(v6e({pulse:n.pulse})),i=t.fork();i.add(n_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function P6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(NM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Fh(l,t);u.update=c.$expr,u.params=c.$params}function LF(e,t){const n=k6e(e),r=e.type===OF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===wne||n===_ne,a,u,l,c,f,d,h;const p=n===bne||o||i,m=HGt(e.from,r,t);u=t.add(CWt({key:m.key||(e.key?MI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(dd({pulse:g})),u=t.add(DWt({markdef:MGt(e),interactive:LGt(e.interactive,t),clip:$Gt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(y6e(h6e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const x=Nne(S,t),C=x.metadata;(C.generates||C.changes)&&Le("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),x.params.pulse=Mt(u),t.add(u=x)}),e.sort&&(u=t.add(zWt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(_6e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const _=t.add(g6e({mark:y,pulse:d||v}));h=Mt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?qGt(e,t,m):p?WGt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=GGt(s,h,t));const E=t.add(b6e({pulse:h})),w=t.add(n_({pulse:Mt(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new mb(t,l,E,w)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Le("Marks only support modify triggers."),P6e(S,t,f)}))}function GGt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Bs(s)?n.signalRef(s.signal):s,method:Bs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Bs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(MWt(o)))}function YGt(e,t){const n=t.config.legend,r=e.encode||{},i=cl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Cne.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||Le("Missing valid scale for legend.");const p=KGt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(dd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(NWt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===aO?(h=[wGt(e,c,n,r.gradient),Kme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${Rv(i.gradientLength())})/100))`)):p===KH?h=[EGt(e,c,n,r.gradient,v),Kme(e,n,r.labels,v)]:(f=CGt(e,n),h=[TGt(e,n,r,v,Rv(f.columns))],d.size=JGt(e,t,h[0].marks)),h=[FI({role:Gqt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(OGt(e,n,r.title,g)),LF(FI({role:qqt,from:g,encode:KS(QGt(i,e,n),s,kR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function KGt(e,t){let n=e.type||Yme;return!e.type&&XGt(e)===1&&(e.fill||e.stroke)&&(n=zee(t)?aO:cH(t)?KH:Yme),n!==aO?n:cH(t)?KH:aO}function XGt(e){return Cne.reduce((t,n)=>t+(e[n]?1:0),0)}function QGt(e,t,n){const r={enter:{},update:{}};return Bo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function JGt(e,t,n){const r=Rv(nge("size",e,n)),i=Rv(nge("strokeWidth",e,n)),s=Rv(ZGt(n[1].encode,t,IR));return Fh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function nge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:A6e(e,n[0].encode)}function ZGt(e,t,n){return A6e("fontSize",e)||bGt("fontSize",t,n)}const eYt=`item.orient==="${XS}"?-90:item.orient==="${QS}"?90:0`;function tYt(e,t){e=mt(e)?{text:e}:e;const n=cl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(dd(null,[l])));return u.push(iYt(e,n,nYt(e),c)),e.subtitle&&u.push(sYt(e,n,r.subtitle,c)),LF(FI({role:Qqt,from:c,encode:rYt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function nYt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function rYt(e,t){const n={enter:{},update:{}};return Bo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Ine},angle:{signal:eYt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),KS(n,t,kR)}function iYt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Bo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yl({type:r_,role:Jqt,style:cGt,from:r,encode:o},n)}function sYt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Bo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yl({type:r_,role:Zqt,style:fGt,from:r,encode:o},n)}function oYt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Nne(r,t))}),e.on&&e.on.forEach(r=>{P6e(r,t,e.name)}),t.addDataPipeline(e.name,aYt(e,t,n))}function aYt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Bs(e.values)||sO(e.format)?(r.push(rge(t,e)),r.push(i=g1())):r.push(i=g1({$ingest:e.values,$format:e.format})):e.url?sO(e.url)||sO(e.format)?(r.push(rge(t,e)),r.push(i=g1())):r.push(i=g1({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=g1()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=BWt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,g1())),i||r.push(g1()),r.push(n_({})),r}function g1(e){const t=dd({},e);return t.metadata={source:!0},t}function rge(e,t){return PWt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const D6e=e=>e===gy||e===hd,FF=(e,t,n)=>Bs(e)?fYt(e.signal,t,n):e===XS||e===hd?t:n,ao=(e,t,n)=>Bs(e)?lYt(e.signal,t,n):D6e(e)?t:n,Wf=(e,t,n)=>Bs(e)?cYt(e.signal,t,n):D6e(e)?n:t,O6e=(e,t,n)=>Bs(e)?dYt(e.signal,t,n):e===hd?{value:t}:{value:n},uYt=(e,t,n)=>Bs(e)?hYt(e.signal,t,n):e===QS?{value:t}:{value:n},lYt=(e,t,n)=>$6e(`${e} === '${hd}' || ${e} === '${gy}'`,t,n),cYt=(e,t,n)=>$6e(`${e} !== '${hd}' && ${e} !== '${gy}'`,t,n),fYt=(e,t,n)=>Pne(`${e} === '${XS}' || ${e} === '${hd}'`,t,n),dYt=(e,t,n)=>Pne(`${e} === '${hd}'`,t,n),hYt=(e,t,n)=>Pne(`${e} === '${QS}'`,t,n),$6e=(e,t,n)=>(t=t!=null?oo(t):t,n=n!=null?oo(n):n,ige(t)&&ige(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),ige=e=>e==null||Object.keys(e).length===1,Pne=(e,t,n)=>({signal:`${e} ? (${Pw(t)}) : (${Pw(n)})`}),pYt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${XS}' ? (${Pw(r)}) : `:"")+(n!=null?`${e} === '${gy}' ? (${Pw(n)}) : `:"")+(i!=null?`${e} === '${QS}' ? (${Pw(i)}) : `:"")+(t!=null?`${e} === '${hd}' ? (${Pw(t)}) : `:"")+"(null)"}),Pw=e=>Bs(e)?e.signal:e==null?null:rt(e),mYt=(e,t)=>t===0?0:Bs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},hE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function B_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Tne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[IR][i]}return null}function sge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function gYt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Bs(o)){const f=sge([n.axisX,n.axisY]),d=sge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ao(o,B_(l,n.axisX,i,r),B_(l,n.axisY,i,r));u={};for(l of d)u[l]=pYt(o.signal,B_(l,n.axisTop,i,r),B_(l,n.axisBottom,i,r),B_(l,n.axisLeft,i,r),B_(l,n.axisRight,i,r))}else a=o===hd||o===gy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function yYt(e,t,n,r){const i=cl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:Nc},exit:{opacity:tr}};Bo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=oge(e,0),c=oge(e,1);return o.x=a.x=ao(s,l,tr),o.x2=a.x2=ao(s,c),o.y=a.y=Wf(s,l,tr),o.y2=a.y2=Wf(s,c),Yl({type:Ane,role:Bqt,from:r,encode:u},n)}function oge(e,t){return{scale:e.scale,range:t}}function vYt(e,t,n,r,i){const s=cl(e,t),o=e.orient,a=e.gridScale,u=FF(o,1,-1),l=bYt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:Nc},exit:f={opacity:tr}};Bo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Rc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ao(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=ao(o,p,g),c.y=d.y=Wf(o,p,g),c.x2=d.x2=Wf(o,y),c.y2=d.y2=ao(o,y),f.x=ao(o,p),f.y=Wf(o,p),Yl({type:Ane,role:Uqt,key:Rc,from:r,encode:h},n)}function bYt(e,t){if(t!==1)if(!gt(e))e=Bs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=Bs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function _Yt(e,t,n,r,i,s){const o=cl(e,t),a=e.orient,u=FF(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:Nc},exit:c={opacity:tr}};Bo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=oo(i);h.mult=u;const p={scale:e.scale,field:Rc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ao(a,tr,p),f.y2=l.y2=ao(a,h),c.x=ao(a,p),f.x=l.x=Wf(a,tr,p),f.x2=l.x2=Wf(a,h),c.y=Wf(a,p),Yl({type:Ane,role:Vqt,key:Rc,from:r,encode:d},n)}function mB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function wYt(e,t,n,r,i,s){const o=cl(e,t),a=e.orient,u=e.scale,l=FF(a,-1,1),c=Rv(o("labelFlush")),f=Rv(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=oo(i);g.mult=l,g.offset=oo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Rc,band:.5,offset:I6e(s.offset,o("labelOffset"))},v=ao(a,p?mB(u,c,'"left"','"right"','"center"'):{value:"center"},uYt(a,"left","right")),_=ao(a,O6e(a,"bottom","top"),p?mB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=mB(u,c,`-(${f})`,f,0);p=p&&f;const w={opacity:tr,x:ao(a,y,g),y:Wf(a,y,g)},S={enter:w,update:m={opacity:Nc,text:{field:Sne},x:w.x,y:w.y,align:v,baseline:_},exit:{opacity:tr,x:w.x,y:w.y}};Bo(S,{dx:!d&&p?ao(a,E):null,dy:!h&&p?Wf(a,E):null}),Bo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const x=o("labelBound");let C=o("labelOverlap");return C=C||x?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:x?{scale:u,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=hE(m.align,v)),m.baseline!==_&&(m.baseline=hE(m.baseline,_)),Yl({type:r_,role:zqt,style:IR,key:Rc,from:r,encode:S,overlap:C},n)}function EYt(e,t,n,r){const i=cl(e,t),s=e.orient,o=FF(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:oo(i("titleAnchor",null)),align:{signal:Ine}},update:u=bn({},a,{opacity:Nc,text:oo(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${$F(0,1,.5)})`};return u.x=ao(s,c),u.y=Wf(s,c),a.angle=ao(s,tr,mYt(o,90)),a.baseline=ao(s,O6e(s,gy,hd),{value:gy}),u.angle=a.angle,u.baseline=a.baseline,Bo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),xYt(i,s,l,n),l.update.align=hE(l.update.align,a.align),l.update.angle=hE(l.update.angle,a.angle),l.update.baseline=hE(l.update.baseline,a.baseline),Yl({type:r_,role:Hqt,style:Tne,from:r,encode:l},n)}function xYt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=hE(oo(a),n.update[u]),!1):!ow(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?oo(o):ao(t,oo(o),oo(s))}function SYt(e,t){const n=gYt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=cl(e,n),l=_Gt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(dd({},[c]))),d=Mt(t.add(TWt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(vYt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(_Yt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(wYt(e,n,r.labels,d,p,l))),c.domain&&h.push(yYt(e,n,r.domain,f)),c.title&&h.push(EYt(e,n,r.title,f)),LF(FI({role:jqt,from:f,encode:KS(TYt(u,e),i,kR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function TYt(e,t){const n={enter:{},update:{}};return Bo(n,{orient:e("orient"),offset:e("offset")||0,position:_f(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function M6e(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>p6e(s,t)),pt(e.projections).forEach(s=>rGt(s,t)),i.forEach(s=>qWt(s,t)),pt(e.data).forEach(s=>oYt(s,t)),i.forEach(s=>WWt(s,t)),(n||r).forEach(s=>SWt(s,t)),pt(e.axes).forEach(s=>SYt(s,t)),pt(e.marks).forEach(s=>LF(s,t)),pt(e.legends).forEach(s=>YGt(s,t)),e.title&&tYt(e.title,t),t.parseLambdas(),t}const CYt=e=>KS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function AYt(e,t){const n=t.config,r=Mt(t.root=t.add(NM())),i=IYt(e,n);i.forEach(l=>p6e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(dd()),o=t.add(y6e(h6e(CYt(e.encode),OF,_ne,e.style,t,{pulse:Mt(s)}))),a=t.add(_6e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),M6e(e,t,i),t.operators.push(a);let u=t.add(g6e({mark:r,pulse:Mt(a)}));return u=t.add(b6e({pulse:Mt(u)})),u=t.add(n_({pulse:Mt(u)})),t.addData("root",new mb(t,s,s,u)),t}function n2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function IYt(e,t){const n=o=>_f(e[o],t[o]),r=[n2("background",n("background")),n2("autosize",Mqt(n("autosize"))),n2("padding",Fqt(n("padding"))),n2("width",n("width")||0),n2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function L6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function age(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}L6e.prototype=age.prototype={parse(e){return M6e(e,this)},fork(){return new age(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof HH?Mt(e):e;return this.add(jWt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(n_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return MI(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(kWt(i)))}return r},compareRef(e){let t=!1;const n=s=>Bs(s)?(t=!0,this.signalRef(s.signal)):pWt(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Mt(this.add(Gme({fields:r,orders:i}))):qme(r,i)},keyRef(e,t){let n=!1;const r=s=>Bs(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Mt(this.add(RWt({fields:e,flat:t}))):cWt(e,t)},sortRef(e){if(!e)return e;const t=PF(e.op,e.field),n=e.order||fWt;return n.signal?Mt(this.add(Gme({fields:t,orders:this.signalRef(n.signal)}))):qme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof HH?t:this.add(NM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(NM(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Fh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Dne(e))},exprRef(e,t){const n={expr:Fh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(AWt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,UWt(t))},addProjection(e,t){this.addScaleProj(e,FWt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,mb.fromEntries(this,t))}};function Dne(e){return(je(e)?kYt:RYt)(e)}function kYt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Dne(i):rt(i))}return n+"]"}function RYt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||Dne(i):rt(i));return t+"}"}function NYt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function PYt(e,t,n){return gt(e)||Le("Input Vega specification must be an object."),t=US(NYt(),t,e.config),AYt(e,new L6e(t,n)).toRuntime()}var DYt="5.29.0";bn(vx,P5t,_Bt,JBt,kUt,MUt,l7t,zUt,f7t,m7t,T7t,P7t);const OYt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:As,CanvasHandler:xR,CanvasRenderer:bM,DATE:il,DAY:da,DAYOFYEAR:Lh,Dataflow:dE,Debug:uOe,Error:AZ,EventStream:eF,Gradient:T$e,GroupItem:hF,HOURS:ql,Handler:hte,HybridHandler:gMe,HybridRenderer:wH,Info:aOe,Item:dF,MILLISECONDS:nd,MINUTES:Wl,MONTH:ya,Marks:Gl,MultiPulse:GZ,None:oOe,Operator:Xr,Parameters:Z4,Pulse:P0,QUARTER:rl,RenderType:o0,Renderer:ER,ResourceLoader:P$e,SECONDS:Uc,SVGHandler:rMe,SVGRenderer:bte,SVGStringRenderer:mMe,Scenegraph:K$e,TIME_UNITS:jZ,Transform:Pe,View:t6e,WEEK:Ms,Warn:IZ,YEAR:Mo,accessor:ll,accessorFields:ga,accessorName:Ji,array:pt,ascending:G4,bandwidthNRD:QZ,bin:y3e,bootstrapCI:v3e,boundClip:CMe,boundContext:vR,boundItem:gH,boundMark:q$e,boundStroke:ag,changeset:Zb,clampRange:bOe,codegenExpression:ILe,compare:DZ,constant:Sa,cumulativeLogNormal:ree,cumulativeNormal:nF,cumulativeUniform:aee,dayofyear:NOe,debounce:OZ,defaultLocale:zZ,definition:p3e,densityLogNormal:nee,densityNormal:JZ,densityUniform:oee,domChild:Os,domClear:wc,domCreate:i0,domFind:dte,dotbin:b3e,error:Le,expressionFunction:ys,extend:bn,extent:Mh,extentIndex:_Oe,falsy:Ag,fastmap:VS,field:jc,flush:wOe,font:vF,fontFamily:wR,fontSize:rp,format:VD,formatLocale:oM,formats:qZ,hasOwnProperty:jt,id:oR,identity:xa,inferType:r3e,inferTypes:i3e,ingest:xr,inherits:lt,inrange:kw,interpolate:Vee,interpolateColors:cF,interpolateRange:f$e,intersect:EMe,intersectBoxLine:Rw,intersectPath:Qee,intersectPoint:Jee,intersectRule:O$e,isArray:je,isBoolean:Ky,isDate:N0,isFunction:_n,isIterable:EOe,isNumber:lr,isObject:gt,isRegExp:xOe,isString:mt,isTuple:Q4,key:$Z,lerp:SOe,lineHeight:hy,loader:K4,locale:t3e,logger:kZ,lruCache:TOe,markup:vte,merge:COe,mergeConfig:US,multiLineOffset:lte,one:BS,pad:AOe,panLinear:hOe,panLog:pOe,panPow:mOe,panSymlog:gOe,parse:PYt,parseExpression:one,parseSelector:Qy,path:x6,pathCurves:Yee,pathEqual:AMe,pathParse:Ex,pathRectangle:I$e,pathRender:II,pathSymbols:A$e,pathTrail:k$e,peek:Qn,point:_F,projection:Nte,quantileLogNormal:iee,quantileNormal:rF,quantileUniform:uee,quantiles:KZ,quantizeInterpolator:d$e,quarter:yOe,quartiles:XZ,get random(){return zc},randomInteger:MFt,randomKDE:eee,randomLCG:$Ft,randomLogNormal:w3e,randomMixture:E3e,randomNormal:ZZ,randomUniform:x3e,read:a3e,regressionConstant:lee,regressionExp:T3e,regressionLinear:cee,regressionLoess:I3e,regressionLog:S3e,regressionPoly:A3e,regressionPow:C3e,regressionQuad:fee,renderModule:wF,repeat:U2,resetDefaultLocale:P4t,resetSVGClipId:N$e,resetSVGDefIds:F9t,responseType:o3e,runtimeContext:zLe,sampleCurve:sF,sampleLogNormal:tee,sampleNormal:tF,sampleUniform:see,scale:yr,sceneEqual:_te,sceneFromJSON:G$e,scenePickVisit:fM,sceneToJSON:W$e,sceneVisit:rd,sceneZOrder:Zee,scheme:Hee,serializeXML:fMe,setHybridRendererOptions:O9t,setRandom:DFt,span:aR,splitAccessPath:np,stringValue:rt,textMetrics:Pl,timeBin:YOe,timeFloor:FOe,timeFormatLocale:TI,timeInterval:HS,timeOffset:UOe,timeSequence:HOe,timeUnitSpecifier:ROe,timeUnits:BZ,toBoolean:MZ,toDate:LZ,toNumber:ha,toSet:td,toString:FZ,transform:m3e,transforms:vx,truncate:IOe,truthy:Bc,tupleid:Lt,typeParsers:aH,utcFloor:jOe,utcInterval:qS,utcOffset:zOe,utcSequence:qOe,utcdayofyear:OOe,utcquarter:vOe,utcweek:$Oe,version:DYt,visitArray:Mg,week:POe,writeConfig:zS,zero:Kg,zoomLinear:RZ,zoomLog:NZ,zoomPow:sM,zoomSymlog:PZ},Symbol.toStringTag,{value:"Module"}));function $Yt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var MYt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},LYt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},FYt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const jYt=Array.prototype.slice,y1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,jYt.call(t,1))},BYt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var UYt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:BYt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return y1("join",arguments)},indexof:function(){return y1("indexOf",arguments)},lastindexof:function(){return y1("lastIndexOf",arguments)},slice:function(){return y1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return y1("substring",arguments,String)},split:function(){return y1("split",arguments,String)},replace:function(){return y1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const zYt=["view","item","group","xy","x","y"],QH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&QH.add(setImmediate);const VYt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:MYt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),QH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||UYt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>LYt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>FYt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,QH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function r2(e,t,n,r,i,s){const o=a=>VYt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,zYt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var HYt={operator(e,t){const n=t.ast,r=e.functions;return i=>r2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>r2(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>r2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return r2(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=r2(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&$Yt(o,r,s),l}}};const qYt="vega-lite",WYt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',GYt="5.18.1",YYt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],KYt="https://vega.github.io/vega-lite/",XYt="Vega-Lite is a concise high-level language for interactive visualization.",QYt=["vega","chart","visualization"],JYt="build/vega-lite.js",ZYt="build/vega-lite.min.js",eKt="build/vega-lite.min.js",tKt="build/src/index",nKt="build/src/index.d.ts",rKt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},iKt=["bin","build","src","vega-lite*","tsconfig.json"],sKt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},oKt={type:"git",url:"https://github.com/vega/vega-lite.git"},aKt="BSD-3-Clause",uKt={url:"https://github.com/vega/vega-lite/issues"},lKt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},cKt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},fKt={vega:"^5.24.0"},dKt={node:">=18"},hKt="yarn@1.22.19",pKt={name:qYt,author:WYt,version:GYt,collaborators:YYt,homepage:KYt,description:XYt,keywords:QYt,main:JYt,unpkg:ZYt,jsdelivr:eKt,module:tKt,types:nKt,bin:rKt,files:iKt,scripts:sKt,repository:oKt,license:aKt,bugs:uKt,devDependencies:lKt,dependencies:cKt,peerDependencies:fKt,engines:dKt,packageManager:hKt};function One(e){return!!e.or}function $ne(e){return!!e.and}function Mne(e){return!!e.not}function lO(e,t){if(Mne(e))lO(e.not,t);else if($ne(e))for(const n of e.and)lO(n,t);else if(One(e))for(const n of e.or)lO(n,t);else t(e)}function pE(e,t){return Mne(e)?{not:pE(e.not,t)}:$ne(e)?{and:e.and.map(n=>pE(n,t))}:One(e)?{or:e.or.map(n=>pE(n,t))}:t(e)}const rn=structuredClone;function F6e(e){throw new Error(e)}function Ax(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Yu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Ur(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=mt(e)?e:Ur(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function JH(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function gb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Lne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function j6e(e,...t){for(const n of t)mKt(e,n??{});return e}function mKt(e,t){for(const n of Ye(t))zS(e,n,t[n],!0)}function sh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function gKt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function B6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Fne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function ZH(e){const t=new Set;for(const n of e){const i=np(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function jne(e,t){return e===void 0||t===void 0?!0:Fne(ZH(e),ZH(t))}function Br(e){return Ye(e).length===0}const Ye=Object.keys,Lo=Object.values,yy=Object.entries;function jI(e){return e===!0||e===!1}function ki(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function eA(e,t){return Mne(e)?`!(${eA(e.not,t)})`:$ne(e)?`(${e.and.map(n=>eA(n,t)).join(") && (")})`:One(e)?`(${e.or.map(n=>eA(n,t)).join(") || (")})`:t(e)}function PM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&PM(e[n],t)&&delete e[n],Br(e)}function RR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Bne(e,t="datum"){const n=np(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function U6e(e,t="datum"){return`${t}[${rt(np(e).join("."))}]`}function yKt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Vc(e){return`${np(e).map(yKt).join("\\.")}`}function yb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function JS(e){return`${np(e).join(".")}`}function Ix(e){return e?np(e).length:0}function ds(...e){for(const t of e)if(t!==void 0)return t}let z6e=42;function V6e(e){const t=++z6e;return e?String(e)+t:t}function vKt(){z6e=42}function H6e(e){return q6e(e)?e:`__${e}`}function q6e(e){return e.startsWith("__")}function BI(e){if(e!==void 0)return(e%360+360)%360}function jF(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const uge=Object.getPrototypeOf(structuredClone({}));function kl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!kl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!kl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==uge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==uge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!kl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ur(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const fm="row",dm="column",BF="facet",Ri="x",go="y",pd="x2",op="y2",Jy="xOffset",ZS="yOffset",md="radius",lg="radius2",ef="theta",cg="theta2",gd="latitude",yd="longitude",vd="latitude2",Hc="longitude2",sl="color",ap="fill",up="stroke",ol="shape",fg="size",i_="angle",dg="opacity",Zy="fillOpacity",e1="strokeOpacity",t1="strokeWidth",n1="strokeDash",NR="text",kx="order",PR="detail",UF="key",vb="tooltip",zF="href",VF="url",HF="description",bKt={x:1,y:1,x2:1,y2:1},W6e={theta:1,theta2:1,radius:1,radius2:1};function G6e(e){return e in W6e}const Une={longitude:1,longitude2:1,latitude:1,latitude2:1};function Y6e(e){switch(e){case gd:return"y";case vd:return"y2";case yd:return"x";case Hc:return"x2"}}function K6e(e){return e in Une}const _Kt=Ye(Une),zne={...bKt,...W6e,...Une,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function mE(e){return e===sl||e===ap||e===up}const X6e={row:1,column:1,facet:1},Ic=Ye(X6e),Vne={...zne,...X6e},wKt=Ye(Vne),{order:Jan,detail:Zan,tooltip:eun,...EKt}=Vne,{row:tun,column:nun,facet:run,...xKt}=EKt;function SKt(e){return!!xKt[e]}function Q6e(e){return!!Vne[e]}const TKt=[pd,op,vd,Hc,cg,lg];function J6e(e){return s_(e)!==e}function s_(e){switch(e){case pd:return Ri;case op:return go;case vd:return gd;case Hc:return yd;case cg:return ef;case lg:return md}return e}function vy(e){if(G6e(e))switch(e){case ef:return"startAngle";case cg:return"endAngle";case md:return"outerRadius";case lg:return"innerRadius"}return e}function lp(e){switch(e){case Ri:return pd;case go:return op;case gd:return vd;case yd:return Hc;case ef:return cg;case md:return lg}}function al(e){switch(e){case Ri:case pd:return"width";case go:case op:return"height"}}function Z6e(e){switch(e){case Ri:return"xOffset";case go:return"yOffset";case pd:return"x2Offset";case op:return"y2Offset";case ef:return"thetaOffset";case md:return"radiusOffset";case cg:return"theta2Offset";case lg:return"radius2Offset"}}function Hne(e){switch(e){case Ri:return"xOffset";case go:return"yOffset"}}function CKt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const AKt=Ye(zne),{x:iun,y:sun,x2:oun,y2:aun,xOffset:uun,yOffset:lun,latitude:cun,longitude:fun,latitude2:dun,longitude2:hun,theta:pun,theta2:mun,radius:gun,radius2:yun,...qne}=zne,IKt=Ye(qne),Wne={x:1,y:1},cp=Ye(Wne);function hs(e){return e in Wne}const Gne={theta:1,radius:1},kKt=Ye(Gne);function qF(e){return e==="width"?Ri:go}const e4e={xOffset:1,yOffset:1};function DR(e){return e in e4e}const{text:vun,tooltip:bun,href:_un,url:wun,description:Eun,detail:xun,key:Sun,order:Tun,...t4e}=qne,RKt=Ye(t4e);function NKt(e){return!!qne[e]}function PKt(e){switch(e){case sl:case ap:case up:case fg:case ol:case dg:case t1:case n1:return!0;case Zy:case e1:case i_:return!1}}const n4e={...Wne,...Gne,...e4e,...t4e},WF=Ye(n4e);function hg(e){return!!n4e[e]}function DKt(e,t){return $Kt(e)[t]}const r4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Cun,...OKt}=r4e;function $Kt(e){switch(e){case sl:case ap:case up:case HF:case PR:case UF:case vb:case zF:case kx:case dg:case Zy:case e1:case t1:case BF:case fm:case dm:return r4e;case Ri:case go:case Jy:case ZS:case gd:case yd:return OKt;case pd:case op:case vd:case Hc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case fg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case n1:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ol:return{point:"always",geoshape:"always"};case NR:return{text:"always"};case i_:return{point:"always",square:"always",text:"always"};case VF:return{image:"always"};case ef:return{text:"always",arc:"always"};case md:return{text:"always",arc:"always"};case cg:case lg:return{arc:"always"}}}function gB(e){switch(e){case Ri:case go:case ef:case md:case Jy:case ZS:case fg:case i_:case t1:case dg:case Zy:case e1:case pd:case op:case cg:case lg:return;case BF:case fm:case dm:case ol:case n1:case NR:case vb:case zF:case VF:case HF:return"discrete";case sl:case ap:case up:return"flexible";case gd:case yd:case vd:case Hc:case PR:case UF:case kx:return}}const MKt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},LKt={count:1,min:1,max:1};function Um(e){return!!e&&!!e.argmin}function r1(e){return!!e&&!!e.argmax}function Yne(e){return mt(e)&&!!MKt[e]}const FKt=new Set(["count","valid","missing","distinct"]);function i4e(e){return mt(e)&&FKt.has(e)}function jKt(e){return mt(e)&&Hn(["min","max"],e)}const BKt=new Set(["count","sum","distinct","valid","missing"]),UKt=new Set(["mean","average","median","q1","q3","min","max"]);function s4e(e){return Ky(e)&&(e=i5(e,void 0)),"bin"+Ye(e).map(t=>GF(e[t])?ki(`_${t}_${yy(e[t])}`):ki(`_${t}_${e[t]}`)).join("")}function ai(e){return e===!0||o_(e)&&!e.binned}function Ao(e){return e==="binned"||o_(e)&&e.binned===!0}function o_(e){return gt(e)}function GF(e){return e==null?void 0:e.param}function lge(e){switch(e){case fm:case dm:case fg:case sl:case ap:case up:case t1:case dg:case Zy:case e1:case ol:return 6;case n1:return 4;default:return 10}}function OR(e){return!!(e!=null&&e.expr)}function Ru(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=El(e[r]);return n}function o4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=Ax(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function jg(e){return mt(e)||je(e)&&mt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function i1(e){return!!e.step}function zKt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function VKt(e){return je(e)?!1:"fields"in e&&"data"in e}function tm(e){return je(e)?!1:"field"in e&&"data"in e}const HKt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},qKt=Ye(HKt),WKt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},eq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function a4e(e){const t=je(e.condition)?e.condition.map(cge):cge(e.condition);return{...El(e),condition:t}}function El(e){if(OR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function cge(e){if(OR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function hi(e){if(OR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function GKt(e){return Nt(e)?e.signal:rt(e)}function fge(e){return Nt(e)?e.signal:rt(e.value)}function $f(e){return Nt(e)?e.signal:e==null?null:rt(e)}function YKt(e,t,n){for(const r of n){const i=zm(r,t.markDef,t.config);i!==void 0&&(e[r]=hi(i))}return e}function u4e(e){return[].concat(e.type,e.style??[])}function Er(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:zm(e,t,n,r)}function zm(e,t,n,{vgChannel:r}={}){return ds(r?DM(e,t,n.style):void 0,DM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function DM(e,t,n){return l4e(e,u4e(t),n)}function l4e(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function c4e(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function f4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(kl(i,r))return;n.push(r)}),n}function d4e(e,t){return kl(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function h4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((jg(n)||Nt(n))&&(jg(r)||Nt(r)))return{explicit:e.explicit,value:d4e(n,r)};if(jg(n)||Nt(n))return{explicit:e.explicit,value:n};if(jg(r)||Nt(r))return{explicit:e.explicit,value:r};if(!jg(n)&&!Nt(n)&&!jg(r)&&!Nt(r))return{explicit:e.explicit,value:f4e(n,r)};throw new Error("It should never reach here")}function Kne(e){return`Invalid specification ${Ur(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const KKt='Autosize "fit" only works for single views and layered views.';function dge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function hge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function pge(e){return e?`Dropping "fit-${e}" because spec has discrete ${al(e)}.`:'Dropping "fit" because spec has discrete size.'}function Xne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function mge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function XKt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function QKt(e){return`The "nearest" transform is not supported for ${e} marks.`}function p4e(e){return`Selection not supported for ${e} yet.`}function JKt(e){return`Cannot find a selection named "${e}".`}const ZKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",eXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",tXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function nXt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function rXt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const iXt="The same selection must be used to override scale domains in a layered view.",sXt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function oXt(e){return`Unknown repeated value "${e}".`}function gge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const aXt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function uXt(e){return`Unrecognized parse "${e}".`}function yge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const lXt="Attempt to add the same child twice.";function cXt(e){return`Ignoring an invalid transform: ${Ur(e)}.`}const fXt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function vge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function dXt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Ur(t)} is overridden by a child projection ${Ur(n)}.`}const hXt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function pXt(e){return`${e}Offset dropped because ${e} is continuous`}function mXt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Ur(n)}}.`}function m4e(e){return`Invalid field type "${e}".`}function gXt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function yXt(e){return`Invalid aggregation operator "${e}".`}function g4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function vXt(e){return`Position range does not support relative band size for ${e}.`}function tq(e,t){return`Dropping ${Ur(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const bXt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function YF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function _Xt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function wXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function EXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function xXt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function yB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function SXt(e){return`The ${e} for range marks cannot be an expression`}function TXt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function CXt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function AXt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function IXt(e){return`Cannot use the relative band size with ${e} scale.`}function kXt(e){return`Using unaggregated domain with raw field has no effect (${Ur(e)}).`}function RXt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function NXt(e){return`Unaggregated domain is currently unsupported for log scale (${Ur(e)}).`}function PXt(e){return`Cannot apply size to non-oriented mark "${e}".`}function DXt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function OXt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function y4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function v4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function $Xt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ur(n)} and ${Ur(r)}). Using ${Ur(n)}.`}function MXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Ur(n)} and ${Ur(r)}). Using the union of the two domains.`}function LXt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function FXt(e){return`Dropping sort property ${Ur(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const bge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",jXt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",BXt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",UXt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function zXt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function VXt(e){return`Stack is applied to a non-linear scale (${e}).`}function HXt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function OM(e,t){return`Invalid ${e}: ${Ur(t)}.`}function qXt(e){return`Dropping day from datetime ${Ur(e)} as day cannot be combined with other units.`}function WXt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function GXt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function YXt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function _ge(e){return`1D error band does not support ${e}.`}function b4e(e){return`Channel ${e} is required for "binned" bin.`}function KXt(e){return`Channel ${e} should not be used with "binned" bin.`}function XXt(e){return`Domain for ${e} is required for threshold scale.`}const _4e=kZ(IZ);let Rx=_4e;function QXt(e){return Rx=e,Rx}function JXt(){return Rx=_4e,Rx}function Ze(...e){Rx.warn(...e)}function ZXt(...e){Rx.debug(...e)}function a_(e){if(e&&gt(e)){for(const t of Jne)if(t in e)return!0}return!1}const w4e=["january","february","march","april","may","june","july","august","september","october","november","december"],eQt=w4e.map(e=>e.substr(0,3)),E4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],tQt=E4e.map(e=>e.substr(0,3));function nQt(e){if(jF(e)&&(e=+e),lr(e))return e>4&&Ze(OM("quarter",e)),e-1;throw new Error(OM("quarter",e))}function rQt(e){if(jF(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=w4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=eQt.indexOf(r);if(i!==-1)return i;throw new Error(OM("month",e))}}function iQt(e){if(jF(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=E4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=tQt.indexOf(r);if(i!==-1)return i;throw new Error(OM("day",e))}}function Qne(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Ze(qXt(e)),e=rn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?rQt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?nQt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?iQt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function bb(e){const n=Qne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function sQt(e){const n=Qne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function oQt(e){const t=Qne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const x4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Jne=Ye(x4e);function aQt(e){return!!x4e[e]}function u_(e){return gt(e)?e.binned:S4e(e)}function S4e(e){return e&&e.startsWith("binned")}function Zne(e){return e.startsWith("utc")}function uQt(e){return e.substring(3)}const lQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function KF(e){return Jne.filter(t=>C4e(e,t))}function T4e(e){const t=KF(e);return t[t.length-1]}function C4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function cQt(e,t,{end:n}={end:!1}){const r=Bne(t),i=Zne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Jne)C4e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),sQt(a)}function A4e(e){if(!e)return;const t=KF(e);return`timeUnitSpecifier(${Ur(t)}, ${Ur(lQt)})`}function fQt(e,t,n){if(!e)return;const r=A4e(e);return`${n||Zne(e)?"utc":"time"}Format(${t}, ${r})`}function fo(e){if(!e)return;let t;return mt(e)?S4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Zne(t.unit)&&(t.utc=!0,t.unit=uQt(t.unit)),t}function dQt(e){const{utc:t,...n}=fo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>ki(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>ki(`_${r}_${n[r]}`)).join("")}function I4e(e,t=n=>n){const n=fo(e),r=T4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=k4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(bb(a))} - ${t(bb(i))}`}}const hQt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function pQt(e){return!!hQt[e]}function k4e(e,t=1){if(pQt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function mQt(e){return e==null?void 0:e.param}function ere(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function tre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function nre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function rre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function ire(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function sre(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function ore(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function gQt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function R4e(e){return ore(e)||ere(e)||sre(e)||tre(e)||rre(e)||nre(e)||ire(e)}function Ad(e,t){return s5(e,{timeUnit:t,wrapTime:!0})}function yQt(e,t){return e.map(n=>Ad(n,t))}function N4e(e,t=!0){const{field:n}=e,r=fo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:cQt(i,n)})`:o;if(ere(e))return`${a}===${Ad(e.equal,i)}`;if(tre(e)){const u=e.lt;return`${a}<${Ad(u,i)}`}else if(rre(e)){const u=e.gt;return`${a}>${Ad(u,i)}`}else if(nre(e)){const u=e.lte;return`${a}<=${Ad(u,i)}`}else if(ire(e)){const u=e.gte;return`${a}>=${Ad(u,i)}`}else{if(ore(e))return`indexof([${yQt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(gQt(e))return are(a,e.valid);if(sre(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Ad(l,i)+", "+Ad(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Ad(l,i)}`),c!==null&&f.push(`${a} <= ${Ad(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Ur(e)}`)}function are(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function vQt(e){return R4e(e)&&e.timeUnit?{...e,timeUnit:fo(e.timeUnit)}:e}const $R={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function bQt(e){return e==="quantitative"||e==="temporal"}function P4e(e){return e==="ordinal"||e==="nominal"}const _b=$R.quantitative,ure=$R.ordinal,Nx=$R.temporal,lre=$R.nominal,eT=$R.geojson;function _Qt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case _b:return"quantitative";case"t":case Nx:return"temporal";case"o":case ure:return"ordinal";case"n":case lre:return"nominal";case eT:return"geojson"}}const Ku={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},nq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function wQt(e,t){const n=nq[e],r=nq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const EQt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function wge(e){return EQt[e]}const D4e=new Set(["linear","log","pow","sqrt","symlog"]),O4e=new Set([...D4e,"time","utc"]);function $4e(e){return D4e.has(e)}const M4e=new Set(["quantile","quantize","threshold"]),xQt=new Set([...O4e,...M4e,"sequential","identity"]),SQt=new Set(["ordinal","bin-ordinal","point","band"]);function ho(e){return SQt.has(e)}function Kl(e){return xQt.has(e)}function Mf(e){return O4e.has(e)}function Px(e){return M4e.has(e)}const TQt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function CQt(e){return!mt(e)&&!!e.name}function L4e(e){return e==null?void 0:e.param}function AQt(e){return e==null?void 0:e.unionWith}function IQt(e){return gt(e)&&"field"in e}const kQt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Aun,domain:Iun,range:kun,rangeMax:Run,rangeMin:Nun,scheme:Pun,...RQt}=kQt,NQt=Ye(RQt);function rq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Mf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Mf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Mf(e);case"nice":return Mf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Kl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function F4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return mE(e)?void 0:AXt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function PQt(e,t){return Hn([ure,lre],t)?e===void 0||ho(e):t===Nx?Hn([Ku.TIME,Ku.UTC,void 0],e):t===_b?$4e(e)||Px(e)||e===void 0:!0}function DQt(e,t,n=!1){if(!hg(e))return!1;switch(e){case Ri:case go:case Jy:case ZS:case ef:case md:return Mf(t)||t==="band"?!0:t==="point"?!n:!1;case fg:case t1:case dg:case Zy:case e1:case i_:return Mf(t)||Px(t)||Hn(["band","point","ordinal"],t);case sl:case ap:case up:return t!=="band";case n1:case ol:return t==="ordinal"||Px(t)}}function cre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=dre(e);return et(n)&&!i4e(n.aggregate)&&i&&Mf(i.get("type"))?OQt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function OQt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Er("invalid",n,i)===null?[$Qt(e,t),r]:r}function $Qt(e,t){const n=fre(e,!0),i=s_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function fre(e,t=!0){return are(mt(e)?e:at(e,{expr:"datum"}),!t)}function MQt(e){const{datum:t}=e;return a_(t)?bb(t):`${Ur(t)}`}function Nv(e,t,n,r){const i={};if(t&&(i.scale=t),fp(e)){const{datum:s}=e;a_(s)?i.signal=bb(s):Nt(s)?i.signal=s.signal:OR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function $M({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function LQt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function dre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cn(t)){const f=o==null?void 0:o.get("type");if(su(t)){c??(c=by({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ai(d)||c&&h&&p===Nx)return a!=null&&a.impute?Nv(t,s,{binSuffix:"mid"},{offset:u}):c&&!ho(f)?$M({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Nv(t,s,jR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ao(d)){if(et(n))return $M({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Ze(b4e(e===Ri?pd:op))}}return Nv(t,s,ho(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(id(t)){const f=t.value,d=u?{offset:u}:{};return{...tA(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function tA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:hi(t)}function wb(e){return e&&e!=="number"&&e!=="time"}function j4e(e,t,n){return`${e}(${t}${n?`, ${Ur(n)}`:""})`}const FQt="  ";function hre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(wb(n))return Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=B4e(e,r,i),a=Dx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Lf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Lf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return Lf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if($x(e)){const c=BQt({field:o,timeUnit:et(e)?(u=fo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:c_(e)&&((l=e.scale)==null?void 0:l.type)===Ku.UTC});return c?{signal:c}:void 0}if(t=iq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&ai(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:MR(o,c,t,n,s)}}else return t||Dx(e)==="quantitative"?{signal:`${V4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function B4e(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):MQt(e)}function Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=B4e(e,r,i)),o!=="datum.value"&&et(e)&&ai(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:MR(o,a,t,n,s)}}return{signal:j4e(n,o,t)}}function U4e(e,t,n,r,i,s){var o;if(!(mt(r)&&wb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Dx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Ox(e)&&e.stack==="normalize"||i.numberFormatType))){if(Ox(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return iq({type:"quantitative",config:i,normalizeStack:!0});if($x(e)){const a=et(e)?(o=fo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:jQt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return iq({type:t,specifiedFormat:n,config:i})}}function z4e(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if($x(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=fo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function iq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===_b)return r?n.normalizedNumberFormat:n.numberFormat}function jQt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:A4e(t)}:r?void 0:n.timeFormat)}function V4e(e,t){return`format(${e}, "${t||""}")`}function Ege(e,t,n,r){return wb(n)?j4e(n,e,t):V4e(e,(mt(t)?t:void 0)??r.numberFormat)}function MR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return MR(e,t,i.numberFormat,i.numberFormatType,i);const s=Ege(e,n,r,i),o=Ege(t,n,r,i);return`${are(e,!1)} ? "null" : ${s} + "${FQt}" + ${o}`}function BQt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):fQt(t,e,s)}const fu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},H4e=fu.arc,XF=fu.area,QF=fu.bar,UQt=fu.image,JF=fu.line,ZF=fu.point,zQt=fu.rect,MM=fu.rule,q4e=fu.text,pre=fu.tick,VQt=fu.trail,mre=fu.circle,gre=fu.square,W4e=fu.geoshape;function l_(e){return["line","area","trail"].includes(e)}function UI(e){return["rect","bar","image","arc"].includes(e)}const HQt=new Set(Ye(fu));function jh(e){return e.type}const qQt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],WQt=["fill","fillOpacity"],GQt=[...qQt,...WQt],YQt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},xge=Ye(YQt),KQt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},XQt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},QQt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},G4e=Ye(QQt);function Eb(e){return e&&e.band!=null}const JQt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Y4e=5,ZQt={binSpacing:1,continuousBandSize:Y4e,minBandSize:.25,timeUnitBandPosition:.5},eJt={binSpacing:0,continuousBandSize:Y4e,minBandSize:.25,timeUnitBandPosition:.5},tJt={thickness:1};function nJt(e){return jh(e)?e.type:e}const e5="min",rJt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Sge(e){return e in rJt}function K4e(e){return!!(e!=null&&e.encoding)}function _h(e){return e&&(e.op==="count"||!!e.field)}function X4e(e){return e&&je(e)}function LR(e){return"row"in e||"column"in e}function yre(e){return!!e&&"header"in e}function t5(e){return"facet"in e}function iJt(e){return e.param}function sJt(e){return e&&!mt(e)&&"repeat"in e}function Tge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function vre(e){return"sort"in e}function by({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return zm("timeUnitBandPosition",n,r);if(ai(s))return .5}}function Q4e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=al(e),u=Er(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:zm("timeUnitBandSize",r,i)};if(ai(h)&&!ho(s))return{band:1}}if(UI(r.type))return s?ho(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function J4e(e,t,n,r){return ai(e.bin)||e.timeUnit&&su(e)&&e.type==="temporal"?by({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Z4e(e){return e&&!!e.sort&&!e.field}function n5(e){return e&&"condition"in e}function r5(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&et(t)}function FR(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&cn(t)}function oJt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||id(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function Dx(e){return e==null?void 0:e.type}function fp(e){return e&&"datum"in e}function c0(e){return su(e)&&!FM(e)||LM(e)}function Cge(e){return su(e)&&e.type==="quantitative"&&!e.bin||LM(e)}function LM(e){return fp(e)&&lr(e.datum)}function cn(e){return et(e)||fp(e)}function su(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function id(e){return e&&"value"in e&&"value"in e}function c_(e){return e&&("scale"in e||"sort"in e)}function Ox(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function eFe(e){return e&&"legend"in e}function tFe(e){return e&&("format"in e||"formatType"in e)}function aJt(e){return Yu(e,["legend","axis","header","scale"])}function uJt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(cJt(e))n=H6e("count");else{let o;if(!t.nofn)if(uJt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ai(a)?(o=s4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?r1(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Um(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!u_(l)&&(o=dQt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?JS(n):t.expr?U6e(n,t.expr)+s:Vc(n)+s}function FM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(m4e(e.type))}function lJt(e){var t;return c_(e)&&Px((t=e.scale)==null?void 0:t.type)}function cJt(e){return e.aggregate==="count"}function fJt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ai(r))return`${n} (binned)`;if(i&&!u_(i)){const a=(o=fo(i))==null?void 0:o.unit;if(a)return`${n} (${KF(a).join("-")})`}else if(s)return r1(s)?`${n} for max ${s.argmax}`:Um(s)?`${n} for min ${s.argmin}`:`${RR(s)} of ${n}`;return n}function dJt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(r1(t))return`${i} for argmax(${t.argmax})`;if(Um(t))return`${i} for argmin(${t.argmin})`;const s=r&&!u_(r)?fo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ai(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const nFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return dJt(e);default:return fJt(e,t)}};let rFe=nFe;function iFe(e){rFe=e}function hJt(){iFe(nFe)}function gE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=bre(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?_re(s,t):void 0;return n?ds(i,s.title,o):i??s.title??o}function bre(e){if(Ox(e)&&e.axis)return e.axis;if(eFe(e)&&e.legend)return e.legend;if(yre(e)&&e.header)return e.header}function _re(e,t){return rFe(e,t)}function jM(e){if(tFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=bre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function pJt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(vre(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!r1(n)&&!Um(n))return"quantitative";if(c_(e)&&((s=e.scale)!=null&&s.type))switch(nq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Bh(e){if(et(e))return e;if(r5(e))return e.condition}function Ls(e){if(cn(e))return e;if(FR(e))return e.condition}function sFe(e,t,n,r={}){if(mt(e)||lr(e)||Ky(e)){const i=mt(e)?"string":lr(e)?"number":"boolean";return Ze(mXt(t,i,e)),{value:e}}return cn(e)?BM(e,t,n,r):FR(e)?{...e,condition:BM(e.condition,t,n,r)}:e}function BM(e,t,n,r){if(tFe(e)){const{format:i,formatType:s,...o}=e;if(wb(s)&&!n.customFormatTypes)return Ze(vge(t)),BM(o,t,n,r)}else{const i=Ox(e)?"axis":eFe(e)?"legend":yre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(wb(o)&&!n.customFormatTypes)return Ze(vge(t)),BM({...e,[i]:a},t,n,r)}}return et(e)?wre(e,t,r):mJt(e)}function mJt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":mt(n)?"nominal":a_(n)?"temporal":void 0,{...e,type:t}}function wre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Yne(r)&&!r1(r)&&!Um(r)&&(Ze(yXt(r)),delete a.aggregate),i&&(a.timeUnit=fo(i)),o&&(a.field=`${o}`),ai(s)&&(a.bin=i5(s,t)),Ao(s)&&!hs(t)&&Ze(KXt(t)),su(a)){const{type:u}=a,l=_Qt(u);u!==l&&(a.type=l),u!=="quantitative"&&i4e(r)&&(Ze(gXt(u,r)),a.type="quantitative")}else if(!J6e(t)){const u=pJt(a,t);a.type=u}if(su(a)){const{compatible:u,warning:l}=gJt(a,t)||{};u===!1&&Ze(l)}if(vre(a)&&mt(a.sort)){const{sort:u}=a;if(Sge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Sge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(yre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function i5(e,t){return Ky(e)?{maxbins:lge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:lge(t)}:e}const U_={compatible:!0};function gJt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case fm:case dm:case BF:return FM(e)?U_:{compatible:!1,warning:wXt(t)};case Ri:case go:case Jy:case ZS:case sl:case ap:case up:case NR:case PR:case UF:case vb:case zF:case VF:case i_:case ef:case md:case HF:return U_;case yd:case Hc:case gd:case vd:return n!==_b?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:U_;case dg:case Zy:case e1:case t1:case fg:case cg:case lg:case pd:case op:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:U_;case ol:case n1:return!FM(e)&&!lJt(e)?{compatible:!1,warning:EXt(t)}:U_;case kx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:U_}}function $x(e){const{formatType:t}=jM(e);return t==="time"||!t&&yJt(e)}function yJt(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function s5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=fo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return OR(e)?a=e.expr:Nt(e)?a=e.signal:a_(e)?(o=!0,a=bb(e)):(mt(e)||lr(e))&&o&&(a=`datetime(${Ur(e)})`,aQt(s)&&(lr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=bb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Ur(e)}function oFe(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!u_(e.timeUnit)?e.timeUnit:void 0,s=s5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function jR(e,t){return ai(e.bin)?hg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Age={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function BR(e){return e==null?void 0:e.condition}const aFe=["domain","grid","labels","ticks","title"],vJt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},uFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},bJt={...uFe,style:1,labelExpr:1,encoding:1};function Ige(e){return!!bJt[e]}const _Jt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},lFe=Ye(_Jt);function pg(e){return"mark"in e}class o5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return pg(t)?nJt(t.mark)===this.name:!1}}function Pv(e,t){const n=e&&e[t];return n?je(n)?gb(n,r=>!!r.field):et(n)||r5(n):!1}function cFe(e,t){const n=e&&e[t];return n?je(n)?gb(n,r=>!!r.field):et(n)||fp(n)||FR(n):!1}function fFe(e,t){if(hs(t)){const n=e[t];if((et(n)||fp(n))&&(P4e(n.type)||et(n)&&n.timeUnit)){const r=Hne(t);return cFe(e,r)}}return!1}function Ere(e){return gb(wKt,t=>{if(Pv(e,t)){const n=e[t];if(je(n))return gb(n,r=>!!r.aggregate);{const r=Bh(n);return r&&!!r.aggregate}}return!1})}function dFe(e,t){const n=[],r=[],i=[],s=[],o={};return xre(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=bre(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:gE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(r1(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Um(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),su(a)&&ai(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),jR(a,u)&&n.push(at(a,{binSuffix:"range"})),hs(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",J6e(u)||(y.type=_b)}else if(d&&!u_(d)){i.push({timeUnit:d,field:l,as:g});const v=su(a)&&a.type!==Nx&&"time";v&&(u===NR||u===vb?y.formatType=v:NKt(u)?y.legend={formatType:v,...y.legend}:hs(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function wJt(e,t,n){const r=DKt(t,n);if(r){if(r==="binned"){const i=e[t===pd?Ri:go];return!!(et(i)&&et(e[t])&&Ao(i.bin))}}else return!1;return!0}function EJt(e,t,n,r){const i={};for(const s of Ye(e))Q6e(s)||Ze(_Xt(s));for(let s of AKt){if(!e[s])continue;const o=e[s];if(DR(s)){const a=CKt(s),u=i[a];if(et(u)&&bQt(u.type)&&et(o)&&!u.timeUnit){Ze(pXt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Ze(hXt),s=ef),!wJt(e,s,t)){Ze(YF(s,t));continue}if(s===fg&&t==="line"){const a=Bh(e[s]);if(a!=null&&a.aggregate){Ze(bXt);continue}}if(s===sl&&(n?"fill"in e:"stroke"in e)){Ze(g4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===PR||s===kx&&!je(o)&&!id(o)||s===vb&&je(o)){if(o){if(s===kx){const a=e[s];if(Z4e(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(et(u)?a.push(wre(u,s)):Ze(tq(u,s)),a),[])}}else{if(s===vb&&o===null)i[s]=null;else if(!et(o)&&!fp(o)&&!id(o)&&!n5(o)&&!Nt(o)){Ze(tq(o,s));continue}i[s]=sFe(o,s,r)}}return i}function a5(e,t){const n={};for(const r of Ye(e)){const i=sFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function xJt(e){const t=[];for(const n of Ye(e))if(Pv(e,n)){const r=e[n],i=pt(r);for(const s of i)et(s)?t.push(s):r5(s)&&t.push(s.condition)}return t}function xre(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function SJt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function hFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ri:case go:case zF:case HF:case VF:case pd:case op:case Jy:case ZS:case ef:case cg:case md:case lg:case gd:case yd:case vd:case Hc:case NR:case ol:case i_:case vb:return n;case kx:if(e==="line"||e==="trail")return n;case PR:case UF:{const i=t[r];if(je(i)||et(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case fg:if(e==="trail")return n;case sl:case ap:case up:case dg:case Zy:case e1:case n1:case t1:{const i=Bh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function TJt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function sq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Sre(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=xJt(n).map(aJt);return{tooltip:[...i,...sh(s,Vn)]}}function Sre(e){const{title:t,field:n}=e;return ds(t,n)}function Tre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Sre(n);return pFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function pFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...jh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ky(e[t])?{}:e[t]}}]:[]}function mFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:DP(s,n),continuousAxisChannelDef2:DP(o,n),continuousAxisChannelDefError:DP(a,n),continuousAxisChannelDefError2:DP(u,n),continuousAxis:i}}function DP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Ze(YXt(n,t)),r}else return e}function gFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(jh(n)&&n.orient)return n.orient;if(c0(i)){if(c0(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return $x(s)&&!$x(i)?"horizontal":"vertical"}return"horizontal"}else{if(c0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const UM="boxplot",CJt=["box","median","outliers","rule","ticks"],AJt=new o5(UM,vFe);function yFe(e){return lr(e)?"tukey":e}function vFe(e,{config:t}){e={...e,encoding:a5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=jh(n)?n:{type:n};i&&Ze(p4e("boxplot"));const u=a.extent??t.boxplot.extent,l=Er("size",a,t),c=a.invalid,f=yFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:E,boxOrient:w,customTooltipWithoutAggregatedField:S}=IJt(e,u,t),x=JS(m.field),{color:C,size:A,...I}=_,R=ke=>Tre(a,g,m,ke,t.boxplot),O=R(I),D=R(_),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...I,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=sq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},z=f==="min-max"?M:sq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:z}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:z})],P=[...f!=="tukey"?H:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:w,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${U})`,q=`${U} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:bFe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${x}`},{op:"max",field:m.field,as:`upper_whisker_${x}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${x}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${x}`},...v],groupby:y}],layer:H},{tooltip:he,...ve}=I,{scale:Ie,axis:be}=m,Xe=Sre(m),Ue=Yu(be,["title"]),yt=pFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Xe!==void 0?{title:Xe}:{},...Ie!==void 0?{scale:Ie}:{},...Br(Ue)?{}:{axis:Ue}},...ve,...C?{color:C}:{},...S?{tooltip:S}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:P}]}}function bFe(e){const t=JS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function IJt(e,t,n){const r=gFe(e,UM),{continuousAxisChannelDef:i,continuousAxis:s}=mFe(e,r,UM),o=i.field,a=JS(o),u=yFe(t),l=[...bFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=TJt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=dFe(p,n),E=r==="vertical"?"horizontal":"vertical",w=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:E,boxOrient:w,customTooltipWithoutAggregatedField:h}}const Cre="errorbar",kJt=["ticks","rule"],RJt=new o5(Cre,_Fe);function _Fe(e,{config:t}){e={...e,encoding:a5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=wFe(e,Cre,t);delete s.size;const c=Tre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function NJt(e,t){const{encoding:n}=e;if(PJt(n))return{orient:gFe(e,t),inputType:"raw"};const r=DJt(n),i=OJt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(cn(a)&&cn(u))throw new Error(`${t} cannot have both x2 and y2`);if(cn(a)){if(c0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(cn(u)){if(c0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(cn(u)&&!cn(a))throw new Error(`${t} cannot have xError2 without xError`);if(cn(c)&&!cn(l))throw new Error(`${t} cannot have yError2 without yError`);if(cn(a)&&cn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cn(a)){if(c0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(cn(l)){if(c0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function PJt(e){return(cn(e.x)||cn(e.y))&&!cn(e.x2)&&!cn(e.y2)&&!cn(e.xError)&&!cn(e.xError2)&&!cn(e.yError)&&!cn(e.yError2)}function DJt(e){return cn(e.x2)||cn(e.y2)}function OJt(e){return cn(e.xError)||cn(e.xError2)||cn(e.yError)||cn(e.yError2)}function wFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=jh(r)?r:{type:r};s&&Ze(p4e(t));const{orient:l,inputType:c}=NJt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=mFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=$Jt(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:w,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:x,...C}=i,{bins:A,timeUnits:I,aggregate:R,groupby:O,encoding:D}=dFe(C,n),$=[...R,...g],F=c!=="raw"?[]:O,M=sq(v,f,D,_);return{transform:[...a.transform??[],...A,...I,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function $Jt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Ze(GXt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:RR(h)},{fieldPrefix:"upper_",titlePrefix:kge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:kge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:gE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:gE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:gE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Ze(WXt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:yb(yb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function kge(e,t,n){return`${RR(e)} ${n} ${t}`}const Are="errorband",MJt=["band","borders"],LJt=new o5(Are,EFe);function EFe(e,{config:t}){e={...e,encoding:a5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=wFe(e,Are,t),l=o,c=Tre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Ze(_ge("interpolate")):l.tension&&Ze(_ge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const xFe={};function Ire(e,t,n){const r=new o5(e,t);xFe[e]={normalizer:r,parts:n}}function FJt(){return Ye(xFe)}Ire(UM,vFe,CJt);Ire(Cre,_Fe,kJt);Ire(Are,EFe,MJt);const jJt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],SFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},TFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},BJt=Ye(SFe),UJt=Ye(TFe),zJt={header:1,headerRow:1,headerColumn:1,headerFacet:1},CFe=Ye(zJt),AFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],VJt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},HJt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},sd="_vgsid_",qJt={point:{on:"click",fields:[sd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function kre(e){return e==="legend"||!!(e!=null&&e.legend)}function vB(e){return kre(e)&&gt(e)}function Rre(e){return!!(e!=null&&e.select)}function IFe(e){const t=[];for(const n of e||[]){if(Rre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function WJt(e){return u5(e)||Pre(e)||Nre(e)}function Nre(e){return"concat"in e}function u5(e){return"vconcat"in e}function Pre(e){return"hconcat"in e}function kFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Uh(e){return gt(e)&&e.step!==void 0}function Rge(e){return e.view||e.width||e.height}const Nge=20,GJt={align:1,bounds:1,center:1,columns:1,spacing:1},YJt=Ye(GJt);function KJt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(t5(e)&&!LR(e.facet)||Nre(e))&&(i.columns=o),u5(e)&&(i.columns=1);for(const a of YJt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function oq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function zM(e,t){const n=VM(e,t);return Uh(n)?n.step:RFe}function VM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ds(n,{step:e.step})}const RFe=20,XJt={continuousWidth:200,continuousHeight:200,step:RFe},QJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:XJt,mark:XQt,arc:{},area:{},bar:ZQt,circle:{},geoshape:{},image:{},line:{},point:{},rect:eJt,rule:{color:"black"},square:{},text:{color:"black"},tick:tJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:TQt,projection:{},legend:VJt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:qJt,style:{},title:{},facet:{spacing:Nge},concat:{spacing:Nge},normalizedNumberFormat:".0%"},xp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Pge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Dge={blue:xp[0],orange:xp[1],red:xp[2],teal:xp[3],green:xp[4],yellow:xp[5],purple:xp[6],pink:xp[7],brown:xp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function JJt(e={}){return{signals:[{name:"color",value:gt(e)?{...Dge,...e}:Dge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function ZJt(e){return{signals:[{name:"fontSize",value:gt(e)?{...Pge,...e}:Pge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function eZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function NFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=BR(i)?a4e(i):El(i)}return n}function tZt(e){const t=Ye(e),n={};for(const r of t)n[r]=NFe(e[r]);return n}const nZt=[...G4e,...lFe,...CFe,"background","padding","legend","lineBreak","scale","style","title","view"];function PFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=US({},rn(QJt),n?eZt(n):{},t?JJt(t):{},r?ZJt(r):{},s||{});i&&zS(o,"selection",i,!0);const a=Yu(o,nZt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=El(o[u]));for(const u of G4e)o[u]&&(a[u]=Ru(o[u]));for(const u of lFe)o[u]&&(a[u]=NFe(o[u]));for(const u of CFe)o[u]&&(a[u]=Ru(o[u]));return o.legend&&(a.legend=Ru(o.legend)),o.scale&&(a.scale=Ru(o.scale)),o.style&&(a.style=tZt(o.style)),o.title&&(a.title=Ru(o.title)),o.view&&(a.view=Ru(o.view)),a}const rZt=new Set(["view",...HQt]),iZt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],sZt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...KQt};function oZt(e){e=rn(e);for(const t of iZt)delete e[t];if(e.axis)for(const t in e.axis)BR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of jJt)delete e.legend[t];if(e.mark){for(const t of xge)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(IFe(e.params)),delete e.params);for(const t of rZt){for(const r of xge)delete e[t][r];const n=sZt[t];if(n)for(const r of n)delete e[t][r];uZt(e,t)}for(const t of FJt())delete e[t];aZt(e);for(const t in e)gt(e[t])&&Br(e[t])&&delete e[t];return Br(e)?void 0:e}function aZt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=o4e(e.title);Br(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Br(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Br(r)?delete e.title:e.title=r}function uZt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Br(s)||(e.style[n??t]=s),delete e[t]}function l5(e){return"layer"in e}function lZt(e){return"repeat"in e}function cZt(e){return!je(e.repeat)&&e.repeat.layer}class Dre{map(t,n){return t5(t)?this.mapFacet(t,n):lZt(t)?this.mapRepeat(t,n):Pre(t)?this.mapHConcat(t,n):u5(t)?this.mapVConcat(t,n):Nre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(l5(t))return this.mapLayer(t,n);if(pg(t))return this.mapUnit(t,n);throw new Error(Kne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const fZt={zero:1,center:1,normalize:1};function dZt(e){return e in fZt}const hZt=new Set([H4e,QF,XF,MM,ZF,mre,gre,JF,q4e,pre]),pZt=new Set([QF,XF,H4e]);function z_(e){return et(e)&&Dx(e)==="quantitative"&&!e.bin}function Oge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(z_(o)&&z_(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(z_(o))return t;if(z_(a))return i}else{if(z_(o))return s&&n==="vertical"?void 0:t;if(z_(a))return s&&n==="horizontal"?void 0:i}}function mZt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function DFe(e,t){var m,g;const n=jh(e)?e:{type:e},r=n.type;if(!hZt.has(r))return null;const i=Oge(t,"x",n)||Oge(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=mZt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=IKt.reduce((y,v)=>{if(v!=="tooltip"&&Pv(t,v)){const _=t[v];for(const E of pt(_)){const w=Bh(E);if(w.aggregate)continue;const S=at(w,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:w})}}return y},[]);let p;return s.stack!==void 0?Ky(s.stack)?p=s.stack?"zero":null:p=s.stack:pZt.has(r)&&(p="zero"),!p||!dZt(p)||Ere(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Ku.LINEAR&&s!=null&&s.stack&&Ze(VXt(s.scale.type)),cn(t[lp(i)])?(s.stack!==void 0&&Ze(zXt(i)),null):(et(s)&&s.aggregate&&!BKt.has(s.aggregate)&&Ze(HXt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:l_(r),stackBy:h,offset:p}))}function OFe(e,t,n){const r=Ru(e),i=Er("orient",r,n);if(r.orient=bZt(r.type,t,i),i!==void 0&&i!==r.orient&&Ze(CXt(r.orient,i)),r.type==="bar"&&r.orient){const u=Er("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:JQt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Er("opacity",r,n),o=Er("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=yZt(r.type,t)),Er("cursor",r,n)===void 0&&(r.cursor=gZt(r,t,n)),r}function gZt(e,t,n){return t.href||e.href||Er("href",e,n)?"pointer":e.cursor}function yZt(e,t){if(Hn([ZF,pre,mre,gre],e)&&!Ere(t))return .7}function vZt(e,t,{graticule:n}){if(n)return!1;const r=zm("filled",e,t),i=e.type;return ds(r,i!==ZF&&i!==JF&&i!==MM)}function bZt(e,t,n){switch(e){case ZF:case mre:case gre:case q4e:case zQt:case UQt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case QF:if(et(r)&&(Ao(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&(Ao(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===_b&&!ai(r.bin)||LM(r))&&et(i)&&Ao(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===_b&&!ai(i.bin)||LM(i))&&et(r)&&Ao(r.bin)?"vertical":"horizontal"}case MM:if(s&&!(et(r)&&Ao(r.bin))&&o&&!(et(i)&&Ao(i.bin)))return;case XF:if(o)return et(i)&&Ao(i.bin)?"horizontal":"vertical";if(s)return et(r)&&Ao(r.bin)?"vertical":"horizontal";if(e===MM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case JF:case pre:{const a=Cge(r),u=Cge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=su(r)&&r.type===Nx,c=su(i)&&i.type===Nx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function _Zt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function wZt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Yu(e[t],["point","line"])});return e}function bB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function $ge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class EZt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(pg(t)){const{mark:r,encoding:i}=t,s=jh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!bB(s,n[s.type],i);case"area":return!!bB(s,n[s.type],i)||!!$ge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=a5(l,i),d=jh(a)?a:{type:a},h=bB(d,i[d.type],f),p=d.type==="area"&&$ge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:_Zt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Yu(f,["shape"])}],g=DFe(OFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Yu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Ax(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Ax(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:wZt(i)})}}function xZt(e,t){return t?LR(e)?MFe(e,t):$Fe(e,t):e}function _B(e,t){return t?MFe(e,t):e}function aq(e,t,n){const r=t[e];if(sJt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Ze(oXt(r.repeat));return}return t}function $Fe(e,t){if(e=aq("field",e,t),e!==void 0){if(e===null)return null;if(vre(e)&&_h(e.sort)){const n=aq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Mge(e,t){if(et(e))return $Fe(e,t);{const n=aq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Lge(e,t){if(cn(e)){const n=Mge(e,t);if(n)return n;if(n5(e))return{condition:e.condition}}else{if(FR(e)){const n=Mge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function MFe(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>Lge(s,t)).filter(s=>s);else{const s=Lge(i,t);s!==void 0&&(n[r]=s)}}return n}class SZt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(pg(t)){const{encoding:n,mark:r}=t;if(r==="line"||jh(r)&&r.type==="line")for(const i of TKt){const s=s_(i),o=n[s];if(n[i]&&(et(o)&&!Ao(o.bin)||fp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Ze(TXt(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class TZt extends Dre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[AJt,RJt,LJt,new EZt,new SZt]}map(t,n){if(pg(t)){const r=Pv(t.encoding,fm),i=Pv(t.encoding,dm),s=Pv(t.encoding,BF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=_B(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return cZt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${ki(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=Yu(t,["columns"]),Ze(gge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${ki(p)}`:(r.row?`row_${ki(m)}`:"")+(r.column?`column_${ki(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Yu(_,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return LR(r)&&t.columns&&(t=Yu(t,["columns"]),Ze(gge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=jge({parentProjection:o,projection:i}),l=Fge({parentEncoding:s,encoding:_B(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=_B(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Ze(xXt([...r?[fm]:[],...i?[dm]:[]]));const o={},a={};for(const u of[fm,dm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:xZt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Fge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:jge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Fge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(cn(o)){const u={...a,...o};r[s]=u}else FR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||id(a)||Nt(a)||cn(a)||je(a))&&(r[s]=a)}}else r=t;return!r||Br(r)?void 0:r}function jge(e){const{parentProjection:t,projection:n}=e;return t&&n&&Ze(dXt({parentProjection:t,projection:n})),n??t}function Ore(e){return"filter"in e}function CZt(e){return(e==null?void 0:e.stop)!==void 0}function LFe(e){return"lookup"in e}function AZt(e){return"data"in e}function IZt(e){return"param"in e}function kZt(e){return"pivot"in e}function RZt(e){return"density"in e}function NZt(e){return"quantile"in e}function PZt(e){return"regression"in e}function DZt(e){return"loess"in e}function OZt(e){return"sample"in e}function $Zt(e){return"window"in e}function MZt(e){return"joinaggregate"in e}function LZt(e){return"flatten"in e}function FZt(e){return"calculate"in e}function FFe(e){return"bin"in e}function jZt(e){return"impute"in e}function BZt(e){return"timeUnit"in e}function UZt(e){return"aggregate"in e}function zZt(e){return"stack"in e}function VZt(e){return"fold"in e}function HZt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function qZt(e){return e.map(t=>Ore(t)?{filter:pE(t.filter,vQt)}:t)}class WZt extends Dre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Bge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Bge(t,n),t.encoding){const r={};for(const[i,s]of yy(t.encoding))r[i]=jFe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:yy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Lo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Bge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Ore(s))return{filter:uq(s,t)};if(FFe(s)&&o_(s.bin))return{...s,bin:BFe(s.bin)};if(LFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function jFe(e,t){var r,i;const n=rn(e);if(et(n)&&o_(n.bin)&&(n.bin=BFe(n.bin)),c_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(n5(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:uq(s,t)}});else{const{selection:s,param:o,test:a,...u}=jFe(n.condition,t);n.condition=o?n.condition:{...u,test:uq(n.condition,t)}}return n}function BFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function uq(e,t){const n=r=>pE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):pE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class lq extends Dre{map(t,n){const r=n.selections??[];if(t.params&&!pg(t)){const i=[];for(const s of t.params)Rre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=lq.prototype[e];lq.prototype[e]=function(n,r){return t.call(this,n,GZt(n,r))}}function GZt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function UFe(e,t){t===void 0&&(t=PFe(e.config));const n=QZt(e,t),{width:r,height:i}=e,s=JZt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const YZt=new TZt,KZt=new WZt,XZt=new lq;function QZt(e,t={}){const n={config:t};return XZt.map(YZt.map(KZt.map(e,n),n),n)}function Uge(e){return mt(e)?{type:e}:e??{}}function JZt(e,t,n){let{width:r,height:i}=t;const s=pg(e)||l5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Ze(dge("width")),r=void 0),i=="container"&&(Ze(dge("height")),i=void 0));const a={type:"pad",...o,...n?Uge(n.autosize):{},...Uge(e.autosize)};if(a.type==="fit"&&!s&&(Ze(KKt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Ze(hge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Ze(hge("height")),!kl(a,{type:"pad"}))return a}function ZZt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function een(e){return e?`fit-${qF(e)}`:"fit"}const ten=["background","padding"];function zge(e,t){const n={};for(const r of ten)e&&e[r]!==void 0&&(n[r]=El(e[r]));return t&&(n.params=e.params),n}class mg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new mg(rn(this.explicit),rn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ds(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ld(e){return{explicit:!0,value:e}}function pl(e){return{explicit:!1,value:e}}function zFe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:c5(t,n,r,i)}}function c5(e,t,n,r){return e.explicit&&t.explicit&&Ze($Xt(n,r,e.value,t.value)),e}function _y(e,t,n,r,i=c5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:kl(e.value,t.value)?e:i(e,t,n,r)}class nen extends mg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Mx(e){return"url"in e}function zI(e){return"values"in e}function VFe(e){return"name"in e&&!Mx(e)&&!zI(e)&&!$0(e)}function $0(e){return e&&(HFe(e)||qFe(e)||$re(e))}function HFe(e){return"sequence"in e}function qFe(e){return"sphere"in e}function $re(e){return"graticule"in e}var Si;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Si||(Si={}));function WFe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Vc(i.field),i}function xb(e,t=!0,n=xa){if(je(e)){const r=e.map(i=>xb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(a_(e))return n(t?bb(e):oQt(e));return t?n(Ur(e)):e}function ren(e,t){for(const n of Lo(e.component.selection??{})){const r=n.name;let i=`${r}${Ey}, ${n.resolve==="global"?"true":`{unit: ${Dv(e)}}`}`;for(const s of p5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+$en,on:[{events:{signal:n.name+Ey},update:`modify(${rt(n.name+Sb)}, ${i})`}]})}return Mre(t)}function ien(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Qy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Mre(t)}function sen(e,t){let n=!1;for(const r of Lo(e.component.selection??{})){const i=r.name,s=rt(i+Sb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${c5e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of p5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Mre(t)}function oen(e,t){const n=[...t],r=Dv(e,{escape:!1});for(const i of Lo(e.component.selection??{})){const s={name:i.name+Sb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:sd}}]),i.init){const a=i.project.items.map(WFe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[sd]:xb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:xb(u,!1)}))}n.filter(a=>a.name===i.name+Sb).length||n.push(s)}return n}function GFe(e,t){for(const n of Lo(e.component.selection??{}))for(const r of p5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function aen(e,t){for(const n of e.children)Xi(n)&&(t=GFe(n,t));return t}function uen(e,t,n,r){const i=m5e(e,t.param,t);return{signal:Kl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Mre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Lr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Ze(lXt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Xu extends Lr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${V6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function wB(e){return e.as!==void 0}function Vge(e){return`${e}_end`}class wh extends Lr{clone(){return new wh(null,rn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(u_(u)){if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=by({fieldDef:s,markDef:f,config:d});(UI(c)||h)&&(l={timeUnit:fo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=by({fieldDef:s,markDef:f,config:d});UI(c)&&hs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return Br(r)?null:new wh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=fo(r),o={...i,timeUnit:s};return new wh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of yy(this.timeUnits)){const s=wB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Lo(this.timeUnits).map(t=>wB(t)?t.as:Vge(t.field)))}dependentFields(){return new Set(Lo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of Lo(this.timeUnits)){const{rectBandPosition:r}=n,i=fo(n.timeUnit);if(wB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Vc(s),type:"timeunit",...a?{units:KF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Hge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=YFe({timeUnit:i,field:o}),u=Vge(o);t.push({type:"formula",expr:a,as:u}),t.push(...Hge([o,u],r,i))}}return t}}const f5="offsetted_rect_start",d5="offsetted_rect_end";function YFe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=T4e(r),{part:o,step:a}=k4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Hge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:qge([YFe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${f5}`},{type:"formula",expr:qge([i,s],n+.5),as:`${e}_${d5}`}]}return[]}function qge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const UR="_tuple_fields";class len{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const cen={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new len),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=ki(`${r}_${g}`);for(let v=1;a.has(y);v++)y=ki(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ye(p))SKt(m)?(h||(h=[])).push(m):l==="interval"?(Ze(sXt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Ze(XKt(p,m.aggregate));continue}else if(!g){Ze(mge(p));continue}if(m.timeUnit&&!u_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&hg(p)&&Kl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===sd,K6e(p)?(v.geoChannel=p,v.channel=Y6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Ze(mge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===sd}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Br(o)||(i.timeUnit=new wh(null,o))},signals:(e,t,n)=>{const r=t.name+UR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(WFe)})}},hm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!hg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Ze(eXt),!s||!Kl(o)){Ze(ZKt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Wge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(c5e)>=0)i.update=`{${r.map(o=>`${rt(Vc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Vc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Wge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function cq(e,t){return`domain(${rt(e.scaleName(t))})`}function Wge(e){return e.parent&&sT(e.parent)&&!e.parent.parent}const yE="_brush",KFe="_scale_trigger",i2="geo_interval_init_tick",XFe="_init",fen="_center",den={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[sd],i.encodings||(i.encodings=n.value?Ye(n.value):[yd,gd]),n.select={type:"interval",...i}}if(t.translate&&!hm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+yE)}`;for(const s of t.events){if(!s.between){Ze(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ey,s=Lo(t.project.hasChannel).filter(a=>a.channel===Ri||a.channel===go),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(hen(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+fen,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=w=>e.getSizeSignalRef(w).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+XFe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Dv(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,E=s.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:i2}]:[]],update:_}]})}else{if(!hm.defined(t)){const l=r+KFe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Kl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Dv(e)}, fields: ${r+UR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${xb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Xi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===i2).length||n.unshift({name:i2,value:null,on:[{events:"timer{1}",update:`${i2} === null ? {} : ${i2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Sb)})`;if(hm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Dv(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+yE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+yE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function hen(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ri?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=hm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:xb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+KFe},update:Kl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:xb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ri?0:1,h=t.name+XFe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const pen={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+UR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Lo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+yE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Dv(e)}, `;if(t.project.hasSelectionId)l+=`${sd}: ${o}[${rt(sd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Ey,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function tT(e,t,n,r){const i=n5(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(iJt(u)){const{param:c,empty:f}=u;return{test:p5e(e,{param:c,empty:f}),...l}}else return{test:WM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Lre(e,t="text"){const n=e.encoding[t];return tT(e,n,t,r=>h5(r,e.config))}function h5(e,t,n="datum"){if(e){if(id(e))return hi(e.value);if(cn(e)){const{format:r,formatType:i}=jM(e);return hre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function QFe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:Gge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return tT(e,o,"tooltip",u=>{const l=h5(u,i,a);if(l)return l;if(u===null)return;let c=Er("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Nt(c)?c:c.content==="encoding"?Gge(n,s,i,t):{signal:a}})}}function JFe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=s_(f),h=su(c)?c:{...c,type:e[d].type},p=h.title||_re(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(hs(f)){const y=f==="x"?"x2":"y2",v=Bh(e[y]);if(Ao(h.bin)&&v){const _=at(h,{expr:o}),E=at(v,{expr:o}),{format:w,formatType:S}=jM(h);g=MR(_,E,w,S,i),s[y]=!0}}if((hs(f)||f===ef||f===md)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=jM(h);g=hre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=h5(h,i,o).signal),a.push({channel:f,key:m,value:g})}xre(e,(c,f)=>{et(c)?u(c,f):r5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Gge(e,t,n,{reactiveGeom:r}={}){const i=JFe(e,t,n,{reactiveGeom:r}),s=yy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function men(e){const{markDef:t,config:n}=e,r=Er("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...gen(e),...yen(e)}}function gen(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Er("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in WKt?{}:{ariaRoleDescription:{value:t}}}function yen(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return tT(e,s,"description",u=>h5(u,e.config));const o=Er("description",n,r);if(o!=null)return{description:hi(o)};if(r.aria===!1)return{};const a=JFe(t,i,r);if(!Br(a))return{description:{signal:yy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function to(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Er(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=hi(u)));const l=i[e];return tT(t,l,o??e,c=>dre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function ZFe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Er("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Er(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Er(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:hi(u)}:{},...l?{stroke:hi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Ze(g4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...to("color",e,{vgChannel:c,defaultValue:o?u:l}),...to("fill",e,{defaultValue:r.fill?u:void 0}),...to("stroke",e,{defaultValue:r.stroke?l:void 0})}}function ven(e){const{encoding:t,mark:n}=e,r=t.order;return!l_(n)&&id(r)?tT(e,r,"zindex",i=>hi(i.value)):{}}function Lx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:dre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:hi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function pa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[lp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Lx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Fre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&hs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:ben({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function ben(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(cn(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return $M({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Nv(n,r,{suffix:"end"},{offset:s})}return cre(e)}function Fre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=s_(n),u=vy(n),l=Er(n,s,o,{vgChannel:u});if(l!==void 0)return tA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Ku.LOG,Ku.TIME,Ku.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[al(n)],mult:.5}}}}const _en={left:"x",center:"xc",right:"x2"},wen={top:"y",middle:"yc",bottom:"y2"};function e5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return vy(e);const i=e==="x"?"align":"baseline",s=Er(i,t,n);let o;return Nt(s)?(Ze(SXt(i)),o=void 0):o=s,e==="x"?_en[o||(r==="top"?"left":"center")]:wen[o||r]}function HM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?t5e(e,t,{defaultPos:n,defaultPos2:r}):pa(e,t,{defaultPos:n})}function t5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=lp(e),a=al(e),u=Een(t,r,o),l=u[a]?e5e(e,i,s):vy(e);return{...pa(e,t,{defaultPos:n,vgChannel:l}),...u}}function Een(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=s_(n),l=al(n),c=vy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Lx({channel:n,markDef:s,encoding:r,model:e}):Lx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=al(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=xen({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:OP(n,s)||OP(n,{[n]:DM(n,s,a.style),[l]:DM(l,s,a.style)})||OP(n,a[i])||OP(n,a.mark)||{[c]:Fre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function xen({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return cn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Nv(t,s,{suffix:"start"},{offset:u}):cre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function OP(e,t){const n=al(e),r=vy(e);if(t[r]!==void 0)return{[r]:tA(e,t[r])};if(t[e]!==void 0)return{[r]:tA(e,t[e])};if(t[n]){const i=t[n];if(Eb(i))Ze(vXt(n));else return{[n]:tA(e,i)}}}function wy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=lp(t),a=al(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Er("size",i,n,{vgChannel:a}),p=Z6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(ai(u.bin)||Ao(u.bin)||u.timeUnit&&!l)&&!(h&&!Eb(h))&&!r[p]&&!ho(f)?Cen({fieldDef:u,fieldDef2:l,channel:t,model:e}):(cn(u)&&ho(f)||m)&&!l?Ten(u,t,e):t5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Sen(e,t,n,r,i,s,o){if(Eb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=zm("minBandSize",{type:o},r);return{signal:c?`max(${$f(c)}, ${l})`:l}}else i.band!==1&&(Ze(IXt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(i1(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ds(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:zM(r.view,e)-2}}function Ten(e,t,n){var A,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=al(t),f=lp(t),d=Z6e(t),h=n.scaleName(d),p=n.getScaleComponent(Hne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=to("size",n,{vgChannel:c,defaultRef:hi(r.size)}):Ze(PXt(r.type)));const y=!!g,v=Q4e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:Sen(c,h||u,p||l,s,v,!!e,r.type)};const _=((I=l||p)==null?void 0:I.get("type"))==="band"&&Eb(v)&&!y?"top":"middle",E=e5e(t,r,s,_),w=E==="xc"||E==="yc",{offset:S,offsetType:x}=Lx({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),C=cre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:Fre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:w?x==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:Eb(v)?(1-v.band)/2:0});if(c)return{[E]:C,...g};{const R=vy(f),O=g[c],D=S?{...O,offset:S}:O;return{[E]:C,[R]:je(C)?[C[0],{...C[1],offset:D}]:{...C,offset:D}}}}function Yge(e,t,n,r,i,s,o){if(G6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=$f(n),c=$f(i),f=$f(r),d=$f(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Cen({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=Q4e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=hs(n)?Er("binSpacing",s,i)??0:0,m=lp(n),g=vy(n),y=vy(m),v=zm("minBandSize",s,i),{offset:_}=Lx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=Lx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),w=LQt({fieldDef:e,scaleName:u}),S=Yge(n,p,c,h,_,v,w),x=Yge(m,p,c,h,E??_,v,w),C=Nt(f)?{signal:`(1-${f.signal})/2`}:Eb(f)?(1-f.band)/2:.5,A=by({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ai(e.bin)||e.timeUnit){const R=e.timeUnit&&A!==.5;return{[y]:Kge({fieldDef:e,scaleName:u,bandPosition:C,offset:x,useRectOffsetField:R}),[g]:Kge({fieldDef:e,scaleName:u,bandPosition:Nt(C)?{signal:`1-${C.signal}`}:1-C,offset:S,useRectOffsetField:R})}}else if(Ao(e.bin)){const R=Nv(e,u,{},{offset:x});if(et(t))return{[y]:R,[g]:Nv(t,u,{},{offset:S})};if(o_(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Ze(b4e(m))}function Kge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return $M({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:f5,endSuffix:d5}:{}})}const Aen=new Set(["aria","width","height"]);function tf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?ZFe(e):{};return{...Ien(e.markDef,t),...Xge(e,"fill",n),...Xge(e,"stroke",r),...to("opacity",e),...to("fillOpacity",e),...to("strokeOpacity",e),...to("strokeWidth",e),...to("strokeDash",e),...ven(e),...QFe(e),...Lre(e,"href"),...men(e)}}function Xge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Er("invalid",s,r)==="hide"&&n&&!l_(i)){const a=ken(e,{invalid:!0,channels:WF});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function Ien(e,t){return qKt.reduce((n,r)=>(!Aen.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=hi(e[r])),n),{})}function ken(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Kl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>fre(o,t)).join(` ${s} `)}}function jre(e){const{config:t,markDef:n}=e;if(Er("invalid",n,t)){const i=Ren(e,{channels:cp});if(i)return{defined:{signal:i}}}return{}}function Ren(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Kl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>fre(o,t)).join(` ${s} `)}}function Qge(e,t){if(t!==void 0)return{[e]:hi(t)}}const EB="voronoi",n5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(EB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(l_(s))return Ze(QKt(s)),n;const o={name:e.getName(EB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...QFe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(EB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},r5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!kre(e.bind),parse:(e,t,n)=>f5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=n5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=ki(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:xb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Ey)[0],o=r+UR,a=i.items.map(l=>ki(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},qM="_toggle",i5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+qM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ey,r=t.name+qM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Dv(e)}}, `)+`${r} ? ${n} : null`}},Nen={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?Qy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(r5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===ki(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ey);r(i,"null"),i5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+qM),r(i,"false"))}return n}},s5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&kre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==sd;return t&&!n&&Ze(tXt),t&&n},parse:(e,t,n)=>{const r=rn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},f5e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=vB(t.bind)?t.bind.legend:"click",s=mt(i)?Qy(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=vB(t.bind)&&t.bind.legend,s=o=>a=>{const u=rn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${ki(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ey),o=r+UR,a=i.items.filter(d=>d.hasLegend).map(d=>ki(`${r}_${ki(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+qM),f=vB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Pen(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Lo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&s5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const o5e="_translate_anchor",a5e="_translate_delta",Den={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=hm.defined(t),s=r+o5e,{x:o,y:a}=t.project.hasChannel;let u=Qy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+yE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?cq(e,Ri):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?cq(e,go):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+a5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Jge(e,t,o,"width",n),a!==void 0&&Jge(e,t,a,"height",n),n}};function Jge(e,t,n,r,i){const s=t.name,o=s+o5e,a=s+a5e,u=n.channel,l=hm.defined(t),c=i.filter(w=>w.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ri?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const u5e="_zoom_anchor",l5e="_zoom_delta",Oen={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=hm.defined(t),s=r+l5e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ri)),l=rt(e.scaleName(go));let c=Qy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+yE,f))),n.push({name:r+u5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Zge(e,t,o,"width",n),a!==void 0&&Zge(e,t,a,"height",n),n}};function Zge(e,t,n,r,i){const s=t.name,o=n.channel,a=hm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?cq(e,o):u.name,h=s+l5e,p=`${s}${u5e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Sb="_store",Ey="_tuple",$en="_modify",c5e="vlSelectionResolve",p5=[pen,den,cen,i5e,r5e,hm,s5e,Nen,Den,Oen,n5e];function Men(e){let t=e.parent;for(;t&&!Ol(t);)t=t.parent;return t}function Dv(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=Men(e);if(r){const{facet:i}=r;for(const s of Ic)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function Bre(e){return Lo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function f5e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function fq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...fq(e.object)),t.push(...fq(e.property))),t)}function d5e(e){return e.object.type==="MemberExpression"?d5e(e.object):e.object.name==="datum"}function h5e(e){const t=one(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&d5e(r)&&n.add(fq(r).slice(1).join("."))}),n}class nT extends Lr{clone(){return new nT(null,this.model,rn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=WM(this.model,this.filter,this),this._dependentFields=h5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Len(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=ki(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?rn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=rn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?Qy(u.on,"scope"):pt(rn(u.on))},f=rn(i);for(const d of p5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function p5e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=ki(i),o=rt(s+Sb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function m5e(e,t,n){const r=ki(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Ze(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Ze((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Vc(s))}]`}function Fen(e,t){for(const[n,r]of yy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Xu(new nT(t,e,{param:n}),i,Si.Lookup,e.component.data.outputNodeRefCounts)}}function WM(e,t,n){return eA(t,r=>mt(r)?r:mQt(r)?p5e(e,r,n):N4e(r))}function jen(e,t){if(e)return je(e)&&!jg(e)?e.map(n=>_re(n,t)).join(", "):e}function xB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Z2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=vJt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(BR(m)){const{condition:g,...y}=m,v=pt(g),_=Age[h];if(_){const{vgProp:E,part:w}=_,S=[...v.map(x=>{const{test:C,...A}=x;return{test:WM(null,C),...A}}),y];xB(c,w,E,S),delete c[h]}else if(_===null){const E={signal:v.map(w=>{const{test:S,...x}=w;return`${WM(null,S)} ? ${fge(x)} : `}).join("")+fge(y)};c[h]=E}}else if(Nt(m)){const g=Age[h];if(g){const{vgProp:y,part:v}=g;xB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Br(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ds(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=yb(a,"datum.label",c.encode.labels.update.text.signal)),xB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of aFe)e.hasAxisPart(p)||delete c.encode[p];Br(c.encode)&&delete c.encode}const h=jen(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ds(l,0)}}}}function g5e(e){const{axes:t}=e.component,n=[];for(const r of cp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Ben(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Z2(i,"grid",t)),...r.map(i=>Z2(i,"grid",t)),...n.map(i=>Z2(i,"main",t)),...r.map(i=>Z2(i,"main",t))].filter(i=>i)}function e0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${$f(o[c])} : ${$f(a[c])}`};return l}return t[i]})])}function Uen(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${RR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:e0e(a,r,e,n),vgAxisConfig:e0e(u,r,e,n),axisConfigStyle:zen([...u,...a],r)}}function zen(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function dq(e,t,n,r={}){var s;const i=l4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const t0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Ven(n,e),gridScale:({model:e,channel:t})=>Hen(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||v5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||y5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Wen(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Gen(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Ken({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Xen,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=b5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return f4e(i?[Tge(i)]:[],et(o)?[Tge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Qen(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Jen(n,t)};function Ven(e,t){return!ho(e)&&et(t)&&!ai(t==null?void 0:t.bin)&&!Ao(t==null?void 0:t.bin)}function Hen(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function qen(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:BI(s);{const{configValue:o}=dq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?BI(o):n===Ri&&Hn([lre,ure],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function hq(e){return`(((${e.signal} % 360) + 360) % 360)`}function y5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=hq(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=hq(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function v5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=hq(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Wen(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function Gen(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Yen(e){return e==="x"?"bottom":"left"}function Ken({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ho(t)&&t!=="log"){if(et(e)){if(ai(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=fo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Xen({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=I4e(n);if(r)return{signal:r}}}}function b5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return d4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Qen(e,t){const n=e.values;if(je(n))return oFe(t,n);if(Nt(n))return n}function Jen(e,t){return e==="rect"&&FM(t)?1:0}class Fx extends Lr{clone(){return new Fx(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=h5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(c_(r)&&X4e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${N4e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Fx(t,{calculate:u,as:jx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function jx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function m5(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function Bx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ds((t||{})[e],i[e],n.header[e])}function g5(e,t,n,r){const i={};for(const s of e){const o=Bx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Ure=["row","column"],zre=["header","footer"];function Zen(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=g5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=m5(t,a),l=BI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...w5e(l,u),..._5e(u,l,s),...E5e(r,i,t,BJt,SFe)}}}function _5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=v5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function w5e(e,t){const n=y5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function etn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of zre)if(n[i])for(const s of n[i]){const o=ntn(e,t,i,n,s);o!=null&&r.push(o)}return r}function ttn(e,t){const{sort:n}=e;return _h(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:jx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function pq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=g5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=hre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=m5(t,a);return{text:{signal:u?yb(yb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...w5e(s,c),..._5e(c,s,o),...E5e(n,e,t,UJt,TFe)}}function ntn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=g5(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=pq(o,t,a))}const u=Ol(e)&&!LR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:ttn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const rtn={column:{start:0,end:1},row:{start:1,end:0}};function itn(e,t){return rtn[t][e]}function stn(e,t){const n={};for(const r of Ic){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=g5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=m5(r,o),u=itn(s,a);u!==void 0&&(n[a]=u)}}return Br(n)?void 0:n}function E5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Bx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Vre(e){return[...$P(e,"width"),...$P(e,"height"),...$P(e,"childWidth"),...$P(e,"childHeight")]}function $P(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ho(o)&&i1(a)){const u=e.scaleName(n);return Ol(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[n0e(u,a)]:[n0e(u,a),{name:i,update:x5e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=oq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function n0e(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function x5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ds(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${$f(o)}, ${$f(s)}) * ${e}_step`}function S5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function T5e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...tT(t,i,r,s=>hi(s.value))}},{})}function C5e(e,t){if(Ol(t))return e==="theta"?"independent":"shared";if(sT(t))return"shared";if(Xre(t))return hs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Hre(e,t){const n=e.scale[t],r=hs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Ze(LXt(t)),"independent"):e[r][t]||"shared"}const otn={...HJt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},A5e=Ye(otn);class atn extends mg{}const r0e={symbols:utn,gradient:ltn,labels:ctn,entries:ftn};function utn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...YKt({},n,GQt),...ZFe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?I5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===sl)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=hi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=hi(m??1));else if(je(f.fill)){const g=mq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=hi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===sl)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=ds(mq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==dg){const g=et(t)&&R5e(n,i,t);g?f.opacity=[{test:g,...hi(m??1)},hi(u.legend.unselectedOpacity)]:m&&(f.opacity=hi(m))}return f={...f,...e},Br(f)?void 0:f}function ltn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?I5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=hi(l)),a={...a,...e},Br(a)?void 0:a}function ctn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?R5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;wb(c)?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Br(d)?void 0:d}function ftn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function I5e(e){return k5e(e,(t,n)=>Math.max(t,n.value))}function mq(e){return k5e(e,(t,n)=>ds(t,n.value))}function k5e(e,t){if(oJt(e))return pt(e.condition).reduce(t,e.value);if(id(e))return e.value}function R5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(ki(s)+Sb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const i0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return U4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return z4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??vtn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??btn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??htn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>gE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(mE(n)&&Mf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>dtn(t,e)};function dtn(e,t){const n=e.values;if(je(n))return oFe(t,n);if(Nt(n))return n}function htn(e,t,n,r){if(t!=="shape"){const i=mq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function ptn(e){const{legend:t}=e;return ds(t.type,mtn(e))}function mtn({channel:e,timeUnit:t,scaleType:n}){if(mE(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(Mf(n))return"gradient"}return"symbol"}function gtn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ytn(n,t)}function ytn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function vtn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Mf(i))return n==="horizontal"?r==="top"||r==="bottom"?s0e(t,"width",o,s):o:s0e(t,"height",u,a)}function s0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function btn(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function N5e(e){const t=Xi(e)?_tn(e):Stn(e);return e.component.legends=t,t}function _tn(e){const{encoding:t}=e,n={};for(const r of[sl,...AFe]){const i=Ls(t[r]);!i||!e.getScaleComponent(r)||r===ol&&et(i)&&i.type===eT||(n[r]=xtn(e,r))}return n}function wtn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Etn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function xtn(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new atn({},wtn(e,t));Pen(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ls(i[t]),f=et(c)?(E=fo(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=ptn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=gtn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const w of A5e){if(h==="gradient"&&w.startsWith("symbol")||h==="symbol"&&w.startsWith("gradient"))continue;const S=w in i0e?i0e[w](m):n[w];if(S!==void 0){const x=Etn(S,w,n,e.fieldDef(t));(x||s.legend[w]===void 0)&&a.set(w,S,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const w of["labels","legend","title","symbols","gradient","entries"]){const S=T5e(g[w]??{},e),x=w in r0e?r0e[w](S,_):S;x!==void 0&&!Br(x)&&(v[w]={...y!=null&&y.length&&et(c)?{name:`${ki(c.field)}_legend_${w}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Br(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Stn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){N5e(r);for(const i of Ye(r.component.legends))n.legend[i]=Hre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=P5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function P5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of A5e){const c=_y(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Ttn(f,d);case"title":return h4e(f,d);case"type":return i=!0,pl("symbol")}return c5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&PM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&PM(e.explicit,["encode","gradient"])),e}function Ttn(e,t){return t.value==="circle"?t:e}function Ctn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function D5e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Ur(s.get("domains"));if(n[o])for(const a of n[o])P5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Lo(n).flat().map(i=>Atn(i,e.config)).filter(i=>i!==void 0)}function Atn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of AFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=yb(r,"datum.label",s.encode.labels.update.text.signal)),Ctn(s,"labels","text",{signal:l})}return s}}function Itn(e){return sT(e)||Xre(e)?ktn(e):O5e(e)}function ktn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),O5e(e))}function O5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Rtn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class $5e extends mg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function M5e(e){e.component.projection=Xi(e)?Ntn(e):Otn(e)}function Ntn(e){if(e.hasProjection){const t=Ru(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Ptn(e):void 0,s=new $5e(e.projectionName(!0),{...Ru(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Ptn(e){const t=[],{encoding:n}=e;for(const r of[[yd,gd],[Hc,vd]])(Ls(n[r[0]])||Ls(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ol)&&e.typedFieldDef(ol).type===eT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Si.Main)),t}function Dtn(e,t){const n=Lne(Rtn,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&kl(e.get(i),t.get(i))));if(kl(e.size,t.size)){if(n)return e;if(kl(e.explicit,{}))return t;if(kl(t.explicit,{}))return e}return null}function Otn(e){if(e.children.length===0)return;let t;for(const r of e.children)M5e(r);const n=Lne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Dtn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new $5e(r,t.specifiedProjection,t.size,rn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function $tn(e,t,n,r){if(jR(t,n)){const i=Xi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:MR(s,o,i.format,i.formatType,r)}}return{}}function L5e(e,t){return`${s4e(e)}_${t}`}function Mtn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function qre(e,t,n){const r=i5(n,void 0)??{},i=L5e(r,t);return e.getName(`${i}_bins`)}function Ltn(e){return"as"in e}function o0e(e,t,n){let r,i;Ltn(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...i5(t,void 0)},o=L5e(s,e.field),{signal:a,extentSignal:u}=Mtn(n,o);if(GF(s.extent)){const c=s.extent;i=m5e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Eh extends Lr{clone(){return new Eh(null,rn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(su(s)&&ai(s.bin)){const{key:a,binComponent:u}=o0e(s,s.bin,n);i[a]={...u,...i[a],...$tn(n,s,o,n.config)}}return i},{});return Br(r)?null:new Eh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=o0e(n,n.bin,r);return new Eh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=sh([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Lo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Lo(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return Lo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Vc(t.field),as:r,signal:t.signal,...GF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Vc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ftn(e,t,n,r){var s;const i=Xi(r)?r.encoding[lp(t)]:void 0;if(su(n)&&Xi(r)&&J4e(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=by({fieldDef:n,markDef:a,config:u});UI(o)&&l!==.5&&hs(t)&&(e.add(at(n,{suffix:f5})),e.add(at(n,{suffix:d5}))),n.bin&&jR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(K6e(t)){const o=Y6e(t);e.add(r.getName(o))}else e.add(at(n));return c_(n)&&IQt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function jtn(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Gf extends Lr{clone(){return new Gf(null,new Set(this.dimensions),rn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Um(u)||r1(u)){const c=Um(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);hg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Ftn(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Gf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Gf(t,r,i)}merge(t){return B6e(this.dimensions,t.dimensions)?(jtn(this.measures,t.measures),!0):(ZXt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Vc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Vc),ops:t,fields:n,as:r}}}class rT extends Lr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ic){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ai(a)?[at(o,{binSuffix:"end"})]:[]],..._h(u)?{sortField:u}:je(u)?{sortIndexField:jx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ic)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Ic)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ic)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of cp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ho(i)&&i1(s)){const o=y5(this.childModel,n),a=Kre(o);a?t[n]=a:Ze(Xne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=e5,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Ure){for(const c of zre){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[dm,fm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function a0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Btn(e,t){const n=Bne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=a0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=a0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Ze(uXt(t)),null}function Utn(e){const t={};return lO(e.filter,n=>{if(R4e(n)){let r=null;ere(n)?r=El(n.equal):nre(n)?r=El(n.lte):tre(n)?r=El(n.lt):rre(n)?r=El(n.gt):ire(n)?r=El(n.gte):sre(n)?r=n.range[0]:ore(n)&&(r=(n.oneOf??n.in)[0]),r&&(a_(r)?t[n.field]="date":lr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function ztn(e){const t={};function n(r){$x(r)?t[r.field]="date":r.type==="quantitative"&&jKt(r.aggregate)?t[r.field]="number":Ix(r.field)>1?r.field in t||(t[r.field]="flatten"):c_(r)&&_h(r.sort)&&Ix(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Xi(e)||Ol(e))&&e.forEachFieldDef((r,i)=>{if(su(r))n(r);else{const s=s_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Xi(e)){const{mark:r,markDef:i,encoding:s}=e;if(l_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Vtn(e){const t={};if(Xi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Ix(i.field)>1&&(t[i.field]="flatten")}return t}class ma extends Lr{clone(){return new ma(null,rn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!$0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Ze(yge(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Ze(yge(a,n[a],u)))}const s=new mg(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ma(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];Ix(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?Ix(n)>1:!0).map(n=>{const r=Btn(n,this._parse[n]);return r?{type:"formula",expr:r,as:JS(n)}:null}).filter(n=>n!==null)}}class xy extends Lr{clone(){return new xy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([sd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:sd}}}class zR extends Lr{clone(){return new zR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class VR extends Lr{clone(){return new VR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Tb extends Lr{constructor(t){super(null),t??(t={name:"source"});let n;if($0(t)||(n=t.format?{...Yu(t.format,["parse"])}:{}),zI(t))this._data={values:t.values};else if(Mx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else qFe(t)?this._data={values:[{type:"Sphere"}]}:(VFe(t)||$0(t))&&(this._data={});this._generator=$0(t),t.name&&(this._name=t.name),n&&!Br(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var u0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Htn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},eC;function Wre(e){return e instanceof Tb||e instanceof zR||e instanceof VR}class Gre{constructor(){eC.set(this,void 0),u0e(this,eC,!1,"f")}setModified(){u0e(this,eC,!0,"f")}get modifiedFlag(){return Htn(this,eC,"f")}}eC=new WeakMap;class f_ extends Gre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Yre extends Gre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class qtn extends Yre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Wtn extends Yre{constructor(t){super(),this.requiresSelectionId=t&&Bre(t)}run(t){t instanceof xy&&(this.requiresSelectionId&&(Wre(t.parent)||t.parent instanceof Gf||t.parent instanceof ma)||(this.setModified(),t.remove()))}}class Gtn extends Gre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof wh&&(r=t.producedFields(),Fne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Ytn extends Yre{constructor(){super()}run(t){t instanceof Xu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Ktn extends f_{run(t){if(!Wre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ma)if(t instanceof ma)this.setModified(),t.merge(n);else{if(jne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Xtn extends f_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ma);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Br(i)){this.setModified();const o=new ma(t,i);for(const a of n){if(a instanceof ma)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ma&&Ye(a.parse).length===0&&a.remove()}}}}}class Qtn extends f_{run(t){t instanceof Xu||t.numChildren()>0||t instanceof rT||t instanceof Tb||(this.setModified(),t.remove())}}class Jtn extends f_{run(t){const n=t.children.filter(i=>i instanceof wh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Ztn extends f_{run(t){const n=t.children.filter(i=>i instanceof Gf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class enn extends f_{constructor(t){super(),this.model=t}run(t){const n=!(Wre(t)||t instanceof nT||t instanceof ma||t instanceof xy),r=[],i=[];for(const s of t.children)s instanceof Eh&&(n&&!jne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Eh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class tnn extends f_{run(t){const n=[...t.children];if(!gb(n,o=>o instanceof Xu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Xu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Xu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class d_ extends Lr{clone(){return new d_(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function nnn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function rnn(e){return je(e)&&e.every(t=>mt(t))&&e.length>1}class pm extends Lr{clone(){return new pm(null,rn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ds(f.order,"ascending"));const l={field:a,order:u};let c;return rnn(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new pm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Bh(p)}).filter(h=>!!h),c=nnn(n),f=n.encoding.order;let d;if(je(f)||et(f))d=c4e(f);else{const h=Z4e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new pm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class iT extends Lr{clone(){return new iT(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Yne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function inn(e){function t(n){if(!(n instanceof rT)){const r=n.clone();if(r instanceof Xu){const i=yq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Gf||r instanceof pm||r instanceof iT||r instanceof d_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function gq(e){if(e instanceof rT)if(e.numChildren()===1&&!(e.children[0]instanceof Xu)){const t=e.children[0];(t instanceof Gf||t instanceof pm||t instanceof iT||t instanceof d_)&&t.addDimensions(e.fields),t.swapWithParent(),gq(e)}else{const t=e.model.component.data.main;F5e(t);const n=inn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(gq)}function F5e(e){if(e instanceof Xu&&e.type===Si.Main&&e.numChildren()===1){const t=e.children[0];t instanceof rT||(t.swapWithParent(),F5e(e))}}const yq="scale_",MP=5;function vq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!vq(t.children))return!1}return!0}function af(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function l0e(e,t,n){let r=e.sources,i=!1;return i=af(new Ytn,r)||i,i=af(new Wtn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=af(new Qtn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=af(new Ktn,r)||i,i=af(new enn(t),r)||i,i=af(new Gtn,r)||i,i=af(new Xtn,r)||i,i=af(new Ztn,r)||i,i=af(new Jtn,r)||i,i=af(new qtn,r)||i,i=af(new tnn,r)||i),e.sources=r,i}function snn(e,t){vq(e.sources);let n=0,r=0;for(let i=0;i<MP&&l0e(e,t,!0);i++)n++;e.sources.map(gq);for(let i=0;i<MP&&l0e(e,t,!1);i++)r++;vq(e.sources),Math.max(n,r)===MP&&Ze(`Maximum optimization runs(${MP}) reached.`)}class Zs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Zs(()=>t(n))}}function j5e(e){Xi(e)?onn(e):ann(e)}function onn(e){const t=e.component.scales;for(const n of Ye(t)){const r=lnn(e,n);if(t[n].setWithExplicit("domains",r),fnn(e,n),e.component.data.isFaceted){let s=e;for(;!Ol(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)tm(a)&&(a.data=yq+a.data.replace(yq,""))}}}function ann(e){for(const n of e.children)j5e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=_y(r,o.getWithExplicit("domains"),"domains","scale",bq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Ze(iXt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function unn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=c0e(t,n);if(!i){Ze(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=c0e(t,n);if(i)return"unaggregated"}return e}function lnn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=unn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ls(r.x2)?Ls(r.x)?_y(kg(n,i,e,"x"),kg(n,i,e,"x2"),"domain","scale",bq):kg(n,i,e,"x2"):t==="y"&&Ls(r.y2)?Ls(r.y)?_y(kg(n,i,e,"y"),kg(n,i,e,"y2"),"domain","scale",bq):kg(n,i,e,"y2"):kg(n,i,e,t)}function cnn(e,t,n){return e.map(r=>({signal:`{data: ${s5(r,{timeUnit:n,type:t})}}`}))}function SB(e,t,n){var i;const r=(i=fo(n))==null?void 0:i.unit;return t==="temporal"||r?cnn(e,t,r):[e]}function kg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ls(i[r]),{type:c}=l,f=l.timeUnit;if(AQt(t)){const p=kg(e,void 0,n,r),m=SB(t.unionWith,c,f);return Ld([...m,...p.value])}else{if(Nt(t))return Ld([t]);if(t&&t!=="unaggregated"&&!L4e(t))return Ld(SB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return pl([[0,1]]);const p=n.requestDataName(Si.Main);return pl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=hg(r)&&et(l)?dnn(n,r,e):void 0;if(fp(l)){const p=SB([l.datum],c,f);return pl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Si.Main),{field:m}=l;return pl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ai(h.bin)){if(ho(e))return pl(e==="bin-ordinal"?[]:[{data:jI(d)?n.requestDataName(Si.Main):n.requestDataName(Si.Raw),field:n.vgField(r,jR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ai(p)){const m=qre(n,h.field,p);return pl([new Zs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return pl([{data:n.requestDataName(Si.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[lp(r)];if(J4e(h,p,s,a)){const m=n.requestDataName(Si.Main),g=by({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=UI(o)&&g!==.5&&hs(r);return pl([{data:m,field:n.vgField(r,y?{suffix:f5}:{})},{data:m,field:n.vgField(r,{suffix:y?d5:"end"})}])}}return pl(d?[{data:jI(d)?n.requestDataName(Si.Main):n.requestDataName(Si.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Si.Main),field:n.vgField(r)}])}function TB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":e5),...r?{field:Vc(r)}:{},...i?{order:i}:{}}}function fnn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=L4e(r)&&r,o=o_(i)&&GF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function dnn(e,t,n){if(!ho(n))return;const r=e.fieldDef(t),i=r.sort;if(X4e(i))return{op:"min",field:jx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(_h(i)){const a=s&&!o.has(i.field);return TB(i,a)}else if(K4e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Um(c)||r1(c))return TB({field:at(l),order:u},d);if(Yne(c)||!c)return TB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function c0e(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!UKt.has(n)?{valid:!1,reason:RXt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:NXt(e)}:{valid:!0}:{valid:!1,reason:kXt(e)}}function bq(e,t,n,r){return e.explicit&&t.explicit&&Ze(MXt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function hnn(e){const t=sh(e.map(o=>{if(tm(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=sh(e.map(o=>{if(tm(o)){const a=o.sort;return a!==void 0&&!jI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(tm(o)&&n.length>0){let a=n[0];if(n.length>1){Ze(bge);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=sh(n.map(o=>jI(o)||!("op"in o)||mt(o.op)&&o.op in LKt?o:(Ze(FXt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Ze(bge),i=!0);const s=sh(e.map(o=>tm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Kre(e){if(tm(e)&&mt(e.field))return e.field;if(zKt(e)){let t;for(const n of e.fields)if(tm(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Ze(jXt),t}return Ze(BXt),t}else if(VKt(e)){Ze(UXt);const t=e.fields[0];return mt(t)?t:void 0}}function y5(e,t){const r=e.component.scales[t].get("domains").map(i=>(tm(i)&&(i.data=e.lookupDataSource(i.data)),i));return hnn(r)}function B5e(e){return sT(e)||Xre(e)?e.children.reduce((t,n)=>t.concat(B5e(n)),f0e(e)):f0e(e)}function f0e(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=pnn(i.range,s,n,e),h=y5(e,n),p=a?uen(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function pnn(e,t,n,r){if(hs(n)){if(i1(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&tm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class U5e extends mg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:gb(this.get("domains"),t=>je(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const mnn=["range","scheme"];function gnn(e){const t=e.component.scales;for(const n of WF){const r=t[n];if(!r)continue;const i=ynn(n,e);r.setWithExplicit("range",i)}}function d0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=al(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new Zs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ai(r)){const a=qre(e,i,r);return new Zs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function ynn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of mnn)if(n[f]!==void 0){const d=rq(s,f),h=F4e(e,f);if(!d)Ze(y4e(s,f,e));else if(h)Ze(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(hs(e))return Ld(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Zs.fromName(y,g)}return m}))}else if(gt(p))return Ld({data:t.requestDataName(Si.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ld(p)}case"scheme":return Ld(vnn(n[f]))}}const o=e===Ri||e==="xOffset"?"width":"height",a=r[o];if(Uh(a)){if(hs(e))if(ho(s)){const f=V5e(a,t,e);if(f)return Ld({step:f})}else Ze(v4e(o));else if(DR(e)){const f=e===Jy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=H5e(a,s);if(p)return Ld(p)}}}const{rangeMin:u,rangeMax:l}=n,c=bnn(e,t);return(u!==void 0||l!==void 0)&&rq(s,"rangeMin")&&je(c)&&c.length===2?Ld([u??c[0],l??c[1]]):pl(c)}function vnn(e){return CQt(e)?{scheme:e.name,...Yu(e,["name"])}:{scheme:e}}function z5e(e,t,n,{center:r}={}){const i=al(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===go&&Kl(n)?r?[Zs.fromName(a=>`${o(a)}/2`,s),Zs.fromName(a=>`-${o(a)}/2`,s)]:[Zs.fromName(o,s),0]:r?[Zs.fromName(a=>`-${o(a)}/2`,s),Zs.fromName(a=>`${o(a)}/2`,s)]:[0,Zs.fromName(o,s)]}function bnn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ls(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ri:case go:{if(Hn(["point","band"],u)){const f=q5e(e,n,r.view);if(Uh(f))return{step:V5e(f,t,e)}}return z5e(e,t,u)}case Jy:case ZS:return _nn(e,t,u);case fg:{const f=t.component.scales[e].get("zero"),d=W5e(i,f,r),h=xnn(i,n,t,r);return Px(u)?Enn(d,h,wnn(u,r,l,e)):[d,h]}case ef:return[0,Math.PI*2];case i_:return[0,360];case md:return[0,new Zs(()=>{const f=t.getSignalName(Ol(t.parent)?"child_width":"width"),d=t.getSignalName(Ol(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case t1:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case n1:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ol:return"symbol";case sl:case ap:case up:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case dg:case Zy:case e1:return[r.scale.minOpacity,r.scale.maxOpacity]}}function V5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Hne(n),o=r[s];if(kFe({step:e,offsetIsDiscrete:cn(o)&&P4e(o.type)})==="offset"&&cFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${GKt(f)})`}}else return e.step}function H5e(e,t){if(kFe({step:e,offsetIsDiscrete:ho(t)})==="offset")return{step:e.step}}function _nn(e,t,n){const r=e===Jy?"x":"y",i=t.getScaleComponent(r);if(!i)return z5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=q5e(r,t.size,t.config.view);if(Uh(l)){const c=H5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=I4e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=by({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return F6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function q5e(e,t,n){const r=e===Ri?"width":"height",i=t[r];return i||VM(n,r)}function wnn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Ze(XXt(r)),3)}}function Enn(e,t,n){const r=()=>{const i=$f(t),s=$f(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new Zs(r):{signal:r()}}function W5e(e,t,n){if(t)return Nt(t)?{signal:`${t.signal} ? 0 : ${W5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(YF("size",e))}const h0e=.95;function xnn(e,t,n,r){const i={x:d0e(n,"x"),y:d0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=p0e(t,i,r.view);return lr(s)?s-1:new Zs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=p0e(t,i,r.view);return lr(s)?Math.pow(h0e*s,2):new Zs(()=>`pow(${h0e} * ${s.signal}, 2)`)}}throw new Error(YF("size",e))}function p0e(e,t,n){const r=Uh(e.width)?e.width.step:zM(n,"width"),i=Uh(e.height)?e.height.step:zM(n,"height");return t.x||t.y?new Zs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function G5e(e,t){Xi(e)?Snn(e,t):K5e(e,t)}function Snn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ls(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=rq(h,t),y=F4e(a,t);if(d!==void 0&&(g?y&&Ze(y):Ze(y4e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":a_(u[t])||_==="temporal"||v?l.set(t,{signal:s5(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in m0e?m0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:fFe(i,a),hasSecondaryRangeChannel:!!i[lp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const m0e={bins:({model:e,fieldOrDatumDef:t})=>et(t)?Tnn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Cnn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Ann(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Inn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>knn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Rnn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return Nnn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Pnn(e,t,n,r,i,s.scale,o)};function Y5e(e){Xi(e)?gnn(e):K5e(e,"range")}function K5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Y5e(r):G5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=_y(i,a,t,"scale",zFe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Tnn(e,t){const n=t.bin;if(ai(n)){const r=qre(e,t.field,n);return new Zs(()=>e.getSignalName(r))}else if(Ao(n)&&o_(n)&&n.step!==void 0)return{step:n.step}}function Cnn(e,t){if(Hn([sl,ap,up],e)&&t!=="nominal")return"hcl"}function Ann(e,t,n,r,i,s){var o;if(!((o=Bh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Hn([Ku.TIME,Ku.UTC],e)))return hs(t)?!0:void 0}function Inn(e,t,n,r,i,s){if(hs(e)){if(Mf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Ku.POINT)return n.pointPadding}}function knn(e,t,n,r,i,s=!1){if(e===void 0){if(hs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ds(o,n==="bar"?a:u)}else if(DR(t)&&r===Ku.BAND)return i.offsetBandPaddingInner}}function Rnn(e,t,n,r,i,s=!1){if(e===void 0){if(hs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Ku.BAND)return ds(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(DR(t)){if(n===Ku.POINT)return .5;if(n===Ku.BAND)return i.offsetBandPaddingOuter}}}function Nnn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Kl(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Kl(e)&&t==="descending")return!0}function Pnn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Kl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Px(i))return!0;if(!(et(t)&&t.bin)&&Hn([...cp,...kKt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Dnn(e,t,n,r,i=!1){const s=Onn(t,n,r,i),{type:o}=e;return hg(t)?o!==void 0?DQt(t,o)?et(n)&&!PQt(o,n.type)?(Ze(OXt(o,s)),s):o:(Ze(DXt(t,o,s)),s):s:null}function Onn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(mE(e)||gB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Ze(yB(e,"ordinal")),"ordinal";if(hs(e)||DR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Gne)return"band";const s=n[al(e)];return Eb(s)||Ox(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return mE(e)?"time":gB(e)==="discrete"?(Ze(yB(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&fo(t.timeUnit).utc?"utc":"time";case"quantitative":return mE(e)?et(t)&&ai(t.bin)?"bin-ordinal":"linear":gB(e)==="discrete"?(Ze(yB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(m4e(t.type))}function $nn(e,{ignoreRange:t}={}){X5e(e),j5e(e);for(const n of NQt)G5e(e,n);t||Y5e(e)}function X5e(e){Xi(e)?e.component.scales=Mnn(e):e.component.scales=Fnn(e)}function Mnn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of WF){const o=Ls(t[s]);if(o&&n===W4e&&s===ol&&o.type===eT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=fFe(t,s),l=Dnn(a,s,o,r,u);i[s]=new U5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Lnn=zFe((e,t)=>wge(e)-wge(t));function Fnn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){X5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=C5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?wQt(a.value,u.value)?r[o]=_y(a,u,"type","scale",Lnn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new U5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class CB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Xi(e){return(e==null?void 0:e.type)==="unit"}function Ol(e){return(e==null?void 0:e.type)==="facet"}function Xre(e){return(e==null?void 0:e.type)==="concat"}function sT(e){return(e==null?void 0:e.type)==="layer"}class Qre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Ru(a),this.name=t.name??i,this.title=jg(t.title)?{text:t.title}:t.title?Ru(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new CB,this.projectionNameMap=r?r.projectionNameMap:new CB,this.signalNameMap=r?r.signalNameMap:new CB,this.data=t.data,this.description=t.description,this.transforms=qZt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:KJt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:t5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new mg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?rn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){$nn(this)}parseProjection(){M5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){N5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=hi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=hi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Br(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=stn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ic)t[r].title&&n.push(Zen(this,r));for(const r of Ure)n=n.concat(etn(this,r));return n}assembleAxes(){return Ben(this.component.axes,this.config)}assembleLegends(){return D5e(this)}assembleProjections(){return Itn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...o4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Br(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Ol(this.parent)?B5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return ki((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Si[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Ol(this.parent)){const n=S5e(t),r=qF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ho(s)&&i1(o)){const a=i.get("name"),u=y5(this,r),l=Kre(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:x5e(a,i,c)}}else return Ze(Xne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(Q6e(t)&&hg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(JKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Q5e extends Qre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return SJt(this.getMapping(),(r,i,s)=>{const o=Bh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){xre(this.getMapping(),(r,i)=>{const s=Bh(r);s&&t(s,i)},n)}}class v5 extends Lr{clone(){return new v5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class b5 extends Lr{clone(){return new b5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class VI extends Lr{clone(){return new VI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Er("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=hg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Kl(d)&&l.aggregate!=="count"&&!l_(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new VI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class _5 extends Lr{clone(){return new _5(this.parent,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class w5 extends Lr{clone(){return new w5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class vE extends Lr{clone(){return new vE(null,rn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[yd,gd],[Hc,vd]]){const s=i.map(o=>{const a=Ls(n.encoding[o]);return et(a)?a.field:fp(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new vE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ol)){const i=n.typedFieldDef(ol);i.type===eT&&(t=new vE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class HI extends Lr{clone(){return new HI(null,this.projection,rn(this.fields),rn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[yd,gd],[Hc,vd]]){const i=r.map(o=>{const a=Ls(n.encoding[o]);return et(a)?a.field:fp(a)?{expr:`${a.datum}`}:id(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Hc?"2":"";(i[0]||i[1])&&(t=new HI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ov extends Lr{clone(){return new Ov(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ov(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=hFe(n.mark,r);return new Ov(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:CZt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class E5 extends Lr{clone(){return new E5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class qI extends Lr{clone(){return new qI(null,rn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(AZt(o)){let u=eje(o.data,s);u||(u=new Tb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Xu(u,l,Si.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(IZt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(ki(u),u)}catch{throw new Error(nXt(u))}if(a=l.materialized,!a)throw new Error(rXt(u))}return new qI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Ze(fXt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class x5 extends Lr{clone(){return new x5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class S5 extends Lr{clone(){return new S5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class T5 extends Lr{clone(){return new T5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=sh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class C5 extends Lr{clone(){return new C5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function J5e(e){let t=0;function n(r,i){if(r instanceof Tb&&!r.isGenerator&&!Mx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ma&&(r.parent instanceof Tb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof rT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof zR||r instanceof VR||r instanceof VI||r instanceof nT||r instanceof Fx||r instanceof HI||r instanceof Gf||r instanceof qI||r instanceof iT||r instanceof d_||r instanceof w5||r instanceof _5||r instanceof v5||r instanceof E5||r instanceof x5||r instanceof S5||r instanceof xy||r instanceof C5||r instanceof T5||r instanceof b5)&&i.transform.push(r.assemble()),(r instanceof Eh||r instanceof wh||r instanceof Ov||r instanceof pm||r instanceof vE)&&i.transform.push(...r.assemble()),r instanceof Xu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Xu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Xu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function jnn(e){const t=[],n=J5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Bnn(e,t){const n=[],r=J5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Unn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function znn(e){for(const t of Ic)Vnn(e,t);g0e(e,"x"),g0e(e,"y")}function Vnn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Bx("title",null,r,t);let l=gE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Bx("labelOrient",a.header,r,t),f=a.header!==null?ds((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[Z5e(e,t,f)]}}}function Z5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function g0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Hre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Unn(a.get("orient"));o[u]??(o[u]=[Z5e(e,s,!1)]);const l=Z2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Hnn(e){Jre(e),GM(e,"width"),GM(e,"height")}function qnn(e){Jre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";GM(e,t),GM(e,n)}function Jre(e){for(const t of e.children)t.parseLayoutSize()}function GM(e,t){const n=S5e(t),r=qF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??C5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=_y(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Wnn(e){const{size:t,component:n}=e;for(const r of cp){const i=al(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Uh(s)?"step":s,!0)}else{const s=Gnn(e,i);n.layoutSize.set(i,s,!1)}}}function Gnn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ho(s)){const a=VM(r.view,t);return i1(o)||Uh(a)?"step":a}else return oq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return oq(r.view,t);{const s=VM(r.view,t);return Uh(s)?s.step:s}}}function _q(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class nA extends Q5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=rie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!LR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![fm,dm].includes(i)){Ze(YF(i,"facet"));break}const s=t[i];if(s.field===void 0){Ze(tq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=wre(t,n);return r.header?r.header=Ru(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=A5(this),this.child.parseData()}parseLayoutSize(){Jre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),znn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ic)for(const r of zre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Bx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=m5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof nA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof nA?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof nA){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of cp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ho(o)&&i1(a)){const u=y5(this.child,i),l=Kre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Ze(Xne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Ic){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ai(d)&&u.push(at(f,{binSuffix:"end"})),_h(h)){const{field:p,op:m=e5}=h,g=_q(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=jx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?_h(r.sort)?[_q(r,r.sort,{expr:"datum"})]:je(r.sort)?[jx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(_h(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return pq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Ure)if(t[s]){const o=Bx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return pq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=jnn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ic.map(u=>this.facetSortFields(u)).flat(),order:Ic.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(ien(this,[]))}]}getMapping(){return this.facet}}function Ynn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(_h(s.sort)){const{field:o,op:a=e5}=s.sort;e=i=new d_(e,{joinaggregate:[{op:a,field:o,as:_q(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function eje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(zI(e)&&zI(a)){if(kl(e.values,a.values))return o}else if(Mx(e)&&Mx(a)){if(e.url===a.url)return o}else if(VFe(e)&&e.name===o.dataName)return o}}return null}function Knn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Tb({values:[]});return t.push(r),r}const n=eje(e.data,t);if(n)return $0(e.data)||(n.data.format=j6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Tb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Xnn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(FZt(i))o=e=new Fx(e,i),s="derived";else if(Ore(i)){const a=Utn(i);o=e=ma.makeWithAncestors(e,{},a,n)??e,e=new nT(e,t,i.filter)}else if(FFe(i))o=e=Eh.makeFromTransform(e,i,t),s="number";else if(BZt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ma(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=wh.makeFromTransform(e,i);else if(UZt(i))o=e=Gf.makeFromTransform(e,i),s="number",Bre(t)&&(e=new xy(e));else if(LFe(i))o=e=qI.make(e,t,i,r++),s="derived";else if($Zt(i))o=e=new iT(e,i),s="number";else if(MZt(i))o=e=new d_(e,i),s="number";else if(zZt(i))o=e=pm.makeFromTransform(e,i),s="derived";else if(VZt(i))o=e=new w5(e,i),s="derived";else if(HZt(i))o=e=new b5(e,i),s="derived";else if(LZt(i))o=e=new _5(e,i),s="derived";else if(kZt(i))o=e=new T5(e,i),s="derived";else if(OZt(i))e=new C5(e,i);else if(jZt(i))o=e=Ov.makeFromTransform(e,i),s="derived";else if(RZt(i))o=e=new v5(e,i),s="derived";else if(NZt(i))o=e=new x5(e,i),s="derived";else if(PZt(i))o=e=new S5(e,i),s="derived";else if(DZt(i))o=e=new E5(e,i),s="derived";else{Ze(cXt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function A5(e){var h;let t=Knn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&($0(i)||Mx(i)||zI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new nen;$0(i)?(HFe(i)?t=new VR(t,i.sequence):$re(i)&&(t=new zR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ma.makeExplicit(t,e,o)??t,t=new xy(t);const a=e.parent&&sT(e.parent);(Xi(e)||Ol(e))&&a&&(t=Eh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Xnn(t,e,o));const u=Vtn(e),l=ztn(e);t=ma.makeWithAncestors(t,{},{...u,...l},o)??t,Xi(e)&&(t=vE.parseAll(t,e),t=HI.parseAll(t,e)),(Xi(e)||Ol(e))&&(a||(t=Eh.makeFromEncoding(t,e)??t),t=wh.makeFromEncoding(t,e)??t,t=Fx.parseAllForSortIndex(t,e));const c=t=y0e(Si.Raw,e,t);if(Xi(e)){const p=Gf.makeFromEncoding(t,e);p&&(t=p,Bre(e)&&(t=new xy(t))),t=Ov.makeFromEncoding(t,e)??t,t=pm.makeFromEncoding(t,e)??t}Xi(e)&&(t=VI.make(t,e)??t);const f=t=y0e(Si.Main,e,t);Xi(e)&&Fen(e,f);let d=null;if(Ol(e)){const p=e.getName("facet");t=Ynn(t,e.facet)??t,d=new rT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function y0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Xu(n,s,e,i);return r[s]=o,o}class Qnn extends Qre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Ze(aXt),this.children=this.getChildren(t).map((l,c)=>rie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=A5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return u5(t)?t.vconcat:Pre(t)?t.hconcat:t.concat}parseLayoutSize(){qnn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Vre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Jnn(e){return e===!1||e===null}const Znn={disable:1,gridScale:1,scale:1,...uFe,labelExpr:1,encode:1},tje=Ye(Znn);class Zre extends mg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Zre(rn(this.explicit),rn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Jnn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function ern(e,t,n){const{encoding:r,config:i}=e,s=Ls(r[t])??Ls(r[lp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(wb(u))return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Dx(s)==="quantitative"){if(Ox(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Dx(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function trn(e){return cp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[urn(n,e)]),t),{})}const nrn={bottom:"top",top:"bottom",left:"right",right:"left"};function rrn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=Hre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=irn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of cp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=nrn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function irn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=srn(i,s)}}}else return t.map(n=>n.clone());return e}function srn(e,t){for(const n of tje){const r=_y(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return h4e(i,s);case"gridScale":return{explicit:i.explicit,value:ds(i.value,s.value)}}return c5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function orn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:BI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===b5e(r,i))return!0}return e===n[t]}const arn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function urn(e,t){var y,v;let n=t.axis(e);const r=new Zre,i=Ls(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Yen(e),u=t.getScaleComponent(e).get("type"),l=Uen(e,u,a,t.config),c=n!==void 0?!n:dq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=qen(i,n,e,o.style,l),d=z4e(n.formatType,i,u),h=U4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of tje){const E=_ in t0e?t0e[_](p):Ige(_)?n[_]:void 0,w=E!==void 0,S=orn(E,_,n,t,e);if(w&&S)r.set(_,E,S);else{const{configValue:x=void 0,configFrom:C=void 0}=Ige(_)&&_!=="values"?dq(_,o.style,n.style,l):{},A=x!==void 0;w&&!A?r.set(_,E,S):(C!=="vgAxisConfig"||arn.has(_)&&A||BR(x)||Nt(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=aFe.reduce((_,E)=>{if(!r.hasAxisPart(E))return _;const w=T5e(m[E]??{},t),S=E==="labels"?ern(t,e,w):w;return S!==void 0&&!Br(S)&&(_[E]={update:S}),_},{});return Br(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function lrn({encoding:e,size:t}){for(const n of cp){const r=al(n);Uh(t[r])&&c0(e[n])&&(delete t[r],Ze(v4e(r)))}return t}const crn={vgMark:"arc",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...wy(e,"radius"),...wy(e,"theta")})},frn={vgMark:"area",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...HM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...HM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...jre(e)})},drn={vgMark:"rect",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...wy(e,"x"),...wy(e,"y")})},hrn={vgMark:"shape",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===eT?{field:at(n,{expr:"datum"})}:{}}]}},prn={vgMark:"image",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...wy(e,"x"),...wy(e,"y"),...Lre(e,"url")})},mrn={vgMark:"line",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...to("size",e,{vgChannel:"strokeWidth"}),...jre(e)})},grn={vgMark:"trail",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...to("size",e),...jre(e)})};function eie(e,t){const{config:n}=e;return{...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...to("size",e),...to("angle",e),...yrn(e,n,t)}}function yrn(e,t,n){return n?{shape:{value:n}}:to("shape",e)}const vrn={vgMark:"symbol",encodeEntry:e=>eie(e)},brn={vgMark:"symbol",encodeEntry:e=>eie(e,"circle")},_rn={vgMark:"symbol",encodeEntry:e=>eie(e,"square")},wrn={vgMark:"rect",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...wy(e,"x"),...wy(e,"y")})},Ern={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...HM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...HM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...to("size",e,{vgChannel:"strokeWidth"})}}},xrn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...tf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...pa("x",e,{defaultPos:"mid"}),...pa("y",e,{defaultPos:"mid"}),...Lre(e),...to("size",e,{vgChannel:"fontSize"}),...to("angle",e),...Qge("align",Srn(e.markDef,n,t)),...Qge("baseline",Trn(e.markDef,n,t)),...pa("radius",e,{defaultPos:null}),...pa("theta",e,{defaultPos:null})}}};function Srn(e,t,n){if(Er("align",e,n)===void 0)return"center"}function Trn(e,t,n){if(Er("baseline",e,n)===void 0)return"middle"}const Crn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pa("x",e,{defaultPos:"mid",vgChannel:"xc"}),...pa("y",e,{defaultPos:"mid",vgChannel:"yc"}),...to("size",e,{defaultValue:Arn(e),vgChannel:i}),[s]:hi(Er("thickness",n,t))}}};function Arn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Er("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&i1(a)&&lr(a.step)?a.step*3/4:zM(t.view,i)*3/4}}const LP={arc:crn,area:frn,bar:drn,circle:brn,geoshape:hrn,image:prn,line:mrn,point:vrn,rect:wrn,rule:Ern,square:_rn,text:xrn,tick:Crn,trail:grn};function Irn(e){if(Hn([JF,XF,VQt],e.mark)){const t=hFe(e.mark,e.encoding);if(t.length>0)return krn(e,t)}else if(e.mark===QF){const t=eq.some(n=>Er(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Rrn(e)}return tie(e)}const v0e="faceted_path_";function krn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:v0e+e.requestDataName(Si.Main),data:e.requestDataName(Si.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:tie(e,{fromPrefix:v0e})}]}const b0e="stack_group_";function Rrn(e){var l;const[t]=tie(e,{fromPrefix:b0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Ax(t.encode.update,["y","yc","y2","height",...eq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Yu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Ax(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Yu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of eq){const f=zm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=hi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=zm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:hi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Si.Main),name:b0e+e.requestDataName(Si.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Nrn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&id(o)&&JH(o.value)||!o&&JH(Er("order",i,s)))){if((je(o)||et(o))&&!n)return c4e(o,{expr:"datum"});if(l_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(_h(c))return{field:at({aggregate:Ere(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(K4e(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function tie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ds(r.clip,Prn(e),Drn(e)),a=u4e(r),u=i.key,l=Nrn(e),c=Orn(e),f=Er("aria",r,s),d=LP[n].postEncodingTransform?LP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:LP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Si.Main)},encode:{update:LP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Prn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Drn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Orn(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class nje extends Q5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Rge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=jh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=vZt(o,s,{graticule:t.data&&$re(t.data)}));const u=this.encoding=EJt(t.encoding||{},a,o.filled,s);this.markDef=OFe(o,u,s),this.size=lrn({encoding:u,size:Rge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=DFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Rre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===W4e,r=t&&_Kt.some(i=>cn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return WF.reduce((r,i)=>{const s=Ls(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ru(t);return je(n)&&(i.domain=n.map(El)),je(r)&&(i.range=r.map(El)),i}initAxes(t){return cp.reduce((n,r)=>{const i=t[r];if(cn(i)||r===Ri&&cn(t.x2)||r===go&&cn(t.y2)){const s=cn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=BR(s)?a4e(s):El(s)}return r}initLegends(t){return RKt.reduce((n,r)=>{const i=Ls(t[r]);if(i&&PKt(r)){const s=i.legend;n[r]=s&&Ru(s)}return n},{})}parseData(){this.component.data=A5(this)}parseLayoutSize(){Wnn(this)}parseSelections(){this.component.selection=Len(this,this.selection)}parseMarkGroup(){this.component.mark=Irn(this)}parseAxesAndHeaders(){this.component.axes=trn(this)}assembleSelectionTopLevelSignals(t){return sen(this,t)}assembleSignals(){return[...g5e(this),...ren(this,[])]}assembleSelectionData(t){return oen(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Vre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!sT(this.parent))&&(t=GFe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Pv(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Bh(n)}typedFieldDef(t){const n=this.fieldDef(t);return su(n)?n:null}}class nie extends Qre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(l5(a))return new nie(a,this,this.getName(`layer_${u}`),o,s);if(pg(a))return new nje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Kne(a))})}parseData(){this.component.data=A5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Hnn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){rrn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),g5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Vre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return aen(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),D5e(this))}}function rie(e,t,n,r,i){if(t5(e))return new nA(e,t,n,i);if(l5(e))return new nie(e,t,n,r,i);if(pg(e))return new nje(e,t,n,r,i);if(WJt(e))return new Qnn(e,t,n,i);throw new Error(Kne(e))}function $rn(e,t={}){t.logger&&QXt(t.logger),t.fieldTitle&&iFe(t.fieldTitle);try{const n=PFe(US(t.config,e.config)),r=UFe(e,n),i=rie(r,null,"",void 0,n);return i.parse(),snn(i.component.data,i),{spec:Lrn(i,Mrn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&JXt(),t.fieldTitle&&hJt()}}function Mrn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&ZZt(t.type)){if(i==="step"&&s==="step")Ze(pge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Ze(pge(qF(o)));const a=o==="width"?"height":"width";t.type=een(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...zge(n,!1),...zge(e,!0)}}function Lrn(e,t,n={},r){const i=e.config?oZt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Bnn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...IFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Frn=pKt.version,jrn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Ix,accessPathWithDatum:Bne,compile:$rn,contains:Hn,deepEqual:kl,deleteNestedProperty:PM,duplicate:rn,entries:yy,every:Lne,fieldIntersection:jne,flatAccessWithDatum:U6e,getFirstDefined:ds,hasIntersection:Fne,hash:Vn,internalField:H6e,isBoolean:jI,isEmpty:Br,isEqual:gKt,isInternalField:q6e,isNullOrFalse:JH,isNumeric:jF,keys:Ye,logicalExpr:eA,mergeDeep:j6e,never:F6e,normalize:UFe,normalizeAngle:BI,omit:Yu,pick:Ax,prefixGenerator:ZH,removePathFromField:JS,replaceAll:yb,replacePathInField:Vc,resetIdCounter:vKt,setEqual:B6e,some:gb,stringify:Ur,titleCase:RR,unique:sh,uniqueId:V6e,vals:Lo,varName:ki,version:Frn},Symbol.toStringTag,{value:"Module"}));function rje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Brn="vega-themes",Urn="2.15.0",zrn="Themes for stylized Vega and Vega-Lite visualizations.",Vrn=["vega","vega-lite","themes","style"],Hrn="BSD-3-Clause",qrn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Wrn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Grn="build/vega-themes.js",iie="build/vega-themes.module.js",Yrn="build/vega-themes.min.js",Krn="build/vega-themes.min.js",Xrn="build/vega-themes.module.d.ts",Qrn={type:"git",url:"https://github.com/vega/vega-themes.git"},Jrn=["src","build"],Zrn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},ein={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},tin={vega:"*","vega-lite":"*"},nin={},rin={name:Brn,version:Urn,description:zrn,keywords:Vrn,license:Hrn,author:qrn,contributors:Wrn,main:Grn,module:iie,unpkg:Yrn,jsdelivr:Krn,types:Xrn,repository:Qrn,files:Jrn,scripts:Zrn,devDependencies:ein,peerDependencies:tin,dependencies:nin};const V_="#fff",_0e="#888",iin={background:"#333",view:{stroke:_0e},title:{color:V_,subtitleColor:V_},style:{"guide-label":{fill:V_},"guide-title":{fill:V_}},axis:{domainColor:V_,gridColor:_0e,tickColor:V_}},v1="#4572a7",sin={background:"#fff",arc:{fill:v1},area:{fill:v1},line:{stroke:v1,strokeWidth:2},path:{stroke:v1},rect:{fill:v1},shape:{stroke:v1},symbol:{fill:v1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},b1="#30a2da",AB="#cbcbcb",oin="#999",ain="#333",w0e="#f0f0f0",E0e="#333",uin={arc:{fill:b1},area:{fill:b1},axis:{domainColor:AB,grid:!0,gridColor:AB,gridWidth:1,labelColor:oin,labelFontSize:10,titleColor:ain,tickColor:AB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:w0e,group:{fill:w0e},legend:{labelColor:E0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:E0e,titleFontSize:14,titlePadding:10},line:{stroke:b1,strokeWidth:2},path:{stroke:b1,strokeWidth:.5},rect:{fill:b1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:b1},bar:{binSpacing:2,fill:b1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},_1="#000",lin={group:{fill:"#e5e5e5"},arc:{fill:_1},area:{fill:_1},line:{stroke:_1},path:{stroke:_1},rect:{fill:_1},shape:{stroke:_1},symbol:{fill:_1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},cin=22,fin="normal",x0e="Benton Gothic, sans-serif",S0e=11.5,din="normal",w1="#82c6df",IB="Benton Gothic Bold, sans-serif",T0e="normal",C0e=13,s2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},hin={background:"#ffffff",title:{anchor:"start",color:"#000000",font:IB,fontSize:cin,fontWeight:fin},arc:{fill:w1},area:{fill:w1},line:{stroke:w1,strokeWidth:2},path:{stroke:w1},rect:{fill:w1},shape:{stroke:w1},symbol:{fill:w1,size:30},axis:{labelFont:x0e,labelFontSize:S0e,labelFontWeight:din,titleFont:IB,titleFontSize:C0e,titleFontWeight:T0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:x0e,labelFontSize:S0e,symbolType:"square",titleFont:IB,titleFontSize:C0e,titleFontWeight:T0e},range:{category:s2["category-6"],diverging:s2["fireandice-6"],heatmap:s2["fire-7"],ordinal:s2["fire-7"],ramp:s2["fire-7"]}},E1="#ab5787",FP="#979797",pin={background:"#f9f9f9",arc:{fill:E1},area:{fill:E1},line:{stroke:E1},path:{stroke:E1},rect:{fill:E1},shape:{stroke:E1},symbol:{fill:E1,size:30},axis:{domainColor:FP,domainWidth:.5,gridWidth:.2,labelColor:FP,tickColor:FP,tickWidth:.2,titleColor:FP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},x1="#3e5c69",min={background:"#fff",arc:{fill:x1},area:{fill:x1},line:{stroke:x1},path:{stroke:x1},rect:{fill:x1},shape:{stroke:x1},symbol:{fill:x1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},cc="#1696d2",A0e="#000000",gin="#FFFFFF",jP="Lato",kB="Lato",yin="Lato",vin="#DEDDDD",bin=18,o2={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},_in={background:gin,title:{anchor:"start",fontSize:bin,font:jP},axisX:{domain:!0,domainColor:A0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:kB,labelAngle:0,tickColor:A0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:jP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:vin,gridWidth:1,labelFontSize:12,labelFont:kB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:jP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:kB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:jP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:o2["six-groups-cat-1"],diverging:o2["diverging-colors"],heatmap:o2["diverging-colors"],ordinal:o2["six-groups-seq"],ramp:o2["shades-blue"]},area:{fill:cc},rect:{fill:cc},line:{color:cc,stroke:cc,strokeWidth:5},trail:{color:cc,stroke:cc,strokeWidth:0,size:1},path:{stroke:cc,strokeWidth:.5},point:{filled:!0},text:{font:yin,color:cc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:cc,stroke:null}},arc:{fill:cc},shape:{stroke:cc},symbol:{fill:cc,size:30}},S1="#3366CC",I0e="#ccc",BP="Arial, sans-serif",win={arc:{fill:S1},area:{fill:S1},path:{stroke:S1},rect:{fill:S1},shape:{stroke:S1},symbol:{stroke:S1},circle:{fill:S1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:BP,fontSize:12},"guide-title":{font:BP,fontSize:12},"group-title":{font:BP,fontSize:12}},title:{font:BP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:I0e,tickColor:I0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},sie=e=>e*(1/3+1),k0e=sie(9),R0e=sie(10),N0e=sie(12),a2="Segoe UI",P0e="wf_standard-font, helvetica, arial, sans-serif",D0e="#252423",u2="#605E5C",O0e="transparent",Ein="#C8C6C4",df="#118DFF",xin="#12239E",Sin="#E66C37",Tin="#6B007B",Cin="#E044A7",Ain="#744EC2",Iin="#D9B300",kin="#D64550",ije=df,sje="#DEEFFF",$0e=[sje,ije],Rin=[sje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",ije],Nin={view:{stroke:O0e},background:O0e,font:a2,header:{titleFont:P0e,titleFontSize:N0e,titleColor:D0e,labelFont:a2,labelFontSize:R0e,labelColor:u2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:u2,labelFontSize:k0e,titleFont:P0e,titleColor:D0e,titleFontSize:N0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Ein,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:df},line:{stroke:df,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:a2,fontSize:k0e,fill:u2},arc:{fill:df},area:{fill:df,line:!0,opacity:.6},path:{stroke:df},rect:{fill:df},point:{fill:df,filled:!0,size:75},shape:{stroke:df},symbol:{fill:df,strokeWidth:1.5,size:50},legend:{titleFont:a2,titleFontWeight:"bold",titleColor:u2,labelFont:a2,labelFontSize:R0e,labelColor:u2,symbolType:"circle",symbolSize:75},range:{category:[df,xin,Sin,Tin,Cin,Ain,Iin,kin],diverging:$0e,heatmap:$0e,ordinal:Rin}},RB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Pin='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',NB=400,UP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Din=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Oin=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function I5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=UP.gridBg[e],i=UP.textPrimary[e],s=UP.textSecondary[e],o=n==="dark"?Din:Oin,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:RB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Pin,labelFontWeight:NB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:UP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:RB,fill:s,fontWeight:NB},"guide-title":{font:RB,fill:s,fontWeight:NB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const $in=I5({theme:"white",background:"#ffffff"}),Min=I5({theme:"g10",background:"#f4f4f4"}),Lin=I5({theme:"g90",background:"#262626"}),Fin=I5({theme:"g100",background:"#161616"}),jin=rin.version,Bin=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Min,carbong100:Fin,carbong90:Lin,carbonwhite:$in,dark:iin,excel:sin,fivethirtyeight:uin,ggplot2:lin,googlecharts:win,latimes:hin,powerbi:Nin,quartz:pin,urbaninstitute:_in,version:jin,vox:min},Symbol.toStringTag,{value:"Module"}));function Uin(e,t,n,r){if(je(e))return`[${e.map(i=>t(mt(i)?i:M0e(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=M0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function zin(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function M0e(e,t){return JSON.stringify(e,zin(t))}var Vin=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const oje="vg-tooltip-element",Hin={offsetX:10,offsetY:10,id:oje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:qin,maxDepth:2,formatTooltip:Uin,baseURL:""};function qin(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Win(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Vin.toString().replace(oje,e)}function Gin(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Yin{constructor(t){this.options={...Hin,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Win(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Gin(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var PB={};function Kin(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var DB,L0e;function Xin(){return L0e||(L0e=1,DB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),DB}var Qin=vr;vr.Node=Cb;vr.create=vr;function vr(e){var t=this;if(t instanceof vr||(t=new vr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}vr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};vr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};vr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};vr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Zin(this,arguments[e]);return this.length};vr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)esn(this,arguments[e]);return this.length};vr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};vr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};vr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};vr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};vr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};vr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};vr.prototype.map=function(e,t){t=t||this;for(var n=new vr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};vr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new vr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};vr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};vr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};vr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};vr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};vr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new vr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};vr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new vr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};vr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Jin(this,i,n[r]);return s};vr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Jin(e,t,n){var r=t===e.head?new Cb(n,null,t,e):new Cb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Zin(e,t){e.tail=new Cb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function esn(e,t){e.head=new Cb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Cb(e,t,n,r){if(!(this instanceof Cb))return new Cb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Xin()(vr)}catch{}const tsn=Qin,Z1=Symbol("max"),$p=Symbol("length"),H_=Symbol("lengthCalculator"),rA=Symbol("allowStale"),_v=Symbol("maxAge"),Rp=Symbol("dispose"),F0e=Symbol("noDisposeOnSet"),Ys=Symbol("lruList"),pf=Symbol("cache"),aje=Symbol("updateAgeOnGet"),OB=()=>1;class nsn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Z1]=t.max||1/0;const n=t.length||OB;if(this[H_]=typeof n!="function"?OB:n,this[rA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[_v]=t.maxAge||0,this[Rp]=t.dispose,this[F0e]=t.noDisposeOnSet||!1,this[aje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Z1]=t||1/0,l2(this)}get max(){return this[Z1]}set allowStale(t){this[rA]=!!t}get allowStale(){return this[rA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[_v]=t,l2(this)}get maxAge(){return this[_v]}set lengthCalculator(t){typeof t!="function"&&(t=OB),t!==this[H_]&&(this[H_]=t,this[$p]=0,this[Ys].forEach(n=>{n.length=this[H_](n.value,n.key),this[$p]+=n.length})),l2(this)}get lengthCalculator(){return this[H_]}get length(){return this[$p]}get itemCount(){return this[Ys].length}rforEach(t,n){n=n||this;for(let r=this[Ys].tail;r!==null;){const i=r.prev;j0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ys].head;r!==null;){const i=r.next;j0e(this,t,r,n),r=i}}keys(){return this[Ys].toArray().map(t=>t.key)}values(){return this[Ys].toArray().map(t=>t.value)}reset(){this[Rp]&&this[Ys]&&this[Ys].length&&this[Ys].forEach(t=>this[Rp](t.key,t.value)),this[pf]=new Map,this[Ys]=new tsn,this[$p]=0}dump(){return this[Ys].map(t=>YM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ys]}set(t,n,r){if(r=r||this[_v],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[H_](n,t);if(this[pf].has(t)){if(s>this[Z1])return bE(this,this[pf].get(t)),!1;const u=this[pf].get(t).value;return this[Rp]&&(this[F0e]||this[Rp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[$p]+=s-u.length,u.length=s,this.get(t),l2(this),!0}const o=new rsn(t,n,s,i,r);return o.length>this[Z1]?(this[Rp]&&this[Rp](t,n),!1):(this[$p]+=o.length,this[Ys].unshift(o),this[pf].set(t,this[Ys].head),l2(this),!0)}has(t){if(!this[pf].has(t))return!1;const n=this[pf].get(t).value;return!YM(this,n)}get(t){return $B(this,t,!0)}peek(t){return $B(this,t,!1)}pop(){const t=this[Ys].tail;return t?(bE(this,t),t.value):null}del(t){bE(this,this[pf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[pf].forEach((t,n)=>$B(this,n,!1))}}const $B=(e,t,n)=>{const r=e[pf].get(t);if(r){const i=r.value;if(YM(e,i)){if(bE(e,r),!e[rA])return}else n&&(e[aje]&&(r.value.now=Date.now()),e[Ys].unshiftNode(r));return i.value}},YM=(e,t)=>{if(!t||!t.maxAge&&!e[_v])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[_v]&&n>e[_v]},l2=e=>{if(e[$p]>e[Z1])for(let t=e[Ys].tail;e[$p]>e[Z1]&&t!==null;){const n=t.prev;bE(e,t),t=n}},bE=(e,t)=>{if(t){const n=t.value;e[Rp]&&e[Rp](n.key,n.value),e[$p]-=n.length,e[pf].delete(n.key),e[Ys].removeNode(t)}};class rsn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const j0e=(e,t,n,r)=>{let i=n.value;YM(e,i)&&(bE(e,n),e[rA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var isn=nsn;const ssn=Object.freeze({loose:!0}),osn=Object.freeze({}),asn=e=>e?typeof e!="object"?ssn:e:osn;var oie=asn,wq={exports:{}};const usn="2.0.0",uje=256,lsn=Number.MAX_SAFE_INTEGER||9007199254740991,csn=16,fsn=uje-6,dsn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var aie={MAX_LENGTH:uje,MAX_SAFE_COMPONENT_LENGTH:csn,MAX_SAFE_BUILD_LENGTH:fsn,MAX_SAFE_INTEGER:lsn,RELEASE_TYPES:dsn,SEMVER_SPEC_VERSION:usn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const hsn=typeof process=="object"&&PB&&PB.NODE_DEBUG&&/\bsemver\b/i.test(PB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var k5=hsn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=aie,s=k5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(wq,wq.exports);var uie=wq.exports;const B0e=/^[0-9]+$/,lje=(e,t)=>{const n=B0e.test(e),r=B0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},psn=(e,t)=>lje(t,e);var msn={compareIdentifiers:lje,rcompareIdentifiers:psn};const zP=k5,{MAX_LENGTH:U0e,MAX_SAFE_INTEGER:VP}=aie,{safeRe:z0e,t:V0e}=uie,gsn=oie,{compareIdentifiers:q_}=msn;let ysn=class Id{constructor(t,n){if(n=gsn(n),t instanceof Id){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>U0e)throw new TypeError(`version is longer than ${U0e} characters`);zP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?z0e[V0e.LOOSE]:z0e[V0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>VP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>VP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>VP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<VP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(zP("SemVer.compare",this.version,this.options,t),!(t instanceof Id)){if(typeof t=="string"&&t===this.version)return 0;t=new Id(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Id||(t=new Id(t,this.options)),q_(this.major,t.major)||q_(this.minor,t.minor)||q_(this.patch,t.patch)}comparePre(t){if(t instanceof Id||(t=new Id(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(zP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return q_(r,i)}while(++n)}compareBuild(t){t instanceof Id||(t=new Id(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(zP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return q_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),q_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var lie=ysn;const H0e=lie,vsn=(e,t,n)=>new H0e(e,n).compare(new H0e(t,n));var oT=vsn;const bsn=oT,_sn=(e,t,n)=>bsn(e,t,n)===0;var wsn=_sn;const Esn=oT,xsn=(e,t,n)=>Esn(e,t,n)!==0;var Ssn=xsn;const Tsn=oT,Csn=(e,t,n)=>Tsn(e,t,n)>0;var Asn=Csn;const Isn=oT,ksn=(e,t,n)=>Isn(e,t,n)>=0;var Rsn=ksn;const Nsn=oT,Psn=(e,t,n)=>Nsn(e,t,n)<0;var Dsn=Psn;const Osn=oT,$sn=(e,t,n)=>Osn(e,t,n)<=0;var Msn=$sn;const Lsn=wsn,Fsn=Ssn,jsn=Asn,Bsn=Rsn,Usn=Dsn,zsn=Msn,Vsn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Lsn(e,n,r);case"!=":return Fsn(e,n,r);case">":return jsn(e,n,r);case">=":return Bsn(e,n,r);case"<":return Usn(e,n,r);case"<=":return zsn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Hsn=Vsn,MB,q0e;function qsn(){if(q0e)return MB;q0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}MB=t;const n=oie,{safeRe:r,t:i}=uie,s=Hsn,o=k5,a=lie,u=cje();return MB}var LB,W0e;function cje(){if(W0e)return LB;W0e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const z=this.options.loose,H=z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,R(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));z&&(P=P.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",P);const U=new Map,W=P.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];U.set(q.value,q)}U.size>1&&U.has("")&&U.delete("");const j=[...U.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(z=>B.every(H=>z.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}LB=e;const t=isn,n=new t({max:1e3}),r=oie,i=qsn(),s=k5,o=lie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=uie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=aie,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,$)=>{let F=!0;const M=D.slice();let B=M.pop();for(;F&&M.length;)F=M.every(z=>B.intersects(z,$)),B=M.pop();return F},y=(D,$)=>(s("comp",D,$),D=w(D,$),s("caret",D),D=_(D,$),s("tildes",D),D=x(D,$),s("xrange",D),D=A(D,$),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",_=(D,$)=>D.trim().split(/\s+/).map(F=>E(F,$)).join(" "),E=(D,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(F,(M,B,z,H,P)=>{s("tilde",D,M,B,z,H,P);let U;return v(B)?U="":v(z)?U=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?U=`>=${B}.${z}.0 <${B}.${+z+1}.0-0`:P?(s("replaceTilde pr",P),U=`>=${B}.${z}.${H}-${P} <${B}.${+z+1}.0-0`):U=`>=${B}.${z}.${H} <${B}.${+z+1}.0-0`,s("tilde return",U),U})},w=(D,$)=>D.trim().split(/\s+/).map(F=>S(F,$)).join(" "),S=(D,$)=>{s("caret",D,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return D.replace(F,(B,z,H,P,U)=>{s("caret",D,B,z,H,P,U);let W;return v(z)?W="":v(H)?W=`>=${z}.0.0${M} <${+z+1}.0.0-0`:v(P)?z==="0"?W=`>=${z}.${H}.0${M} <${z}.${+H+1}.0-0`:W=`>=${z}.${H}.0${M} <${+z+1}.0.0-0`:U?(s("replaceCaret pr",U),z==="0"?H==="0"?W=`>=${z}.${H}.${P}-${U} <${z}.${H}.${+P+1}-0`:W=`>=${z}.${H}.${P}-${U} <${z}.${+H+1}.0-0`:W=`>=${z}.${H}.${P}-${U} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?H==="0"?W=`>=${z}.${H}.${P}${M} <${z}.${H}.${+P+1}-0`:W=`>=${z}.${H}.${P}${M} <${z}.${+H+1}.0-0`:W=`>=${z}.${H}.${P} <${+z+1}.0.0-0`),s("caret return",W),W})},x=(D,$)=>(s("replaceXRanges",D,$),D.split(/\s+/).map(F=>C(F,$)).join(" ")),C=(D,$)=>{D=D.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(F,(M,B,z,H,P,U)=>{s("xRange",D,M,B,z,H,P,U);const W=v(z),j=W||v(H),q=j||v(P),G=q;return B==="="&&G&&(B=""),U=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),P=0,B===">"?(B=">=",j?(z=+z+1,H=0,P=0):(H=+H+1,P=0)):B==="<="&&(B="<",j?z=+z+1:H=+H+1),B==="<"&&(U="-0"),M=`${B+z}.${H}.${P}${U}`):j?M=`>=${z}.0.0${U} <${+z+1}.0.0-0`:q&&(M=`>=${z}.${H}.0${U} <${z}.${+H+1}.0-0`),s("xRange return",M),M})},A=(D,$)=>(s("replaceStars",D,$),D.trim().replace(a[u.STAR],"")),I=(D,$)=>(s("replaceGTE0",D,$),D.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=D=>($,F,M,B,z,H,P,U,W,j,q,G,ne)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${D?"-0":""}`:v(z)?F=`>=${M}.${B}.0${D?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,v(W)?U="":v(j)?U=`<${+W+1}.0.0-0`:v(q)?U=`<${W}.${+j+1}.0-0`:G?U=`<=${W}.${j}.${q}-${G}`:D?U=`<${W}.${j}.${+q+1}-0`:U=`<=${U}`,`${F} ${U}`.trim()),O=(D,$,F)=>{for(let M=0;M<D.length;M++)if(!D[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<D.length;M++)if(s(D[M].semver),D[M].semver!==i.ANY&&D[M].semver.prerelease.length>0){const B=D[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return LB}const Wsn=cje(),Gsn=(e,t,n)=>{try{t=new Wsn(t,n)}catch{return!1}return t.test(e)};var Ysn=Gsn,fje=Kin(Ysn);function Ksn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Xsn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function dje(e,...t){for(const n of t)Qsn(e,n);return e}function Qsn(e,t){for(const n of Object.keys(t))zS(e,n,t[n],!0)}const gf=OYt;let WI=jrn;const HP=typeof window<"u"?window:void 0;var tye;WI===void 0&&((tye=HP==null?void 0:HP.vl)!=null&&tye.compile)&&(WI=HP.vl);const Jsn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Zsn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},tC={vega:"Vega","vega-lite":"Vega-Lite"},KM={vega:gf.version,"vega-lite":WI?WI.version:"not available"},eon={vega:e=>e,"vega-lite":(e,t)=>WI.compile(e,{config:t}).spec},ton=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,non="chart-wrapper";function ron(e){return typeof e=="function"}function G0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${tC[r]} JSON Source`}function ion(e,t){if(e.$schema){const n=rje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${tC[n.library]}, but mode argument sets ${tC[t]??t}.`);const r=n.library;return fje(KM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${tC[r]} ${n.version}, but the current version of ${tC[r]} is v${KM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function hje(e){return!!(e&&"load"in e)}function Y0e(e){return hje(e)?e:gf.loader(e)}function son(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function oon(e,t,n={}){let r,i;mt(t)?(i=Y0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=son(r),o=s.loader;(!i||o)&&(i=Y0e(n.loader??o));const a=await K0e(s,i),u=await K0e(n,i),l={...dje(u,a),config:US(u.config??{},a.config??{})};return await uon(e,r,l,i)}async function K0e(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function aon(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function uon(e,t,n={},r){const i=n.theme?US(Bin[n.theme],n.config??{}):n.config,s=Ky(n.actions)?n.actions:dje({},Jsn,n.actions??{}),o={...Zsn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??gf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const w="vega-embed-style",{root:S,rootContainer:x}=aon(c);if(!S.getElementById(w)){const C=document.createElement("style");C.id=w,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Xsn.toString():n.defaultStyle,x.appendChild(C)}}const f=ion(t,n.mode);let d=eon[f](t,i);if(f==="vega-lite"&&d.$schema){const w=rje(d.$schema);fje(KM.vega,`^${w.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${w.version}, but current version is v${KM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const w=document.createElement("div");w.classList.add(non),c.appendChild(w),h=w}const p=n.patch;if(p&&(d=p instanceof Function?p(d):iOe(d,p,!0,!1).newDocument),n.formatLocale&&gf.formatLocale(n.formatLocale),n.timeFormatLocale&&gf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const w in n.expressionFunctions){const S=n.expressionFunctions[w];"fn"in S?gf.expressionFunction(w,S.fn,S.visitor):S instanceof Function&&gf.expressionFunction(w,S)}const{ast:m}=n,g=gf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||gf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:gf.expressionInterpreter??n.expr??HYt}:{}});if(y.addSignalListener("autosize",(w,S)=>{const{type:x}=S;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:w,tooltip:S}=n,x=w&&!hje(w)?w==null?void 0:w.baseURL:void 0,C=ron(S)?S:new Yin({baseURL:x,...S===!0?{}:S}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:w,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(w,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let w=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),w=x;const C=document.createElement("summary");C.innerHTML=ton,x.append(C),_=A=>{x.contains(A.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const S=document.createElement("div");if(w.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const C=o[`${x.toUpperCase()}_ACTION`],A=document.createElement("a"),I=gt(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${x}`,A.addEventListener("mousedown",async function(R){R.preventDefault();const O=await y.toImageURL(x,I);this.href=O}),S.append(A)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(C){G0e(F9(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),S.append(x)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(C){G0e(F9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),S.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Ksn(window,x,{config:i,mode:f,renderer:a,spec:F9(t)}),A.preventDefault()}),S.append(C)}}function E(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function lon(e){return!!e&&{}.toString.call(e)==="[object Function]"}function con(e,t,n){n&&(lon(n)?n(e.data(t)):e.change(t,gf.changeset().remove(()=>!0).insert(n)))}function fon(e,t){Object.keys(t).forEach(n=>{con(e,n,t[n])})}function pje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const mje=()=>{};function FB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function don(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=pje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!dD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function X0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function jB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function nC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class gje extends wr.PureComponent{constructor(){super(...arguments),nC(this,"containerRef",wr.createRef()),nC(this,"resultPromise",void 0),nC(this,"handleError",t=>{const{onError:n=mje}=this.props;n(t,this.containerRef.current),console.warn(t)}),nC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=pje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=don(jB(this.props),jB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!YV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&X0e(a,s),i&&FB(a,i)),a.run()})}else YV(i,s)||this.modifyView(o=>{s&&X0e(o,s),i&&FB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=jB(this.props);this.resultPromise=oon(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;FB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return wr.createElement("div",{ref:this.containerRef,className:t,style:n})}}nC(gje,"propTypes",{className:zoe.string,onError:zoe.func});function Eq(){return Eq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eq.apply(this,arguments)}function xq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hon={};class yje extends wr.PureComponent{constructor(){super(...arguments),xq(this,"vegaEmbed",wr.createRef()),xq(this,"handleNewView",t=>{this.update();const{onNewView:n=mje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){YV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{fon(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return wr.createElement(gje,Eq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}xq(yje,"defaultProps",{data:hon});function Sq(){return Sq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sq.apply(this,arguments)}function Tq(e){return wr.createElement(yje,Sq({},e,{mode:"vega-lite"}))}function pon({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=gL(!0),[o,a]=Bf(),u=k.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=k.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=k.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return b.jsxs(Wx,{p:"lg",withBorder:!0,ref:o,children:[b.jsxs(Rt,{direction:"row",justify:"space-between",onClick:s,children:[b.jsxs(Rt,{align:"center",children:[e.type==="metadata"&&b.jsx(iQe,{size:20}),e.type==="numerical"&&b.jsx(hQe,{size:20}),(e.type==="shortText"||e.type==="longText")&&b.jsx(ZXe,{size:20}),e.type==="likert"&&b.jsx(aQe,{size:20}),e.type==="dropdown"&&b.jsx(_Qe,{size:20}),e.type==="slider"&&b.jsx(YXe,{size:20}),e.type==="radio"&&b.jsx(gQe,{size:20}),e.type==="checkbox"&&b.jsx(wQe,{size:20}),e.type==="iframe"&&b.jsx(cQe,{size:20}),b.jsx(Ai,{order:5,ml:4,children:e.id})]}),b.jsx(rQe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),b.jsxs(vL,{in:i,mah:400,children:[b.jsx(me,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:b.jsx(PE,{})}),b.jsxs(nY,{cols:2,h:360,children:[b.jsx(bm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?b.jsx(Tq,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):b.jsxs(Rt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&b.jsx(hC,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&b.jsxs(b.Fragment,{children:[b.jsx(Ke,{fw:700,children:"Response Values: "}),u.map((f,d)=>b.jsx(Rt,{align:"center",gap:"xs",children:b.jsx(Ke,{children:f[e.id]})},d))]})]})}),b.jsx(bm,{mih:200,children:e.type==="metadata"?b.jsx(Tq,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):b.jsxs(b.Fragment,{children:[b.jsx(Ke,{fw:700,children:"Response Specification: "}),b.jsx(hC,{block:!0,children:JSON.stringify(e,null,2)}),b.jsx("br",{}),l&&b.jsxs(b.Fragment,{children:[b.jsx(Ke,{fw:700,children:"Correct Answer: "}),b.jsx(hC,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function mon({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&uNe(t.components[n],t),i=k.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?b.jsx(Rt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>b.jsx(pon,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):b.jsx(Rt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:b.jsx(Ke,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function gon({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=k.useState([...n]),o=k.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=k.useMemo(()=>{let l=E0(e.sequence);return l=GY(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=Em();return b.jsxs(Wx,{shadow:"sm",p:"md",withBorder:!0,children:[b.jsx(Rt,{direction:"row",justify:"space-between",children:b.jsx(Tl.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:b.jsxs(si,{children:[b.jsx(Tl,{value:"completed",label:"Completed"}),b.jsx(Tl,{value:"inprogress",label:"In Progress"}),b.jsx(Tl,{value:"rejected",label:"Rejected"})]})})}),b.jsx(PE,{my:"xs"}),i.length===0?b.jsx(Rt,{justify:"center",align:"center",pt:"lg",pb:"md",children:b.jsx(Ke,{children:"No data available."})}):b.jsxs(Rt,{direction:"row",children:[b.jsx(me,{w:340,children:b.jsx(j$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),b.jsx(PE,{orientation:"vertical",mx:"md"}),b.jsx(mon,{participantData:i,studyConfig:e,trialId:u})]})]})}function yon({globalConfig:e}){const{studyId:t}=Em(),[n,r]=k.useState([]),[i,s]=k.useState(void 0),[o,a]=k.useState(!1),{storageEngine:u}=gs(),l=Wh(),{tab:c}=Em(),{user:f}=Qb(),d=k.useCallback(async()=>{if(a(!0),t){const g=await b4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);k.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=k.useMemo(()=>{const g=n.filter(_=>!_.rejected&&_.completed),y=n.filter(_=>!_.rejected&&!_.completed),v=n.filter(_=>_.rejected);return[g,y,v]},[n]);return b.jsxs(b.Fragment,{children:[b.jsx(WC,{studyIds:e.configsList}),b.jsx(mi.Main,{children:b.jsxs($c,{fluid:!0,style:{height:"100%",position:"relative"},children:[b.jsx(Fl,{visible:o}),b.jsxs(Rt,{direction:"row",align:"center",children:[b.jsx(Ai,{order:5,children:t}),b.jsx(rOe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),b.jsx(Nl,{h:"xs"}),b.jsxs(ss,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[b.jsxs(ss.List,{children:[b.jsx(ss.Tab,{value:"table",leftSection:b.jsx(EQe,{size:16}),children:"Table View"}),b.jsx(ss.Tab,{value:"stats",leftSection:b.jsx(tQe,{size:16}),children:"Trial Stats"}),b.jsx(li,{label:"Coming soon",position:"bottom",children:b.jsx(ss.Tab,{value:"replay",leftSection:b.jsx(mQe,{size:16}),disabled:!0,children:"Participant Replay"})}),b.jsx(ss.Tab,{value:"manage",leftSection:b.jsx(_we,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),b.jsx(ss.Panel,{value:"table",pt:"xs",children:i&&b.jsx(D6t,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),b.jsx(ss.Panel,{value:"stats",pt:"xs",children:i&&b.jsx(gon,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),b.jsx(ss.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),b.jsx(ss.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?b.jsx(U6t,{studyId:t,refresh:d}):b.jsx($c,{mt:20,children:b.jsx(Qx,{title:"Unauthorized Access",variant:"light",color:"red",icon:b.jsx(vwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Q0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Qb(),{storageEngine:o}=gs(),[a,u]=k.useState(!1),l=Em();return k.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?b.jsx(Fl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?b.jsx(yY,{to:"/login"}):b.jsx(b.Fragment,{children:e})}async function vje(e,t){if(e instanceof _c){t(!0);const n=new zp,r=G$();try{await xDt(r,n,ZNe)}catch(i){nM({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function von(){const{user:e}=Qb(),[t,n]=k.useState(!1),{storageEngine:r}=gs();return k.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&nM({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?b.jsx(yY,{to:"/"}):b.jsx($c,{children:b.jsx($b,{padding:"lg",children:b.jsxs(Rt,{align:"center",direction:"column",justify:"center",children:[b.jsx(Py,{maw:200,mt:50,mb:100,src:`${Hu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsxs(b.Fragment,{children:[b.jsx(Ke,{mb:20,children:"To access admin settings, please sign in using your Google account."}),b.jsx(en,{onClick:()=>vje(r,n),leftSection:b.jsx(xQe,{}),variant:"filled",children:"Sign In With Google"})]}),b.jsx(Fl,{visible:t})]})})})}var bje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(no,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},_=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},E={s:_,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),z=M%60;return(F<=0?"+":"-")+_(B,2,"0")+":"+_(z,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),z=F.clone().add(B,f),H=M-z<0,P=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-z)/(H?z-P:P-z))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},w="en",S={};S[w]=v;var x="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[x])},A=function $(F,M,B){var z;if(!F)return w;if(typeof F=="string"){var H=F.toLowerCase();S[H]&&(z=H),M&&(S[H]=M,z=H);var P=F.split("-");if(!z&&P.length>1)return $(P[0])}else{var U=F.name;S[U]=F,z=U}return!B&&z&&(w=z),z||!B&&w},I=function($,F){if(C($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new O(M)},R=E;R.l=A,R.i=C,R.w=function($,F){return I($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[x]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var z=B.date,H=B.utc;if(z===null)return new Date(NaN);if(R.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var P=z.match(g);if(P){var U=P[2]-1||0,W=(P[7]||"0").substring(0,3);return H?new Date(Date.UTC(P[1],U,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],U,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(z)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return R},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var z=I(M);return this.startOf(B)<=z&&z<=this.endOf(B)},F.isAfter=function(M,B){return I(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<I(M)},F.$g=function(M,B,z){return R.u(M)?this[B]:this.set(z,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var z=this,H=!!R.u(B)||B,P=R.p(M),U=function(he,ve){var Ie=R.w(z.$u?Date.UTC(z.$y,ve,he):new Date(z.$y,ve,he),z);return H?Ie:Ie.endOf(l)},W=function(he,ve){return R.w(z.toDate()[he].apply(z.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ve)),z)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(P){case h:return H?U(1,0):U(31,11);case f:return H?U(1,q):U(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return U(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var z,H=R.p(M),P="set"+(this.$u?"UTC":""),U=(z={},z[l]=P+"Date",z[p]=P+"Date",z[f]=P+"Month",z[h]=P+"FullYear",z[u]=P+"Hours",z[a]=P+"Minutes",z[o]=P+"Seconds",z[s]=P+"Milliseconds",z)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[U](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[R.p(M)]()},F.add=function(M,B){var z,H=this;M=Number(M);var P=R.p(B),U=function(q){var G=I(H);return R.w(G.date(G.date()+Math.round(q*M)),H)};if(P===f)return this.set(f,this.$M+M);if(P===h)return this.set(h,this.$y+M);if(P===l)return U(1);if(P===c)return U(7);var W=(z={},z[a]=r,z[u]=i,z[o]=n,z)[P]||1,j=this.$d.getTime()+M*W;return R.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",P=R.z(this),U=this.$H,W=this.$m,j=this.$M,q=z.weekdays,G=z.months,ne=z.meridiem,ce=function(ve,Ie,be,Xe){return ve&&(ve[Ie]||ve(B,H))||be[Ie].slice(0,Xe)},de=function(ve){return R.s(U%12||12,ve,"0")},he=ne||function(ve,Ie,be){var Xe=ve<12?"AM":"PM";return be?Xe.toLowerCase():Xe};return H.replace(y,function(ve,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return j+1;case"MM":return R.s(j+1,2,"0");case"MMM":return ce(z.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(z.weekdaysMin,B.$W,q,2);case"ddd":return ce(z.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(U);case"HH":return R.s(U,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(U,W,!0);case"A":return he(U,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return P}return null}(ve)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,z){var H,P=this,U=R.p(B),W=I(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return R.m(P,W)};switch(U){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return z?H:R.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var z=this.clone(),H=A(M,B,!0);return H&&(z.$L=H),z},F.clone=function(){return R.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),D=O.prototype;return I.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){D[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),I.extend=function($,F){return $.$i||($(F,O,I),$.$i=!0),I},I.locale=A,I.isDayjs=C,I.unix=function($){return I(1e3*$)},I.en=S[w],I.Ls=S,I.p={},I})})(bje);var bon=bje.exports;const Tt=Xl(bon);function _on({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function won({formatter:e,...t}){return(e||_on)(t)}function Eon({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function _je({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=Eon({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?_je({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function xon(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function Son(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function cie({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=xon(i.key);if(s){i.preventDefault();const o=Son(e);_je({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var wje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(no,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var _=v.timeZoneName||"short",E=y+"|"+_,w=r[E];return w||(w=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[E]=w),w}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,_=y.value,E=n[v];E>=0&&(m[E]=parseInt(_,10))}var w=m[3],S=w===24?0:w,x=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(x).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var _=v.utcOffset();v=v.add(p-_,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,x,C){var A=S-60*x*1e3,I=l(A,C);if(x===I)return[A,x];var R=l(A-=60*(I-x)*1e3,C);return I===R?[A,I]:[S-60*Math.min(I,R)*1e3,Math.max(I,R)]}(o.utc(d,m).valueOf(),y,g),_=v[0],E=v[1],w=o(_).utcOffset(E);return w.$x.$timezone=g,w},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(wje);var Ton=wje.exports;const Con=Xl(Ton);var Eje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(no,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(w){w===void 0&&(w="");var S=w.match(r);if(!S)return null;var x=(""+S[0]).match(i)||["-",0,0],C=x[0],A=60*+x[1]+ +x[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=v,_.$u=m===0,_;if(m!==0){var E=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(v+E,n)).$offset=v,_.$x.$localOffset=E}else _=this.utc();return _};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),_=a(m).local();return p.call(v,_,g,y)}}})})(Eje);var Aon=Eje.exports;const Ion=Xl(Aon);Tt.extend(Ion);Tt.extend(Con);function kon(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const J0e=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=kon(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function M0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>J0e(i,n,e)):J0e(t,n,e)}function Ron({minDate:e,maxDate:t,timezone:n}){const r=M0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const Non={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},Pon=k.createContext(Non);function tc(){const e=k.useContext(Pon),t=k.useCallback(o=>o||e.locale,[e.locale]),n=k.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=k.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=k.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=k.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Don(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function xje({value:e,type:t,name:n,form:r}){return b.jsx("input",{type:"hidden",value:Don(e,t),name:n,form:r})}xje.displayName="@mantine/dates/HiddenDatesInput";var Sje={day:"m_396ce5cb"};const Oon={},$on=(e,{size:t})=>({day:{"--day-size":nn(t,"day-size")}}),fie=Me((e,t)=>{const n=xe("Day",Oon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:_,static:E,...w}=n,S=dt({name:f||"Day",classes:Sje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$on,rootSelector:"day"}),x=tc();return b.jsx(Ts,{...S("day",{style:_?{display:"none"}:void 0}),component:E?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(M0("add",new Date,x.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":E||void 0,unstyled:a,...w,children:(m==null?void 0:m(l))||l.getDate()})});fie.classes=Sje;fie.displayName="@mantine/dates/Day";function Mon({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var Tje={weekday:"m_18a3eca"};const Lon={},Fon=(e,{size:t})=>({weekdaysRow:{"--wr-fz":lo(t),"--wr-spacing":ls(t)}}),die=Me((e,t)=>{const n=xe("WeekdaysRow",Lon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=dt({name:h||"WeekdaysRow",classes:Tje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fon,rootSelector:"weekdaysRow"}),g=tc(),y=Mon({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,_)=>b.jsx(d,{...m("weekday"),children:v},_));return b.jsx(me,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});die.classes=Tje;die.displayName="@mantine/dates/WeekdaysRow";function jon(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Bon(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function Uon({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=jon(s,t),a=Bon(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function Cje(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Aje(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function Ije(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function zon(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return Ije(c,n)&&Aje(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||Cje(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var kje={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const Von={withCellSpacing:!0},R5=Me((e,t)=>{const n=xe("Month",Von,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:_,hideOutsideDates:E,hideWeekdays:w,getDayAriaLabel:S,static:x,__getDayRef:C,__onDayKeyDown:A,__onDayClick:I,__onDayMouseEnter:R,__preventFocus:O,__stopPropagation:D,withCellSpacing:$,size:F,...M}=n,B=dt({name:l||"Month",classes:kje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),z=tc(),H=Uon({month:h,firstDayOfWeek:z.getFirstDayOfWeek(f),consistentWeeks:z.consistentWeeks}),P=zon(H,y,v,m,g,E,h),{resolvedClassNames:U,resolvedStyles:W}=Hm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!Cje(ce,h),ve=(S==null?void 0:S(ce))||Tt(ce).locale(c||z.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=Tt(ce).isSame(P,"date");return b.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:b.jsx(fie,{__staticSelector:l||"Month",classNames:U,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:_,date:ce,size:F,weekend:z.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:E?he:!1,"aria-label":ve,static:x,disabled:(g==null?void 0:g(ce))||!Ije(ce,v)||!Aje(ce,y),ref:Xe=>C==null?void 0:C(G,de,Xe),...Ie,onKeyDown:Xe=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Xe),A==null||A(Xe,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Xe=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Xe),R==null||R(Xe,ce)},onClick:Xe=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Xe),I==null||I(Xe,ce)},onMouseDown:Xe=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Xe),O&&Xe.preventDefault()},tabIndex:O||!be?-1:0})},ce.toString())});return b.jsx("tr",{...B("monthRow"),children:ne},G)});return b.jsxs(me,{component:"table",...B("month"),size:F,ref:t,...M,children:[!w&&b.jsx("thead",{...B("monthThead"),children:b.jsx(die,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:U,styles:W,unstyled:a})}),b.jsx("tbody",{...B("monthTbody"),children:j})]})});R5.classes=kje;R5.displayName="@mantine/dates/Month";var Rje={pickerControl:"m_dc6a3c71"};const Hon={},qon=(e,{size:t})=>({pickerControl:{"--dpc-fz":lo(t),"--dpc-size":nn(t,"dpc-size")}}),N5=Me((e,t)=>{const n=xe("PickerControl",Hon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=dt({name:d||"PickerControl",classes:Rje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qon,rootSelector:"pickerControl"});return b.jsx(Ts,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});N5.classes=Rje;N5.displayName="@mantine/dates/PickerControl";function Nje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function Won(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Nje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function Pje(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var Dje={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Gon={yearsListFormat:"YYYY",withCellSpacing:!0},P5=Me((e,t)=>{const n=xe("YearsList",Gon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:E,__stopPropagation:w,withCellSpacing:S,size:x,...C}=n,A=dt({name:m||"YearsList",classes:Dje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),I=tc(),R=Pje(l),O=Won(R,d,h,p),D=R.map(($,F)=>{const M=$.map((B,z)=>{const H=p==null?void 0:p(B),P=Tt(B).isSame(O,"year");return b.jsx("td",{...A("yearsListCell"),"data-with-spacing":S||void 0,children:b.jsx(N5,{...A("yearsListControl"),size:x,unstyled:a,"data-mantine-stop-propagation":w||void 0,disabled:Nje(B,d,h),ref:U=>g==null?void 0:g(F,z,U),...H,onKeyDown:U=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:B})},onClick:U=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,U),v==null||v(U,B)},onMouseEnter:U=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,U),_==null||_(U,B)},onMouseDown:U=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,U),E&&U.preventDefault()},tabIndex:E||!P?-1:0,children:Tt(B).locale(I.getLocale(f)).format(c)})},z)});return b.jsx("tr",{...A("yearsListRow"),children:M},F)});return b.jsx(me,{component:"table",ref:t,size:x,...A("yearsList"),...C,children:b.jsx("tbody",{children:D})})});P5.classes=Dje;P5.displayName="@mantine/dates/YearsList";function Oje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function Yon(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Oje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function Kon(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var $je={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Xon={monthsListFormat:"MMM",withCellSpacing:!0},D5=Me((e,t)=>{const n=xe("MonthsList",Xon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:E,__stopPropagation:w,withCellSpacing:S,size:x,...C}=n,A=dt({name:l||"MonthsList",classes:$je,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),I=tc(),R=Kon(c),O=Yon(R,h,p,m),D=R.map(($,F)=>{const M=$.map((B,z)=>{const H=m==null?void 0:m(B),P=Tt(B).isSame(O,"month");return b.jsx("td",{...A("monthsListCell"),"data-with-spacing":S||void 0,children:b.jsx(N5,{...A("monthsListControl"),size:x,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":w||void 0,disabled:Oje(B,h,p),ref:U=>g==null?void 0:g(F,z,U),...H,onKeyDown:U=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:B})},onClick:U=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,U),v==null||v(U,B)},onMouseEnter:U=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,U),_==null||_(U,B)},onMouseDown:U=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,U),E&&U.preventDefault()},tabIndex:E||!P?-1:0,children:Tt(B).locale(I.getLocale(d)).format(f)})},z)});return b.jsx("tr",{...A("monthsListRow"),children:M},F)});return b.jsx(me,{component:"table",ref:t,size:x,...A("monthsList"),...C,children:b.jsx("tbody",{children:D})})});D5.classes=$je;D5.displayName="@mantine/dates/MonthsList";var Mje={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Qon={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Jon=(e,{size:t})=>({calendarHeader:{"--dch-control-size":nn(t,"dch-control-size"),"--dch-fz":lo(t)}}),s1=Me((e,t)=>{const n=xe("CalendarHeader",Qon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:_,levelControlAriaLabel:E,withNext:w,withPrevious:S,__staticSelector:x,__preventFocus:C,__stopPropagation:A,...I}=n,R=dt({name:x||"CalendarHeader",classes:Mje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jon,rootSelector:"calendarHeader"}),O=C?D=>D.preventDefault():void 0;return b.jsxs(me,{...R("calendarHeader"),ref:t,...I,children:[S&&b.jsx(Ts,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||b.jsx(RE,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),b.jsx(Ts,{component:_?"button":"div",...R("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?O:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":E,tabIndex:C||!_?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),w&&b.jsx(Ts,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||b.jsx(RE,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});s1.classes=Mje;s1.displayName="@mantine/dates/CalendarHeader";function Zon(e){const t=Pje(e);return[t[0][0],t[3][0]]}const ean={decadeLabelFormat:"YYYY"},O5=Me((e,t)=>{const n=xe("DecadeLevel",ean,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:E,nextDisabled:w,previousDisabled:S,levelControlAriaLabel:x,withNext:C,withPrevious:A,decadeLabelFormat:I,classNames:R,styles:O,unstyled:D,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,z=tc(),[H,P]=Zon(r),U={__staticSelector:$||"DecadeLevel",classNames:R,styles:O,unstyled:D,size:M},W=typeof w=="boolean"?w:o?!Tt(P).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||z.locale).format(ne);return b.jsxs(me,{"data-decade-level":!0,size:M,ref:t,...B,children:[b.jsx(s1,{label:typeof I=="function"?I(H,P):`${q(H,I)}  ${q(P,I)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:E,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:x,withNext:C,withPrevious:A,...U}),b.jsx(P5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...U})]})});O5.classes={...P5.classes,...s1.classes};O5.displayName="@mantine/dates/DecadeLevel";const tan={yearLabelFormat:"YYYY"},$5=Me((e,t)=>{const n=xe("YearLevel",tan,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:E,onLevelClick:w,nextDisabled:S,previousDisabled:x,hasNextLevel:C,levelControlAriaLabel:A,withNext:I,withPrevious:R,yearLabelFormat:O,__staticSelector:D,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:z,...H}=n,P=tc(),U={__staticSelector:D||"YearLevel",classNames:M,styles:B,unstyled:z,size:F},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof x=="boolean"?x:s?!Tt(r).startOf("year").isAfter(s):!1;return b.jsxs(me,{"data-year-level":!0,size:F,ref:t,...H,children:[b.jsx(s1,{label:typeof O=="function"?O(r):Tt(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:E,onLevelClick:w,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:I,withPrevious:R,...U}),b.jsx(D5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...U})]})});$5.classes={...s1.classes,...D5.classes};$5.displayName="@mantine/dates/YearLevel";const nan={monthLabelFormat:"MMMM YYYY"},M5=Me((e,t)=>{const n=xe("MonthLevel",nan,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,withCellSpacing:E,__preventFocus:w,__stopPropagation:S,nextIcon:x,previousIcon:C,nextLabel:A,previousLabel:I,onNext:R,onPrevious:O,onLevelClick:D,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:z,withPrevious:H,monthLabelFormat:P,classNames:U,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=tc(),he={__staticSelector:q||"MonthLevel",classNames:U,styles:W,unstyled:j,size:G},ve=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return b.jsxs(me,{"data-month-level":!0,size:G,ref:t,...ce,children:[b.jsx(s1,{label:typeof P=="function"?P(r):Tt(r).locale(i||de.locale).format(P),__preventFocus:w,__stopPropagation:S,nextIcon:x,previousIcon:C,nextLabel:A,previousLabel:I,onNext:R,onPrevious:O,onLevelClick:D,nextDisabled:ve,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:z,withPrevious:H,...he}),b.jsx(R5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,__preventFocus:w,__stopPropagation:S,static:ne,withCellSpacing:E,...he})]})});M5.classes={...R5.classes,...s1.classes};M5.displayName="@mantine/dates/MonthLevel";var Lje={levelsGroup:"m_30b26e33"};const ran={},o1=Me((e,t)=>{const n=xe("LevelsGroup",ran,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=dt({name:l||"LevelsGroup",classes:Lje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return b.jsx(me,{ref:t,...f("levelsGroup"),...c})});o1.classes=Lje;o1.displayName="@mantine/dates/LevelsGroup";const ian={numberOfColumns:1},L5=Me((e,t)=>{const n=xe("DecadeLevelGroup",ian,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:E,classNames:w,styles:S,unstyled:x,__staticSelector:C,__stopPropagation:A,numberOfColumns:I,levelControlAriaLabel:R,decadeLabelFormat:O,size:D,vars:$,...F}=n,M=k.useRef([]),B=Array(I).fill(0).map((z,H)=>{const P=Tt(r).add(H*10,"years").toDate();return b.jsx(O5,{size:D,yearsListFormat:a,decade:P,withNext:H===I-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,W)=>cie({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:U,controlsRef:M}),__getControlRef:(U,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][U])||(M.current[H][U]=[]),M.current[H][U][W]=j},levelControlAriaLabel:typeof R=="function"?R(P):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:E,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:w,styles:S,unstyled:x,withCellSpacing:f},H)});return b.jsx(o1,{classNames:w,styles:S,__staticSelector:C||"DecadeLevelGroup",ref:t,size:D,unstyled:x,...F,children:B})});L5.classes={...o1.classes,...O5.classes};L5.displayName="@mantine/dates/DecadeLevelGroup";const san={numberOfColumns:1},F5=Me((e,t)=>{const n=xe("YearLevelGroup",san,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:E,previousDisabled:w,hasNextLevel:S,classNames:x,styles:C,unstyled:A,__staticSelector:I,__stopPropagation:R,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:$,size:F,vars:M,...B}=n,z=k.useRef([]),H=Array(O).fill(0).map((P,U)=>{const W=Tt(r).add(U,"years").toDate();return b.jsx($5,{size:F,monthsListFormat:a,year:W,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:$,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>cie({levelIndex:U,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:z}),__getControlRef:(j,q,G)=>{Array.isArray(z.current[U])||(z.current[U]=[]),Array.isArray(z.current[U][j])||(z.current[U][j]=[]),z.current[U][j][q]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:E,previousDisabled:w,hasNextLevel:S,getMonthControlProps:u,classNames:x,styles:C,unstyled:A,__staticSelector:I||"YearLevelGroup",withCellSpacing:f},U)});return b.jsx(o1,{classNames:x,styles:C,__staticSelector:I||"YearLevelGroup",ref:t,size:F,unstyled:A,...B,children:H})});F5.classes={...$5.classes,...o1.classes};F5.displayName="@mantine/dates/YearLevelGroup";const oan={numberOfColumns:1},j5=Me((e,t)=>{const n=xe("MonthLevelGroup",oan,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:_,nextIcon:E,previousIcon:w,nextLabel:S,previousLabel:x,onNext:C,onPrevious:A,onLevelClick:I,nextDisabled:R,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:z,monthLabelFormat:H,__staticSelector:P,__stopPropagation:U,size:W,static:j,vars:q,...G}=n,ne=k.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ve=Tt(r).add(he,"months").toDate();return b.jsx(M5,{month:ve,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:U,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>cie({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Xe)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Xe},levelControlAriaLabel:typeof z=="function"?z(ve):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:_,nextIcon:E,previousIcon:w,nextLabel:S,previousLabel:x,onNext:C,onPrevious:A,onLevelClick:I,nextDisabled:R,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return b.jsx(o1,{classNames:$,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});j5.classes={...o1.classes,...M5.classes};j5.displayName="@mantine/dates/MonthLevelGroup";var Fje={input:"m_6fa5e2aa"};const aan={},B5=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:_,shouldClear:E,readOnly:w,disabled:S,value:x,name:C,form:A,type:I,...R}=Pbe("PickerInputBase",aan,e),O=_||(g&&E&&!w&&!S?b.jsx(Gm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{I==="range"&&Array.isArray(x)&&x[0]&&!x[1]&&y(),h.close()};return b.jsxs(b.Fragment,{children:[c==="modal"&&!w&&b.jsx($i,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),b.jsx(gi.Wrapper,{...r,children:b.jsxs(Do,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||w,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),D()},children:[b.jsx(Do.Target,{children:b.jsx(gi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":w||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Zi(Fje.input,s==null?void 0:s.input)},...R,children:d||b.jsx(gi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),b.jsx(Do.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),b.jsx(xje,{value:x,name:C,form:A,type:I})]})});B5.classes=Fje;B5.displayName="@mantine/dates/PickerInputBase";const Z0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function hie({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=k.useRef(e),o=tc(),[a,u,l]=Cs({value:M0("add",t,o.getTimezone(),!i),defaultValue:M0("add",n,o.getTimezone(),!i),finalValue:Z0e(e),onChange:f=>{r==null||r(M0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Z0e(e),u(c))),[c,u,l]}function BB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function uan(e){return e===0?"month":e===1?"year":"decade"}function c2(e,t,n){return uan(Zd(BB(e,0),BB(t,0),BB(n,2)))}const lan={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},U5=Me((e,t)=>{const n=xe("Calendar",lan,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:E,firstDayOfWeek:w,weekdayFormat:S,weekendDays:x,getDayProps:C,excludeDate:A,renderDay:I,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:z,withCellSpacing:H,monthsListFormat:P,getMonthControlProps:U,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ve,locale:Ie,__staticSelector:be,size:Xe,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:We,__timezoneApplied:ge,...ht}=n,{resolvedClassNames:vt,resolvedStyles:pe}=Hm({classNames:ne,styles:ce,props:n}),[Ae,He]=Cs({value:a?c2(a,s,i):void 0,defaultValue:o?c2(o,s,i):void 0,finalValue:c2(void 0,s,i),onChange:u}),[ut,_t]=hie({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ge}),Ln={__staticSelector:be||"Calendar",styles:pe,classNames:vt,unstyled:de,size:Xe},Ar=tc(),Fn=h||d||1,cr=ut||M0("add",new Date,Ar.getTimezone()),gn=()=>{const In=Tt(cr).add(Fn,"month").toDate();ct==null||ct(In),_t(In)},An=()=>{const In=Tt(cr).subtract(Fn,"month").toDate();Ot==null||Ot(In),_t(In)},nr=()=>{const In=Tt(cr).add(Fn,"year").toDate();ke==null||ke(In),_t(In)},rr=()=>{const In=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(In),_t(In)},Vo=()=>{const In=Tt(cr).add(10*Fn,"year").toDate();it==null||it(In),_t(In)},ji=()=>{const In=Tt(cr).subtract(10*Fn,"year").toDate();_e==null||_e(In),_t(In)};return b.jsxs(me,{ref:t,size:Xe,"data-calendar":!0,...ht,children:[Ae==="month"&&b.jsx(j5,{month:cr,minDate:he,maxDate:ve,firstDayOfWeek:w,weekdayFormat:S,weekendDays:x,getDayProps:C,excludeDate:A,renderDay:I,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:D,onNext:gn,onPrevious:An,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:z,__preventFocus:Ue,__stopPropagation:yt,static:We,withCellSpacing:H,...Ln}),Ae==="year"&&b.jsx(F5,{year:cr,numberOfColumns:d,minDate:he,maxDate:ve,monthsListFormat:P,getMonthControlProps:U,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(In,Bi)=>{E&&_t(Bi),He(c2("month",s,i)),g==null||g(Bi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln}),Ae==="decade"&&b.jsx(L5,{decade:cr,minDate:he,maxDate:ve,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:Vo,onPrevious:ji,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(In,Bi)=>{_&&_t(Bi),He(c2("year",s,i)),m==null||m(Bi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln})]})});U5.classes={...L5.classes,...F5.classes,...j5.classes};U5.displayName="@mantine/dates/Calendar";function can(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:E,onPreviousYear:w,onNextDecade:S,onPreviousDecade:x,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:z,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:E,onPreviousYear:w,onNextDecade:S,onPreviousDecade:x,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:z,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie},others:be}}function eye(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function fan({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=hie({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=k.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=k.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const x=[S,f];x.sort((C,A)=>C.getTime()-A.getTime()),c(x),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(x=>Tt(x).isSame(S,t))?c(l.filter(x=>!Tt(x).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?eye(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?eye(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,_=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),E=S=>{if(e==="range")return{selected:l.some(C=>C&&Tt(C).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:_(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Tt(C).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const x=Tt(l).isSame(S,t);return{selected:x,"data-autofocus":x||void 0}},w=e==="range"&&f?p:()=>{};return k.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:w,getControlProps:E,_value:l,setValue:c}}const dan={type:"default",defaultLevel:"month",numberOfColumns:1},z5=Me((e,t)=>{const n=xe("DatePicker",dan,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:_,...E}=n,{onDateChange:w,onRootMouseLeave:S,onHoveredDateChange:x,getControlProps:C}=fan({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:A,resolvedStyles:I}=Hm({classNames:r,styles:i,props:n}),R=tc();return b.jsx(U5,{ref:t,minLevel:"month",classNames:A,styles:I,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{x(D),y==null||y(O,D)},__onDayClick:(O,D)=>{w(D),v==null||v(O,D)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...E,date:M0("add",E.date,R.getTimezone(),_),__timezoneApplied:!0})});z5.classes=U5.classes;z5.displayName="@mantine/dates/DatePicker";function han({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=tc(),[f,d]=gL(!1),[h,p]=hie({type:e,value:t,defaultValue:n,onChange:r}),m=won({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=_=>{o&&(e==="default"&&d.close(),e==="range"&&_[0]&&_[1]&&d.close()),p(a&&e==="multiple"?[..._].sort((E,w)=>E.getTime()-w.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const pan={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},pie=Me((e,t)=>{const n=xe("DatePickerInput",pan,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:_,vars:E,defaultDate:w,valueFormatter:S,...x}=n,{resolvedClassNames:C,resolvedStyles:A}=Hm({classNames:c,styles:f,props:n}),{calendarProps:I,others:R}=can(x),{_value:O,setValue:D,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:z}=han({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),H=Array.isArray(O)?O[0]||w:O||w,P=tc();return b.jsx(B5,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:z,value:O,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:b.jsx(z5,{...I,size:p,variant:m,type:r,value:O,defaultDate:H||Ron({maxDate:_,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:_,date:M0("add",I.date,P.getTimezone()),__timezoneApplied:!0})})});pie.classes={...B5.classes,...z5.classes};pie.displayName="@mantine/dates/DatePickerInput";function man(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat().filter(r=>r!==-1);return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function gan({studyId:e,allParticipants:t}){const n=Wh(),[r,i]=Bf(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==-1))).filter(p=>Number.isFinite(p)),[o,a]=k.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=k.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>man(y.answers,o))]},[t,o]),d=k.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat().filter(y=>y!==-1))).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=k.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return b.jsx($c,{children:b.jsxs($b,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[b.jsxs(Rt,{align:"center",mb:"xs",justify:"space-between",children:[b.jsxs(Rt,{direction:"row",align:"center",children:[b.jsx(Ai,{order:5,children:e}),b.jsx(rOe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),b.jsxs(si,{children:[b.jsx(CZ,{allParticipants:t,studyId:e}),b.jsx(li,{label:"Analyze and manage study data",children:b.jsx(en,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Hu}analysis/stats/${e}`,children:b.jsx(nQe,{})})})]})]}),b.jsx(pie,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Ke,{mt:16,children:"Finished Participants"}),b.jsx(Tq,{spec:h,actions:!1})]}):b.jsx(me,{h:293.4,children:b.jsx(Ll,{style:{height:"100%"},children:b.jsx(Ke,{children:"Not enough participants for chart"})})})]})})}function yan({globalConfig:e}){const[t,n]=k.useState(!1),[r,i]=k.useState({}),[s,o]=k.useState({}),{storageEngine:a}=gs(),{user:u}=Qb();k.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await b4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof _c){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?b.jsx(qa.Col,{span:{md:12,xl:6},children:b.jsx(gan,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return b.jsxs(b.Fragment,{children:[b.jsx(WC,{studyIds:e.configsList}),b.jsx(mi.Main,{children:b.jsx($c,{fluid:!0,children:b.jsxs(me,{children:[b.jsx(Ai,{mb:20,order:4,children:"Your Studies:"}),b.jsxs(qa,{children:[l.length>0?l:b.jsx($c,{mt:100,children:b.jsx(Ke,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),b.jsx(Fl,{visible:t})]})]})})})]})}function van(){const{user:e,triggerAuth:t}=Qb(),{storageEngine:n}=gs(),[r,i]=k.useState(!1),[s,o]=k.useState([]),[a,u]=k.useState(!1),[l,c]=k.useState(!1),[f,d]=k.useState(!1),[h,p]=k.useState(!1),[m,g]=k.useState(!1),[y,v]=k.useState(""),[_,E]=k.useState(null),w=Cxe({initialValues:{email:""},validate:{email:rat("Invalid email")}});k.useEffect(()=>{(async()=>{if(u(!0),n instanceof _c){const D=await(n==null?void 0:n.getUserManagementData("authentication"));i(D==null?void 0:D.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const S=async()=>{if(u(!0),n instanceof _c){const O=await vje(n,u);O&&O.email?(E({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},x=async O=>{u(!0),n instanceof _c&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof _c){await n.addAdminUser({email:w.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}u(!1),c(!1),w.setValues({email:""})},A=O=>{d(!0),v(O)},I=async()=>{if(u(!0),n instanceof _c){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}d(!1),u(!1)},R=k.useMemo(()=>n instanceof _c,[n]);return b.jsxs(b.Fragment,{children:[b.jsx($c,{children:b.jsxs($b,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[b.jsx(Ai,{mb:20,order:3,children:"Authentication"}),r?b.jsx(Rt,{children:b.jsx(Ke,{children:"Authentication is enabled."})}):b.jsxs(Rt,{justify:"space-between",children:[b.jsx(me,{children:b.jsx(Ke,{children:"Authentication is currently disabled."})}),b.jsx(li,{label:"You can only enable auth when using Firebase",disabled:R,children:b.jsx(en,{onClick:O=>R?S():O.preventDefault(),color:"green","data-disabled":R?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?b.jsxs(Rt,{mt:40,direction:"column",children:[b.jsxs(Rt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[b.jsx(Ai,{order:6,children:"Enabled Users"}),b.jsx(_Y,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var D;return b.jsxs(Rt,{justify:"space-between",mb:10,children:[b.jsx(Ke,{children:O}),O===((D=e.user)==null?void 0:D.email)?b.jsx(Ke,{color:"blue",size:"xs",children:"You"}):b.jsx(Db,{variant:"subtle",onClick:()=>A(O),children:b.jsx(Ewe,{color:"red"})})]},O)}):null]}):null]})}),b.jsx($i,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:b.jsxs(me,{component:"form",onSubmit:w.onSubmit(()=>C()),children:[b.jsx(Wp,{leftSection:b.jsx(QXe,{}),placeholder:"User Gmail Account",...w.getInputProps("email")}),b.jsxs(Rt,{mt:30,justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),b.jsx(en,{type:"submit",children:"Save"})]})]})}),b.jsxs($i,{opened:f,size:"large",onClose:()=>d(!1),title:b.jsxs(Ke,{fw:700,children:["Remove",y,"?"]}),children:[b.jsxs(Ke,{mt:40,children:["Are you sure you want to remove",b.jsx("b",{children:y})," ","as an administrator?"]}),b.jsxs(Rt,{mt:40,justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),b.jsx(en,{onClick:()=>I(),children:"Yes, I'm sure."})]})]}),b.jsxs($i,{opened:h,size:"md",onClose:()=>p(!1),title:b.jsx(Ke,{fw:700,children:"Enable Authentication?"}),children:[b.jsxs(Ke,{mt:40,children:["User"," ",b.jsx("b",{children:_==null?void 0:_.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),b.jsxs(Rt,{mt:40,justify:"right",children:[b.jsx(en,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),b.jsx(en,{onClick:()=>x(_),children:"Yes, I'm sure."})]})]}),b.jsxs($i,{opened:m,size:"md",onClose:()=>g(!1),title:b.jsx(Ke,{fw:700,children:"An Error Occurred."}),children:[b.jsxs(Ke,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",b.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),b.jsx(Rt,{mt:40,justify:"right",children:b.jsx(en,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),b.jsx(Fl,{visible:a})]})}class ban extends tOe{constructor(){super("localStorage");mu(this,"studyDatabase");mu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await sw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await tM(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await tM(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await sw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=eM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=sw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=eM();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await sw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await sw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function _an(){let e,t=!1;{const n=new _c;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new ban;await n.connect(),e=n}return e}function W_({title:e}){const t=Dy();return k.useEffect(()=>{document.title=e},[t,e]),null}async function wan(){const t=await(await fetch(`${Hu}global.json`)).text();return oRt(t)}function Ean(){const[e,t]=k.useState(null),[n,r]=k.useState({});k.useEffect(()=>{async function a(){e&&r(await NRt(e))}a()},[e]),k.useEffect(()=>{e||wan().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=gs();k.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await _an();s(u)}a()},[s,i]);const o=async a=>i instanceof _c?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?b.jsx(BXe,{basename:Hu,children:b.jsx(R6t,{children:b.jsx(WXe,{children:b.jsx(mi,{padding:"md",header:{height:70},children:b.jsxs(MXe,{children:[b.jsx(Sp,{path:"/",element:b.jsxs(b.Fragment,{children:[b.jsx(W_,{title:"ReVISit | Home"}),b.jsx(WC,{studyIds:e.configsList}),b.jsx(lst,{globalConfig:e,studyConfigs:n})]})}),b.jsx(Sp,{path:"/:studyId/*",element:b.jsxs(b.Fragment,{children:[b.jsx(W_,{title:"ReVISit | Study"}),b.jsx(PRt,{globalConfig:e})]})}),b.jsx(Sp,{path:"/analysis/dashboard",element:b.jsxs(b.Fragment,{children:[b.jsx(W_,{title:"ReVISit | Analysis"}),b.jsx(yan,{globalConfig:e})]})}),b.jsx(Sp,{path:"/analysis",element:b.jsx(_V,{to:"/analysis/dashboard"})}),b.jsx(Sp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:b.jsxs(b.Fragment,{children:[b.jsx(W_,{title:"ReVISit | Analysis"}),b.jsx(Q0e,{paramToCheck:"studyId",paramCallback:o,children:b.jsx(yon,{globalConfig:e})})]})}),b.jsx(Sp,{path:"/analysis/stats/:studyId",element:b.jsx(_V,{to:"./table",replace:!0})}),b.jsx(Sp,{path:"/settings",element:b.jsxs(Q0e,{children:[b.jsx(W_,{title:"ReVISit | Settings"}),b.jsx(WC,{studyIds:e.configsList}),b.jsx(mi.Main,{children:b.jsx(van,{})})]})}),b.jsx(Sp,{path:"/login",element:b.jsxs(b.Fragment,{children:[b.jsx(W_,{title:"ReVISit | Login"}),b.jsx(WC,{studyIds:e.configsList}),b.jsx(mi.Main,{children:b.jsx(von,{})})]})})]})})})})}):null}UB.createRoot(document.getElementById("root")).render(b.jsx(wr.StrictMode,{children:b.jsx(WKe,{children:b.jsxs(Mve,{children:[b.jsx(Jm,{}),b.jsx(Ean,{})]})})}))});export default xan();
