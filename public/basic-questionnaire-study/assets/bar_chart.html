<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://d3js.org/d3.v7.js"></script>
</head>

<body>
    <svg>
    </svg>
</body>

<script>
    height = 500;
    width = 500;
    padding = 25;
    svg = d3.select("svg");
    svg.attr("width", width + 2 * padding)
        .attr("height", height + 2 * padding);

    let data = [0.32, 0.36, 1.2, 1.3, 0.82, 0.4, 0.3];
    let selected = ["hidden","hidden","hidden","visible","hidden","visible","hidden"];
    let spacing = height / data.length;

    let min = d3.min(data);
    let max = d3.max(data);

    let yScale = d3.scaleLinear()
    .domain([0, max])
    .range([height-padding, padding])
    .nice();

    let color = "white";

    svg.selectAll(".bar")
        .data(data)
        .join("rect")
            .classed("bar", true)
            .attr("transform", "translate(" + padding + "," + padding + ")")
            .attr("x", (d, i) => i * spacing + 5)
            .attr("y", d => yScale(d))
            .attr("width", 50)
            .attr("height", d => yScale(0)-yScale(d))
            .style("fill", 'white')
            .style("stroke", "black");

    svg.selectAll(".barlabel")
        .data(selected)
        .join("circle")
        .classed("barlabel", true)
        .attr("transform", "translate(" + padding + "," + padding + ")")
        .attr("cx", (d, i) => (i * spacing + 5)+25)
        .attr("cy", 400)
        .attr("r", 10)
        .attr("visibility",d => d)
        .attr("stroke", "white")
        .attr("fill", "black");


    svg.append("g")
        .attr("transform", "translate(" + padding + "," + (height + padding) + ")")
        //.call(xAxis);

    svg.append("line")
        .attr("x1",padding)
        .attr("x2",width)
        .attr("y1",height)
        .attr("y2",height)
        .attr("stroke","black");
</script>
</html>