<div>
</div>

<script>
    const OVERRIDETASKNUM = 3;
  (async function () {
    experimentr.hideNext();


    onTrials = false;

    d3.selectAll('.trialSection').remove();


      // //check if  was already on that page
      if (mode =='survey') {
        d3.select('.modalStartStudy').classed('is-active', true);
      }
      else {
        startStudy();// updateStudyProvenance('started study')
      }


    //d3.select('#startSurvey').on('click', startStudy)

    async function startStudy() {

      setCookie('onPage', 'hit');

      d3.select('.modalStartStudy').classed('is-active', false);

      await loadTasks(vis, mode,OVERRIDETASKNUM);

      //set up  user on firestore to track answers and usage;
      //only do this on user's first visit to the
      if (track) {
        if (Number(getCookie('onTask'))==0) {
          trackResults('results');
        }
      }

      d3.select('.hit').style('display', 'inline');

      if (taskMenu) {
        d3.select('.taskMenu').style('display', 'block');
      }
      if (vis === 'nodeLink') {
        loadVis("vis");
      } else {
        // included script already auto loads the vis.
      }


      resetPanel();
    }
      await startStudy();


  })()
</script>
